# 目录操作

以下列出了一些操作目录的标准函数：

```
opendir DIRHANDLE, EXPR  # 打开目录
readdir DIRHANDLE        # 读取目录
rewinddir DIRHANDLE      # 定位指针到开头
telldir DIRHANDLE        # 返回目录的当前位置
seekdir DIRHANDLE, POS   # 定位指定到目录的 POS 位置
closedir DIRHANDLE       # 关闭目录
```

------

## 显示所有的文件

显示目录下的所有文件，以下实例使用了 glob 操作符，演示如下：

## 实例

\#!/usr/bin/perl  # 显示 /tmp 目录下的所有文件 $dir = "/tmp/*"; my @files = glob( $dir );  foreach (@files ){   print $_ . "\n"; }  # 显示 /tmp 目录下所有以 .c 结尾的文件 $dir = "/tmp/*.c"; @files = glob( $dir );  foreach (@files ){   print $_ . "\n"; }  # 显示所有隐藏文件 $dir = "/tmp/.*"; @files = glob( $dir ); foreach (@files ){   print $_ . "\n"; }  # 显示 /tmp 和 /home 目录下的所有文件 $dir = "/tmp/* /home/*"; @files = glob( $dir );  foreach (@files ){   print $_ . "\n"; }

以下实例可以列出当前目录下的所有文件：

## 实例

\#!/usr/bin/perl  opendir (DIR, '.') or die "无法打开目录, $!"; while ($file = readdir DIR) {  print "$file\n"; } closedir DIR;

如果你要显示 /tmp 目录下所有以 .c 结尾的文件，可以使用以下代码：

## 实例

\#!/usr/bin/perl  opendir(DIR, '.') or die "无法打开目录, $!"; foreach (sort grep(/^.*\.c$/,readdir(DIR))){   print "$_\n"; } closedir DIR;

------

## 创建一个新目录

我们可以使用 **mkdir** 函数来创建一个新目录，执行前你需要有足够的权限来创建目录：

## 实例

\#!/usr/bin/perl  $dir = "/tmp/perl";  # 在 /tmp 目录下创建 perl 目录 mkdir( $dir ) or die "无法创建 $dir 目录, $!"; print "目录创建成功\n";

------

## 删除目录

我们可以使用 **rmdir** 函数来删除目录，执行该操作需要有足够权限。另外要删除的目录必须的空目录：

## 实例

\#!/usr/bin/perl  $dir = "/tmp/perl";  # 删除 /tmp 目录下的 perl 目录 rmdir( $dir ) or die "无法删除 $dir 目录, $!"; print "目录删除成功\n";

------

## 切换目录

我们可以使用**chdir** 函数来切换当期目录，执行该操作需要有足够权限。实例如下：

## 实例

\#!/usr/bin/perl  $dir = "/home";  # 将当期目录移动到 /home 目录下 chdir( $dir ) or die "无法切换目录到 $dir , $!"; print "你现在所在的目录为 $dir\n";

执行以上程序，输出结果为：

```
你现在所在的目录为 /home
```

 [Perl 文件操作](https://www.runoob.com/perl/perl-files.html) 

[Perl 错误处理](https://www.runoob.com/perl/perl-error-handling.html) 

<iframe id="aswift_2" name="aswift_2" style="left: 0px; top: 0px; border: 0px; width: 847px; height: 0px; min-height: auto; max-height: none; min-width: auto; max-width: none;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="847" height="0" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-5751451760833794&amp;output=html&amp;h=280&amp;slotname=1691338467&amp;adk=2377280972&amp;adf=342612028&amp;pi=t.ma~as.1691338467&amp;w=847&amp;abgtt=6&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1753770305&amp;rafmt=1&amp;format=847x280&amp;url=https%3A%2F%2Fwww.runoob.com%2Fperl%2Fperl-directories.html&amp;fwr=0&amp;fwrattr=true&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;dt=1753770305607&amp;bpp=2&amp;bdt=523&amp;idt=287&amp;shv=r20250724&amp;mjsv=m202507220101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D3aa81bb6bde61f08%3AT%3D1752463956%3ART%3D1753770103%3AS%3DALNI_MZvE77nlQaP0TQJGMUXXc7r1coxNQ&amp;gpic=UID%3D0000116049a303d5%3AT%3D1752463956%3ART%3D1753770103%3AS%3DALNI_MblZa2LgM8NtZx64UEoV9WWJCa-vg&amp;eo_id_str=ID%3D744f0a35a6bbe975%3AT%3D1752463956%3ART%3D1753770103%3AS%3DAA-AfjbZI2kdxrLKEhZ78-5aruWN&amp;prev_fmts=0x0%2C728x90&amp;nras=1&amp;correlator=7527418367612&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=16&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1032&amp;u_aw=1920&amp;u_cd=24&amp;u_sd=1&amp;adx=549&amp;ady=2689&amp;biw=1920&amp;bih=947&amp;scr_x=0&amp;scr_y=0&amp;eid=31093580%2C31093672%2C95331832%2C95362656%2C95366913%2C95366847%2C95359265%2C95367168&amp;oid=2&amp;pvsid=652416671801998&amp;tmod=475486581&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fwww.runoob.com%2Fperl%2Fperl-files.html&amp;fc=1920&amp;brdim=-1928%2C-8%2C-1928%2C-8%2C1920%2C0%2C1936%2C1048%2C1920%2C947&amp;vis=1&amp;rsz=%7C%7CoEebr%7C&amp;abl=CS&amp;pfx=0&amp;fu=128&amp;bc=31&amp;bz=1.01&amp;ifi=3&amp;uci=a!3&amp;btvi=1&amp;fsb=1&amp;dtd=297" data-google-container-id="a!3" tabindex="0" title="Advertisement" aria-label="Advertisement" data-google-query-id="CIK6hMG34Y4DFZvJFgUdniUEyw" data-load-complete="true"></iframe>

##      	    	    	        1  篇笔记   写笔记    

1. 

     pan93412

    pan***12@gmail.com

    [ 参考地址](https://metacpan.org/pod/File::Find)

    13

   Perl 递归目录其实可以用更简单的 File::Find 函式达成。

   **I. 實例**

   ```
   use warnings;
   use utf8;
   
   require File::Find;
   
   # 宣告 STDOUT, STDIN, STDERR 都使用
   
   # UTF-8 編碼方式。
   
   binmode(STDOUT, ":encoding(utf8)");
   binmode(STDIN, ":encoding(utf8)");
   binmode(STDERR, ":encoding(utf8)");
   
   # 用來顯示資料夾資訊的回呼函式。
   sub callback {
     # Perl 假定 $_ 為預設的字串，所以 unless (-d) 等價於 unless (-d $_)
     # 參閱：http://www.runoob.com/perl/perl-special-variables.html (中文)
     #  或：https://perldoc.perl.org/perlvar.html (英文，`General Variables' 部份)
     #
     # -d 代表 directory 目錄，而 unless 代表「與條件相反才執行」。
     unless (-d) {
       print "檔案所在目錄的絕對路徑：$File::Find::dir\n";
       print "檔案所在位置的絕對路徑：$File::Find::name\n";
       print "檔案名稱：$_\n";
     };
   };
   # 這是要遞迴目錄的陣列。
   # 此處假設要遞迴 /usr 和 ~/ (家目錄) 資料夾。
   my @recursiveFolder = qw(/usr ~/);
   # Let's recursive it!
   # 要注意傳入的 sub 子程序必須要是個參照 (reference)
   # 而非只是個普通的 sub 子程序。
   File::Find::find(\&callback, @recursiveFolder);
   ```

   **II. 說明**

   **File::Find** 是一個應該能相容最近 Perl 版本的函式（我自己並沒找到 File::Find 最早於哪版引進，如果資料有誤也請幫忙修正 orz）。這個函式功能十分專一，也就只有遞迴功能。

   以上的範例肯定看不出些什麼有用之處，但假如我們改一下例子 -- 只遞迴 MO 檔（一種已編譯翻譯檔的格式，先別在意）：

   ```
   sub callback {
     unless (-d || $_ !~ /.mo$/) {
       print "檔案所在目錄的絕對路徑：$File::Find::dir\n";
       print "檔案所在位置的絕對路徑：$File::Find::name\n";
       print "檔案名稱：$_\n";
     };
   };
   ```

   這麼寫就代表著「除了目錄和不以 .mo 作為結尾的檔案」。

   **III. 結尾**

   使用 File::Find 能讓遞迴檔案和資料夾的方式更加簡單。若你的 Perl 有遞迴需求，建議不要自己花時間重造輪子，直接用這個函式能事半功倍。