# 根据扩展名切分文件名

有一些脚本是依据文件名进行各种处理的。我们可能会需要在保留扩展名的同时修改文件名、转换文件格式（保留文件名的同时修改扩展名）或提取部分文件名。shell具有的内建功能可以依据不同的情况来切分文件名。
2.11.1 实战演练
借助%操作符可以轻松将名称部分从“名称.扩展名”这种格式的文件名中提取出来。你可以按照下面的方法从sample.jpg中提取名称。

```bash
file_jpg="sample.jpg"
name=${file_jpg%.*}
echo File name is:$name
```

输出结果：File name is: sample
下一个任务是将文件名的扩展名部分提取出来，这可以借助#操作符实现。
提取文件名中的 .jpg并存储到变量file_jpg中：

```bash
extension=${file_jpg#*.}
```

echo Extension is: jpg
输出结果：Extension is: jpg
2.11.2 工作原理
在第一个任务中，为了从“名称.扩展名”这种格式的文件名中提取名称，我们使用了%操作符。 ${VAR%.*} 的含义是：
□ 从  $VARIABLE中删除位于%右侧的通配符（在前例中是.*）所匹配的字符串。通配符从右向左进行匹配。
□ 给VAR赋值，VAR=sample.jpg。那么，通配符从右向左就会匹配到.jpg，因此，从  $VAR中删除匹配结果，就会得到输出“sample”。
%属于非贪婪（non-greedy）操作。它从右到左找出匹配通配符的最短结果。还有另一个操作符%%，这个操作符与%相似，但行为模式却是贪婪的（greedy)，这意味着它会匹配符合条件的最长的字符串。
例如，我们现在有这样一个文件：VAR=hack.fun.book.txt

使用%操作符： echo $ {VAR%.*}
得到输出：hack.fun.book
操作符%使用.*从右向左执行非贪婪匹配（.txt）。
使用%%操作符： echo  ${VAR%%.*}
得到输出：hack
操作符%%则用.*从右向左执行贪婪匹配（.fun.book.txt）。
在第二个任务中，我们用#操作符从文件名中提取扩展名。这个操作符与%类似，不过求值方向是从左向右。 ${VAR#*.}的含义是：从  $VARIABLE中删除位于#右侧的通配符（即在前例中使用的*.）所匹配的字符串。通配符从左向右进行匹配。
和%%类似，#也有一个相对应的贪婪操作符##。
##从左向右进行贪婪匹配，并从指定变量中删除匹配结果。
来看一个例子：VAR=hack.fun.book.txt

使用#操作符： echo  ${VAR#*.}
得到输出：fun.book.txt
操作符#用*.从左向右执行非贪婪匹配（hack.）。
使用##操作符： echo  ${VAR##*.}
得到输出：txt
操作符##则用*.从左向右执行贪婪匹配（hack.fun.book）。因为文件名中可能包含多个'.'字符，所以相较于#，##更适合于从文件名中提取扩展名。##执行的是贪婪匹配，因而总是能够准确地提取出扩展名。
这里有个能够提取域名不同部分的实用案例。假定URL="www.googl.com"： echo  ${URL%.*} # 移除.*所匹配的最右边的內容www.google echo  ${URL%%.*} # 将从右边开始一直匹配到最左边的*.移除（贪婪操作符）www echo  ${URL#*.} #移除*.所匹配的最左边的內容

google.com echo  ${URL##*.} #将从左边开始一直匹配到最右边的*.移除（贪婪操作符）com