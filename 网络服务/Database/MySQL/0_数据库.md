# 操作数据库

## 创建数据库

```mysql
CREATE DATABASE 数据库名;

mysqladmin -u root -p create 数据库名
```

**使用 PHP 脚本**

 PHP 使用 mysqli_query 函数来创建或者删除 MySQL 数据库。该函数有两个参数，在执行成功时返回 TRUE，否则返回 FALSE。

```
mysqli_query(connection,query,resultmode);
```

| 参数         | 描述                                                         |
| ------------ | ------------------------------------------------------------ |
| *connection* | 必需。规定要使用的 MySQL 连接。                              |
| *query*      | 必需，规定查询字符串。                                       |
| *resultmode* | 可选。一个常量。可以是下列值中的任意一个：  MYSQLI_USE_RESULT（如果需要检索大量数据，请使用这个） 	MYSQLI_STORE_RESULT（默认） |

**实例**

```php
<?php
  $dbhost = 'localhost:3306';  // mysql服务器主机地址
  $dbuser = 'root';            // mysql用户名
  $dbpass = '123456';          // mysql用户名密码
  $conn = mysqli_connect($dbhost, $dbuser, $dbpass);
  if(! $conn )
  {
     die('连接错误: ' . mysqli_error($conn));
  }
  echo '连接成功<br />';
  $sql = 'CREATE DATABASE RUNOOB';
  $retval = mysqli_query($conn,$sql );
  if(! $retval )
  {
     die('创建数据库失败: ' . mysqli_error($conn));
  }
  echo "数据库 RUNOOB 创建成功\n";
  mysqli_close($conn); 
?>
```

## 查看已存在的数据库

```mysql
SHOW DATABASES;
```

## 使用数据库

```mysql
USE 数据库名;
```

**使用PHP脚本**

PHP 提供了函数 mysqli_select_db  来选取一个数据库。函数在执行成功后返回 TRUE ，否则返回 FALSE 。 

```
mysqli_select_db(connection,dbname);
```

| 参数         | 描述                            |
| ------------ | ------------------------------- |
| *connection* | 必需。规定要使用的 MySQL 连接。 |
| *dbname*     | 必需，规定要使用的默认数据库。  |

**实例**

```php
<?php
  $dbhost = 'localhost:3306';  // mysql服务器主机地址
  $dbuser = 'root';            // mysql用户名
  $dbpass = '123456';          // mysql用户名密码
  $conn = mysqli_connect($dbhost, $dbuser, $dbpass);
  if(! $conn ) 
  {  
    die('连接失败: ' . mysqli_error($conn)); 
  } 
  echo '连接成功';
  mysqli_select_db($conn, 'RUNOOB' ); 
  mysqli_close($conn);
?>
```

## 删除数据库

```mysql
DROP DATABASE 数据库名;

mysqladmin -u root -p drop 数据库名
```

**使用PHP脚本**

PHP使用 mysqli_query 函数来创建或者删除 MySQL 数据库。该函数有两个参数，在执行成功时返回 TRUE，否则返回 FALSE。 

```
mysqli_query(connection,query,resultmode);
```

| 参数         | 描述                                                         |
| ------------ | ------------------------------------------------------------ |
| *connection* | 必需。规定要使用的 MySQL 连接。                              |
| *query*      | 必需，规定查询字符串。                                       |
| *resultmode* | 可选。一个常量。可以是下列值中的任意一个：  MYSQLI_USE_RESULT（如果需要检索大量数据，请使用这个） 	MYSQLI_STORE_RESULT（默认） |

**实例**

```php
<?php
  $dbhost = 'localhost:3306';  // mysql服务器主机地址
  $dbuser = 'root';            // mysql用户名 
  $dbpass = '123456';          // mysql用户名密码
  $conn = mysqli_connect($dbhost, $dbuser, $dbpass);
  if(! $conn )
  {  
    die('连接失败: ' . mysqli_error($conn));
  } 
  echo '连接成功<br />'; 
  $sql = 'DROP DATABASE RUNOOB';
  $retval = mysqli_query( $conn, $sql );
  if(! $retval ) 
  {   
    die('删除数据库失败: ' . mysqli_error($conn));
  } 
  echo "数据库 RUNOOB 删除成功\n"; 
  mysqli_close($conn); 
?>
```

## 查看数据库引擎

```mysql
SHOW ENGINES;
```

## 查看数据库默认引擎

```mysql
SHOW VARIABLES LIKE 'storage_engine';
```

## 数据库引擎

```mysql
Falcon,BLACKHOLE,MRG_MYISAM,MARIA,CSV,FEDERATED,ARCHIVE,InnoDB,MyISAM,MEMORY
```

| 特性           | InnoDB | MyISAM | MEMORY |
|----------------|--------|--------|--------|
| 事务安全       | 支持   | 无     | 无     |
| 存储限制       | 64TB   | 有     | 有     |
| 空间使用       | 高     | 低     | 低     |
| 内存使用       | 高     | 低     | 高     |
| 插入数据的速度 | 低     | 高     | 高     |
| 对外键的支持   | 支持   | 无     | 无     |

