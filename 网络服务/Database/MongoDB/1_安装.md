## 安装

### 依赖包

**Red Hat/CentOS：**

```bash
yum install libcurl openssl
```

**Ubuntu 18.04 LTS ("Bionic")/Debian 10 "Buster"：**

```bash
sudo apt-get install libcurl4 openssl
```

**Ubuntu 16.04 LTS ("Xenial")/Debian 9 "Stretch"：**

```bash
sudo apt-get install libcurl3 openssl
```

### 源码

MongoDB 源码下载地址：https://www.mongodb.com/download-center#community

下载完安装包，并解压。

```bash
wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu1604-4.2.8.tgz    # 下载
tar -zxvf mongodb-linux-x86_64-ubuntu1604-4.2.8.tgz                                # 解压
mv mongodb-src-r4.2.8  /usr/local/mongodb4                                         # 将解压包拷贝到指定目录
```

MongoDB 的可执行文件位于 bin 目录下，所以可以将其添加到 **PATH** 路径中：

```bash
export PATH=<mongodb-install-directory>/bin:$PATH

export PATH=/usr/local/mongodb4/bin:$PATH
```

### CentOS 8

1. 创建源配置文件

   ```bash
   vim /etc/yum.repos.d/mongodb-org-4.4.repo
   
   [mongodb-org-4.4]
   name=MongoDB Repository
   baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.4/x86_64/
   gpgcheck=1
   enabled=1
   gpgkey=https://www.mongodb.org/static/pgp/server-4.4.asc
   ```

2. 安装MongoDB

   ```bash
   yum makecache
   yum install -y mongodb-org
   ```

## 创建数据库目录

默认情况下 MongoDB 启动后会初始化以下两个目录：

- 数据存储目录：/var/lib/mongodb
- 日志文件目录：/var/log/mongodb

在启动前可以先创建这两个目录并设置当前用户有读写权限：

```bash
mkdir -p /var/lib/mongo
mkdir -p /var/log/mongodb
chown `whoami` /var/lib/mongo     # 设置权限
chown `whoami` /var/log/mongodb   # 设置权限
```

## 启动 Mongodb 服务

```bash
mongod --dbpath /var/lib/mongo --logpath /var/log/mongodb/mongod.log --fork
```

打开 `/var/log/mongodb/mongod.log` 文件看到以下信息，说明启动成功。

```
tail -10f /var/log/mongodb/mongod.log

2020-07-09T12:20:17.391+0800 I  NETWORK  [listener] Listening on /tmp/mongodb-27017.sock
2020-07-09T12:20:17.392+0800 I  NETWORK  [listener] Listening on 127.0.0.1
2020-07-09T12:20:17.392+0800 I  NETWORK  [listener] waiting for connections on port 27017
```

## 