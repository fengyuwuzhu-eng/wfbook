# 软件管理

[TOC]

## 概论

RPM（红帽软件包管理器）公布之前，要想在Linux系统中安装软件，只能采取编译源码包的方式。所以，早期安装软件是一件非常困难、耗费耐心的事情，而且大多数的服务程序仅仅提供自身的源代码，还需要运维人员编译代码后自行解决软件之间的依赖关系。

早期的 Linux 系统在安装、升级、卸载服务程序时还要考虑到其他程序、库的依赖关系，所以在进行校验、安装、卸载、查询、升级等软件操作时难度都非常大。RPM机制则正是为了解决这些问题而设计的。

## 软件包管理器

### dpkg

Debian 包管理器。
1) dpkg 常见命令的语法及 dpkg 文件位置

下面是 dpkg 常见命令的语法及 dpkg 相关文件的位置，如果想深入了解，这些对你肯定大有益处。

```bash
### dpkg 命令的语法
$ dpkg -[command] [.deb package name]
$ dpkg -[command] [package name]
### dpkg 相关文件的位置
$ /var/lib/dpkg
### 这个文件包含了被 dpkg 命令（install、remove 等）所修改的包的信息
$ /var/lib/dpkg/status
### 这个文件包含了可用包的列表
$ /var/lib/dpkg/status
```

2) 安装/升级软件

在基于 Debian 的系统里，比如 Debian、Mint、Ubuntu 和 elementryOS，用以下命令来安装/升级 .deb 软件包。这里我要用 atom-amd64.deb 文件安装 Atom。要是已经安装了 Atom，就会升级它。要么就会安装一个新的 Atom。

```bash
### 安装或升级 dpkg 软件包
$ sudo dpkg -i atom-amd64.deb
Selecting previously unselected package atom.
(Reading database ... 426102 files and directories currently installed.)
Preparing to unpack atom-amd64.deb ...
Unpacking atom (1.5.3) over (1.5.3) ...
Setting up atom (1.5.3) ...
Processing triggers for gnome-menus (3.13.3-6ubuntu1) ...
Processing triggers for bamfdaemon (0.5.2~bzr0+15.10.20150627.1-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.22-1ubuntu3) ...
Processing triggers for mime-support (3.58ubuntu1) ...
```

3) 从文件夹里安装软件

在基于 Debian 的系统里，用下列命令从目录中逐个安装软件。这会安装 /opt/software 目录下的所有以 .deb 为后缀的软件。

```bash
$ sudo dpkg -iR /opt/software
Selecting previously unselected package atom.
(Reading database ... 423303 files and directories currently installed.)
Preparing to unpack /opt/software/atom-amd64.deb ...
Unpacking atom (1.5.3) ...
Setting up atom (1.5.3) ...
Processing triggers for gnome-menus (3.13.3-6ubuntu1) ...
Processing triggers for bamfdaemon (0.5.2~bzr0+15.10.20150627.1-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.22-1ubuntu3) ...
Processing triggers for mime-support (3.58ubuntu1) ...
```

4) 显示已安装软件列表

以下命令可以列出 Debian 系的系统中所有已安装的软件，同时会显示软件版本和描述信息。

```bash
$ dpkg -l
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name                        Version                            Architecture Description
+++-===========================-==================================-============-================================================================
ii  account-plugin-aim          3.12.10-0ubuntu2                   amd64        Messaging account plugin for AIM
ii  account-plugin-facebook     0.12+15.10.20150723-0ubuntu1       all          GNOME Control Center account plugin for single signon - facebook
ii  account-plugin-flickr       0.12+15.10.20150723-0ubuntu1       all          GNOME Control Center account plugin for single signon - flickr
ii  account-plugin-google       0.12+15.10.20150723-0ubuntu1       all          GNOME Control Center account plugin for single signon
ii  account-plugin-jabber       3.12.10-0ubuntu2                   amd64        Messaging account plugin for Jabber/XMPP
ii  account-plugin-salut        3.12.10-0ubuntu2                   amd64        Messaging account plugin for Local XMPP (Salut)
.
.
```

5) 查看指定的已安装软件b

用以下命令列出指定的一个已安装软件，同时会显示软件版本和描述信息。

```bash
$ dpkg -l atom
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name       Version   Architecture        Description
+++-==========-=========-===================-============================================
ii  atom       1.5.3     amd64               A hackable text editor for the 21st Century.
```

6) 查看软件安装目录

以下命令可以在基于 Debian 的系统上查看软件的安装路径。

```bash
$ dpkg -L atom
/.
/usr
/usr/bin
/usr/bin/atom
/usr/share
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/atom
/usr/share/pixmaps
/usr/share/pixmaps/atom.png
/usr/share/doc
```

7) 查看 deb 包内容

下列命令可以查看 deb 包内容。它会显示 .deb 包中的一系列文件。

```bash
$ dpkg -c atom-amd64.deb
drwxr-xr-x root/root         0 2016-02-13 02:13 ./
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/lintian/
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/lintian/overrides/
-rw-r--r-- root/root       299 2016-02-13 02:13 ./usr/share/lintian/overrides/atom
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/pixmaps/
-rw-r--r-- root/root    643183 2016-02-13 02:13 ./usr/share/pixmaps/atom.png
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/doc/
.
.
```

8) 显示软件的详细信息

以下命令可以显示软件的详细信息，如软件名、软件类别、版本、维护者、软件架构、依赖的软件、软件描述等等。

```bash
$ dpkg -s atom
Package: atom
Status: install ok installed
Priority: optional
Section: devel
Installed-Size: 213496
Maintainer: GitHub <atom@github.com>Architecture: amd64
Version: 1.5.3
Depends: git, gconf2, gconf-service, libgtk2.0-0, libudev0 | libudev1, libgcrypt11 | libgcrypt20, libnotify4, libxtst6, libnss3, python, gvfs-bin, xdg-utils, libcap2
Recommends: lsb-release
Suggests: libgnome-keyring0, gir1.2-gnomekeyring-1.0
Description: A hackable text editor for the 21st Century.
 Atom is a free and open source text editor that is modern, approachable, and hackable to the core.</atom@github.com>
```

9) 查看文件属于哪个软件

用以下命令来查看文件属于哪个软件。

```bash
$ dpkg -S /usr/bin/atom
atom: /usr/bin/atom
```

10) 移除/删除软件

以下命令可以用来移除/删除一个已经安装的软件，但不删除配置文件。

```bash
$ sudo dpkg -r atom
(Reading database ... 426404 files and directories currently installed.)
Removing atom (1.5.3) ...
Processing triggers for gnome-menus (3.13.3-6ubuntu1) ...
Processing triggers for bamfdaemon (0.5.2~bzr0+15.10.20150627.1-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.22-1ubuntu3) ...
Processing triggers for mime-support (3.58ubuntu1) ...
```

11) 清除软件

以下命令可以用来移除/删除包括配置文件在内的所有文件。

```bash
$ sudo dpkg -P atom
(Reading database ... 426404 files and directories currently installed.)
Removing atom (1.5.3) ...
Processing triggers for gnome-menus (3.13.3-6ubuntu1) ...
Processing triggers for bamfdaemon (0.5.2~bzr0+15.10.20150627.1-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.22-1ubuntu3) ...
Processing triggers for mime-support (3.58ubuntu1) ...
```

12) 了解更多

用以下命令来查看更多关于 dpkg 的信息。

```bash
$ dpkg -help
或
$ man dpkg
```

### dnf

### apt-get

大多数使用基于 Debian 的系统的人通常会使用 apt-get 来安装软件包和升级，但是我们多久才清理一次？让我们看下该工具本身的一些清理选项。

在基于 Debian 的系统上运行 `apt-get` 命令是很常规的。软件包的更新相当频繁，诸如 `apt-get update` 和 `apt-get upgrade` 之类的命令使此过程非常容易。另一方面，你多久使用一次 `apt-get clean`、`apt-get autoclean` 或 `apt-get autoremove`？

这些命令会在 `apt-get` 的安装操作后清理并删除仍在系统上但不再需要的文件，这通常是因为需要它们的程序已经卸载。

#### apt-get clean

`apt-get clean` 命令清除遗留在 `/var/cache` 中的已取回的包文件的本地仓库。它清除的目录是 `/var/cache/apt/archives/` 和 `/var/cache/apt/archives/partial/`。它留在 `/var/cache/apt/archives` 中的唯一文件是 `lock` 文件和 `partial` 子目录。

在运行清理操作之前，目录中可能包含许多文件：

```
/var/cache/apt/archives/db5.3-util_5.3.28+dfsg1-0.6ubuntu1_amd64.deb/var/cache/apt/archives/db-util_1%3a5.3.21~exp1ubuntu2_all.deb/var/cache/apt/archives/lock/var/cache/apt/archives/postfix_3.4.5-1ubuntu1_amd64.deb/var/cache/apt/archives/sasl2-bin_2.1.27+dfsg-1build3_amd64.deb
```

之后，只会存在这些：

```
$ sudo ls -lR /var/cache/apt/archives/var/cache/apt/archives:total 4-rw-r----- 1 root root    0 Jan  5  2018 lockdrwx------ 2 _apt root 4096 Nov 12 07:24 partial/var/cache/apt/archives/partial:total 0                 <== 空
```

`apt-get clean` 命令通常用于根据需要清除磁盘空间，一般作为定期计划维护的一部分。

#### apt-get autoclean

`apt-get autoclean` 类似于 `apt-get clean`，它会清除已检索包文件的本地仓库，但它只会删除不会再下载且几乎无用的文件。它有助于防止缓存过大。

#### apt-get autoremove

`apt-get autoremove` 将删除自动安装的软件包，因为某些其他软件包需要它们，但是在删除了其他软件包之后，而不再需要它们。有时会在升级时建议运行此命令。

```
The following packages were automatically installed and are no longer required:  g++-8 gir1.2-mutter-4 libapache2-mod-php7.2 libcrystalhd3  libdouble-conversion1 libgnome-desktop-3-17 libigdgmm5 libisl19 libllvm8  liblouisutdml8 libmutter-4-0 libmysqlclient20 libpoppler85 libstdc++-8-dev  libtagc0 libvpx5 libx265-165 php7.2 php7.2-cli php7.2-common php7.2-json  php7.2-opcache php7.2-readlineUse 'sudo apt autoremove' to remove them.                       <==
```

要删除的软件包通常称为“未使用的依赖项”。实际上，一个好的做法是在卸载软件包后使用 `autoremove`，以确保不会留下不需要的文件。

### rpm

| 备注                  | 命令                          |
| --------------------- | ----------------------------- |
| rpm -ivh filename.rpm | 安装软件的命令格式            |
| rpm -Uvh filename.rpm | 升级软件的命令格式            |
| rpm -e filename.rpm   | 卸载软件的命令格式            |
| rpm -qpi filename.rpm | 查询软件描述信息的命令格式    |
| rpm -qpl filename.rpm | 列出软件文件信息的命令格式    |
| rpm -qf filename      | 查询文件属于哪个RPM的命令格式 |

### yum

deltarpm 

增量 RPM 包包含旧版本和新版本的 RPM 包之间的差别。在旧 RPM 上应用增量 RPM 将得到全新的 RPM。不需要旧 RPM 的副本，因为增量 RPM 可以与已安装的 RPM 一起工作。增量 RPM 包的大小甚至比增补程序 RPM 小，这有利于通过因特网传送更新包。缺点是，涉及增量 RPM 的更新操作与使用纯粹 RPM 或增补程序 RPM 进行更新的情况相比，占用的 CPU 周期要长得多。

| 命令                            | 说明                                               |
| ------------------------------- | -------------------------------------------------- |
| yum repolist all                | 列出所有仓库                                       |
| yum list all                    | 列出仓库中所有软件包                               |
| yum list extras                 | 列出所有已安装但不在 Yum Repository 內的软件包     |
| yum list installed              | 列出所有已安装的软件包                             |
| yum list updates                | 列出所有可更新的软件包                             |
| yum list <package_name>         | 列出所指定的软件包                                 |
| yum info                        | 列出所有软件包的信息                               |
| yum info extras                 | 列出所有已安装但不在 Yum Repository 內的软件包信息 |
| yum info updates                | 列出所有可更新的软件包信息                         |
| yum info installed              | 列出所有已安裝的软件包信息                         |
| yum info <package_name>         | 查看软件包信息                                     |
| yum install <package_name>      | 安装软件包                                         |
| yum provides <package_name>     | 列出软件包提供哪些文件                             |
| yum reinstall <package_name>    | 重新安装软件包                                     |
| yum update <package_name>       | 升级指定软件包                                     |
| yum update                      | 升级所有软件包                                     |
| yum remove <package_name>       | 移除软件包                                         |
| yum clean all                   | 清除所有仓库缓存                                   |
| yum check-update                | 检查可更新的软件包                                 |
| yum grouplist                   | 查看系统中已经安装的软件包组                       |
| yum groupinstall <package_name> | 安装指定的软件包组                                 |
| yum groupremove <package_name>  | 移除指定的软件包组                                 |
| yum groupinfo <package_name>    | 查询指定的软件包组信息                             |

**清除YUM缓存**

yum 会把下载的软件包和header存储在cache中，而不会自动删除。

```bash
#清除缓存目录(/var/cache/yum)下的软件包
yum clean packages

#清除缓存目录(/var/cache/yum)下的 headers
yum clean headers

#清除所有
yum clean all

#清除缓存目录(/var/cache/yum)下旧的 headers
yum clean oldheaders

#清除缓存目录(/var/cache/yum)下的软件包及旧的headers
yum clean, yum clean all (= yum clean packages; yum clean oldheaders) 
```

### Zypper

### pacman

### urpmi

RPM有点像Windows系统中的控制面板，会建立统一的数据库，详细记录软件信息并能够自动分析依赖关系。表1-1所示为一些常用的RPM软件包命令，此时还不需要记住它们，大致混个“脸熟”就足够了。

表1-1                         常用的RPM软件包命令

| 命令                  | 作用                |
| --------------------- | ------------------- |
| rpm -ivh filename.rpm | 安装软件            |
| rpm -Uvh filename.rpm | 升级软件            |
| rpm -e filename.rpm   | 卸载软件            |
| rpm -qpi filename.rpm | 查询软件描述信息    |
| rpm -qpl filename.rpm | 列出软件文件信息    |
| rpm -qf filename      | 查询文件属于哪个RPM |



但是，尽管RPM能够帮助用户查询软件之间的依赖关系，但问题还是要运维人员自己来解决，而有些大型软件可能与数十个程序都有依赖关系，在这种情况下安装软件依然很繁琐。Yum软件仓库便是为了进一步降低软件安装难度和复杂度而设计的技术。Yum软件仓库可以根据用户的要求分析出所需软件包及其相关的依赖关系，然后自动从服务器下载软件包并安装到系统。Yum软件仓库的技术拓扑图如图1-49所示。

![第1章 动手部署一台Linux操作系统第1章 动手部署一台Linux操作系统](https://www.linuxprobe.com/wp-content/uploads/2015/01/yum.png)

图1-49 Yum软件仓库的技术拓扑图

Yum软件仓库中的RPM软件包可以是由红帽官方发布的，也可以是由第三方发布的，当然也可以是自己编写的。本书随书提供的系统镜像（需在本书配套站点中下载）内已经包含了大量可用的RPM红帽软件包，既用于安装系统，也用于配置软件仓库，后面会详细说明。表1-2所示为一些常见的Yum命令，当前只需对它们有一个简单印象即可。

表1-2                           常见的Yum命令



| 命令                      | 作用                         |
| ------------------------- | ---------------------------- |
| yum repolist all          | 列出所有仓库                 |
| yum list all              | 列出仓库中所有软件包         |
| yum info 软件包名称       | 查看软件包信息               |
| yum install 软件包名称    | 安装软件包                   |
| yum reinstall 软件包名称  | 重新安装软件包               |
| yum update 软件包名称     | 升级软件包                   |
| yum remove 软件包名称     | 移除软件包                   |
| yum clean all             | 清除所有仓库缓存             |
| yum check-update          | 检查可更新的软件包           |
| yum grouplist             | 查看系统中已经安装的软件包组 |
| yum groupinstall 软件包组 | 安装指定的软件包组           |
| yum groupremove 软件包组  | 移除指定的软件包组           |
| yum groupinfo 软件包组    | 查询指定的软件包组信息       |



原本以为故事到此就要结束了，可是人们发现Yum虽然解决了软件的依赖关系问题，但仍然还是存在分析不准确、内存占用量大、不能多人同时安装软件等硬伤。终于，在2015年随着Fedora 22系统的发布，红帽又给了我们一个新的选择—DNF。DNF实际上就是解决了上述问题的Yum软件仓库的提升版，行业内称之为Yum v4版本。

作为Yum软件仓库v3版本的接替者，DNF特别友好地继承了原有的命令格式，且使用习惯上也保持了一致。大家不用担心不会操作，我们来看一个例子。以前，安装软件用的命令是“yum install软件包名称”，那么现在则是“dnf install软件包名称”（也就是说，将yum替换成dnf即可）。

当然RHEL 8系统也照顾到了老用户的习惯问题，同时兼容并保留了yum和dnf两个命令，大家在实际操作中随意选择就好。甚至这两个命令的提示信息都基本一样，感知不到什么区别。

On a Linux system, it is possible to install software in two ways:

- Using an installation package;
- Compiling from source files.

!!! Note Installing from source is not covered here. As a rule, you  should use the package method unless the software you want is not  available via the package manager. The reason for this is that  dependencies are generally managed by the package system, whereas with  source, you need to manage the dependencies manually.

**The package**: This is a single file containing all  the data needed to install the program. It can be executed directly on  the system from a software repository.

**The source files** : Some software is not provided in  packages ready to be installed, but via an archive containing the source files. It is up to the administrator to prepare these files and compile them to install the program.

## RPM : RedHat Package Manager[¶](https://docs.rockylinux.org/zh/books/admin_guide/13-softwares/#rpm-redhat-package-manager)

**RPM** (RedHat Package Manager) is a software  management system. It is possible to install, uninstall, update or check software contained in packages.

**RPM** is the format used by all RedHat based  distributions (RockyLinux, Fedora, CentOS, SuSe, Mandriva, ...). Its  equivalent in the Debian world is DPKG (Debian Package).

The name of an RPM package follows a specific nomenclature:

![Illustration of a package name](https://docs.rockylinux.org/books/admin_guide/images/software-001.png)

### `rpm` command[¶](https://docs.rockylinux.org/zh/books/admin_guide/13-softwares/#rpm-command)

The rpm command allows you to install a package.

```
rpm [-i][-U] package.rpm [-e] package
```

Example (for a package named 'package'):

```
[root]# rpm -ivh package.rpm
```

| Option           | Description                                  |
| ---------------- | -------------------------------------------- |
| `-i package.rpm` | Installs the package.                        |
| `-U package.rpm` | Updates an already installed package.        |
| `-e package.rpm` | Uninstalls the package.                      |
| `-h`             | Displays a progress bar.                     |
| `-v`             | Informs about the progress of the operation. |
| `--test`         | Tests the command without executing it.      |

The `rpm` command also allows you to query the system package database by adding the `-q` option.

It is possible to execute several types of queries to obtain  different information about the installed packages. The RPM database is  located in the directory `/var/lib/rpm`.

Example:

```
[root]# rpm -qa
```

This command queries all the packages installed on the system.

```
rpm -q [-a][-i][-l] package [-f] file
```

Example:

```
[root]# rpm -qil package
[root]# rpm -qf /path/to/file
```

| Option           | Description                                                  |
| ---------------- | ------------------------------------------------------------ |
| `-a`             | Lists all packages installed on the system.                  |
| `-i __package__` | Displays the package information.                            |
| `-l __package__` | Lists the files contained in the package.                    |
| `-f`             | Shows the name of the package containing the specified file. |
| `--last`         | The list of packages is given by installation date (the last installed packages appear first). |

!!! Warning After the `-q` option, the package name must be exact. Metacharacters (wildcards) are not supported.

!!! Tip However, it is possible to list all installed packages and filter with the `grep` command.

Example: list the last installed packages:

```
sudo rpm -qa --last | head
NetworkManager-config-server-1.26.0-13.el8.noarch Mon 24 May 2021 02:34:00 PM CEST
iwl2030-firmware-18.168.6.1-101.el8.1.noarch  Mon 24 May 2021 02:34:00 PM CEST
iwl2000-firmware-18.168.6.1-101.el8.1.noarch  Mon 24 May 2021 02:34:00 PM CEST
iwl135-firmware-18.168.6.1-101.el8.1.noarch   Mon 24 May 2021 02:34:00 PM CEST
iwl105-firmware-18.168.6.1-101.el8.1.noarch   Mon 24 May 2021 02:34:00 PM CEST
iwl100-firmware-39.31.5.1-101.el8.1.noarch    Mon 24 May 2021 02:34:00 PM CEST
iwl1000-firmware-39.31.5.1-101.el8.1.noarch   Mon 24 May 2021 02:34:00 PM CEST
alsa-sof-firmware-1.5-2.el8.noarch            Mon 24 May 2021 02:34:00 PM CEST
iwl7260-firmware-25.30.13.0-101.el8.1.noarch  Mon 24 May 2021 02:33:59 PM CEST
iwl6050-firmware-41.28.5.1-101.el8.1.noarch   Mon 24 May 2021 02:33:59 PM CEST
```

Example: list the installation history of the kernel:

```
sudo rpm -qa --last kernel
kernel-4.18.0-305.el8.x86_64                  Tue 25 May 2021 06:04:56 AM CEST
kernel-4.18.0-240.22.1.el8.x86_64             Mon 24 May 2021 02:33:35 PM CEST
```

Example: list all installed packages with a specific name using `grep`:

```
sudo dnf list installed | grep httpd
centos-logos-httpd.noarch           80.5-2.el8                              @baseos      
httpd.x86_64                        2.4.37-30.module_el8.3.0+561+97fdbbcc   @appstream   
httpd-filesystem.noarch             2.4.37-30.module_el8.3.0+561+97fdbbcc   @appstream   
httpd-tools.x86_64                  2.4.37-30.module_el8.3.0+561+97fdbbcc   @appstream
```

## DNF : Dandified Yum[¶](https://docs.rockylinux.org/zh/books/admin_guide/13-softwares/#dnf-dandified-yum)

**DNF** (**Dandified Yum**) is a software package manager, successor of **YUM** (**Yellow dog** U**pdater** M**odified). It works with** RPM** packages grouped in a local or remote repository (a directory for  storing packages). For the most common commands, its usage is identical  to that of `yum`.

The `dnf` command allows the management of packages by  comparing those installed on the system with those in the repositories  defined on the server. It also automatically installs dependencies, if  they are also present in the repositories.

`dnf` is the manager used by many RedHat based  distributions (RockyLinux, Fedora, CentOS, ...). Its equivalent in the  Debian world is **APT** (**A**dvanced **P**ackaging **T**ool).

### `dnf` command[¶](https://docs.rockylinux.org/zh/books/admin_guide/13-softwares/#dnf-command)

The dnf command allows you to install a package by specifying only the short name.

```
dnf [install][remove][list all][search][info] package
```

Example:

```
[root]# dnf install tree
```

Only the short name of the package is required.

| Option                    | Description                                   |
| ------------------------- | --------------------------------------------- |
| `install`                 | Installs the package.                         |
| `remove`                  | Uninstall the package.                        |
| `list all`                | Lists the packages already in the repository. |
| `search`                  | Search for a package in the repository.       |
| `provides */command_name` | Search for a command.                         |
| `info`                    | Displays the package information.             |

The `dnf list` command lists all the packages installed on the system and present in the repository. It accepts several parameters:

| Parameter   | Description                                                  |
| ----------- | ------------------------------------------------------------ |
| `all`       | Lists the installed packages and then those available on the repositories. |
| `available` | Lists only the packages available for installation.          |
| `updates`   | Lists packages that can be upgraded.                         |
| `obsoletes` | Lists the packages made obsolete by higher versions available. |
| `recent`    | Lists the latest packages added to the repository.           |

Example of a search for the `semanage` command:

```
[root]# dnf provides */semanage
```

### How DNF works[¶](https://docs.rockylinux.org/zh/books/admin_guide/13-softwares/#how-dnf-works)

The DNF manager relies on one or more configuration files to target the repositories containing the RPM packages.

These files are located in `/etc/yum.repos.d/` and must end with `.repo` in order to be used by DNF.

Example:

```
/etc/yum.repos.d/Rocky-BaseOS.repo
```

Each `.repo` file consists of at least the following information, one directive per line.

Example:

```
[baseos] # Short name of the repository
name=Rocky Linux $releasever - BaseOS # Short name of the repository #Detailed name
mirrorlist=http://mirrors.rockylinux.org/mirrorlist?arch=$basearch&repo=BaseOS-$releasever # http address of a list or mirror
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/BaseOS/$basearch/os/ # http address for direct access
gpgcheck=1 # Repository requiring a signature
enabled=1 # Activated =1, or not activated =0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rockyofficial # GPG public key path
```

By default, the `enabled` directive is absent which means that the repository is enabled. To disable a repository, you must specify the `enabled=0` directive.

## The EPEL repository[¶](https://docs.rockylinux.org/zh/books/admin_guide/13-softwares/#the-epel-repository)

**EPEL** (**E**xtra **P**ackages for **E**nterprise **L**inux) is a repository containing additional software packages for Enterprise  Linux, which includes RedHat Enterprise Linux (RHEL), RockyLinux,  CentOS, etc.

### Installation[¶](https://docs.rockylinux.org/zh/books/admin_guide/13-softwares/#installation)

Download and install the rpm from the repository:

If you are behind an internet proxy:

```
[root]# export http_proxy=http://172.16.1.10:8080
```

Then:

```
[root]# dnf install epel-release
```