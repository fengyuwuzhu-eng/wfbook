# 软件包管理器
## dpkg
Debian 包管理器。
1) dpkg 常见命令的语法及 dpkg 文件位置

下面是 dpkg 常见命令的语法及 dpkg 相关文件的位置，如果想深入了解，这些对你肯定大有益处。

```bash
### dpkg 命令的语法
$ dpkg -[command] [.deb package name]
$ dpkg -[command] [package name]
### dpkg 相关文件的位置
$ /var/lib/dpkg
### 这个文件包含了被 dpkg 命令（install、remove 等）所修改的包的信息
$ /var/lib/dpkg/status
### 这个文件包含了可用包的列表
$ /var/lib/dpkg/status
```

2) 安装/升级软件

在基于 Debian 的系统里，比如 Debian、Mint、Ubuntu 和 elementryOS，用以下命令来安装/升级 .deb 软件包。这里我要用 atom-amd64.deb 文件安装 Atom。要是已经安装了 Atom，就会升级它。要么就会安装一个新的 Atom。

```bash
### 安装或升级 dpkg 软件包
$ sudo dpkg -i atom-amd64.deb
Selecting previously unselected package atom.
(Reading database ... 426102 files and directories currently installed.)
Preparing to unpack atom-amd64.deb ...
Unpacking atom (1.5.3) over (1.5.3) ...
Setting up atom (1.5.3) ...
Processing triggers for gnome-menus (3.13.3-6ubuntu1) ...
Processing triggers for bamfdaemon (0.5.2~bzr0+15.10.20150627.1-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.22-1ubuntu3) ...
Processing triggers for mime-support (3.58ubuntu1) ...
```

3) 从文件夹里安装软件

在基于 Debian 的系统里，用下列命令从目录中逐个安装软件。这会安装 /opt/software 目录下的所有以 .deb 为后缀的软件。

```bash
$ sudo dpkg -iR /opt/software
Selecting previously unselected package atom.
(Reading database ... 423303 files and directories currently installed.)
Preparing to unpack /opt/software/atom-amd64.deb ...
Unpacking atom (1.5.3) ...
Setting up atom (1.5.3) ...
Processing triggers for gnome-menus (3.13.3-6ubuntu1) ...
Processing triggers for bamfdaemon (0.5.2~bzr0+15.10.20150627.1-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.22-1ubuntu3) ...
Processing triggers for mime-support (3.58ubuntu1) ...
```

4) 显示已安装软件列表

以下命令可以列出 Debian 系的系统中所有已安装的软件，同时会显示软件版本和描述信息。

```bash
$ dpkg -l
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name                        Version                            Architecture Description
+++-===========================-==================================-============-================================================================
ii  account-plugin-aim          3.12.10-0ubuntu2                   amd64        Messaging account plugin for AIM
ii  account-plugin-facebook     0.12+15.10.20150723-0ubuntu1       all          GNOME Control Center account plugin for single signon - facebook
ii  account-plugin-flickr       0.12+15.10.20150723-0ubuntu1       all          GNOME Control Center account plugin for single signon - flickr
ii  account-plugin-google       0.12+15.10.20150723-0ubuntu1       all          GNOME Control Center account plugin for single signon
ii  account-plugin-jabber       3.12.10-0ubuntu2                   amd64        Messaging account plugin for Jabber/XMPP
ii  account-plugin-salut        3.12.10-0ubuntu2                   amd64        Messaging account plugin for Local XMPP (Salut)
.
.
```

5) 查看指定的已安装软件b

用以下命令列出指定的一个已安装软件，同时会显示软件版本和描述信息。

```bash
$ dpkg -l atom
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name       Version   Architecture        Description
+++-==========-=========-===================-============================================
ii  atom       1.5.3     amd64               A hackable text editor for the 21st Century.
```

6) 查看软件安装目录

以下命令可以在基于 Debian 的系统上查看软件的安装路径。

```bash
$ dpkg -L atom
/.
/usr
/usr/bin
/usr/bin/atom
/usr/share
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/atom
/usr/share/pixmaps
/usr/share/pixmaps/atom.png
/usr/share/doc
```

7) 查看 deb 包内容

下列命令可以查看 deb 包内容。它会显示 .deb 包中的一系列文件。

```bash
$ dpkg -c atom-amd64.deb
drwxr-xr-x root/root         0 2016-02-13 02:13 ./
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/lintian/
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/lintian/overrides/
-rw-r--r-- root/root       299 2016-02-13 02:13 ./usr/share/lintian/overrides/atom
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/pixmaps/
-rw-r--r-- root/root    643183 2016-02-13 02:13 ./usr/share/pixmaps/atom.png
drwxr-xr-x root/root         0 2016-02-13 02:13 ./usr/share/doc/
.
.
```

8) 显示软件的详细信息

以下命令可以显示软件的详细信息，如软件名、软件类别、版本、维护者、软件架构、依赖的软件、软件描述等等。

```bash
$ dpkg -s atom
Package: atom
Status: install ok installed
Priority: optional
Section: devel
Installed-Size: 213496
Maintainer: GitHub <atom@github.com>Architecture: amd64
Version: 1.5.3
Depends: git, gconf2, gconf-service, libgtk2.0-0, libudev0 | libudev1, libgcrypt11 | libgcrypt20, libnotify4, libxtst6, libnss3, python, gvfs-bin, xdg-utils, libcap2
Recommends: lsb-release
Suggests: libgnome-keyring0, gir1.2-gnomekeyring-1.0
Description: A hackable text editor for the 21st Century.
 Atom is a free and open source text editor that is modern, approachable, and hackable to the core.</atom@github.com>
```

9) 查看文件属于哪个软件

用以下命令来查看文件属于哪个软件。

```bash
$ dpkg -S /usr/bin/atom
atom: /usr/bin/atom
```

10) 移除/删除软件

以下命令可以用来移除/删除一个已经安装的软件，但不删除配置文件。

```bash
$ sudo dpkg -r atom
(Reading database ... 426404 files and directories currently installed.)
Removing atom (1.5.3) ...
Processing triggers for gnome-menus (3.13.3-6ubuntu1) ...
Processing triggers for bamfdaemon (0.5.2~bzr0+15.10.20150627.1-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.22-1ubuntu3) ...
Processing triggers for mime-support (3.58ubuntu1) ...
```

11) 清除软件

以下命令可以用来移除/删除包括配置文件在内的所有文件。

```bash
$ sudo dpkg -P atom
(Reading database ... 426404 files and directories currently installed.)
Removing atom (1.5.3) ...
Processing triggers for gnome-menus (3.13.3-6ubuntu1) ...
Processing triggers for bamfdaemon (0.5.2~bzr0+15.10.20150627.1-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.22-1ubuntu3) ...
Processing triggers for mime-support (3.58ubuntu1) ...
```

12) 了解更多

用以下命令来查看更多关于 dpkg 的信息。

```bash
$ dpkg -help
或
$ man dpkg
```

## dnf
## apt-get
## rpm

| 备注           | 命令 |
| ----------------------------- | --------------------- |
| rpm -ivh filename.rpm | 安装软件的命令格式 |
| rpm -Uvh filename.rpm | 升级软件的命令格式 |
| rpm -e filename.rpm |  卸载软件的命令格式  |
|  rpm -qpi filename.rpm   | 查询软件描述信息的命令格式 |
|  rpm -qpl filename.rpm   | 列出软件文件信息的命令格式 |
| rpm -qf filename   |  查询文件属于哪个RPM的命令格式   |

## yum

deltarpm 

增量 RPM 包包含旧版本和新版本的 RPM 包之间的差别。在旧 RPM 上应用增量 RPM 将得到全新的 RPM。不需要旧 RPM 的副本，因为增量 RPM 可以与已安装的 RPM 一起工作。增量 RPM 包的大小甚至比增补程序 RPM 小，这有利于通过因特网传送更新包。缺点是，涉及增量 RPM 的更新操作与使用纯粹 RPM 或增补程序 RPM 进行更新的情况相比，占用的 CPU 周期要长得多。

| 命令         | 说明               |
| ------------------------- | ---------------------------- |
| yum repolist all          | 列出所有仓库                 |
| yum list all              | 列出仓库中所有软件包         |
| yum list extras | 列出所有已安装但不在 Yum Repository 內的软件包 |
| yum list installed | 列出所有已安装的软件包 |
| yum list updates | 列出所有可更新的软件包 |
| yum list <package_name> | 列出所指定的软件包 |
| yum info | 列出所有软件包的信息 |
| yum info extras | 列出所有已安裝但不在 Yum Repository 內的软件包信息 |
| yum info updates | 列出所有可更新的软件包信息 |
| yum info installed | 列出所有已安裝的软件包信息 |
| yum info <package_name> | 查看软件包信息               |
| yum install <package_name> | 安装软件包                   |
| yum provides <package_name> | 列出软件包提供哪些文件 |
| yum reinstall <package_name> | 重新安装软件包               |
| yum update <package_name> | 升级指定软件包                 |
| yum update | 升级所有软件包 |
| yum remove <package_name> | 移除软件包                   |
| yum clean all             | 清除所有仓库缓存             |
| yum check-update          | 检查可更新的软件包           |
| yum grouplist             | 查看系统中已经安装的软件包组 |
| yum groupinstall <package_name> | 安装指定的软件包组           |
| yum groupremove <package_name> | 移除指定的软件包组           |
| yum groupinfo <package_name> | 查询指定的软件包组信息       |

**清除YUM缓存**

yum 会把下载的软件包和header存储在cache中，而不会自动删除。

```bash
#清除缓存目录(/var/cache/yum)下的软件包
yum clean packages

#清除缓存目录(/var/cache/yum)下的 headers
yum clean headers

#清除所有
yum clean all

#清除缓存目录(/var/cache/yum)下旧的 headers
yum clean oldheaders

#清除缓存目录(/var/cache/yum)下的软件包及旧的headers
yum clean, yum clean all (= yum clean packages; yum clean oldheaders) 
```

## Zypper

## pacman
## urpmi
