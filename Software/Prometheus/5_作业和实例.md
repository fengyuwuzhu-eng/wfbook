# Jobs and instances 作业和实例

[TOC]

In Prometheus terms, an endpoint you can scrape is called an *instance*, usually corresponding to a single process. A collection of instances  with the same purpose, a process replicated for scalability or  reliability for example, is called a *job*.

用普罗米修斯的话来说，你可以抓取的端点被称为实例，通常对应于一个进程。具有相同目的的实例集合，例如为了可扩展性或可靠性而复制的过程，称为作业。

例如，具有四个复制实例的 API 服务器作业：

an API server job with four replicated instances:

- job: 

  ```
  api-server
  ```

  - instance 1: `1.2.3.4:5670`
  - instance 2: `1.2.3.4:5671`
  - instance 3: `5.6.7.8:5670`
  - instance 4: `5.6.7.8:5671`

## 自动生成的标签和时间序列

When Prometheus scrapes a target, it attaches some labels automatically to the scraped time series which serve to identify the scraped target:

当普罗米修斯刮伤目标时，它会自动在刮伤的时间序列上贴上一些标签，用于识别刮伤的目标：

- `job`: The configured job name that the target belongs to.目标所属的已配置作业名称。
- `instance`: The `<host>:<port>` part of the target's URL that was scraped.被抓取的目标URL的＜host＞：＜port＞部分。

If either of these labels are already present in the scraped data, the behavior depends on the `honor_labels` configuration option. 

如果这些标签中的任何一个已经存在于刮取的数据中，则行为取决于荣誉标签配置选项。

For each instance scrape, Prometheus stores a [sample](https://prometheus.io/docs/introduction/glossary#sample) in the following time series:

对于每一次刮擦，普罗米修斯都会按照以下时间序列存储一个样本：

- `up{job="<job-name>", instance="<instance-id>"}`: `1` if the instance is healthy, i.e. reachable, or `0` if the scrape failed.
- `scrape_duration_seconds{job="<job-name>", instance="<instance-id>"}`: duration of the scrape.
- `scrape_samples_post_metric_relabeling{job="<job-name>", instance="<instance-id>"}`: the number of samples remaining after metric relabeling was applied.
- `scrape_samples_scraped{job="<job-name>", instance="<instance-id>"}`: the number of samples the target exposed.
- `scrape_series_added{job="<job-name>", instance="<instance-id>"}`: the approximate number of new series in this scrape. *New in v2.10*

The `up` time series is useful for instance availability monitoring.v2.10中的新增功能上行时间序列对于实例可用性监控非常有用。