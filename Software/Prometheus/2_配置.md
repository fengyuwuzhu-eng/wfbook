# 配置

[TOC]

## Prometheus Server

Prometheus 的配置是 YAML 。Prometheus 附带了一个名为 `prometheus.yml` 的示例配置文件。

```yaml
global:
  scrape_interval:     15s
  evaluation_interval: 15s

rule_files:
  # - "first.rules"
  # - "second.rules"

scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets: ['localhost:9090']
```

示例配置文件中有三个配置块：`global` 、`rule_files` 和 `scrape_configs` 。

`global` 控制 Prometheus 服务器的全局配置。有两种选择。第一个是 `scrape_interval` ，控制 Prometheus will scrape targets刮伤目标的频率。可以为单个目标覆盖此选项。在这种情况下，全局设置为 scrape every 15 seconds. 每15秒刮一次。`evaluation_interval` 选项控制 Prometheus 评估规则的频率。Prometheus 使用规则创建新的时间序列并生成警报。

`rule_files` 块指定我们希望 Prometheus 服务器加载的任何规则的位置。

最后一个块，`scrape_configs` ，控制 Prometheus 监视的资源。由于 Prometheus 还将自己的数据作为 HTTP 端点公开，因此它可以抓取并监控自己的健康状况。在默认配置中，有一个名为 `prometheus` 的作业，它抓取 Prometheus 服务器公开的时间序列数据。该作业包含一个静态配置的目标，即端口 `9090` 上的 `localhost` 。Prometheus 期望在目标上的 `/metrics` 路径提供度量。因此，此默认作业是通过 URL 进行抓取：http://localhost:9090/metrics.

返回的时间序列数据将详细说明 Prometheus 服务器的状态和性能。
