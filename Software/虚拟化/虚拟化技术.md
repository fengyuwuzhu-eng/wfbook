# 虚拟化技术
## 种类
>* 全虚拟化
>* 半虚拟化
>* 操作系统级虚拟化  
>* 原生虚拟化  

全虚拟化：VMware ESX  
半虚拟化：Xen  
操作系统级虚拟化:AIX workload partition / Solaris zone  
原生虚拟化：Intel AMD
## 虚拟化使用场景
### 适用
>* 利用率已经很高的服务器
>* 资源密集型的备份服务器或者日志主机
>* 高带宽的应用，如入侵检测系统
>* 繁忙且受限于I/O的数据库服务器
>* 基于硬件防拷贝的专用应用
>* 需要专门硬件的应用  

### 不适用
>* 面向Internet，且需要查询中间件系统或者数据库的Web服务器
>* 使用不充分的独立应用服务器
>* 开发人员使用的系统，如编译服务器或者版本控制服务器
>* QA测试主机和过渡环境
>* 核心基础设施的系统，如LDAP目录，DHCP和DNS服务器，时间服务器以及SSH网关。

## 分类

**虚拟化层次种类：**

（1）**完全虚拟化** ---  最流行的虚拟化方法，使用名为 hypervisor 的一种软件，在虚拟服务器和底层硬件之间建立一个抽象层。 VMware  和微软的VirtualPC 是代表该方法的两个商用产品，而基于核心的虚拟机 (KVM) 是面向 Linux 系统的开源产品hypervisor  可以捕获 CPU  指令，为指令访问硬件控制器和外设充当中介。因而，完全虚拟化技术几乎能让任何一款操作系统不用改动就能安装到虚拟服务器上，而它们不知道自己运行在虚拟化环境下。主要缺点是， hypervisor 给处理器带来开销。
（2）**准虚拟化** --- 完全虚拟化是处理器密集型技术，因为它要求  hypervisor管理各个虚拟服务器，并让它们彼此独立。减轻这种负担的一种方法就是，改动客户端操作系统，让它以为自己运行在虚拟环境下，能够与hypervisor 协同工作。这种方法就叫准虚拟化 (para-virtualization)。Xen 是开源准虚拟化技术的一个例子。操作系统作为虚拟服务器在  Xen hypervisor 上运行之前，它必须在核心层面进行某些改变。因此， Xen 适用于 BSD 、 Linux 、 Solaris  及其他开源操作系统，但不适合对像Windows  这些专有的操作系统进行虚拟化处理，因为它们无法改动。准虚拟化技术的优点是性能高。经过准虚拟化处理的服务器可与hypervisor  协同工作，其响应能力几乎不亚于未经过虚拟化处理的服务器。准虚拟化与完全虚拟化相比优点明显，以至于微软和 VMware  都在开发这项技术，以完善各自的产品。
（3）**系统虚拟化** ---  就操作系统层的虚拟化而言，没有独立的hypervisor  层。相反，主机操作系统本身就负责在多个虚拟服务器之间分配硬件资源，并且让这些服务器彼此独立。一个明显的区别是，如果使用操作系统层虚拟化，所有虚拟服务器必须运行同一操作系统 ( 不过每个实例有各自的应用程序和用户 ) 。虽然操作系统层虚拟化的灵活性比较差，但本机速度性能比较高。此外，由于架构在所有虚拟服务器上使用单一、标准的操作系统，管理起来比异构环境要容易。
（4）**桌面虚拟化** ---  桌面虚拟化主要功能是将分散的桌面环境集中保存并管理起来，包括桌面环境的集中下发，集中更新，集中管理。桌面虚拟化使得桌面管理变得简单，不用每台终端单独进行维护，每台终端进行更新。终端数据可以集中存储在中心机房里，安全性相对传统桌面应用要高很多。桌面虚拟化可以使得一个人拥有多个桌面环境，也可以把一个桌面环境供多人使用。

**虚拟化架构分类:**
​（1）**1型虚拟化**
​      ![img](D:\wfbook\Image\k\1618472-20190329134603647-370306872.png)

​       Hypervisor 直接安装在物理机上，多个虚拟机在 Hypervisor 上运行。Hypervisor 实现方式一般是一个特殊定制的 Linux 系统。Xen 和 VMware 的 ESXi 都属于这个类型。

（2）**2型虚拟化**

​      ![img](D:\wfbook\Image\k\1618472-20190329135045351-342284420.png)

​      物理机上首先安装常规的操作系统，比如 Redhat、Ubuntu 和 Windows。Hypervisor 作为  OS 上的一个程序模块运行，并对管理虚拟机进行管理。KVM、VirtualBox 和 VMware Workstation 都属于这个类型。