# 安装

## 要求

### 管理主机

* 支持SSH
* Python 2.6
* windows系统不可以做控制主机
* 自2.0版本开始,ansible使用了更多句柄来管理它的子进程,对于OS X系统,需要增加ulimit值才能使用15个以上子进程,方法 `sudo launchctl limit maxfiles 1024 2048`,否则可能会看见”Too many open file”的错误提示.

### 托管节点

通常使用 ssh 与托管节点通信，默认使用 sftp.如果 sftp 不可用，可在 ansible.cfg 配置文件中配置成 scp 的方式. 在托管节点上也需要安装 Python 2.4 或以上的版本.如果版本低于 Python 2.5 ,还需要额外安装一个模块`python-simplejson`

Note

> 如果托管节点上开启了SElinux,你需要安装libselinux-python,这样才可使用Ansible中与copy/file/template相关的函数.

## 安装
### 从源码安装

从项目的 checkout 中可以很容易运行 Ansible 。

```bash
git clone git://github.com/ansible/ansible.git --recursive
cd ./ansible
source ./hacking/env-setup      //使用 Bash
. ./hacking/env-setup.fish		//使用 Fish
source ./hacking/env-setup -q   //suppress spurious warnings/errors

sudo easy_install pip           //如果未安装pip，执行此命令
sudo pip install paramiko PyYAML Jinja2 httplib2 six

#更新
git pull --rebase
git submodule update --init --recursive


yum -y install python-jinja2 PyYAML python-paramiko python-babel python-crypto
tar xf ansible-1.5.4.tar.gz
cd ansible-1.5.4
python setup.py build
python setup.py install
mkdir /etc/ansible
cp -r examples/* /etc/ansible
```

### YUM安装

```bash
yum install epel-release
yum install ansible

#CentOS 8
dnf install epel-release
dnf install ansible
```

也可以自己创建 RPM 软件包。在创建之前,先确定已安装了 `rpm-build`, `make` 和 `python2-devel` 。

```bash
git clone git://github.com/ansible/ansible.git
cd ./ansible
make rpm
sudo rpm -Uvh ~/rpmbuild/ansible-*.noarch.rpm
```

### Apt(Ubuntu)安装

```bash
apt-get install software-properties-common
apt-add-repository ppa:ansible/ansible
apt-get update
apt-get install ansible
```

### Portage(Gentoo)安装

```bash
emerge -av app-admin/ansible
```

### pkg(FreeBSD)安装

```bash
pkg install ansible
```

### Homebrew(Mac OS X)安装

```bash
brew update
brew install ansible
```

### Pip安装

```bash
yum install python-pip python-devel
yum install gcc glibc-devel zlib-devel rpm-build openssl-devel
pip install --upgrade pip
pip install ansible -upgrade

# CentOS 8
dnf install python3 python3-pip
pip3 install ansible
```

### Solaris

```bash
pkgadd -d http://get.opencsw.org/now
/opt/csw/bin/pkgutil -i ansible
```

### Arch Linux

```bash
pacman -S ansible
```

















### [通过Apt (Ubuntu)安装最新发布版本](http://www.ansible.com.cn/docs/intro_installation.html#id18)

Ubuntu 编译版可在PPA中获得: ` <https://launchpad.net/~ansible/+archive/ansible>`_.

配置PPA及安装ansible,执行如下命令:

```
$ sudo apt-get install software-properties-common
$ sudo apt-add-repository ppa:ansible/ansible
$ sudo apt-get update
$ sudo apt-get install ansible
```

Note

在早期Ubuntu发行版中, “software-properties-common” 名为 “python-software-properties”.

也可从源码checkout中创建 Debian/Ubuntu 软件包,执行:

```
$ make deb
```

你或许也想从源码中运行最新发行版本,可看前面的说明.



### [通过 Portage (Gentoo)安装最新发布版本](http://www.ansible.com.cn/docs/intro_installation.html#id19)

```
$ emerge -av app-admin/ansible
```

要安装最新版本,你可能需要在执行 emerge 之前，先做如下操作(unmsk ansible)

```
$ echo 'app-admin/ansible' >> /etc/portage/package.accept_keywords
```

若在Gentoo托管节点中,已经安装了 Python 3 并将之作为默认的 Python slot(这也是默认设置),则你必须在 组变量 或 inventory 变量中设置如下变量 `ansible_python_interpreter = /usr/bin/python2`

### [通过 pkg (FreeBSD)安装最新发布版本](http://www.ansible.com.cn/docs/intro_installation.html#id20)

```
$ sudo pkg install ansible
```

你或许想从ports中安装:

```
$ sudo make -C /usr/ports/sysutils/ansible install
```



### [在Mac OSX 上安装最新发布版本](http://www.ansible.com.cn/docs/intro_installation.html#id21)

在 Mac 上安装 ansible，最好是通过 pip 安装，在 [通过 Pip 安装最新发布版本](http://www.ansible.com.cn/docs/intro_installation.html#pip) 小节介绍.



### [通过 OpenCSW 安装最新发布版本(Solaris)](http://www.ansible.com.cn/docs/intro_installation.html#id22)

在 Solaris 上安装 ansible: [SysV package from OpenCSW](https://www.opencsw.org/packages/ansible/).

```
# pkgadd -d http://get.opencsw.org/now
# /opt/csw/bin/pkgutil -i ansible
```



### [通过 Pacman 安装最新发布版本(Arch Linux)](http://www.ansible.com.cn/docs/intro_installation.html#id23)

Ansible 已经放入了 Community repository:

```
$ pacman -S ansible
```

The AUR has a PKGBUILD for pulling directly from Github called [ansible-git](https://aur.archlinux.org/packages/ansible-git).

Also see the [Ansible](https://wiki.archlinux.org/index.php/Ansible) page on the ArchWiki.

如果在 Arch Linux 上已经安装了 Python 3，并设置为默认的 Python slot，你必须在 组变量 或 inventory 变量中设置如下变量: `ansible_python_interpreter = /usr/bin/python2`



### [通过 Pip 安装最新发布版本](http://www.ansible.com.cn/docs/intro_installation.html#id24)

Ansible可通过 “pip” 安装(安装和管理Python包的工具),若你还没有安装 pip,可执行如下命令安装:

```
$ sudo easy_install pip
```

然后安装Ansible:

```
$ sudo pip install ansible
```

如果你是在 OS X Mavericks 上安装,编译器可能或告警或报错,可通过如下设置避免这种情况:

```
$ sudo CFLAGS=-Qunused-arguments CPPFLAGS=-Qunused-arguments pip install ansible
```

使用 virtualenv 的读者可通过 virtualenv 安装 Ansible, 然而我们建议不用这样做,直接在全局安装 Ansible.不要使用 easy_install 直接安装 ansible.



### [发行版的Tarball](http://www.ansible.com.cn/docs/intro_installation.html#id25)

不想通过git checkout 创建Ansible的软件包？在这里可获取Tarball [Ansible downloads](http://releases.ansible.com/ansible)

各种版本的Ansible在这里做了版本标注 [git repository](https://github.com/ansible/ansible/releases)

