# 安装

[TOC]

## 依赖

### 硬件

安装需要 4GB 内存。

### 操作系统

#### 支持的平台

- Enterprise Linux 8, x86_64
- Debian 11 (Bullseye), amd64
- Ubuntu 20.04 (Focal), amd64

#### Enterprise Linux

Foreman 软件包和安装程序在 AlmaLinux 8 和 CentOS 8 Stream 上进行了测试，但其他 RHEL 衍生产品也可以工作，因为它们类似。有时可能需要额外的工作。

## foreman-installer 安装

Foreman installer 使用 Puppet (6 或更高版本）安装 Foreman 。假设有一个新安装的操作系统，安装程序将在该系统上默认设置 Foreman 、Puppet 服务器和 Smart Proxy 。在现有系统上执行以下步骤是不可取的，因为安装程序会影响多个组件的配置。

> 如果想使用 Foreman 管理内容（例如 RPM 、Kickstart tree、ISO 和 KVM 映像、OSTree 内容 等），请遵循 Katello 安装说明。如果是新用户，请确保熟悉 Katello 并决定是否使用其功能，因为不支持在现有 Foreman 上安装 Katello 。请注意，不能在 Debian 系统上安装 Katello 。

启用 Puppet's 7.x 源：  

```bash
# EL8
dnf -y install https://yum.puppet.com/puppet7-release-el-8.noarch.rpm

# Debian 11 (Bullseye)
sudo apt-get -y install ca-certificates
cd /tmp && wget https://apt.puppet.com/puppet7-release-bullseye.deb
sudo apt-get install /tmp/puppet7-release-bullseye.deb

# Ubuntu 20.04 (Focal)
sudo apt-get -y install ca-certificates
cd /tmp && wget https://apt.puppet.com/puppet7-release-focal.deb
sudo apt-get install /tmp/puppet7-release-focal.deb
```

启用 Foreman 源：

```bash
# EL8
dnf -y install https://yum.theforeman.org/releases/3.7/el8/x86_64/foreman-release.rpm

# Debian 11 (Bullseye)
sudo wget https://deb.theforeman.org/foreman.asc -O /etc/apt/trusted.gpg.d/foreman.asc
echo "deb http://deb.theforeman.org/ bullseye 3.5" | sudo tee /etc/apt/sources.list.d/foreman.list
echo "deb http://deb.theforeman.org/ plugins 3.5" | sudo tee -a /etc/apt/sources.list.d/foreman.list

# Ubuntu 20.04 (Focal)
sudo wget https://deb.theforeman.org/foreman.asc -O /etc/apt/trusted.gpg.d/foreman.asc
echo "deb http://deb.theforeman.org/ focal 3.5" | sudo tee /etc/apt/sources.list.d/foreman.list
echo "deb http://deb.theforeman.org/ plugins 3.5" | sudo tee -a /etc/apt/sources.list.d/foreman.list
```

启用 Foreman module：

```bash
# EL8
dnf module enable foreman:el8
```

下载 foreman-installer：

```bash
# EL8
dnf -y install foreman-installer

# Debian 11 (Bullseye)
# Ubuntu 20.04 (Focal)
sudo apt-get update && sudo apt-get -y install foreman-installer
```

### 执行安装

> Note:
>
> 确保 `ping $(hostname -f)` 显示真实的 IP 地址，而不是 127.0.0.1。如果存在，请从 /etc/hosts 中更改或删除此条目。

安装运行是非交互式的，但是可以通过提供 `foreman-installer --help` 中列出的任何选项来定制配置，或者通过在交互式模式下运行 `foreman-installer -i` 来定制配置。添加 `-v` 将禁用进度条并显示所有更改。要运行安装程序，请执行：

```bash
foreman-installer
```

完成后，安装程序将打印一些有关在哪里找到 Foreman 和 Smart Proxy 的详细信息。输出应与以下内容类似：

```bash
  * Foreman is running at https://theforeman.example.com
      Initial credentials are admin / 3ekw5xtyXCoXxS29
  * Foreman Proxy is running at https://theforeman.example.com:8443
  The full log is at /var/log/foreman-installer/foreman-installer.log
```







There are several different methods of installing Foreman. The  recommended way is with the puppet based Foreman Installer but you may also use your  distribution’s package manager or install directly from source.

## 3.1 System Requirements

This sections outlines the system requirements for an installation of Foreman.  This will cover the hardware requirements, OS requirements  and firewall requirements.  This includes variations for all supported  database types.

### 3.1.1 Supported Platforms

The following operating systems are supported by the installer, have packages and are tested for deploying Foreman:

- Red Hat Enterprise Linux 8    
  - Architectures: x86_64 only
  - Apply all SELinux-related errata.
- CentOS 8 Stream    
  - Architectures: x86_64 only
  - Note:
    - The RPM packages are built on CentOS Linux 8, but tested to work also on CentOS 8 Stream
    - EPEL 8 is incompatible, enabling will cause package dependency issue.
- Ubuntu 20.04 (Focal)    
  - Architectures: amd64
- Debian 11 (Bullseye)    
  - Architectures: amd64

PostgreSQL version 10 or newer.

It is recommended to apply all OS updates if possible.

All platforms will require Puppet 6 or higher, which may be installed from Puppet’s repositories.

Other operating systems will need to use alternative installation methods, such as from source.

The following operating systems are known to install successfully from Foreman:

- Enterprise Linux (RHEL, AlmaLinux, CentOS, Oracle Linux, Rocky Linux)
- Fedora
- Ubuntu
- Debian
- OpenSUSE
- SLES
- CoreOS
- Solaris
- FreeBSD
- Juniper Junos
- Cisco NX-OS

### 3.1.2 Hardware Requirements

The hardware requirements for Foreman depend primarily on the number  of requests that it will receive, which depends on the number of  configuration management clients, web UI activity and other systems  using the API.

The default installation when including Puppet server will require:

- 4GB memory
- 2GB disk space

For a bare minimum installation with few clients and no Puppet server, the requirements are:

- 2GB memory
- 1GB disk space

#### Scaling notes

- The default Puma configuration is 2 workers with a maximum of 16 threads and a minimum of 0 threads per worker.
- When using a Puppet server, consult the requirements outlined in the [Puppet server system requirements](https://puppet.com/docs/puppet/latest/server/install_from_packages.html#system-requirements).
- Disk usage will increase as more data is stored in the database, mostly for facts and reports. See the [reports cronjob configuration](https://theforeman.org/manuals/3.5/index.html#3.5.4PuppetReports) to change how they are expired.

### 3.1.3 Puppet Compatibility

Foreman integrates with Puppet and Facter in a few places, but  generally using a recent, stable version will be fine.  The exact  versions of Puppet, Puppetserver and Facter that Foreman is compatible  with are listed below.

| Puppet version | Foreman installer (AIO) | Foreman installer (non-AIO) | Smart Proxy   |
| -------------- | ----------------------- | --------------------------- | ------------- |
| 0.x-4.3        | Not supported           | Not supported               | Not supported |
| 4.4-4.10       | Not supported           | Not supported               | Deprecated    |
| 5.x            | Not supported           | Not supported               | Deprecated    |
| 6.x - 7.x      | Supported               | Untested                    | Supported     |

#### AIO installer compatibility

The Foreman installer has code for both AIO and non-AIO  configurations, switching behavior automatically based on the version of Puppet installed (usually during the first run when answers are  stored). Only AIO installations are tested.

#### Puppet server compatibility

Puppetserver is the application for serving Puppet agents used by  default since Puppet 4. Both Fedora and Debian have not packaged  Puppetserver for their non-AIO packages. The Puppetlabs packages must be used.

#### Facter compatibility

Foreman is known to be compatible with all Facter 2.x to 4.x releases.

#### Puppet Enterprise compatibility

The Foreman installer and packages are generally incompatible with  Puppet Enterprise, however with some manual reconfiguration, individual  Foreman components such as the smart proxy should work if needed (some  further unsupported documentation can be found on the wiki).  The  installer in particular will conflict with a Puppet Enterprise  installation.  It is recommended that Foreman is installed using [Puppet “open source”](http://docs.puppetlabs.com/guides/installation.html).

### 3.1.4 Browser Compatibility

Using the most recent version of a major browser is highly  recommended, as Foreman and the frameworks it uses offer limited support for older versions.

The recommended requirements are as follows for major browsers:

- Google Chrome - latest version
- Microsoft Edge - latest version
- Apple Safari - latest version
- Mozilla Firefox - latest version
- Mozilla Firefox Extended Support Release (ESR) - latest version

Other browsers may work unpredictably.

### 3.1.5 Firewall Configuration

Protect your Foreman environment by blocking all unnecessary and unused ports.

| Port        | Protocol  | Required For                                                 |
| ----------- | --------- | ------------------------------------------------------------ |
| 53          | TCP & UDP | DNS Server                                                   |
| 67, 68      | UDP       | DHCP Server                                                  |
| 69          | UDP       | TFTP Server                                                  |
| 80, 443     | TCP       | * HTTP & HTTPS access to Foreman web UI / provisioning templates - using Apache |
| 3000        | TCP       | HTTP access to Foreman web UI / provisioning templates - using standalone WEBrick service |
| 5910 - 5930 | TCP       | Server VNC Consoles                                          |
| 5432        | TCP       | Separate PostgreSQL database                                 |
| 8140        | TCP       | * Puppet server                                              |
| 8443        | TCP       | Smart Proxy, open only to Foreman                            |

Ports indicated with * are running by default on a Foreman all-in-one installation and should be open.

## 3.2 Foreman Installer

The Foreman installer is a collection of Puppet modules that installs everything required for a full working Foreman setup.  It uses native  OS packaging (e.g. RPM and .deb packages) and adds necessary  configuration for the complete installation.

Components include the Foreman web UI, Smart Proxy, and optionally  TFTP, DNS and DHCP servers.  It is configurable and the Puppet modules  can be read or run in “no-op” mode to see what changes it will make.

It’s strongly recommended to use the installer instead of only  installing packages, as the installer uses OS packages and it saves a  lot of time otherwise spent replicating configuration by hand.

By default it will configure:

- Apache HTTP with SSL (using a Puppet-signed certificate)
- Foreman running under Puma (using systemd socket activation)
- Smart Proxy with SSL (using a Puppet-signed certificate) configured for Puppet and TFTP
- Puppetserver
- Puppet agent configured

Other modules can be enabled, which will also configure:

- ISC DHCP server
- BIND DNS server
- TFTP server (under xinetd on Red Hat 7 platforms)

It’s recommended to run the installer on a fresh and clean  single-purpose system, since the configurations of the aforementioned  components is (at least partially) overwritten by the installer.

### 3.2.1 Installation

#### Downloading the installer

Follow the instructions in section [2.1 Quickstart installation](https://theforeman.org/manuals/3.5/index.html#2.1Installation)

#### Running the installer

The installation run is non-interactive, but the configuration can be customized by supplying any of the options listed in `foreman-installer --help`, or by running `foreman-installer -i` for interactive mode.  More examples are given in the [Installation Options](https://theforeman.org/manuals/3.5/index.html#3.2.2InstallerOptions) section.  Adding `-v` will disable the progress bar and display all changes, while `--noop` will run without making any changes.  To run the installer, execute:

```
foreman-installer
```

After it completes, the installer will print some details about where to find Foreman and the Smart Proxy. Output should be similar to this:

```
  * Foreman is running at https://theforeman.example.com
      Initial credentials are admin / 3ekw5xtyXCoXxS29
  * Foreman Proxy is running at https://theforeman.example.com:8443
  * The full log is at /var/log/foreman-installer/foreman-installer.log
```

### 3.2.2 Installer Options

The installer is a collection of Puppet modules, which have a large  number of parameters available to customize the configuration.   Parameters can be set by running `foreman-installer` with arguments, e.g. `--foreman-initial-admin-password`, changing settings in interactive mode or by setting up an answers file.

The precedence for settings is for those set by arguments to  foreman-installer or interactive mode, then the answers file, then the  Puppet manifest defaults.

#### foreman-installer arguments

Every parameter available in the installer can be set using command line arguments to `foreman-installer`.  Run `foreman-installer --help` for most options, or `foreman-installer --full-help` for a list of every available option.

When running the installer, all arguments passed on the command line will be persisted by default to `/etc/foreman-installer/scenarios.d/foreman-answers.yaml` and used automatically on subsequent runs, without needing to specify  those arguments again.  This persistence can be disabled with the `-b` option.

#### Interactive mode

The installer also provides a text driven interface to customize configuration parameters, and can be run by executing:

```
foreman-installer -i
```

#### Plugins and compute resources

The installer contains a number of high level modules (e.g.  “foreman”, “puppet”) and additionally a number of smaller modules for  additional functionality, such as plugins and compute resource support.  These can be added with the “–enable” switches, or the default options  can be disabled with “–no-enable” switches.

More information about compute resources can be found in the [Compute Resources section](https://theforeman.org/manuals/3.5/index.html#5.2ComputeResources) and plugins in the [Plugins section](https://theforeman.org/manuals/3.5/index.html#6.Plugins).

| Option                                                     | Description                                                  |
| ---------------------------------------------------------- | ------------------------------------------------------------ |
| --[no-]enable-foreman                                      | Enable 'foreman' puppet module                               |
| --[no-]enable-foreman-cli                                  | Enable 'foreman_cli' puppet module                           |
| --[no-]enable-foreman-cli-ansible                          | Enable 'foreman_cli_ansible' puppet module                   |
| --[no-]enable-foreman-cli-azure                            | Enable 'foreman_cli_azure' puppet module                     |
| --[no-]enable-foreman-cli-discovery                        | Enable 'foreman_cli_discovery' puppet module                 |
| --[no-]enable-foreman-cli-google                           | Enable 'foreman_cli_google' puppet module                    |
| --[no-]enable-foreman-cli-kubevirt                         | Enable 'foreman_cli_kubevirt' puppet module                  |
| --[no-]enable-foreman-cli-openscap                         | Enable 'foreman_cli_openscap' puppet module                  |
| --[no-]enable-foreman-cli-puppet                           | Enable 'foreman_cli_puppet' puppet module                    |
| --[no-]enable-foreman-cli-remote-execution                 | Enable 'foreman_cli_remote_execution' puppet module          |
| --[no-]enable-foreman-cli-ssh                              | Enable 'foreman_cli_ssh' puppet module                       |
| --[no-]enable-foreman-cli-tasks                            | Enable 'foreman_cli_tasks' puppet module                     |
| --[no-]enable-foreman-cli-templates                        | Enable 'foreman_cli_templates' puppet module                 |
| --[no-]enable-foreman-cli-webhooks                         | Enable 'foreman_cli_webhooks' puppet module                  |
| --[no-]enable-foreman-proxy                                | Enable 'foreman_proxy' puppet module                         |
| --[no-]enable-puppet                                       | Enable 'puppet' puppet module                                |
| --[no-]enable-foreman-plugin-acd                           | Enable 'foreman_plugin_acd' puppet module ([foreman_acd](https://github.com/theforeman/foreman_acd)) |
| --[no-]enable-foreman-plugin-ansible                       | Enable 'foreman_plugin_ansible' puppet module ([foreman_ansible](https://theforeman.org/plugins/foreman_ansible)) |
| --[no-]enable-foreman-plugin-azure                         | Enable 'foreman_plugin_azure' puppet module ([foreman_azure](https://theforeman.org/plugins/foreman_azure)) |
| --[no-]enable-foreman-plugin-bootdisk                      | Enable 'foreman_plugin_bootdisk' puppet module ([foreman_bootdisk](https://github.com/theforeman/foreman_bootdisk)) |
| --[no-]enable-foreman-plugin-column-view                   | Enable 'foreman_plugin_column_view' puppet module ([foreman_column_view](https://github.com/theforeman/foreman_column_view)) |
| --[no-]enable-foreman-plugin-default-hostgroup             | Enable 'foreman_plugin_default_hostgroup' puppet module ([foreman_default_hostgroup](https://github.com/theforeman/foreman_default_hostgroup)) |
| --[no-]enable-foreman-plugin-dhcp-browser                  | Enable 'foreman_plugin_dhcp_browser' puppet module ([foreman_dhcp_browser](https://github.com/theforeman/foreman_dhcp_browser)) |
| --[no-]enable-foreman-plugin-discovery                     | Enable 'foreman_plugin_discovery' puppet module ([foreman_discovery](https://theforeman.org/plugins/foreman_discovery)) |
| --[no-]enable-foreman-plugin-dlm                           | Enable 'foreman_plugin_dlm' puppet module ([foreman_dlm](https://github.com/theforeman/foreman_dlm)) |
| --[no-]enable-foreman-plugin-expire-hosts                  | Enable 'foreman_plugin_expire_hosts' puppet module ([foreman_expire_hosts](https://github.com/theforeman/foreman_expire_hosts)) |
| --[no-]enable-foreman-plugin-git-templates                 | Enable 'foreman_plugin_git_templates' puppet module ([foreman_git_templates](https://github.com/theforeman/foreman_git_templates)) |
| --[no-]enable-foreman-plugin-google                        | Enable 'foreman_plugin_google' puppet module ([foreman_google](https://github.com/theforeman/foreman_google)) |
| --[no-]enable-foreman-plugin-hooks                         | Enable 'foreman_plugin_hooks' puppet module ([foreman_hooks](https://github.com/theforeman/foreman_hooks)) |
| --[no-]enable-foreman-plugin-host-extra-validator          | Enable 'foreman_plugin_host_extra_validator' puppet module ([foreman_host_extra_validator](https://github.com/theforeman/foreman_host_extra_validator)) |
| --[no-]enable-foreman-plugin-kubevirt                      | Enable 'foreman_plugin_kubevirt' puppet module ([foreman_kubevirt](https://theforeman.org/plugins/foreman_kubevirt)) |
| --[no-]enable-foreman-plugin-leapp                         | Enable 'foreman_plugin_leapp' puppet module ([foreman_leapp](https://github.com/theforeman/foreman_leapp)) |
| --[no-]enable-foreman-plugin-memcache                      | Enable 'foreman_plugin_memcache' puppet module ([foreman_memcache](https://github.com/theforeman/foreman_memcache)) |
| --[no-]enable-foreman-plugin-monitoring                    | Enable 'foreman_plugin_monitoring' puppet module ([foreman_monitoring](https://github.com/theforeman/foreman_monitoring)) |
| --[no-]enable-foreman-plugin-netbox                        | Enable 'foreman_plugin_netbox' puppet module ([foreman_netbox](https://github.com/theforeman/foreman_netbox)) |
| --[no-]enable-foreman-plugin-omaha                         | Enable 'foreman_plugin_omaha' puppet module ([foreman_omaha](https://github.com/theforeman/foreman_omaha)) |
| --[no-]enable-foreman-plugin-openscap                      | Enable 'foreman_plugin_openscap' puppet module ([foreman_openscap](https://theforeman.org/plugins/foreman_openscap)) |
| --[no-]enable-foreman-plugin-ovirt-provision               | Enable 'foreman_plugin_ovirt_provision' puppet module ([ovirt_provision_plugin](https://github.com/theforeman/ovirt_provision_plugin)) |
| --[no-]enable-foreman-plugin-puppet                        | Enable 'foreman_plugin_puppet' puppet module ([foreman_puppet](https://github.com/theforeman/foreman_puppet)) |
| --[no-]enable-foreman-plugin-puppetdb                      | Enable 'foreman_plugin_puppetdb' puppet module ([puppetdb_foreman](https://github.com/theforeman/puppetdb_foreman)) |
| --[no-]enable-foreman-plugin-remote-execution              | Enable 'foreman_plugin_remote_execution' puppet module ([foreman_remote_execution](https://theforeman.org/plugins/foreman_remote_execution)) |
| --[no-]enable-foreman-plugin-remote-execution-cockpit      | Enable 'foreman_plugin_remote_execution_cockpit' puppet module ([foreman_remote_execution_cockpit](https://github.com/theforeman/foreman_remote_execution_cockpit)) |
| --[no-]enable-foreman-plugin-rescue                        | Enable 'foreman_plugin_rescue' puppet module ([foreman_rescue](https://github.com/theforeman/foreman_rescue)) |
| --[no-]enable-foreman-plugin-salt                          | Enable 'foreman_plugin_salt' puppet module ([foreman_salt](https://theforeman.org/plugins/foreman_salt)) |
| --[no-]enable-foreman-plugin-setup                         | Enable 'foreman_plugin_setup' puppet module ([foreman_setup](https://github.com/theforeman/foreman_setup)) |
| --[no-]enable-foreman-plugin-snapshot-management           | Enable 'foreman_plugin_snapshot_management' puppet module ([foreman_snapshot_management](https://github.com/ATIX-AG/foreman_snapshot_management)) |
| --[no-]enable-foreman-plugin-statistics                    | Enable 'foreman_plugin_statistics' puppet module ([foreman_statistics](https://theforeman.org/plugins/foreman_statistics)) |
| --[no-]enable-foreman-plugin-tasks                         | Enable 'foreman_plugin_tasks' puppet module ([foreman_tasks](https://theforeman.org/plugins/foreman_tasks)) |
| --[no-]enable-foreman-plugin-templates                     | Enable 'foreman_plugin_templates' puppet module ([foreman_templates](https://theforeman.org/plugins/foreman_templates)) |
| --[no-]enable-foreman-plugin-vault                         | Enable 'foreman_plugin_vault' puppet module ([foreman_vault](https://github.com/theforeman/foreman_vault)) |
| --[no-]enable-foreman-plugin-webhooks                      | Enable 'foreman_plugin_webhooks' puppet module ([foreman_webhooks](https://github.com/theforeman/foreman_webhooks)) |
| --[no-]enable-foreman-plugin-wreckingball                  | Enable 'foreman_plugin_wreckingball' puppet module ([foreman_wreckingball](https://github.com/theforeman/foreman_wreckingball)) |
| --[no-]enable-foreman-compute-ec2                          | Enable 'foreman_compute_ec2' puppet module                   |
| --[no-]enable-foreman-compute-libvirt                      | Enable 'foreman_compute_libvirt' puppet module               |
| --[no-]enable-foreman-compute-openstack                    | Enable 'foreman_compute_openstack' puppet module             |
| --[no-]enable-foreman-compute-ovirt                        | Enable 'foreman_compute_ovirt' puppet module                 |
| --[no-]enable-foreman-compute-vmware                       | Enable 'foreman_compute_vmware' puppet module                |
| --[no-]enable-foreman-proxy-plugin-acd                     | Enable 'foreman_proxy_plugin_acd' puppet module ([smart_proxy_acd](https://github.com/theforeman/smart_proxy_acd)) |
| --[no-]enable-foreman-proxy-plugin-ansible                 | Enable 'foreman_proxy_plugin_ansible' puppet module ([smart_proxy_ansible](https://theforeman.org/plugins/foreman_ansible)) |
| --[no-]enable-foreman-proxy-plugin-dhcp-infoblox           | Enable 'foreman_proxy_plugin_dhcp_infoblox' puppet module ([smart_proxy_dhcp_infoblox](https://github.com/theforeman/smart_proxy_dhcp_infoblox)) |
| --[no-]enable-foreman-proxy-plugin-dhcp-remote-isc         | Enable 'foreman_proxy_plugin_dhcp_remote_isc' puppet module ([smart_proxy_dhcp_remote_isc](https://github.com/theforeman/smart_proxy_dhcp_remote_isc)) |
| --[no-]enable-foreman-proxy-plugin-discovery               | Enable 'foreman_proxy_plugin_discovery' puppet module ([smart_proxy_discovery](https://theforeman.org/plugins/foreman_discovery)) |
| --[no-]enable-foreman-proxy-plugin-dns-infoblox            | Enable 'foreman_proxy_plugin_dns_infoblox' puppet module ([smart_proxy_dns_infoblox](https://github.com/theforeman/smart_proxy_dns_infoblox)) |
| --[no-]enable-foreman-proxy-plugin-dns-powerdns            | Enable 'foreman_proxy_plugin_dns_powerdns' puppet module ([smart_proxy_dns_powerdns](https://github.com/theforeman/smart_proxy_dns_powerdns)) |
| --[no-]enable-foreman-proxy-plugin-dynflow                 | Enable 'foreman_proxy_plugin_dynflow' puppet module ([smart_proxy_dynflow](https://github.com/theforeman/smart_proxy_dynflow)) |
| --[no-]enable-foreman-proxy-plugin-monitoring              | Enable 'foreman_proxy_plugin_monitoring' puppet module ([smart_proxy_monitoring](https://github.com/theforeman/smart_proxy_monitoring)) |
| --[no-]enable-foreman-proxy-plugin-omaha                   | Enable 'foreman_proxy_plugin_omaha' puppet module ([smart_proxy_omaha](https://github.com/theforeman/smart_proxy_omaha)) |
| --[no-]enable-foreman-proxy-plugin-openscap                | Enable 'foreman_proxy_plugin_openscap' puppet module ([smart_proxy_openscap](https://theforeman.org/plugins/foreman_openscap)) |
| --[no-]enable-foreman-proxy-plugin-remote-execution-script | Enable 'foreman_proxy_plugin_remote_execution_script' puppet module ([smart_proxy_remote_execution_script](https://github.com/theforeman/smart_proxy_remote_execution_script)) |
| --[no-]enable-foreman-proxy-plugin-salt                    | Enable 'foreman_proxy_plugin_salt' puppet module ([smart_proxy_salt](https://theforeman.org/plugins/foreman_salt)) |
| --[no-]enable-foreman-proxy-plugin-shellhooks              | Enable 'foreman_proxy_plugin_shellhooks' puppet module ([smart_proxy_shellhooks](https://github.com/theforeman/smart_proxy_shellhooks)) |

#### Available options

**Note:** When you can specify a hash, you need to specify each option individually to `foreman-installer`.

For example the hash `{show_diff => true, stringify_facts => false}` for `--puppet-server-additional-settings` becomes `--puppet-server-additional-settings=show_diff:true --puppet-server-additional-settings=stringify_facts:false`.

| Option                                                       | Description                                                  |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| --foreman-apache                                             | Configure Apache as a reverse proxy for the Foreman server   |
| --foreman-client-ssl-ca                                      | Defines the SSL CA used to communicate with Foreman Proxies  |
| --foreman-client-ssl-cert                                    | Defines the SSL certificate used to communicate with Foreman Proxies |
| --foreman-client-ssl-key                                     | Defines the SSL private key used to communicate with Foreman Proxies |
| --foreman-cors-domains                                       | List of domains that show be allowed for Cross-Origin Resource Sharing |
| --foreman-db-database                                        | Database 'production' database (e.g. foreman)                |
| --foreman-db-host                                            | Database 'production' host                                   |
| --foreman-db-manage                                          | If enabled, will install and configure the database server on this host |
| --foreman-db-manage-rake                                     | if enabled, will run rake jobs, which depend on the database |
| --foreman-db-password                                        | Database 'production' password, default is randomly generated |
| --foreman-db-pool                                            | Database 'production' size of connection pool. When running  as a reverse proxy, the value of `$foreman_service_puma_threads_max` is  used if it's higher than `$db_pool`. |
| --foreman-db-port                                            | Database 'production' port                                   |
| --foreman-db-root-cert                                       | Root cert used to verify SSL connection to postgres          |
| --foreman-db-sslmode                                         | Database 'production' ssl mode                               |
| --foreman-db-username                                        | Database 'production' user (e.g. foreman)                    |
| --foreman-dynflow-manage-services                            | Whether to manage the dynflow services                       |
| --foreman-dynflow-orchestrator-ensure                        | The state of the dynflow orchestrator instance               |
| --foreman-dynflow-redis-url                                  | If set, the redis server is not managed and we use the defined url to connect |
| --foreman-dynflow-worker-concurrency                         | How many concurrent jobs to handle per worker instance       |
| --foreman-dynflow-worker-instances                           | The number of worker instances that should be running        |
| --foreman-email-delivery-method                              | Email delivery method                                        |
| --foreman-email-reply-address                                | Email reply address for emails that Foreman is sending       |
| --foreman-email-sendmail-arguments                           | The arguments to pass to the sendmail binary. Unused when SMTP delivery is used. |
| --foreman-email-sendmail-location                            | The location of the binary to call when sendmail is the delivery method. Unused when SMTP delivery is used. |
| --foreman-email-smtp-address                                 | SMTP server hostname, when delivery method is SMTP           |
| --foreman-email-smtp-authentication                          | SMTP authentication method                                   |
| --foreman-email-smtp-domain                                  | SMTP HELO domain                                             |
| --foreman-email-smtp-password                                | Password for SMTP server auth, if authentication is enabled  |
| --foreman-email-smtp-port                                    | SMTP port                                                    |
| --foreman-email-smtp-user-name                               | Username for SMTP server auth, if authentication is enabled  |
| --foreman-email-subject-prefix                               | Prefix to add to all outgoing email                          |
| --foreman-foreman-service-puma-threads-max                   | Maximum number of threads for every Puma worker              |
| --foreman-foreman-service-puma-threads-min                   | Minimum number of threads for every Puma worker. If no value is specified, this defaults to setting min threads to maximum threads.  Setting min threads equal to max threads has been shown to alleviate  memory leaks and in some cases produce better performance. |
| --foreman-foreman-service-puma-workers                       | Number of workers for Puma. If not set, the value is dynamically calculated based on available number of CPUs and memory. |
| --foreman-foreman-url                                        | URL on which foreman is going to run                         |
| --foreman-gssapi-local-name                                  | Whether to enable GssapiLocalName when using mod_auth_gssapi |
| --foreman-hsts-enabled                                       | Should HSTS enforcement in https requests be enabled         |
| --foreman-http-keytab                                        | Path to keytab to be used for Kerberos authentication on the WebUI. If left empty, it will be automatically determined. |
| --foreman-initial-admin-email                                | Initial E-mail address of the admin user                     |
| --foreman-initial-admin-first-name                           | Initial first name of the admin user                         |
| --foreman-initial-admin-last-name                            | Initial last name of the admin user                          |
| --foreman-initial-admin-locale                               | Initial locale (= language) of the admin user                |
| --foreman-initial-admin-password                             | Initial password of the admin user, default is randomly generated |
| --foreman-initial-admin-timezone                             | Initial timezone of the admin user                           |
| --foreman-initial-admin-username                             | Initial username for the admin user account, default is admin |
| --foreman-initial-location                                   | Name of an initial location                                  |
| --foreman-initial-organization                               | Name of an initial organization                              |
| --foreman-ipa-authentication                                 | Enable configuration for external authentication via IPA     |
| --foreman-ipa-manage-sssd                                    | If ipa_authentication is true, should the installer manage  SSSD? You can disable it if you use another module for SSSD  configuration |
| --foreman-keycloak                                           | Enable Keycloak support. Note this is limited to configuring Apache and still relies on manually running  keycloak-httpd-client-install |
| --foreman-keycloak-app-name                                  | The app name as passed to keycloak-httpd-client-install      |
| --foreman-keycloak-realm                                     | The realm as passed to keycloak-httpd-client-install         |
| --foreman-loggers                                            | Enable or disable specific loggers, e.g. {"sql" => true}     |
| --foreman-logging-layout                                     | Logging layout of the Foreman application                    |
| --foreman-logging-level                                      | Logging level of the Foreman application                     |
| --foreman-logging-type                                       | Logging type of the Foreman application                      |
| --foreman-oauth-active                                       | Enable OAuth authentication for REST API                     |
| --foreman-oauth-consumer-key                                 | OAuth consumer key                                           |
| --foreman-oauth-consumer-secret                              | OAuth consumer secret                                        |
| --foreman-oauth-effective-user                               | User to be used for REST interaction                         |
| --foreman-oauth-map-users                                    | Should Foreman use the foreman_user header to identify API user? |
| --foreman-pam-service                                        | PAM service used for host-based access control in IPA        |
| --foreman-plugin-version                                     | Foreman plugins package version, it's passed to ensure  parameter of package resource can be set to 'installed', 'latest',  'present' only |
| --foreman-rails-cache-store                                  | Set rails cache store                                        |
| --foreman-register-in-foreman                                | Register host in Foreman                                     |
| --foreman-server-port                                        | Defines Apache port for HTTP requests                        |
| --foreman-server-ssl-ca                                      | Defines Apache mod_ssl SSLCACertificateFile setting in Foreman vhost conf file. |
| --foreman-server-ssl-cert                                    | Defines Apache mod_ssl SSLCertificateFile setting in Foreman vhost conf file. |
| --foreman-server-ssl-chain                                   | Defines Apache mod_ssl SSLCertificateChainFile setting in Foreman vhost conf file. |
| --foreman-server-ssl-crl                                     | Defines the Apache mod_ssl SSLCARevocationFile setting in Foreman vhost conf file. |
| --foreman-server-ssl-key                                     | Defines Apache mod_ssl SSLCertificateKeyFile setting in Foreman vhost conf file. |
| --foreman-server-ssl-port                                    | Defines Apache port for HTTPS requests                       |
| --foreman-server-ssl-protocol                                | Defines the Apache mod_ssl SSLProtocol setting in Foreman vhost conf file. |
| --foreman-server-ssl-verify-client                           | Defines the Apache mod_ssl SSLVerifyClient setting in Foreman vhost conf file. |
| --foreman-serveraliases                                      | Server aliases of the VirtualHost in the webserver           |
| --foreman-servername                                         | Server name of the VirtualHost in the webserver              |
| --foreman-ssl                                                | Enable and set require_ssl in Foreman settings (note: requires Apache, SSL does not apply to kickstarts) |
| --foreman-telemetry-logger-enabled                           | Enable telemetry logs - useful for telemetry debugging       |
| --foreman-telemetry-logger-level                             | Telemetry debugging logs level                               |
| --foreman-telemetry-prefix                                   | Prefix for all metrics                                       |
| --foreman-telemetry-prometheus-enabled                       | Enable prometheus telemetry                                  |
| --foreman-telemetry-statsd-enabled                           | Enable statsd telemetry                                      |
| --foreman-telemetry-statsd-host                              | Statsd host in format ip:port, do not use DNS                |
| --foreman-telemetry-statsd-protocol                          | Statsd protocol one of 'statsd', 'statsite' or 'datadog' - currently only statsd is supported |
| --foreman-trusted-proxies                                    | List of trusted IPs / networks. Default: IPv4 and IPV6  localhost addresses. If overwritten, localhost addresses (127.0.0.1/8,  ::1) need to be in trusted_proxies IP list again. More details:  https://api.rubyonrails.org/classes/ActionDispatch/RemoteIp.html |
| --foreman-unattended                                         | Should Foreman manage host provisioning as well              |
| --foreman-unattended-url                                     | URL hosts will retrieve templates from during build (normally http as many installers don't support https) |
| --foreman-version                                            | Foreman package version, it's passed to ensure parameter of  package resource can be set to specific version number, 'latest',  'present' etc. |
| --foreman-websockets-encrypt                                 | Whether to encrypt websocket connections                     |
| --foreman-websockets-ssl-cert                                | SSL certificate file to use when encrypting websocket connections |
| --foreman-websockets-ssl-key                                 | SSL key file to use when encrypting websocket connections    |
| --foreman-cli-foreman-url                                    | URL on which Foreman runs                                    |
| --foreman-cli-manage-root-config                             | Whether to manage /root/.hammer configuration.               |
| --foreman-cli-password                                       | Password for authentication                                  |
| --foreman-cli-refresh-cache                                  | Check API documentation cache status on each request         |
| --foreman-cli-request-timeout                                | API request timeout, set -1 for infinity                     |
| --foreman-cli-ssl-ca-file                                    | Path to SSL certificate authority                            |
| --foreman-cli-use-sessions                                   | Enable using sessions                                        |
| --foreman-cli-username                                       | Username for authentication                                  |
| --foreman-cli-version                                        | foreman-cli package version, it's passed to ensure parameter of package resource can be set to specific version number, 'latest',  'present' etc. |
| --foreman-proxy-autosignfile                                 | Hostname-Whitelisting only: Location of puppets autosign.conf |
| --foreman-proxy-bind-host                                    | Host to bind ports to, e.g. *, localhost, 0.0.0.0            |
| --foreman-proxy-bmc                                          | Enable BMC feature                                           |
| --foreman-proxy-bmc-default-provider                         | BMC default provider.                                        |
| --foreman-proxy-bmc-listen-on                                | BMC proxy to listen on https, http, or both                  |
| --foreman-proxy-bmc-redfish-verify-ssl                       | BMC Redfish verify ssl.                                      |
| --foreman-proxy-bmc-ssh-key                                  | BMC SSH key location.                                        |
| --foreman-proxy-bmc-ssh-powercycle                           | BMC SSH powercycle command.                                  |
| --foreman-proxy-bmc-ssh-poweroff                             | BMC SSH poweroff command.                                    |
| --foreman-proxy-bmc-ssh-poweron                              | BMC SSH poweron command.                                     |
| --foreman-proxy-bmc-ssh-powerstatus                          | BMC SSH powerstatus command.                                 |
| --foreman-proxy-bmc-ssh-user                                 | BMC SSH user.                                                |
| --foreman-proxy-dhcp                                         | Enable DHCP feature                                          |
| --foreman-proxy-dhcp-additional-interfaces                   | Additional DHCP listen interfaces (in addition to  dhcp_interface). Note: as opposed to dhcp_interface *no* subnet will be  provisioned for any of the additional DHCP listen interfaces. Please  configure any additional subnets using `dhcp::pool` and related resource types (provided by the theforeman/puppet-dhcp module). |
| --foreman-proxy-dhcp-config                                  | DHCP config file path                                        |
| --foreman-proxy-dhcp-failover-address                        | Address for DHCP to listen for connections from its peer     |
| --foreman-proxy-dhcp-failover-port                           | Port for DHCP to listen & communicate with it DHCP peer      |
| --foreman-proxy-dhcp-gateway                                 | DHCP pool gateway                                            |
| --foreman-proxy-dhcp-interface                               | DHCP listen interface                                        |
| --foreman-proxy-dhcp-ipxe-bootstrap                          | Enable or disable iPXE bootstrap(discovery) feature          |
| --foreman-proxy-dhcp-ipxefilename                            | iPXE DHCP "filename" value, If not specified, it's  determined dynamically. When the templates feature is enabled, the  template_url is used. |
| --foreman-proxy-dhcp-key-name                                | DHCP key name                                                |
| --foreman-proxy-dhcp-key-secret                              | DHCP password                                                |
| --foreman-proxy-dhcp-leases                                  | DHCP leases file                                             |
| --foreman-proxy-dhcp-listen-on                               | DHCP proxy to listen on https, http, or both                 |
| --foreman-proxy-dhcp-load-balance                            | Cutoff after which load balancing is disabled                |
| --foreman-proxy-dhcp-load-split                              | Split leases between Primary and Secondary. 255 means Primary is chiefly responsible. 0 means Secondary is chiefly responsible. |
| --foreman-proxy-dhcp-manage-acls                             | Whether to manage DHCP directory ACLs. This allows the Foreman Proxy user to access even if the directory mode is 0750. |
| --foreman-proxy-dhcp-managed                                 | The DHCP daemon is managed by this module                    |
| --foreman-proxy-dhcp-max-response-delay                      | Seconds after it will assume that connection has failed to DHCP peer |
| --foreman-proxy-dhcp-max-unacked-updates                     | How many BNDUPD messages DHCP can send before it receives a BNDACK from the local system |
| --foreman-proxy-dhcp-mclt                                    | Seconds for which a lease may be renewed by either failover peer without contacting the other |
| --foreman-proxy-dhcp-nameservers                             | DHCP nameservers, comma-separated                            |
| --foreman-proxy-dhcp-netmask                                 | DHCP server netmask value, defaults otherwise to value based on IP of dhcp_interface |
| --foreman-proxy-dhcp-network                                 | DHCP server network value, defaults otherwise to value based on IP of dhcp_interface |
| --foreman-proxy-dhcp-node-type                               | DHCP node type                                               |
| --foreman-proxy-dhcp-omapi-port                              | DHCP server OMAPI port                                       |
| --foreman-proxy-dhcp-option-domain                           | DHCP use the dhcpd config option domain-name                 |
| --foreman-proxy-dhcp-peer-address                            | The other DHCP servers address                               |
| --foreman-proxy-dhcp-ping-free-ip                            | Perform ICMP and TCP ping when searching free IPs from the  pool. This makes sure that active IP address is not suggested as free,  however in locked down network environments this can cause no free IPs. |
| --foreman-proxy-dhcp-provider                                | DHCP provider for the DHCP module                            |
| --foreman-proxy-dhcp-pxefilename                             | DHCP "filename" value, defaults otherwise to pxelinux.0      |
| --foreman-proxy-dhcp-pxeserver                               | DHCP "next-server" value, defaults otherwise to IP of dhcp_interface |
| --foreman-proxy-dhcp-range                                   | Space-separated DHCP pool range                              |
| --foreman-proxy-dhcp-search-domains                          | DHCP search domains option                                   |
| --foreman-proxy-dhcp-server                                  | Address of DHCP server to manage                             |
| --foreman-proxy-dhcp-subnets                                 | Subnets list to restrict DHCP management to                  |
| --foreman-proxy-dns                                          | Enable DNS feature                                           |
| --foreman-proxy-dns-forwarders                               | DNS forwarders                                               |
| --foreman-proxy-dns-interface                                | DNS interface                                                |
| --foreman-proxy-dns-listen-on                                | DNS proxy to listen on https, http, or both                  |
| --foreman-proxy-dns-managed                                  | The DNS daemon is managed by this module. Only supported for the nsupdate and nsupdate_gss DNS providers. |
| --foreman-proxy-dns-provider                                 | DNS provider                                                 |
| --foreman-proxy-dns-reverse                                  | DNS reverse zone name                                        |
| --foreman-proxy-dns-server                                   | Address of DNS server to manage                              |
| --foreman-proxy-dns-tsig-keytab                              | Kerberos keytab for DNS updates using GSS-TSIG authentication |
| --foreman-proxy-dns-tsig-principal                           | Kerberos principal for DNS updates using GSS-TSIG authentication |
| --foreman-proxy-dns-ttl                                      | DNS default TTL override                                     |
| --foreman-proxy-dns-zone                                     | DNS zone name                                                |
| --foreman-proxy-ensure-packages-version                      | control extra packages version, it's passed to ensure parameter of package resource |
| --foreman-proxy-foreman-base-url                             | Base Foreman URL used for REST interaction                   |
| --foreman-proxy-foreman-ssl-ca                               | SSL CA used to verify connections when accessing the Foreman API. When not specified, the ssl_ca is used instead. |
| --foreman-proxy-foreman-ssl-cert                             | SSL client certificate used when accessing the Foreman API When not specified, the ssl_cert is used instead. |
| --foreman-proxy-foreman-ssl-key                              | Corresponding key to a foreman_ssl_cert certificate When not specified, the ssl_key is used instead. |
| --foreman-proxy-freeipa-config                               | Path to FreeIPA default.conf configuration file              |
| --foreman-proxy-freeipa-remove-dns                           | Remove DNS entries from FreeIPA when deleting hosts from realm |
| --foreman-proxy-groups                                       | Array of additional groups for the foreman proxy user        |
| --foreman-proxy-http                                         | Enable HTTP                                                  |
| --foreman-proxy-http-port                                    | HTTP port to listen on (if http is enabled)                  |
| --foreman-proxy-httpboot                                     | Enable HTTPBoot feature. In most deployments this requires HTTP to be enabled as well. |
| --foreman-proxy-httpboot-listen-on                           | HTTPBoot proxy to listen on https, http, or both             |
| --foreman-proxy-keyfile                                      | DNS server keyfile path                                      |
| --foreman-proxy-libvirt-connection                           | Connection string of libvirt DNS/DHCP provider (e.g. "qemu:///system") |
| --foreman-proxy-libvirt-network                              | Network for libvirt DNS/DHCP provider                        |
| --foreman-proxy-log                                          | Foreman proxy log file, 'STDOUT', 'SYSLOG' or 'JOURNAL'      |
| --foreman-proxy-log-buffer                                   | Log buffer size                                              |
| --foreman-proxy-log-buffer-errors                            | Additional log buffer size for errors                        |
| --foreman-proxy-log-level                                    | Foreman proxy log level                                      |
| --foreman-proxy-logs                                         | Enable Logs (log buffer) feature                             |
| --foreman-proxy-logs-listen-on                               | Logs proxy to listen on https, http, or both                 |
| --foreman-proxy-manage-puppet-group                          | Whether to ensure the $puppet_group exists.  Also ensures  group owner of ssl keys and certs is $puppet_group Not applicable when  ssl is false. |
| --foreman-proxy-oauth-consumer-key                           | OAuth key to be used for REST interaction                    |
| --foreman-proxy-oauth-consumer-secret                        | OAuth secret to be used for REST interaction                 |
| --foreman-proxy-oauth-effective-user                         | User to be used for REST interaction                         |
| --foreman-proxy-puppet                                       | Enable Puppet module for environment imports and Puppet runs |
| --foreman-proxy-puppet-api-timeout                           | Timeout in seconds when accessing Puppet environment classes API |
| --foreman-proxy-puppet-group                                 | Groups of Foreman proxy user                                 |
| --foreman-proxy-puppet-listen-on                             | Protocols for the Puppet feature to listen on                |
| --foreman-proxy-puppet-ssl-ca                                | SSL CA used to verify connections when accessing the Puppet master API |
| --foreman-proxy-puppet-ssl-cert                              | SSL certificate used when accessing the Puppet master API    |
| --foreman-proxy-puppet-ssl-key                               | SSL private key used when accessing the Puppet master API    |
| --foreman-proxy-puppet-url                                   | URL of the Puppet master itself for API requests             |
| --foreman-proxy-puppetca                                     | Enable Puppet CA feature                                     |
| --foreman-proxy-puppetca-certificate                         | Token-whitelisting only: Certificate to use when encrypting tokens (undef to use SSL certificate) |
| --foreman-proxy-puppetca-listen-on                           | Protocols for the Puppet CA feature to listen on             |
| --foreman-proxy-puppetca-provider                            | Whether to use puppetca_hostname_whitelisting or puppetca_token_whitelisting |
| --foreman-proxy-puppetca-sign-all                            | Token-whitelisting only: Whether to sign all CSRs without checking their token |
| --foreman-proxy-puppetca-token-ttl                           | Token-whitelisting only: Fallback time (in minutes) after which tokens will expire |
| --foreman-proxy-puppetca-tokens-file                         | Token-Whitelisting only: Location of the tokens.yaml         |
| --foreman-proxy-puppetdir                                    | Puppet var directory                                         |
| --foreman-proxy-realm                                        | Enable realm management feature                              |
| --foreman-proxy-realm-keytab                                 | Kerberos keytab path to authenticate realm updates           |
| --foreman-proxy-realm-listen-on                              | Realm proxy to listen on https, http, or both                |
| --foreman-proxy-realm-principal                              | Kerberos principal for realm updates                         |
| --foreman-proxy-realm-provider                               | Realm management provider                                    |
| --foreman-proxy-register-in-foreman                          | Register proxy back in Foreman                               |
| --foreman-proxy-registered-name                              | Proxy name which is registered in Foreman                    |
| --foreman-proxy-registered-proxy-url                         | Proxy URL which is registered in Foreman                     |
| --foreman-proxy-registration                                 | Enable Registration feature                                  |
| --foreman-proxy-registration-listen-on                       | Registration proxy to listen on https, http, or both         |
| --foreman-proxy-registration-url                             | URL that hosts will connect to when registering              |
| --foreman-proxy-ssl                                          | Enable SSL, ensure feature is added with "https://" protocol if true |
| --foreman-proxy-ssl-ca                                       | SSL CA to validate the client certificates used to access the proxy |
| --foreman-proxy-ssl-cert                                     | SSL certificate to be used to run the foreman proxy via https. |
| --foreman-proxy-ssl-disabled-ciphers                         | List of OpenSSL cipher suite names that will be disabled from the default |
| --foreman-proxy-ssl-key                                      | Corresponding key to a ssl_cert certificate                  |
| --foreman-proxy-ssl-port                                     | HTTPS port to listen on (if ssl is enabled)                  |
| --foreman-proxy-ssldir                                       | Puppet CA SSL directory                                      |
| --foreman-proxy-template-url                                 | URL a client should use for provisioning templates           |
| --foreman-proxy-templates                                    | Enable templates feature                                     |
| --foreman-proxy-templates-listen-on                          | Templates proxy to listen on https, http, or both            |
| --foreman-proxy-tftp                                         | Enable TFTP feature                                          |
| --foreman-proxy-tftp-dirs                                    | Directories to be create in $tftp_root                       |
| --foreman-proxy-tftp-listen-on                               | TFTP proxy to listen on https, http, or both                 |
| --foreman-proxy-tftp-manage-wget                             | If enabled will install the wget package                     |
| --foreman-proxy-tftp-managed                                 | The TFTP daemon is managed by this module.                   |
| --foreman-proxy-tftp-replace-grub2-cfg                       | Determines if grub2.cfg will be replaced                     |
| --foreman-proxy-tftp-root                                    | TFTP root directory                                          |
| --foreman-proxy-tftp-servername                              | Defines the TFTP Servername to use, overrides the name in the subnet declaration |
| --foreman-proxy-tls-disabled-versions                        | List of TLS versions that will be disabled from the default  |
| --foreman-proxy-trusted-hosts                                | Only hosts listed will be permitted, empty array to disable authorization |
| --foreman-proxy-version                                      | foreman package version, it's passed to ensure parameter of  package resource can be set to specific version number, 'latest',  'present' etc. |
| --puppet-additional-settings                                 | A hash of additional main settings.                          |
| --puppet-agent                                               | Should a puppet agent be installed                           |
| --puppet-agent-additional-settings                           | A hash of additional agent settings. Example: {stringify_facts => true} |
| --puppet-agent-noop                                          | Run the agent in noop mode.                                  |
| --puppet-agent-restart-command                               | The command which gets excuted on puppet service restart     |
| --puppet-allow-any-crl-auth                                  | Allow any authentication for the CRL. This is needed on the puppet CA to accept clients from a the puppet CA proxy. |
| --puppet-auth-allowed                                        | An array of authenticated nodes allowed to access all catalog and node endpoints. default to ['$1'] |
| --puppet-auth-template                                       | Use a custom template for /etc/puppetlabs/puppet/auth.conf   |
| --puppet-autosign                                            | If set to a boolean, autosign is enabled or disabled for all incoming requests. Otherwise this has to be set to the full file path  of an autosign.conf file or an autosign script. If this is set to a  script, make sure that script considers the content of autosign.conf as  otherwise Foreman functionality might be broken. |
| --puppet-autosign-content                                    | If set, write the autosign file content using the value of  this parameter. Cannot be used at the same time as autosign_entries For  example, could be a string, or file('another_module/autosign.sh') or  template('another_module/autosign.sh.erb') |
| --puppet-autosign-entries                                    | A list of certnames or domain name globs whose certificate requests will automatically be signed. Defaults to an empty Array. |
| --puppet-autosign-mode                                       | mode of the autosign file/script                             |
| --puppet-autosign-source                                     | If set, use this as the source for the autosign file, instead of autosign_content. |
| --puppet-ca-crl-filepath                                     | Path to CA CRL file, dynamically resolves based on $::server_ca status. |
| --puppet-ca-port                                             | Puppet CA port                                               |
| --puppet-ca-server                                           | Use a different ca server. Should be either a string with the location of the ca_server or 'false'. |
| --puppet-classfile                                           | The file in which puppet agent stores a list of the classes associated with the retrieved configuration. |
| --puppet-client-certname                                     | The node's certificate name, and the unique identifier it uses when requesting catalogs. |
| --puppet-client-package                                      | Install a custom package to provide the puppet client        |
| --puppet-codedir                                             | Override the puppet code directory.                          |
| --puppet-cron-cmd                                            | Specify command to launch when runmode is set 'cron'.        |
| --puppet-dir                                                 | Override the puppet directory.                               |
| --puppet-dir-group                                           | Group of the base puppet directory, used when puppet::server is false. |
| --puppet-dir-owner                                           | Owner of the base puppet directory, used when puppet::server is false. |
| --puppet-dns-alt-names                                       | Use additional DNS names when generating a certificate.  Defaults to an empty Array. |
| --puppet-environment                                         | Default environment of the Puppet agent                      |
| --puppet-group                                               | Override the name of the puppet group.                       |
| --puppet-hiera-config                                        | The hiera configuration file.                                |
| --puppet-http-connect-timeout                                | The maximum amount of time an agent waits when establishing an HTTP connection. |
| --puppet-http-read-timeout                                   | The time an agent waits for one block to be read from an  HTTP connection. If nothing is read after the elapsed interval then the  connection will be closed. |
| --puppet-logdir                                              | Override the log directory.                                  |
| --puppet-manage-packages                                     | Should this module install packages or not. Can also install only server packages with value of 'server' or only agent packages with 'agent'. |
| --puppet-module-repository                                   | Use a different puppet module repository                     |
| --puppet-package-install-options                             | Flags that should be passed to the package manager during  installation. Defaults to undef. May be a string, an array or a hash,  see Puppet Package resource documentation for the provider matching your package manager |
| --puppet-package-provider                                    | The provider used to install the agent. Defaults to chocolatey on Windows Defaults to undef elsewhere |
| --puppet-package-source                                      | The location of the file to be used by the agent's package  resource. Defaults to undef. If 'windows' or 'msi' are used as the  provider then this setting is required. |
| --puppet-pluginfactsource                                    | URL to retrieve Puppet facts from during pluginsync          |
| --puppet-pluginsource                                        | URL to retrieve Puppet plugins from during pluginsync        |
| --puppet-port                                                | Override the port of the master we connect to.               |
| --puppet-postrun-command                                     | A command which gets excuted after each Puppet run           |
| --puppet-prerun-command                                      | A command which gets excuted before each Puppet run          |
| --puppet-puppetmaster                                        | Hostname of your puppetmaster (server directive in puppet.conf) |
| --puppet-report                                              | Send reports to the Puppet Master                            |
| --puppet-run-hour                                            | The hour at which to run the puppet agent when runmode is cron or systemd.timer. |
| --puppet-run-minute                                          | The minute at which to run the puppet agent when runmode is cron or systemd.timer. |
| --puppet-rundir                                              | Override the PID directory.                                  |
| --puppet-runinterval                                         | Set up the interval (in seconds) to run the puppet agent.    |
| --puppet-runmode                                             | Select the mode to setup the puppet agent.                   |
| --puppet-server                                              | Should a puppet master be installed as well as the client    |
| --puppet-server-acceptor-threads                             | This sets the number of threads that the webserver will  dedicate to accepting socket connections for unencrypted HTTP traffic.  If not provided, the webserver defaults to the number of virtual cores  on the host divided by 8, with a minimum of 1 and maximum of 4. |
| --puppet-server-additional-settings                          | A hash of additional settings. Example: {trusted_node_data => true, ordering => 'manifest'} |
| --puppet-server-admin-api-whitelist                          | The whitelist of clients that can query the puppet-admin-api endpoint Defaults to [ '127.0.0.1', '::1', $::ipaddress ] |
| --puppet-server-allow-header-cert-info                       | Enable client authentication over HTTP Headers Defaults to false, is also activated by the $server_http setting |
| --puppet-server-ca                                           | Provide puppet CA                                            |
| --puppet-server-ca-allow-auth-extensions                     | Allow CA to sign certificate requests that have authorization extensions Defaults to false |
| --puppet-server-ca-allow-sans                                | Allow CA to sign certificate requests that have Subject Alternative Names Defaults to false |
| --puppet-server-ca-auth-required                             | Whether client certificates are needed to access the puppet-admin api Defaults to true |
| --puppet-server-ca-client-self-delete                        | Adds a rule to auth.conf, that allows a client to delete its own certificate Defaults to false |
| --puppet-server-ca-client-whitelist                          | The whitelist of client certificates that can query the  certificate-status endpoint Defaults to [ '127.0.0.1', '::1',  $::ipaddress ] |
| --puppet-server-ca-crl-sync                                  | Sync puppet CA crl file to compile masters, Puppet CA Must be the Puppetserver for the compile masters. Defaults to false. |
| --puppet-server-ca-enable-infra-crl                          | Enable the separate CRL for Puppet infrastructure nodes Defaults to false |
| --puppet-server-certname                                     | The name to use when handling certificates.                  |
| --puppet-server-check-for-updates                            | Should the puppetserver phone home to check for available updates? Defaults to true |
| --puppet-server-cipher-suites                                | List of SSL ciphers to use in negotiation Defaults to [  'TLS_RSA_WITH_AES_256_CBC_SHA256', 'TLS_RSA_WITH_AES_256_CBC_SHA',  'TLS_RSA_WITH_AES_128_CBC_SHA256', 'TLS_RSA_WITH_AES_128_CBC_SHA', ] |
| --puppet-server-common-modules-path                          | Common modules paths                                         |
| --puppet-server-compile-mode                                 | Used to control JRuby's "CompileMode", which may improve performance. Defaults to undef (off). |
| --puppet-server-connect-timeout                              | How long the server will wait for a response to a connection attempt |
| --puppet-server-crl-enable                                   | Turn on crl checking. Defaults to true when server_ca is  true. Otherwise Defaults to false. Note unless you are using an external CA. It is recommended to set this to true. See $server_ca_crl_sync to  enable syncing from CA Puppet Master |
| --puppet-server-custom-trusted-oid-mapping                   | A hash of custom trusted oid mappings. Defaults to undef  Example: { 1.3.6.1.4.1.34380.1.2.1.1 => { shortname =>  'myshortname' } } |
| --puppet-server-default-manifest                             | Toggle if default_manifest setting should be added to the [main] section |
| --puppet-server-default-manifest-content                     | A string to set the content of the default_manifest If set to '' it will not manage the file |
| --puppet-server-default-manifest-path                        | A string setting the path to the default_manifest            |
| --puppet-server-dir                                          | Puppet configuration directory                               |
| --puppet-server-environment-class-cache-enabled              | Enable environment class cache in conjunction with the use of the environment_classes API. Defaults to false |
| --puppet-server-environment-timeout                          | Timeout for cached compiled catalogs (10s, 5m, ...)          |
| --puppet-server-environment-vars                             | A hash of environment variables and their values which the  puppetserver is allowed to see. To define literal values double quotes  should be used: {'MYVAR': '"MYVALUE"'}. Omitting the inner quotes might  lead to unexpected results since the HOCON format does not allow  characters like $, curly/square brackets or = in unquoted strings. Multi line strings are also allowed as long as they are triple quoted:  {'MYVAR': "\"\"\"MY\nMULTI\nLINE\nVALUE\"\"\""} To pass an existing  variable use substitutions: {'MYVAR': '${MYVAR}'}. |
| --puppet-server-environments-group                           | The group owning the environments directory                  |
| --puppet-server-environments-mode                            | Environments directory mode.                                 |
| --puppet-server-environments-owner                           | The owner of the environments directory                      |
| --puppet-server-envs-dir                                     | List of directories which hold puppet environments           |
| --puppet-server-envs-target                                  | Indicates that $envs_dir should be a symbolic link to this target |
| --puppet-server-external-nodes                               | External nodes classifier executable                         |
| --puppet-server-foreman                                      | Should foreman integration be installed                      |
| --puppet-server-foreman-facts                                | Should foreman receive facts from puppet                     |
| --puppet-server-foreman-ssl-ca                               | SSL CA of the Foreman server                                 |
| --puppet-server-foreman-ssl-cert                             | Client certificate for authenticating against Foreman server |
| --puppet-server-foreman-ssl-key                              | Key for authenticating against Foreman server                |
| --puppet-server-foreman-url                                  | Foreman URL                                                  |
| --puppet-server-git-branch-map                               | Git branch to puppet env mapping for the default post receive hook |
| --puppet-server-git-repo                                     | Use git repository as a source of modules                    |
| --puppet-server-git-repo-group                               | Git repository group                                         |
| --puppet-server-git-repo-mode                                | Git repository mode                                          |
| --puppet-server-git-repo-path                                | Git repository path                                          |
| --puppet-server-git-repo-user                                | Git repository user                                          |
| --puppet-server-group                                        | Name of the puppetmaster group.                              |
| --puppet-server-http                                         | Should the puppet master listen on HTTP as well as HTTPS. Useful for load balancer or reverse proxy scenarios. |
| --puppet-server-http-port                                    | Puppet master HTTP port; defaults to 8139.                   |
| --puppet-server-idle-timeout                                 | How long the server will wait for a response on an existing connection |
| --puppet-server-ip                                           | Bind ip address of the puppetmaster                          |
| --puppet-server-jolokia-metrics-whitelist                    | The whitelist of clients that can query the jolokia /metrics/v2 endpoint |
| --puppet-server-jruby-gem-home                               | Where jruby gems are located for puppetserver                |
| --puppet-server-jvm-cli-args                                 | Java options to use when using puppetserver subcommands (eg puppetserver gem). |
| --puppet-server-jvm-config                                   | Specify the puppetserver jvm configuration file.             |
| --puppet-server-jvm-extra-args                               | Additional java options to pass through. This can be used  for Java versions prior to Java 8 to specify the max perm space to use:  For example: '-XX:MaxPermSize=128m'. |
| --puppet-server-jvm-java-bin                                 | Set the default java to use.                                 |
| --puppet-server-jvm-max-heap-size                            | Specify the maximum jvm heap space.                          |
| --puppet-server-jvm-min-heap-size                            | Specify the minimum jvm heap space.                          |
| --puppet-server-manage-user                                  | Whether to manage the server user resource                   |
| --puppet-server-max-active-instances                         | Max number of active jruby instances. Defaults to processor count |
| --puppet-server-max-open-files                               | Increase the max open files limit for Puppetserver. Defaults to undef |
| --puppet-server-max-queued-requests                          | The maximum number of requests that may be queued waiting to borrow a JRuby from the pool. Defaults to 0 (disabled). |
| --puppet-server-max-requests-per-instance                    | Max number of requests a jruby instances will handle. Defaults to 0 (disabled) |
| --puppet-server-max-retry-delay                              | Sets the upper limit for the random sleep set as a  Retry-After header on 503 responses returned when max-queued-requests is enabled. Defaults to 1800. |
| --puppet-server-max-threads                                  | This sets the maximum number of threads assigned to  responding to HTTP and/or HTTPS requests for a single webserver,  effectively changing how many concurrent requests can be made at one  time. If not provided, the webserver defaults to 200. |
| --puppet-server-metrics-allowed                              | Specify metrics to allow in addition to those in the default list Defaults to undef |
| --puppet-server-metrics-graphite-enable                      | Enable or disable Graphite metrics reporter. Defaults to false |
| --puppet-server-metrics-graphite-host                        | Graphite server host. Defaults to "127.0.0.1"                |
| --puppet-server-metrics-graphite-interval                    | How often to send metrics to graphite (in seconds) Defaults to 5 |
| --puppet-server-metrics-graphite-port                        | Graphite server port. Defaults to 2003                       |
| --puppet-server-metrics-jmx-enable                           | Enable or disable JMX metrics reporter. Defaults to true     |
| --puppet-server-metrics-server-id                            | A server id that will be used as part of the namespace for metrics produced Defaults to $fqdn |
| --puppet-server-multithreaded                                | Use multithreaded jruby. Defaults to false.                  |
| --puppet-server-package                                      | Custom package name for puppet master                        |
| --puppet-server-parser                                       | Sets the parser to use. Valid options are 'current' or 'future'. Defaults to 'current'. |
| --puppet-server-port                                         | Puppet master port                                           |
| --puppet-server-post-hook-content                            | Which template to use for git post hook                      |
| --puppet-server-post-hook-name                               | Name of a git hook                                           |
| --puppet-server-puppet-basedir                               | Where is the puppet code base located                        |
| --puppet-server-puppetserver-auth-template                   | Template for generating /etc/puppetlabs/puppetserver/conf.d/auth.conf |
| --puppet-server-puppetserver-dir                             | The path of the puppetserver config dir                      |
| --puppet-server-puppetserver-experimental                    | Enable the /puppet/experimental route? Defaults to true      |
| --puppet-server-puppetserver-logdir                          | The path of the puppetserver log dir                         |
| --puppet-server-puppetserver-metrics                         | Enable puppetserver http-client metrics Defaults to true, matching defaults in Puppetserver 5+. |
| --puppet-server-puppetserver-profiler                        | Enable JRuby profiling. Defaults to true, matching defaults  in Puppetserver 5+. If set to false, compiler and function metrics will  not be available, (eg. when enabling graphite metrics) |
| --puppet-server-puppetserver-rundir                          | The path of the puppetserver run dir                         |
| --puppet-server-puppetserver-telemetry                       | Enable Dropsonde telemetry. Defaults to true, matching  defaults in Puppetserver 7. If set to false, will disable module metrics submission via Dropsonde. Note that is only valid since Puppetserver 7. |
| --puppet-server-puppetserver-trusted-agents                  | Certificate names of puppet agents that are allowed to fetch *all* catalogs Defaults to [] and all agents are only allowed to fetch  their own catalogs. |
| --puppet-server-puppetserver-trusted-certificate-extensions  | An array of hashes of certificate extensions and values to be used in auth.conf |
| --puppet-server-puppetserver-vardir                          | The path of the puppetserver var dir                         |
| --puppet-server-puppetserver-version                         | The version of puppetserver installed (or being installed)  Unfortunately, different versions of puppetserver need configuring  differently. The default is derived from the installed puppet version.  Generally it's not needed to override this but when upgrading it might  be. |
| --puppet-server-reports                                      | List of report types to include on the puppetmaster          |
| --puppet-server-request-timeout                              | Timeout in node.rb script for fetching catalog from Foreman (in seconds). |
| --puppet-server-ruby-load-paths                              | List of ruby paths Defaults based on $::puppetversion        |
| --puppet-server-selector-threads                             | This sets the number of selectors that the webserver will  dedicate to processing events on connected sockets for unencrypted HTTPS traffic. If not provided, the webserver defaults to the minimum of:  virtual cores on the host divided by 2 or max-threads divided by 16,  with a minimum of 1. |
| --puppet-server-ssl-acceptor-threads                         | This sets the number of threads that the webserver will  dedicate to accepting socket connections for encrypted HTTPS traffic. If not provided, defaults to the number of virtual cores on the host  divided by 8, with a minimum of 1 and maximum of 4. |
| --puppet-server-ssl-chain-filepath                           | Path to certificate chain for puppetserver Only used when $ca is true Defaults to "${ssl_dir}/ca/ca_crt.pem" |
| --puppet-server-ssl-dir                                      | SSL directory                                                |
| --puppet-server-ssl-dir-manage                               | Toggle if ssl_dir should be added to the [master]  configuration section. This is necessary to disable in case CA is  delegated to a separate instance |
| --puppet-server-ssl-key-manage                               | Toggle if "private_keys/${::puppet::server::certname}.pem"  should be created with default user and group. This is used in the  default Forman setup to reuse the key for TLS communication. |
| --puppet-server-ssl-protocols                                | Array of SSL protocols to use. Defaults to [ 'TLSv1.2' ]     |
| --puppet-server-ssl-selector-threads                         | This sets the number of selectors that the webserver will  dedicate to processing events on connected sockets for encrypted HTTPS  traffic. Defaults to the number of virtual cores on the host divided by  2, with a minimum of 1 and maximum of 4. The number of selector threads  actually used by Jetty is twice the number of selectors requested. For  example, if a value of 3 is specified for the ssl-selector-threads  setting, Jetty will actually use 6 selector threads. |
| --puppet-server-storeconfigs                                 | Whether to enable storeconfigs                               |
| --puppet-server-strict-variables                             | if set to true, it will throw parse errors when accessing undeclared variables. |
| --puppet-server-trusted-external-command                     | The external trusted facts script to use.                    |
| --puppet-server-use-legacy-auth-conf                         | Should the puppetserver use the legacy puppet auth.conf?  Defaults to false (the puppetserver will use its own conf.d/auth.conf)  Note that Puppetserver 7 has dropped this option. |
| --puppet-server-user                                         | Name of the puppetmaster user.                               |
| --puppet-server-version                                      | Custom package version for puppet master                     |
| --puppet-server-versioned-code-content                       | Contains the path to an executable script that Puppet Server invokes when on static_file_content requests. Defaults to undef |
| --puppet-server-versioned-code-id                            | The path to an executable script that Puppet Server invokes to generate a code_id Defaults to undef |
| --puppet-server-web-idle-timeout                             | Time in ms that Jetty allows a socket to be idle, after  processing has completed. Defaults to 30000, using the Jetty default of  30s |
| --puppet-service-name                                        | The name of the puppet agent service.                        |
| --puppet-sharedir                                            | Override the system data directory.                          |
| --puppet-show-diff                                           | Show and report changed files with diff output               |
| --puppet-splay                                               | Switch to enable a random amount of time to sleep before each run. |
| --puppet-splaylimit                                          | The maximum time to delay before runs. Defaults to being the same as the run interval. This setting can be a time interval in  seconds (30 or 30s), minutes (30m), hours (6h), days (2d), or years  (5y). |
| --puppet-srv-domain                                          | Search domain for SRV records                                |
| --puppet-ssldir                                              | Override where SSL certificates are kept.                    |
| --puppet-syslogfacility                                      | Facility name to use when logging to syslog                  |
| --puppet-systemd-cmd                                         | Specify command to launch when runmode is set 'systemd.timer'. |
| --puppet-systemd-randomizeddelaysec                          | Adds a random delay between 0 and this value (in seconds) to the timer. Only relevant when runmode is 'systemd.timer'. |
| --puppet-systemd-unit-name                                   | The name of the puppet systemd units.                        |
| --puppet-unavailable-runmodes                                | Runmodes that are not available for the current system. This module will not try to disable these modes. Default is [] on Linux,  ['cron', 'systemd.timer'] on Windows and ['systemd.timer'] on other  systems. |
| --puppet-use-srv-records                                     | Whether DNS SRV records will be used to resolve the Puppet master |
| --puppet-usecacheonfailure                                   | Switch to enable use of cached catalog on failure of run.    |
| --puppet-user                                                | Override the name of the puppet user.                        |
| --puppet-vardir                                              | Override the puppet var directory.                           |
| --puppet-version                                             | Specify a specific version of a package to install. The  version should be the exact match for your distro. You can also use  certain values like 'latest'. Note that when you specify exact versions  you should also override $server_version since that defaults to  $version. |
| --foreman-plugin-column-view-columns                         | an hash of columns to add to the configuration               |
| --foreman-plugin-default-hostgroup-hostgroups                | An array of hashes of hostgroup names and facts to add to the configuration |
| --foreman-plugin-memcache-compress                           | will gzip-compress values larger than 1K                     |
| --foreman-plugin-memcache-expires-in                         | global default for key TTL in seconds                        |
| --foreman-plugin-memcache-hosts                              | an array of hosts running memcache                           |
| --foreman-plugin-memcache-namespace                          | prepends each key with this value to provide simple namespacing |
| --foreman-plugin-puppetdb-address                            | Address of puppetdb API.                                     |
| --foreman-plugin-puppetdb-api-version                        | PuppetDB API version.                                        |
| --foreman-plugin-puppetdb-ssl-ca-file                        | CA certificate file which will be used to connect to the PuppetDB API. |
| --foreman-plugin-puppetdb-ssl-certificate                    | Certificate file which will be used to connect to the PuppetDB API. |
| --foreman-plugin-puppetdb-ssl-private-key                    | Private key file which will be used to connect to the PuppetDB API. |
| --foreman-plugin-remote-execution-cockpit-origins            | Specify additional Cockpit Origins to configure cockpit.conf. The $foreman_url is included by default. |
| --foreman-plugin-tasks-automatic-cleanup                     | Enable automatic task cleanup using a cron job               |
| --foreman-plugin-tasks-backup                                | Enable creating a backup of cleaned up tasks in CSV format when automatic_cleanup is enabled |
| --foreman-plugin-tasks-cron-line                             | Cron line defining when the cleanup cron job should run      |
| --foreman-compute-ec2-version                                | Package version to install, defaults to installed            |
| --foreman-compute-libvirt-version                            | Package version to install, defaults to installed            |
| --foreman-compute-openstack-version                          | Package version to install, defaults to installed            |
| --foreman-compute-ovirt-version                              | Package version to install, defaults to installed            |
| --foreman-compute-vmware-version                             | Package version to install, defaults to installed            |
| --foreman-proxy-plugin-acd-enabled                           | enables/disables the acd plugin                              |
| --foreman-proxy-plugin-acd-listen-on                         | proxy feature listens on http, https, or both                |
| --foreman-proxy-plugin-acd-version                           | plugin package version, it's passed to ensure parameter of  package resource can be set to specific version number, 'latest',  'present' etc. |
| --foreman-proxy-plugin-ansible-ansible-dir                   | Ansible directory to search for available roles              |
| --foreman-proxy-plugin-ansible-callback                      | The callback plugin to configure in ansible.cfg              |
| --foreman-proxy-plugin-ansible-collections-paths             | Paths where to look for ansible collections                  |
| --foreman-proxy-plugin-ansible-enabled                       | Enables/disables the ansible plugin                          |
| --foreman-proxy-plugin-ansible-host-key-checking             | Whether to ignore errors when a host is reinstalled so it  has a different key in ~/.ssh/known_hosts If a host is not initially in  'known_hosts' setting this to True will result in prompting for  confirmation of the key, which is not possible from non-interactive  environments like Foreman Remote Execution or cron |
| --foreman-proxy-plugin-ansible-install-runner                | If true, installs ansible-runner package to support running ansible by ansible-runner |
| --foreman-proxy-plugin-ansible-listen-on                     | Proxy feature listens on https, http, or both                |
| --foreman-proxy-plugin-ansible-roles-path                    | Paths where we look for ansible roles.                       |
| --foreman-proxy-plugin-ansible-runner-package-name           | The name of the ansible-runner package to install            |
| --foreman-proxy-plugin-ansible-ssh-args                      | The ssh_args parameter in ansible.cfg under [ssh_connection] |
| --foreman-proxy-plugin-ansible-working-dir                   | A directory where the playbooks will be generated. A tmp directory will be created when left blank |
| --foreman-proxy-plugin-dhcp-infoblox-dns-view                | The DNS view to use                                          |
| --foreman-proxy-plugin-dhcp-infoblox-network-view            | The network view to use                                      |
| --foreman-proxy-plugin-dhcp-infoblox-password                | The password of the Infoblox user                            |
| --foreman-proxy-plugin-dhcp-infoblox-record-type             | Record type to manage                                        |
| --foreman-proxy-plugin-dhcp-infoblox-used-ips-search-type    | The search type for used ips                                 |
| --foreman-proxy-plugin-dhcp-infoblox-username                | The username of the Infoblox user                            |
| --foreman-proxy-plugin-dhcp-remote-isc-dhcp-config           | DHCP config file path                                        |
| --foreman-proxy-plugin-dhcp-remote-isc-dhcp-leases           | DHCP leases file                                             |
| --foreman-proxy-plugin-dhcp-remote-isc-key-name              | DHCP key name                                                |
| --foreman-proxy-plugin-dhcp-remote-isc-key-secret            | DHCP password                                                |
| --foreman-proxy-plugin-dhcp-remote-isc-omapi-port            | DHCP server OMAPI port                                       |
| --foreman-proxy-plugin-discovery-enabled                     | Whether the module is enabled or disabled.                   |
| --foreman-proxy-plugin-discovery-image-name                  | tarball with images                                          |
| --foreman-proxy-plugin-discovery-install-images              | Download and extract the discovery image                     |
| --foreman-proxy-plugin-discovery-listen-on                   | When enabled, it's configured to listen on HTTPS (default), HTTP or both. |
| --foreman-proxy-plugin-discovery-source-url                  | source URL to download from                                  |
| --foreman-proxy-plugin-discovery-tftp-root                   | TFTP root directory where extracted discovery image will be installed |
| --foreman-proxy-plugin-discovery-version                     | The version to ensure                                        |
| --foreman-proxy-plugin-dns-infoblox-dns-server               | The address of the Infoblox server                           |
| --foreman-proxy-plugin-dns-infoblox-dns-view                 | The Infoblox DNS View                                        |
| --foreman-proxy-plugin-dns-infoblox-password                 | The password of the Infoblox user                            |
| --foreman-proxy-plugin-dns-infoblox-username                 | The username of the Infoblox user                            |
| --foreman-proxy-plugin-dns-powerdns-rest-api-key             | The REST API key                                             |
| --foreman-proxy-plugin-dns-powerdns-rest-url                 | The REST API URL                                             |
| --foreman-proxy-plugin-dynflow-console-auth                  | Whether to enable trusted hosts and ssl for the dynflow console |
| --foreman-proxy-plugin-dynflow-database-path                 | Path to the SQLite database file, set empty for in-memory sqlite |
| --foreman-proxy-plugin-dynflow-enabled                       | Enables/disables the dynflow plugin                          |
| --foreman-proxy-plugin-dynflow-listen-on                     | Proxy feature listens on https, http, or both                |
| --foreman-proxy-plugin-dynflow-open-file-limit               | Limit number of open files - Only Red Hat Operating Systems with Software Collections. |
| --foreman-proxy-plugin-dynflow-ssl-disabled-ciphers          | Disable SSL ciphers. For example: ['NULL-MD5', 'NULL-SHA']   |
| --foreman-proxy-plugin-dynflow-tls-disabled-versions         | Disable TLS versions. Version 1.0 is always disabled. For example: ['1.1'] |
| --foreman-proxy-plugin-monitoring-collect-status             | collect monitoring status from monitoring solution           |
| --foreman-proxy-plugin-monitoring-enabled                    | enables/disables the monitoring plugin                       |
| --foreman-proxy-plugin-monitoring-listen-on                  | proxy feature listens on http, https, or both                |
| --foreman-proxy-plugin-monitoring-providers                  | monitoring providers                                         |
| --foreman-proxy-plugin-monitoring-version                    | plugin package version, it's passed to ensure parameter of  package resource can be set to specific version number, 'latest',  'present' etc. |
| --foreman-proxy-plugin-omaha-contentpath                     | Path where omaha content is stored                           |
| --foreman-proxy-plugin-omaha-distribution                    | distribution type, it's passed to specify the distribution type. can be set to one of 'coreos' (default), 'flatcar' |
| --foreman-proxy-plugin-omaha-enabled                         | enables/disables the omaha plugin                            |
| --foreman-proxy-plugin-omaha-http-proxy                      | URL to a proxy server that should be used to retrieve omaha content, e.g. 'http://proxy.example.com:3128/' |
| --foreman-proxy-plugin-omaha-listen-on                       | proxy feature listens on http, https, or both                |
| --foreman-proxy-plugin-omaha-sync-releases                   | How many of the latest releases should be synced             |
| --foreman-proxy-plugin-omaha-version                         | plugin package version, it's passed to ensure parameter of  package resource can be set to specific version number, 'latest',  'present' etc. |
| --foreman-proxy-plugin-openscap-contentdir                   | Directory where OpenSCAP content XML are stored So we will not request the XML from Foreman each time |
| --foreman-proxy-plugin-openscap-corrupted-dir                | Directory where corrupted OpenSCAP report XML are stored     |
| --foreman-proxy-plugin-openscap-enabled                      | enables/disables the openscap plugin                         |
| --foreman-proxy-plugin-openscap-failed-dir                   | Directory where OpenSCAP report XML are stored In case sending to Foreman succeeded, yet failed to save to reportsdir |
| --foreman-proxy-plugin-openscap-listen-on                    | Proxy feature listens on http, https, or both                |
| --foreman-proxy-plugin-openscap-openscap-send-log-file       | Log file for the forwarding script                           |
| --foreman-proxy-plugin-openscap-proxy-name                   | Proxy name to send to Foreman with parsed report Foreman  matches it against names of registered proxies to find the report source |
| --foreman-proxy-plugin-openscap-puppet-module                | Ensure the Puppet module. This only makes sense if Puppetserver runs on the same machine. |
| --foreman-proxy-plugin-openscap-puppet-module-ensure         | The state of the Puppet module to ensure                     |
| --foreman-proxy-plugin-openscap-reportsdir                   | Directory where OpenSCAP report XML are stored So Foreman can request arf xml reports |
| --foreman-proxy-plugin-openscap-spooldir                     | Directory where OpenSCAP audits are stored before they are forwarded to Foreman |
| --foreman-proxy-plugin-openscap-timeout                      | Timeout for sending ARF reports to foreman                   |
| --foreman-proxy-plugin-openscap-version                      | plugin package version, it's passed to ensure parameter of  package resource can be set to specific version number, 'latest',  'present' etc. |
| --foreman-proxy-plugin-remote-execution-script-cockpit-integration | Enables/disables Cockpit integration                         |
| --foreman-proxy-plugin-remote-execution-script-enabled       | Enables/disables the plugin                                  |
| --foreman-proxy-plugin-remote-execution-script-generate-keys | Automatically generate SSH keys                              |
| --foreman-proxy-plugin-remote-execution-script-install-key   | Automatically install generated SSH key to root authorized keys which allows managing this host through Remote Execution |
| --foreman-proxy-plugin-remote-execution-script-listen-on     | Proxy feature listens on https, http, or both                |
| --foreman-proxy-plugin-remote-execution-script-local-working-dir | Local working directory on the smart proxy                   |
| --foreman-proxy-plugin-remote-execution-script-mode          | Operation Mode of the plugin.                                |
| --foreman-proxy-plugin-remote-execution-script-remote-working-dir | Remote working directory on clients                          |
| --foreman-proxy-plugin-remote-execution-script-ssh-identity-dir | Directory where SSH keys are stored                          |
| --foreman-proxy-plugin-remote-execution-script-ssh-identity-file | Provide an alternative name for the SSH keys                 |
| --foreman-proxy-plugin-remote-execution-script-ssh-kerberos-auth | Enable kerberos authentication for SSH                       |
| --foreman-proxy-plugin-remote-execution-script-ssh-keygen    | Location of the ssh-keygen binary                            |
| --foreman-proxy-plugin-remote-execution-script-ssh-log-level | Configure ssh client LogLevel                                |
| --foreman-proxy-plugin-salt-api                              | Use Salt API                                                 |
| --foreman-proxy-plugin-salt-api-auth                         | Salt API auth mechanism                                      |
| --foreman-proxy-plugin-salt-api-password                     | Salt API password                                            |
| --foreman-proxy-plugin-salt-api-url                          | Salt API URL                                                 |
| --foreman-proxy-plugin-salt-api-username                     | Salt API username                                            |
| --foreman-proxy-plugin-salt-autosign-file                    | File to use for salt autosign                                |
| --foreman-proxy-plugin-salt-autosign-key-file                | File to use for salt autosign via grains                     |
| --foreman-proxy-plugin-salt-enabled                          | Enables/disables the salt plugin                             |
| --foreman-proxy-plugin-salt-group                            | Group to run salt commands and access configuration files    |
| --foreman-proxy-plugin-salt-listen-on                        | Proxy feature listens on https, http, or both                |
| --foreman-proxy-plugin-salt-saltfile                         | Path to Saltfile                                             |
| --foreman-proxy-plugin-salt-user                             | User to run salt commands under                              |
| --foreman-proxy-plugin-shellhooks-directory                  | Absolute path to directory with executables                  |
| --foreman-proxy-plugin-shellhooks-enabled                    | enables/disables the shellhooks plugin                       |
| --foreman-proxy-plugin-shellhooks-listen-on                  | proxy feature listens on http, https, or both                |
| --foreman-proxy-plugin-shellhooks-version                    | plugin package version, it's passed to ensure parameter of  package resource can be set to specific version number, 'latest',  'present' etc. |

#### Answers file

The answers file describes the classes that will be applied to the host to install Foreman, along with their parameters.  The foreman-installer package stores it at `/etc/foreman-installer/scenarios.d/foreman-answers.yaml`.  By default, the *all-in-one* setup will include Foreman, a puppetmaster, Puppet agent, and the Smart Proxy:

```
---
foreman: true
foreman_proxy: true
puppet:
  server: true
```

Other examples are given in the next section, or `/usr/share/foreman-installer/README.md`.

#### Advanced module configuration

Additional configuration options can be given in `/etc/foreman-installer/custom-hiera.yaml` for some of the Puppet modules that are used internally by Foreman  installer. The contents of this file will be passed to Hiera during the  Foreman installer execution so can set class parameters for other  modules such as `apache`, `mysql`, and `postgresql`.

For example, the `TraceEnable` option may be controlled by disabling the `apache::trace_enable` parameter in this file:

```
apache::trace_enable: Off
```

Please note that the parameters used by these modules may change  between versions of Foreman, so it’s important to check the versions in  use and the appropriate module documentation or source code when editing this configuration file. Modifications cannot be supported or migrated  by Foreman.

### 3.2.3 Installation Scenarios

The Foreman installer can accommodate more complex, multi-host setups when supplied with appropriate parameters.

#### Using an external database server

Per default foreman-installer will install a PostgreSQL database  server onto the Foreman host and create its database. An external  database server with an already created database can be used with the  following arguments:

```
foreman-installer \
  --foreman-db-manage=false \
  --foreman-db-host=dbserver.example.com \
  --foreman-db-database=dbname \
  --foreman-db-username=dbuser \
  --foreman-db-password=dbpassword
```

As a post-installation step, to populate the database correctly, run:

```
foreman-rake db:migrate
foreman-rake db:seed
foreman-rake apipie:cache:index
```

#### Setting up Foreman with additional Smart Proxies

Using the scenarios outlined below, a simple scale-out setup can be created as follows:

1. On the Foreman host, run a complete foreman-installer all-in-one  installation to provide Foreman, a Puppetserver and Smart Proxy. This  will be the Puppet CA.

For each additional Smart Proxy:

1. Bootstrap certificates
2. Run the standalone installation as detailed below

**Note** This relies on the puppet ssl subcommand  introduced in Puppet 6. Prior to Puppet 6 there was no separate command  and it required manual work.

Assuming the Puppetserver with CA is on `foreman.example.com`, the following command can be run:

```
puppet ssl bootstrap --server foreman.example.com
```

This will submit a CSR (Certificate Signing Request) to the Puppet CA running on foreman.example.com. There the request can be signed.

```
puppetserver ca sign --certname host.example.com
```

CSRs also show up in the Foreman interface and can be signed there as well.

#### Standalone Puppetserver

A standalone Puppetserver can be configured along with a smart proxy  installation, enabling the Puppet infrastructure to be scaled out. This  assumes the SSL certificates have been bootstrapped.

Command line arguments:

```
foreman-installer \
  --no-enable-foreman \
  --no-enable-foreman-plugin-puppet \
  --no-enable-foreman-cli \
  --no-enable-foreman-cli-puppet \
  --enable-puppet \
  --puppet-server-ca=false \
  --puppet-server-foreman-url=https://foreman.example.com \
  --enable-foreman-proxy \
  --foreman-proxy-puppetca=false \
  --foreman-proxy-foreman-base-url=https://foreman.example.com \
  --foreman-proxy-trusted-hosts=foreman.example.com \
  --foreman-proxy-oauth-consumer-key=<key here> \
  --foreman-proxy-oauth-consumer-secret=<secret here>
```

Fill in the OAuth consumer key and secret values from your Foreman instance, retrieve them from your Foreman server, using: `sudo foreman-rake config | grep oauth_consumer`, and set the Foreman URLs appropriately.  These allow the smart proxy to register automatically with the Foreman instance, or disable with `--foreman-proxy-register-in-foreman=false`.

#### PuppetDB integration

An existing PuppetDB server can be integrated into a Puppetserver by adding:

```
foreman-installer \
  [...]
  --puppet-server-puppetdb-host=puppetdb.example.com \
  --puppet-server-reports=foreman,puppetdb \
  --puppet-server-storeconfigs-backend=puppetdb
```

Be aware that foreman-installer does not setup the PuppetDB server  itself. Only setups using Puppet’s Puppet AIO packages are supported for PuppetDB integration using these parameters.

#### Foreman server without the Puppetserver

The default “all-in-one” Foreman installation includes a  Puppetserver, but this can be disabled. Foreman by default uses Puppet’s SSL certificates however, so the certificates must be bootstrapped.

Command line arguments:

```
foreman-installer \
  --puppet-server=false \
  --foreman-proxy-puppet=false \
  --foreman-proxy-puppetca=false
```

This will still configure the Puppet agent, but this too can be disabled with `--no-enable-puppet` to disable the whole Puppet module.

#### Smart proxy for DNS, DHCP etc.

The smart proxy allows management of various network services, such  as DNS, DHCP and TFTP.  The installer can set up a basic smart proxy  service ready to be configured, or it can install and configure BIND or  ISC DHCP ready to go.   A certificate should be generated and copied to  the host first so Foreman can contact the proxy server.

Command line arguments for a basic smart proxy installation:

```
foreman-installer \
  --no-enable-foreman \
  --no-enable-foreman-puppet \
  --no-enable-foreman-cli \
  --no-enable-foreman-cli-puppet \
  --no-enable-puppet \
  --enable-foreman-proxy \
  --foreman-proxy-foreman-base-url=https://foreman.example.com \
  --foreman-proxy-trusted-hosts=foreman.example.com \
  --foreman-proxy-oauth-consumer-key=<key here> \
  --foreman-proxy-oauth-consumer-secret=<secret here>
```

Fill in the OAuth consumer key and secret values from your Foreman instance, retrieve them from your Foreman server, using: `sudo foreman-rake config | grep oauth_consumer`, and set the Foreman URLs appropriately.  These allow the smart proxy to register automatically with the Foreman instance, or disable with `--foreman-proxy-register-in-foreman=false`.

Command line arguments for a smart proxy configured with just TFTP,  BIND, setting DNS forwarders and overriding the default forward and  reverse DNS zones:

```
foreman-installer \
  --no-enable-foreman \
  --no-enable-foreman-puppet \
  --no-enable-foreman-cli \
  --no-enable-foreman-cli-puppet \
  --no-enable-puppet \
  --enable-foreman-proxy \
  --foreman-proxy-tftp=true \
  --foreman-proxy-puppet=false \
  --foreman-proxy-puppetca=false \
  --foreman-proxy-dns=true \
  --foreman-proxy-dns-interface=eth0 \
  --foreman-proxy-dns-zone=example.com \
  --foreman-proxy-dns-reverse=0.0.10.in-addr.arpa \
  --foreman-proxy-dns-forwarders=8.8.8.8 \
  --foreman-proxy-dns-forwarders=8.8.4.4 \
  --foreman-proxy-foreman-base-url=https://foreman.example.com \
  --foreman-proxy-trusted-hosts=foreman.example.com \
  --foreman-proxy-oauth-consumer-key=<key here> \
  --foreman-proxy-oauth-consumer-secret=<secret here>
```

Ensure the dns-interface argument is updated with the correct network interface name for the DNS server to listen on. After configuration, make sure to create Subnet in Foreman under *Infrastructure > Subnets* for the particular Smart Proxy which registers automatically.

Command line arguments for a smart proxy configured with just ISC DHCP and a single DHCP subnet:

```
foreman-installer \
  --no-enable-foreman \
  --no-enable-foreman-puppet \
  --no-enable-foreman-cli \
  --no-enable-foreman-cli-puppet \
  --no-enable-puppet \
  --enable-foreman-proxy \
  --foreman-proxy-puppet=false \
  --foreman-proxy-puppetca=false \
  --foreman-proxy-dhcp=true \
  --foreman-proxy-dhcp-interface=eth0 \
  --foreman-proxy-dhcp-gateway=10.0.0.1 \
  --foreman-proxy-dhcp-range="10.0.0.100 10.0.0.200" \
  --foreman-proxy-dhcp-nameservers="10.0.1.2,10.0.1.3" \
  --foreman-proxy-foreman-base-url=https://foreman.example.com \
  --foreman-proxy-trusted-hosts=foreman.example.com \
  --foreman-proxy-oauth-consumer-key=<key here> \
  --foreman-proxy-oauth-consumer-secret=<secret here>
```

Also ensure here that the dhcp-interface argument is updated for the interface to run DHCP on. After configuration, make sure to create a new Subnet (or import from existing) in the Foreman interface.

While it is possible to define the same DHCP range in Foreman, it’s usually good practice to select a range from outside the pool defined in the installer, but still in the subnet. For the example above, it is recommended to define the DHCP range from 10.0.0.1 to 10.0.0.99 in the Foreman UI which gives the following IP address distribution:

- 10.0.0.1 - 10.0.0.99 - addresses reserved during bare-metal provisioning by Foreman
- 10.0.0.100 - 10.0.200 - addresses for dynamic clients in the subnet (discovered hosts, unmanaged hosts)

## 3.3 Install From Packages

Packages are available for Red Hat and Debian-based distributions.   This will install a standalone Foreman service running under Puma.

The Puppet-based Foreman installer is recommended for most  environments, instead of installing only the packages as it will perform full configuration too.

### 3.3.1 RPM Packages

Foreman is packaged for the following RPM based distributions:

- RHEL and derivatives, version 8

**Note:** The RPM packages are not tested on Rocky Linux or Oracle Linux. The Foreman installation on Rocky Linux or Oracle  Linux may or may not work.

For most users, it’s highly recommended to use the [installer](https://theforeman.org/manuals/3.5/index.html#3.2ForemanInstaller) as the packages only provide the software and a standalone Foreman  service.  The installer installs these packages, then additionally  configures Foreman to run under Apache with PostgreSQL, plus can  configure a complete Puppet setup integrated with Foreman.

### Pre-requisites: Puppet

It’s recommended to [configure the Puppet repositories](https://puppet.com/docs/puppet/latest/install_agents.html#task-9788) to obtain the latest version of Puppet available. The version in EPEL is not supported.

### Available repositories

Three main repos are provided at https://yum.theforeman.org:

- `/client` or `/client/VERSION` (e.g. `/client/3.5`) carries packages relevant to clients. This is optional and Foreman does not require anything installed on clients.
- `/releases` or `/releases/VERSION` (e.g. `/releases/3.5`) carries the all releases and updates of Foreman and its dependencies.
- `/plugins` or `/plugins/VERSION` (e.g. `/plugins/3.5`) carries the all plugin releases.

Under each repo are directories for each distribution, then each architecture.

### Release packages

To set up the repository, foreman-release packages are provided which add a repo definition to `/etc/yum.repos.d`. Install the release RPM and enable the module:

```
# EL8
dnf install https://yum.theforeman.org/releases/3.5/el8/x86_64/foreman-release.rpm
dnf module enable foreman:el8
```

### Signing

Release and release candidate packages are signed by the per-release key listed on [Security](https://theforeman.org/security.html#GPGkeys).  Nightly packages are not signed.

### Available packages

Install foreman and other foreman-* packages to add functionality:

```
foreman               Foreman server
foreman-proxy         Foreman Smart Proxy
foreman-debug         Log and debug collection tools
foreman-ec2           Amazon EC2 provisioning support
foreman-gce           Google Compute Engine provisioning support
foreman-libvirt       libvirt provisioning support
foreman-openstack     OpenStack Nova provisioning support
foreman-ovirt         oVirt/RHEV provisioning support
foreman-vmware        VMware provisioning support
foreman-cli           Foreman CLI utility
foreman-console       Console additions
foreman-service       A standalone service implementation
foreman-selinux       SELinux targeted policy
foreman-postgresql    PostgreSQL database support
```

### Setup

1. Configure by editing `/etc/foreman/settings.yaml` and `/etc/foreman/database.yml`
2. After changing the database, migrate it: `sudo -u foreman /usr/share/foreman/extras/dbmigrate`
3. Start the foreman service: `systemctl start foreman`

### Upgrade

See [upgrade instructions](https://theforeman.org/manuals/3.5/index.html#3.6Upgradeto3.5)

### 3.3.2 Debian Packages

The Foreman packages should work on the following Debian-based Linux distributions:

#### Distributions

- Debian Linux 11 (Bullseye), amd64
- Ubuntu Linux 20.04 LTS (Focal Fossa), amd64

If you encounter any errors during the installation, [please file a bug report!](https://theforeman.org/contribute.html#Bugreporting)

#### Apt Configuration

Add one of the following lines to your */etc/apt/sources.list* (alternatively in a separate file in */etc/apt/sources.list.d/foreman.list*):

```
# Debian Bullseye
deb http://deb.theforeman.org/ bullseye 3.5
# Ubuntu 20.04 Focal
deb http://deb.theforeman.org/ focal 3.5
```

You may also want some plugins from the plugin repo (required for the Foreman Installer):

```
deb http://deb.theforeman.org/ plugins 3.5
```

The public key for [secure APT](https://wiki.debian.org/SecureApt) can be downloaded [here](https://deb.theforeman.org/pubkey.gpg)

You can add this key with:

```
wget https://deb.theforeman.org/foreman.asc -O /etc/apt/trusted.gpg.d/foreman.asc
```

The key fingerprint is

```
5B7C 3E5A 735B CB4D 6158 29DC 0BDD A991 FD7A AC8A
Foreman Automatic Signing Key (2021) <packages@theforeman.org>
```

Remember to update your package lists!

```
apt-get update
```

#### Install packages

The packages are split by gem dependencies - there are 15 packages to choose from. These are:

Main package:

- foreman

Database gems:

- foreman-postgresql

Optional functionality:

- foreman-console
- foreman-debug
- foreman-dynflow-sidekiq
- foreman-ec2
- foreman-gce
- foreman-journald
- foreman-libvirt
- foreman-openstack
- foreman-ovirt
- foreman-redis
- foreman-service
- foreman-telemetry
- foreman-vmware

Command line interface:

- ruby-hammer-cli
- ruby-hammer-cli-foreman

Installation instructions are:

```
# Install packages  (adjust additional packages as needed)
apt-get install foreman foreman-postgresql foreman-libvirt

# Copy sample db config to /etc
cp /usr/share/foreman/config/database.yml.example /etc/foreman/database.yml

# Review settings and DB config
vi /etc/foreman/settings.yaml /etc/foreman/database.yml

# Perform initial DB setup
foreman-rake db:migrate
foreman-rake db:seed
```

The packages should auto-run db:migrate and db:seed if */etc/foreman/database.yml* exists. So the initial DB setup is only needed during first install, upgrades should just work.

#### Upgrade

See [upgrade instructions](https://theforeman.org/manuals/3.5/index.html#3.6Upgradeto3.5)

## 3.4 Install From Source

Installing the latest development code: Foreman uses Bundler to install dependencies and get up and running.  This is the preferred way to get Foreman if you want to benefit from the latest improvements. By using the git repository you can also upgrade  more easily. You will need to have Bundler installed manually for now  (check your distribution repositories, or install it via rubygems).

Foreman will run with the following requirements (aside from rubygem dependencies):

- Ruby 2.7.x
- NodeJS 14
- NPM 6.x

You will want to make sure that you have *postgresql-devel* installed so the database gems can install properly. Also, you would also need *gcc*, *ruby-devel*, *libxml-devel*, *libxslt-devel*, *libvirt-devel*, *nodejs*, and *npm* packages.

For RHEL7 or clones, you can issue the following commands to install *all* required packages:

```
yum groupinstall "Development Tools" "Development Libraries"
yum -y install gcc-c++ git ruby ruby-devel rubygems \
    libvirt-devel postgresql-devel openssl-devel \
    libxml2-devel libxslt-devel zlib-devel \
    readline-devel systemd-devel tar nodejs npm libcurl-devel
```

Additionally, it is important that `config/database.yml` is set to use the correct database in the “production” block. Rails (and subsequently Foreman) will use these connection settings under “production” to manage the database it uses and setup the necessary schema.

```
git clone https://github.com/theforeman/foreman.git -b develop
cd foreman
cp config/settings.yaml.example config/settings.yaml
cp config/database.yml.example config/database.yml
gem install bundler
bundle install --without development test --path vendor
npm install
# set up database schema, precompile assets and locales
RAILS_ENV=production bundle exec rake db:migrate
RAILS_ENV=production bundle exec rake db:seed assets:precompile locale:pack webpack:compile
```

The db:seed step will print out the default admin password, record this in order to log in later.

In order to run Foreman you can use the following command inside your git repository:

```
./bin/rails s -e production
```

This manual will recommend `foreman-rake <task>` to run rake tasks, however when installed from source, replace this with `bundle exec rake <task> RAILS_ENV=production`

### Latest stable version

to get latest “stable” version do:

```
git clone https://github.com/theforeman/foreman.git -b 3.5-stable
```

### CLI (Hammer)

To install hammer from git checkouts, you will just need `rake` installed on your system. Clone and install CLI core

```
$ git clone https://github.com/theforeman/hammer-cli.git
$ cd hammer-cli
$ rake install
$ cd ..
```

and clone plugin with foreman commands

```
$ git clone https://github.com/theforeman/hammer-cli-foreman.git
$ cd hammer-cli-foreman
$ rake install
$ cd ..
```

You can install other hammer plugins via any of the methods mentioned above.