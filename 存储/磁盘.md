# 磁盘

## 分区

### 分区形式

1. MBR（主启动记录）

   ![](../Image/m/mbr.png)自1982年以来，方案指定了在运行BIOS固件的系统上如何对磁盘进行分区。最多支持4个主分区。在Linux系统上，可以使用扩展分区和逻辑分区来创建最多15个分区。由于分区大小数据以32位值存储，最大磁盘和分区大小为2TiB。

2. GPT

   对于运行统一可扩展固件接口(UEFI)固件的系统，GPT是在物理硬盘上布置分区表的标准。最多支持128个主分区。GPT为逻辑块地址分配64位，使得GPT可支持最多8ZiB的分区和磁盘。
   
   GPT使用全局唯一标识符（GUID）来识别每个磁盘和分区。GPT提供分区表信息的冗余，主GPT位于磁盘头部，备份副本（次要GPT）位于磁盘尾部。GPT使用校验和来检测GPT头和分区表中的错误与损坏。
   
   ![](../Image/g/p/gpt.png)

### 分区作用

1. 限制应用或用户的可用空间。
2. 将操作系统和程序文件与用户文件分隔开。
3. 创建用于内存交换的单独区域。
4. 限制磁盘空间使用，以提高诊断工具和备份映像的性能。

### 分区工具

1. parted
2. fdisk
3. gdisk

## WD硬盘分类
| 颜色 | 用途          |
|-----|--------------|
| 蓝   | 日常装机存储   |
| 黑   | 高性能游戏设计 |
| 红   | NAS          |
| 紫   | 监控         |
| 金   | 数据中心      |

| 颜色                                     | 蓝     | 黑     | 红   | 紫           | 金   |
| ---------------------------------------- | ------ | ------ | ---- | ------------ | ---- |
| 应用/使用                                | 日常PC | 高性能 | NAS  | Surveillance |      |
| 克隆软件                                 | O      | O      | O    | O            |      |
| 专为游戏而设计                           |        | O      |      |              |      |
| 专门针对图形和照片、视频编辑而进行了优化 |        | O      |      |              |      |
| 家用/办公用NAS                           |        |        | O    |              |      |
| 支持RAID                                 |        |        | O    |              |      |
| 专门针对监控系统进行了优化               |        |        |      | O            |      |
| 有限保修                                 | 3      | 5      | 3    | 3            |      |



## 文件系统

btrfs
Ext2
Ext3
Ext4
FAT16
FAT32
hfs
hfsx
hfs+
JFS
nilfs2
ReiserFS
XFS

### 创建文件系统

```bash
mkfs.xfs /dev/vdb1
```

### 扫描连接到计算机的块设备并检索文件系统UUID

```bash
lsblk --fs
```

## /etc/fstab

```bash
UUID=a89929229-44dd-409a-68be2c9f5571	/		xfs		defaults	0 0
# 指定设备，使用UUID或者设备文件，如/dev/vdb1。
# 目录挂载点。
# 文件系统类型。
# 以逗号分隔的、应用于设备的选项列表。
# dump命令使用第5个字段来备份设备。其他备份应用通常不使用此字段。
# fsck顺序字段，决定了在系统启动时是否执行fsck命令，以验证文件系统是否干净。值指示了fsck的运行顺序。
# 对于XFS,不使用fsck来检查自己的文件系统状态，为0。
# 对于ext4,根文件系统，为1;如果是其他ext文件系统，为2。
```

在 `/etc/fstab` 文件中添加或删除条目时，运行如下命令，以便让systemd注册新配置。

```bash
systemctl daemon-reload
```

### 验证

1. 卸载新文件系统。

2. 挂载文件系统

   ```bash
   mount /mountpoint
   ```

替代方法

```bash
findmnt --verify
```



## Other

lsblk

blkid

cat /proc/partitions