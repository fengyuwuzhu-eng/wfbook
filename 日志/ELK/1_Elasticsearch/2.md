# Index management settings 索引管理设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/index_management.asciidoc)

You can use the following cluster settings to enable or disable index management features.
您可以使用以下集群设置来启用或禁用索引管理功能。



- `action.auto_create_index` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) [Automatically create an index](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html#index-creation) if it doesn’t already exist and apply any configured index templates. Defaults to `true`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）如果索引尚不存在，[则自动创建索引](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html#index-creation)并应用任何配置的索引模板。默认为`true` 。



- `action.destructive_requires_name` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) When set to `true`, you must specify the index name to [delete an index](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-delete-index.html). It is not possible to delete all indices with `_all` or use wildcards. Defaults to `true`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）当设置为`true`时，必须指定索引名称才能[删除索引](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-delete-index.html)。无法使用`_all`或使用通配符删除所有索引。默认为`true` 。



- `cluster.indices.close.enable` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) Enables [closing of open indices](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-close.html) in Elasticsearch. If `false`, you cannot close open indices. Defaults to `true`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）允许[关闭 Elasticsearch 中的开放索引](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-close.html)。如果`false` ，则无法关闭打开的索引。默认为`true` 。  Closed indices still consume a significant amount of disk space. 封闭索引仍然消耗大量磁盘空间。



- `reindex.remote.whitelist` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the hosts that can be [reindexed from remotely](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-reindex.html#reindex-from-remote). Expects a YAML array of `host:port` strings. Consists of a comma-delimited list of `host:port` entries. Defaults to `["\*.io:*", "\*.com:*"]`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定可以[远程重新索引](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-reindex.html#reindex-from-remote)的主机。需要`host:port`字符串的 YAML 数组。由逗号分隔的`host:port`条目列表组成。默认为`["\*.io:*", "\*.com:*"]` 。



- `stack.templates.enabled`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) If `true`, enables built-in index and component templates. [Elastic Agent](https://www.elastic.co/guide/en/fleet/8.15/fleet-overview.html) uses these templates to create data streams. If `false`, Elasticsearch disables these index and component templates. Defaults to `true`. （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）如果为`true` ，则启用内置索引和组件模板。 [Elastic Agent](https://www.elastic.co/guide/en/fleet/8.15/fleet-overview.html)使用这些模板来创建数据流。如果`false` ，Elasticsearch 将禁用这些索引和组件模板。默认为`true` 。 This setting affects the following built-in index templates: 此设置影响以下内置索引模板：  `logs-*-*`  `metrics-*-*`  `synthetics-*-*`  `profiling-*`  This setting also affects the following built-in component templates: 此设置还会影响以下内置组件模板：  `logs@mappings`  `logs@settings`  `metrics@mappings`  `metrics@settings`  `metrics@tsdb-settings`  `synthetics@mapping`  `synthetics@settings`

# Index recovery settings 索引恢复设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/recovery.asciidoc)

Peer recovery syncs data from a primary shard to a new or existing shard copy.
对等恢复将数据从主分片同步到新的或现有的分片副本。

Peer recovery automatically occurs when Elasticsearch:
当 Elasticsearch 出现以下情况时，会自动进行对等恢复：

- Recreates a shard lost during node failure 
  重新创建节点故障期间丢失的分片
- Relocates a shard to another node due to a cluster rebalance or changes to the [shard allocation settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cluster.html)
  由于集群重新平衡或[分片分配设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cluster.html)更改而将分片重新定位到另一个节点

You can view a list of in-progress and completed recoveries using the [cat recovery API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-recovery.html).
您可以使用[cat 恢复 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-recovery.html)查看正在进行和已完成的恢复的列表。

## Recovery settings 恢复设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/recovery.asciidoc)

- `indices.recovery.max_bytes_per_sec`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Limits total inbound and outbound recovery traffic for each node. Applies to both peer recoveries as well as snapshot recoveries (i.e., restores from a snapshot). Defaults to `40mb` unless the node is a dedicated [cold](https://www.elastic.co/guide/en/elasticsearch/reference/current/data-tiers.html#cold-tier) or [frozen](https://www.elastic.co/guide/en/elasticsearch/reference/current/data-tiers.html#frozen-tier) node, in which case the default relates to the total memory available to the node:  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）限制每个节点的总入站和出站恢复流量。适用于对等恢复以及快照恢复（即从快照恢复）。默认为`40mb` ，除非节点是专用[冷](https://www.elastic.co/guide/en/elasticsearch/reference/current/data-tiers.html#cold-tier)或[冻结](https://www.elastic.co/guide/en/elasticsearch/reference/current/data-tiers.html#frozen-tier)节点，在这种情况下，默认值与节点可用的总内存相关：     Total memory 总内存 Default recovery rate on cold and frozen nodes 冷节点和冻结节点的默认恢复率   ≤ 4 GB ≤ 4GB 40 MB/s 40MB/秒  > 4 GB and ≤ 8 GB > 4 GB 且 ≤ 8 GB 60 MB/s 60MB/秒  > 8 GB and ≤ 16 GB > 8 GB 且 ≤ 16 GB 90 MB/s 90MB/秒  > 16 GB and ≤ 32 GB > 16 GB 和 ≤ 32 GB 125 MB/s 125MB/秒  > 32 GB 250 MB/s 250MB/秒   This limit applies to each node separately. If multiple nodes in a cluster perform recoveries at the same time, the cluster’s total recovery traffic may exceed this limit. 此限制分别适用于每个节点。如果集群中的多个节点同时执行恢复，则集群的总恢复流量可能会超过此限制。 If this limit is too high, ongoing recoveries may consume an excess of bandwidth and other resources, which can have a performance impact on your cluster and in extreme cases may destabilize it. 如果此限制太高，持续的恢复可能会消耗过多的带宽和其他资源，这可能会对集群的性能产生影响，在极端情况下可能会破坏集群的稳定性。 This is a dynamic setting, which means you can set it in each node’s `elasticsearch.yml` config file and you can update it dynamically using the [cluster update settings API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html). If you set it dynamically then the same limit applies on every node in the cluster. If you do not set it dynamically then you can set a different limit on each node, which is useful if some of your nodes have better bandwidth than others. For example, if you are using [Index Lifecycle Management](https://www.elastic.co/guide/en/elasticsearch/reference/current/overview-index-lifecycle-management.html) then you may be able to give your hot nodes a higher recovery bandwidth limit than your warm nodes. 这是一个动态设置，这意味着您可以在每个节点的`elasticsearch.yml`配置文件中设置它，并且可以使用[集群更新设置 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)动态更新它。如果动态设置它，则相同的限制适用于集群中的每个节点。如果您不动态设置它，那么您可以在每个节点上设置不同的限制，如果某些节点比其他节点具有更好的带宽，这会很有用。例如，如果您正在使用[索引生命周期管理](https://www.elastic.co/guide/en/elasticsearch/reference/current/overview-index-lifecycle-management.html)，那么您可以为热节点提供比热节点更高的恢复带宽限制。

## Expert peer recovery settings 专家对等恢复设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/recovery.asciidoc)

You can use the following *expert* setting to manage resources for peer recoveries.
您可以使用以下*专家*设置来管理对等恢复的资源。

- `indices.recovery.max_concurrent_file_chunks`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), Expert) Number of file chunks sent in parallel for each recovery. Defaults to `2`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)、专家）每次恢复并行发送的文件块数。默认为`2` 。 You can increase the value of this setting when the recovery of a single shard is not reaching the traffic limit set by `indices.recovery.max_bytes_per_sec`, up to a maximum of `8`. 当单个分片的恢复未达到设置的流量限制时，您可以增加此设置的值 `indices.recovery.max_bytes_per_sec` ，最多可达`8` 。

- `indices.recovery.max_concurrent_operations`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), Expert) Number of operations sent in parallel for each recovery. Defaults to `1`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)、专家）每次恢复并行发送的操作数。默认为`1` 。 Concurrently replaying operations during recovery can be very resource-intensive and may interfere with indexing, search, and other activities in your cluster. Do not increase this setting without carefully verifying that your cluster has the resources available to handle the extra load that will result. 恢复期间并发重播操作可能会非常消耗资源，并且可能会干扰集群中的索引、搜索和其他活动。在未仔细验证您的集群是否具有可用于处理由此产生的额外负载的资源的情况下，请勿增加此设置。

- `indices.recovery.use_snapshots`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), Expert) Enables snapshot-based peer recoveries.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)、专家）启用基于快照的对等恢复。 Elasticsearch recovers replicas and relocates primary shards using the *peer recovery* process, which involves constructing a new copy of a shard on the target node. When `indices.recovery.use_snapshots` is `false` Elasticsearch will construct this new copy by transferring the index data from the current primary. When this setting is `true` Elasticsearch will attempt to copy the index data from a recent snapshot first, and will only copy data from the primary if it cannot identify a suitable snapshot. Defaults to `true`. Elasticsearch 使用对*等恢复*过程恢复副本并重新定位主分片，其中涉及在目标节点上构建分片的新副本。什么时候 `indices.recovery.use_snapshots` 为`false` Elasticsearch 将通过从当前主节点传输索引数据来构造此新副本。当此设置为`true`时，Elasticsearch 将首先尝试从最近的快照复制索引数据，并且仅在无法识别合适的快照时才会从主快照复制数据。默认为`true` 。 Setting this option to `true` reduces your operating costs if your cluster runs in an environment where the node-to-node data transfer costs are higher than the costs of recovering data from a snapshot. It also reduces the amount of work that the primary must do during a recovery. 如果您的集群在节点到节点数据传输成本高于从快照恢复数据的成本的环境中运行，则将此选项设置为`true`可降低您的运营成本。它还减少了主设备在恢复期间必须完成的工作量。 Additionally, repositories having the setting `use_for_peer_recovery=true` will be consulted to find a good snapshot when recovering a shard. If none of the registered repositories have this setting defined, index files will be recovered from the source node. 此外，在恢复分片时，将咨询具有`use_for_peer_recovery=true`设置的存储库以找到良好的快照。如果所有已注册的存储库都没有定义此设置，则将从源节点恢复索引文件。

- `indices.recovery.max_concurrent_snapshot_file_downloads`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), Expert) Number of snapshot file downloads requests sent in parallel to the target node for each recovery. Defaults to `5`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)、专家）每次恢复并行发送到目标节点的快照文件下载请求数。默认为`5` 。 Do not increase this setting without carefully verifying that your cluster has the resources available to handle the extra load that will result. 在未仔细验证您的集群是否具有可用于处理由此产生的额外负载的资源的情况下，请勿增加此设置。

- `indices.recovery.max_concurrent_snapshot_file_downloads_per_node`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), Expert) Number of snapshot file downloads requests executed in parallel in the target node for all recoveries. Defaults to `25`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)、专家）在所有恢复的目标节点中并行执行的快照文件下载请求的数量。默认为`25` 。 Do not increase this setting without carefully verifying that your cluster has the resources available to handle the extra load that will result. 在未仔细验证您的集群是否具有可用于处理由此产生的额外负载的资源的情况下，请勿增加此设置。

## Recovery settings for managed services 托管服务的恢复设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/recovery.asciidoc)

This feature is designed for indirect use by [Elasticsearch Service](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body), [Elastic Cloud Enterprise](https://www.elastic.co/guide/en/cloud-enterprise/current), and [Elastic Cloud on Kubernetes](https://www.elastic.co/guide/en/cloud-on-k8s/current). Direct use is not supported.
此功能专为[Elasticsearch Service](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body) 、 [Elastic Cloud Enterprise](https://www.elastic.co/guide/en/cloud-enterprise/current)和[Elastic Cloud on Kubernetes](https://www.elastic.co/guide/en/cloud-on-k8s/current)间接使用而设计。不支持直接使用。

When running Elasticsearch as a managed service, the following settings allow the service to specify absolute maximum bandwidths for disk reads, disk writes, and network traffic on each node, and permit you to control the maximum recovery bandwidth on each node in terms of these absolute maximum values. They have two effects:
当 Elasticsearch 作为托管服务运行时，以下设置允许服务指定每个节点上磁盘读取、磁盘写入和网络流量的绝对最大带宽，并允许您根据这些绝对值控制每个节点上的最大恢复带宽最大值。它们有两个作用：

1. They determine the bandwidth used for recovery if `indices.recovery.max_bytes_per_sec` is not set, overriding the default behaviour described above. 
   他们确定用于恢复的带宽，如果 `indices.recovery.max_bytes_per_sec` 未设置，覆盖上述默认行为。
2. They impose a node-wide limit on recovery bandwidth which is independent of the value of `indices.recovery.max_bytes_per_sec`. 
   它们对恢复带宽施加了节点范围的限制，该限制与 `indices.recovery.max_bytes_per_sec` 。

If you do not set `indices.recovery.max_bytes_per_sec` then the maximum recovery bandwidth is computed as a proportion of the absolute maximum bandwidth. The computation is performed separately for read and write traffic. The service defines the absolute maximum bandwidths for disk reads, disk writes, and network transfers using `node.bandwidth.recovery.disk.read`, `node.bandwidth.recovery.disk.write` and `node.bandwidth.recovery.network` respectively, and you can set the proportion of the absolute maximum bandwidth that may be used for recoveries by adjusting `node.bandwidth.recovery.factor.read` and `node.bandwidth.recovery.factor.write`. If the operator privileges feature is enabled then the service may also set default proportions using operator-only variants of these settings.
如果不设置 `indices.recovery.max_bytes_per_sec` 然后最大恢复带宽被计算为绝对最大带宽的比例。读取和写入流量的计算是分开执行的。该服务使用以下命令定义磁盘读取、磁盘写入和网络传输的绝对最大带宽 `node.bandwidth.recovery.disk.read` , `node.bandwidth.recovery.disk.write` 和 `node.bandwidth.recovery.network` 分别可以通过调整来设置可用于恢复的绝对最大带宽的比例 `node.bandwidth.recovery.factor.read` 和 `node.bandwidth.recovery.factor.write` 。如果启用了操作员权限功能，则服务还可以使用这些设置的仅限操作员的变体来设置默认比例。

If you set `indices.recovery.max_bytes_per_sec` then Elasticsearch will use its value for the maximum recovery bandwidth, as long as this does not exceed the node-wide limit. Elasticsearch computes the node-wide limit by multiplying the absolute maximum bandwidths by the `node.bandwidth.recovery.operator.factor.max_overcommit` factor. If you set `indices.recovery.max_bytes_per_sec` in excess of the node-wide limit then the node-wide limit takes precedence.
如果你设置 `indices.recovery.max_bytes_per_sec` 那么 Elasticsearch 将使用其值作为最大恢复带宽，只要该值不超过节点范围的限制。 Elasticsearch 通过将绝对最大带宽乘以 `node.bandwidth.recovery.operator.factor.max_overcommit` 因素。如果你设置 `indices.recovery.max_bytes_per_sec` 超过节点范围的限制，则以节点范围的限制为准。

The service should determine values for the absolute maximum bandwidths settings by experiment, using a recovery-like workload in which there are several concurrent workers each processing files sequentially in chunks of 512kiB.
该服务应通过实验确定绝对最大带宽设置的值，使用类似恢复的工作负载，其中有多个并发工作线程，每个工作线程以 512kiB 的块顺序处理文件。

- `node.bandwidth.recovery.disk.read`

  ([byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units) per second) The absolute maximum disk read speed for a recovery-like workload on the node. If set, `node.bandwidth.recovery.disk.write` and `node.bandwidth.recovery.network` must also be set.  （每秒[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）节点上类似恢复的工作负载的绝对最大磁盘读取速度。如果设置， `node.bandwidth.recovery.disk.write` 和 `node.bandwidth.recovery.network` 也必须设置。

- `node.bandwidth.recovery.disk.write`

  ([byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units) per second) The absolute maximum disk write speed for a recovery-like workload on the node. If set, `node.bandwidth.recovery.disk.read` and `node.bandwidth.recovery.network` must also be set.  （每秒[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）节点上类似恢复的工作负载的绝对最大磁盘写入速度。如果设置， `node.bandwidth.recovery.disk.read` 和 `node.bandwidth.recovery.network` 也必须设置。

- `node.bandwidth.recovery.network`

  ([byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units) per second) The absolute maximum network throughput for a recovery-like workload on the node, which applies to both reads and writes. If set, `node.bandwidth.recovery.disk.read` and `node.bandwidth.recovery.disk.write` must also be set.  （每秒[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）节点上类似恢复的工作负载的绝对最大网络吞吐量，适用于读取和写入。如果设置， `node.bandwidth.recovery.disk.read` 和 `node.bandwidth.recovery.disk.write` 也必须设置。

- `node.bandwidth.recovery.factor.read`

  (float, [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) The proportion of the maximum read bandwidth that may be used for recoveries if `indices.recovery.max_bytes_per_sec` is not set. Must be greater than `0` and not greater than `1`. If not set, the value of `node.bandwidth.recovery.operator.factor.read` is used. If no factor settings are set then the value `0.4` is used.  （float， [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting) ）可用于恢复的最大读取带宽的比例，如果 `indices.recovery.max_bytes_per_sec` 未设置。必须大于`0`且不大于`1` 。如果未设置，则值为 `node.bandwidth.recovery.operator.factor.read` 被使用。如果未设置系数设置，则使用值`0.4` 。

- `node.bandwidth.recovery.factor.write`

  (float, [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) The proportion of the maximum write bandwidth that may be used for recoveries if `indices.recovery.max_bytes_per_sec` is not set. Must be greater than `0` and not greater than `1`. If not set, the value of `node.bandwidth.recovery.operator.factor.write` is used. If no factor settings are set then the value `0.4` is used.  （float， [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting) ）可用于恢复的最大写入带宽的比例，如果 `indices.recovery.max_bytes_per_sec` 未设置。必须大于`0`且不大于`1` 。如果未设置，则值为 `node.bandwidth.recovery.operator.factor.write` 被使用。如果未设置系数设置，则使用值`0.4` 。

- `node.bandwidth.recovery.operator.factor.read`

  (float, [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) The proportion of the maximum read bandwidth that may be used for recoveries if `indices.recovery.max_bytes_per_sec` and `node.bandwidth.recovery.factor.read` are not set. Must be greater than `0` and not greater than `1`. If not set, the value of `node.bandwidth.recovery.operator.factor` is used. If no factor settings are set then the value `0.4` is used. When the operator privileges feature is enabled, this setting can be updated only by operator users.  （float， [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting) ）可用于恢复的最大读取带宽的比例，如果 `indices.recovery.max_bytes_per_sec` 和 `node.bandwidth.recovery.factor.read` 没有设置。必须大于`0`且不大于`1` 。如果未设置，则值为 `node.bandwidth.recovery.operator.factor` 被使用。如果未设置系数设置，则使用值`0.4` 。当启用操作员权限功能时，此设置只能由操作员用户更新。

- `node.bandwidth.recovery.operator.factor.write`

  (float, [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) The proportion of the maximum write bandwidth that may be used for recoveries if `indices.recovery.max_bytes_per_sec` and `node.bandwidth.recovery.factor.write` are not set. Must be greater than `0` and not greater than `1`. If not set, the value of `node.bandwidth.recovery.operator.factor` is used. If no factor settings are set then the value `0.4` is used. When the operator privileges feature is enabled, this setting can be updated only by operator users.  （float， [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting) ）可用于恢复的最大写入带宽的比例，如果 `indices.recovery.max_bytes_per_sec` 和 `node.bandwidth.recovery.factor.write` 没有设置。必须大于`0`且不大于`1` 。如果未设置，则值为 `node.bandwidth.recovery.operator.factor` 被使用。如果未设置系数设置，则使用值`0.4` 。当启用操作员权限功能时，此设置只能由操作员用户更新。

- `node.bandwidth.recovery.operator.factor`

  (float, [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) The proportion of the maximum bandwidth that may be used for recoveries if neither `indices.recovery.max_bytes_per_sec` nor any other factor settings are set. Must be greater than `0` and not greater than `1`. Defaults to `0.4`. When the operator privileges feature is enabled, this setting can be updated only by operator users.  （float， [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting) ）如果两者都没有，则可用于恢复的最大带宽的比例 `indices.recovery.max_bytes_per_sec` 也没有设置任何其他因素设置。必须大于`0`且不大于`1` 。默认为`0.4` 。当启用操作员权限功能时，此设置只能由操作员用户更新。

- `node.bandwidth.recovery.operator.factor.max_overcommit`

  (float, [dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) The proportion of the absolute maximum bandwidth that may be used for recoveries regardless of any other settings. Must be greater than `0`. Defaults to `100`. When the operator privileges feature is enabled, this setting can be updated only by operator users.  （浮动，[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）可用于恢复的绝对最大带宽的比例，无论任何其他设置如何。必须大于`0` 。默认为`100` 。当启用操作员权限功能时，此设置只能由操作员用户更新。

# Indexing buffer settings 索引缓冲区设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/indexing_buffer.asciidoc)

The indexing buffer is used to store newly indexed documents. When it fills up, the documents in the buffer are written to a segment on disk. It is divided between all shards on the node.
索引缓冲区用于存储新索引的文档。当缓冲区填满时，缓冲区中的文档将写入磁盘上的某个段。它被分配给节点上的所有分片。

The following settings are *static* and must be configured on every data node in the cluster:
以下设置是*静态的*，必须在集群中的每个数据节点上进行配置：

- `indices.memory.index_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Accepts either a percentage or a byte size value. It defaults to `10%`, meaning that `10%` of the total heap allocated to a node will be used as the indexing buffer size shared across all shards.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）接受百分比或字节大小值。它默认为`10%` ，这意味着分配给节点的总堆的`10%`将用作所有分片共享的索引缓冲区大小。

- `indices.memory.min_index_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If the `index_buffer_size` is specified as a percentage, then this setting can be used to specify an absolute minimum. Defaults to `48mb`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果将`index_buffer_size`指定为百分比，则此设置可用于指定绝对最小值。默认为`48mb` 。

- `indices.memory.max_index_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If the `index_buffer_size` is specified as a percentage, then this setting can be used to specify an absolute maximum. Defaults to unbounded.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果将`index_buffer_size`指定为百分比，则此设置可用于指定绝对最大值。默认为无界。

# License settings 许可证设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/license-settings.asciidoc)

You can configure this licensing setting in the `elasticsearch.yml` file. For more information, see [License management](https://www.elastic.co/guide/en/kibana/8.15/managing-licenses.html).
您可以在`elasticsearch.yml`文件中配置此许可设置。有关更多信息，请参阅[许可证管理](https://www.elastic.co/guide/en/kibana/8.15/managing-licenses.html)。

- `xpack.license.self_generated.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set to `basic` (default) to enable basic X-Pack features. （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置为`basic` （默认）以启用基本 X-Pack 功能。  If set to `trial`, the self-generated license gives access only to all the features of a x-pack for 30 days. You can later downgrade the cluster to a basic license if needed. 如果设置为`trial` ，则自行生成的许可证仅允许在 30 天内访问 x-pack 的所有功能。如果需要，您可以稍后将集群降级为基本许可证。

# Local gateway settings 本地网关设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/gateway.asciidoc)

The local gateway stores the cluster state and shard data across full cluster restarts.
本地网关存储整个集群重新启动时的集群状态和分片数据。

The following *static* settings, which must be set on every [master-eligible node](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#master-node), control how long a freshly elected master should wait before it tries to recover the [cluster state](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-state.html) and the cluster’s data.
以下*静态*设置必须在每个[符合主节点资格的节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#master-node)上设置，控制新选举的主节点在尝试恢复[集群状态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-state.html)和集群数据之前应等待的时间。

These settings only take effect during a [full cluster restart](https://www.elastic.co/guide/en/elasticsearch/reference/current/restart-cluster.html#restart-cluster-full).
这些设置仅在[集群完全重新启动](https://www.elastic.co/guide/en/elasticsearch/reference/current/restart-cluster.html#restart-cluster-full)期间生效。

- `gateway.expected_data_nodes`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Number of data nodes expected in the cluster. Recovery of local shards begins when the expected number of data nodes join the cluster. Defaults to `0`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）集群中预期的数据节点数。当预期数量的数据节点加入集群时，本地分片的恢复开始。默认为`0` 。

- `gateway.recover_after_time`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If the expected number of nodes is not achieved, the recovery process waits for the configured amount of time before trying to recover. Defaults to `5m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果未达到预期的节点数，恢复过程将等待配置的时间，然后再尝试恢复。默认为`5m` 。 Once the `recover_after_time` duration has timed out, recovery will start as long as the following condition is met: 一旦`recover_after_time`持续时间超时，只要满足以下条件，恢复就会开始：

- `gateway.recover_after_data_nodes`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Recover as long as this many data nodes have joined the cluster.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）只要这么多数据节点加入集群即可恢复。

These settings can be configured in `elasticsearch.yml` as follows:
这些设置可以在`elasticsearch.yml`中配置，如下所示：

```yaml
gateway.expected_data_nodes: 3
gateway.recover_after_time: 600s
gateway.recover_after_data_nodes: 3
```

## Dangling indices 悬空指数

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/gateway.asciidoc)

When a node joins the cluster, if it finds any shards stored in its local data directory that do not already exist in the cluster, it will consider those shards to belong to a "dangling" index. You can list, import or delete dangling indices using the [Dangling indices API](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices.html#dangling-indices-api).
当节点加入集群时，如果它发现本地数据目录中存储的任何分片尚不存在于集群中，它将认为这些分片属于“悬空”索引。您可以使用[悬空索引 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices.html#dangling-indices-api)列出、导入或删除悬空索引。

The API cannot offer any guarantees as to whether the imported data truly represents the latest state of the data when the index was still part of the cluster.
当索引仍然是集群的一部分时，API 无法保证导入的数据是否真正代表数据的最新状态。

# Logging 记录

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/setup/logging-config.asciidoc)

You can use Elasticsearch’s application logs to monitor your cluster and diagnose issues. If you run Elasticsearch as a service, the default location of the logs varies based on your platform and installation method:
您可以使用 Elasticsearch 的应用程序日志来监控集群并诊断问题。如果您将 Elasticsearch 作为服务运行，日志的默认位置会根据您的平台和安装方法而有所不同：

​    

  

For [Windows `.zip`](https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-windows.html) installations, Elasticsearch writes logs to `%ES_HOME%\logs`.
对于[Windows `.zip`](https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-windows.html)安装，Elasticsearch 将日志写入`%ES_HOME%\logs` 。

Files in `%ES_HOME%` risk deletion during an upgrade. In production, we strongly recommend you set `path.logs` to a location outside of `%ES_HOME%``. See [Path settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html#path-settings).
`%ES_HOME%`中的文件在升级过程中存在被删除的风险。在生产中，我们强烈建议您将`path.logs`设置为`%ES_HOME%``之外的位置。请参阅[路径设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html#path-settings)。

If you run Elasticsearch from the command line, Elasticsearch prints logs to the standard output (`stdout`).
如果您从命令行运行 Elasticsearch，Elasticsearch 会将日志打印到标准输出 ( `stdout` )。

## Logging configuration 日志记录配置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/setup/logging-config.asciidoc)

Elastic strongly recommends using the Log4j 2 configuration that is shipped by default.
Elastic 强烈建议使用默认附带的 Log4j 2 配置。

Elasticsearch uses [Log4j 2](https://logging.apache.org/log4j/2.x/) for logging. Log4j 2 can be configured using the log4j2.properties file. Elasticsearch exposes three properties, `${sys:es.logs.base_path}`, `${sys:es.logs.cluster_name}`, and `${sys:es.logs.node_name}` that can be referenced in the configuration file to determine the location of the log files. The property `${sys:es.logs.base_path}` will resolve to the log directory, `${sys:es.logs.cluster_name}` will resolve to the cluster name (used as the prefix of log filenames in the default configuration), and `${sys:es.logs.node_name}` will resolve to the node name (if the node name is explicitly set).
Elasticsearch 使用[Log4j 2](https://logging.apache.org/log4j/2.x/)进行日志记录。可以使用 log4j2.properties 文件配置 Log4j 2。 Elasticsearch 公开三个属性， `${sys:es.logs.base_path}` 、 `${sys:es.logs.cluster_name}`和`${sys:es.logs.node_name}` ，可以在配置文件中引用以确定位置日志文件的数量。属性`${sys:es.logs.base_path}`将解析为日志目录， `${sys:es.logs.cluster_name}`将解析为集群名称（在默认配置中用作日志文件名的前缀），并且`${sys:es.logs.node_name}`将解析为节点名称（如果显式设置节点名称）。

For example, if your log directory (`path.logs`) is `/var/log/elasticsearch` and your cluster is named `production` then `${sys:es.logs.base_path}` will resolve to `/var/log/elasticsearch` and `${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}.log` will resolve to `/var/log/elasticsearch/production.log`.
例如，如果您的日志目录 ( `path.logs` ) 是`/var/log/elasticsearch`并且您的集群被命名为`production` ，那么`${sys:es.logs.base_path}`将解析为`/var/log/elasticsearch`并且 `${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}.log` 将决心 `/var/log/elasticsearch/production.log` 。

```properties
######## Server JSON ############################
appender.rolling.type = RollingFile 
appender.rolling.name = rolling
appender.rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.json 
appender.rolling.layout.type = ECSJsonLayout 
appender.rolling.layout.dataset = elasticsearch.server 
appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.json.gz 
appender.rolling.policies.type = Policies
appender.rolling.policies.time.type = TimeBasedTriggeringPolicy 
appender.rolling.policies.time.interval = 1 
appender.rolling.policies.time.modulate = true 
appender.rolling.policies.size.type = SizeBasedTriggeringPolicy 
appender.rolling.policies.size.size = 256MB 
appender.rolling.strategy.type = DefaultRolloverStrategy
appender.rolling.strategy.fileIndex = nomax
appender.rolling.strategy.action.type = Delete 
appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path}
appender.rolling.strategy.action.condition.type = IfFileName 
appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-* 
appender.rolling.strategy.action.condition.nested_condition.type = IfAccumulatedFileSize 
appender.rolling.strategy.action.condition.nested_condition.exceeds = 2GB 
################################################
```

|      | Configure the `RollingFile` appender 配置`RollingFile`附加程序 |
| ---- | ------------------------------------------------------------ |
|      | Log to `/var/log/elasticsearch/production_server.json` 登录到 `/var/log/elasticsearch/production_server.json` |
|      | Use JSON layout. 使用 JSON 布局。                            |
|      | `dataset` is a flag populating the `event.dataset` field in a `ECSJsonLayout`. It can be used to distinguish different types of logs more easily when parsing them. `dataset`是填充`ECSJsonLayout`中`event.dataset`字段的标志。在解析日志时可以更方便的区分不同类型的日志。 |
|      | Roll logs to `/var/log/elasticsearch/production-yyyy-MM-dd-i.json`; logs will be compressed on each roll and `i` will be incremented 将日志滚动到 `/var/log/elasticsearch/production-yyyy-MM-dd-i.json` ;每卷日志都会被压缩， `i`会增加 |
|      | Use a time-based roll policy 使用基于时间的滚动策略          |
|      | Roll logs on a daily basis 每天滚动日志                      |
|      | Align rolls on the day boundary (as opposed to rolling every twenty-four hours) 在日期边界上对齐滚动（而不是每二十四小时滚动一次） |
|      | Using a size-based roll policy 使用基于大小的滚动策略        |
|      | Roll logs after 256 MB 256 MB 之后滚动日志                   |
|      | Use a delete action when rolling logs 滚动日志时使用删除操作 |
|      | Only delete logs matching a file pattern 仅删除与文件模式匹配的日志 |
|      | The pattern is to only delete the main logs 模式是只删除主要日志 |
|      | Only delete if we have accumulated too many compressed logs 仅当我们积累了太多压缩日志时才删除 |
|      | The size condition on the compressed logs is 2 GB 压缩日志的大小条件为 2 GB |

```properties
######## Server -  old style pattern ###########
appender.rolling_old.type = RollingFile
appender.rolling_old.name = rolling_old
appender.rolling_old.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.log 
appender.rolling_old.layout.type = PatternLayout
appender.rolling_old.layout.pattern = [%d{ISO8601}][%-5p][%-25c{1.}] [%node_name]%marker %m%n
appender.rolling_old.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.old_log.gz
```

|      | The configuration for `old style` pattern appenders. These logs will be saved in `*.log` files and if archived will be in `* .log.gz` files. Note that these should be considered deprecated and will be removed in the future. `old style`附加器的配置。这些日志将保存在`*.log`文件中，如果存档，将保存在`* .log.gz`文件中。请注意，这些应被视为已弃用，并将在将来删除。 |
| ---- | ------------------------------------------------------------ |
|      |                                                              |

Log4j’s configuration parsing gets confused by any extraneous whitespace; if you copy and paste any Log4j settings on this page, or enter any Log4j configuration in general, be sure to trim any leading and trailing whitespace.
Log4j 的配置解析会因任何无关的空格而感到困惑；如果您在此页面上复制并粘贴任何 Log4j 设置，或者一般输入任何 Log4j 配置，请务必修剪任何前导和尾随空格。

Note than you can replace `.gz` by `.zip` in `appender.rolling.filePattern` to compress the rolled logs using the zip format. If you remove the `.gz` extension then logs will not be compressed as they are rolled.
请注意，您可以在`appender.rolling.filePattern`中将`.gz`替换为`.zip`以使用zip格式压缩滚动日志。如果删除`.gz`扩展名，则日志在滚动时不会被压缩。

If you want to retain log files for a specified period of time, you can use a rollover strategy with a delete action.
如果您希望将日志文件保留指定的时间段，可以使用带有删除操作的滚动策略。

```properties
appender.rolling.strategy.type = DefaultRolloverStrategy 
appender.rolling.strategy.action.type = Delete 
appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path} 
appender.rolling.strategy.action.condition.type = IfFileName 
appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-* 
appender.rolling.strategy.action.condition.nested_condition.type = IfLastModified 
appender.rolling.strategy.action.condition.nested_condition.age = 7D 
```

|      | Configure the `DefaultRolloverStrategy` 配置`DefaultRolloverStrategy` |
| ---- | ------------------------------------------------------------ |
|      | Configure the `Delete` action for handling rollovers 配置`Delete`操作以处理翻转 |
|      | The base path to the Elasticsearch logs Elasticsearch 日志的基本路径 |
|      | The condition to apply when handling rollovers 处理展期时适用的条件 |
|      | Delete files from the base path matching the glob `${sys:es.logs.cluster_name}-*`; this is the glob that log files are rolled to; this is needed to only delete the rolled Elasticsearch logs but not also delete the deprecation and slow logs 从与 glob `${sys:es.logs.cluster_name}-*`匹配的基本路径中删除文件；这是日志文件滚动到的 glob；仅需要删除滚动的 Elasticsearch 日志，但不需要删除弃用日志和慢速日志 |
|      | A nested condition to apply to files matching the glob 应用于与 glob 匹配的文件的嵌套条件 |
|      | Retain logs for seven days 日志保留 7 天                     |

Multiple configuration files can be loaded (in which case they will get merged) as long as they are named `log4j2.properties` and have the Elasticsearch config directory as an ancestor; this is useful for plugins that expose additional loggers. The logger section contains the java packages and their corresponding log level. The appender section contains the destinations for the logs. Extensive information on how to customize logging and all the supported appenders can be found on the [Log4j documentation](https://logging.apache.org/log4j/2.x/manual/configuration.html).
可以加载多个配置文件（在这种情况下，它们将被合并），只要它们被命名为`log4j2.properties`并以 Elasticsearch config 目录作为祖先；这对于公开额外记录器的插件很有用。 logger 部分包含 java 包及其相应的日志级别。附加器部分包含日志的目标。有关如何自定义日志记录和所有受支持的附加程序的详细信息可以在[Log4j 文档](https://logging.apache.org/log4j/2.x/manual/configuration.html)中找到。

## Configuring logging levels 配置日志记录级别

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/setup/logging-config.asciidoc)

Log4J 2 log messages include a *level* field, which is one of the following (in order of increasing verbosity):
Log4J 2 日志消息包含一个*级别*字段，它是以下字段之一（按详细程度递增的顺序）：

- `FATAL`
- `ERROR`
- `WARN`
- `INFO`
- `DEBUG`
- `TRACE`

By default Elasticsearch includes all messages at levels `INFO`, `WARN`, `ERROR` and `FATAL` in its logs, but filters out messages at levels `DEBUG` and `TRACE`. This is the recommended configuration. Do not filter out messages at `INFO` or higher log levels or else you may not be able to understand your cluster’s behaviour or troubleshoot common problems. Do not enable logging at levels `DEBUG` or `TRACE` unless you are following instructions elsewhere in this manual which call for more detailed logging, or you are an expert user who will be reading the Elasticsearch source code to determine the meaning of the logs.
默认情况下，Elasticsearch 在其日志中包含`INFO` 、 `WARN` 、 `ERROR`和`FATAL`级别的所有消息，但过滤掉`DEBUG`和`TRACE`级别的消息。这是推荐配置。不要过滤`INFO`或更高日志级别的消息，否则您可能无法了解集群的行为或解决常见问题。不要在`DEBUG`或`TRACE`级别启用日志记录，除非您按照本手册中其他地方的说明进行操作，这些说明需要更详细的日志记录，或者您是一位专家用户，将阅读 Elasticsearch 源代码来确定日志的含义。

Messages are logged by a hierarchy of loggers which matches the hierarchy of Java packages and classes in the [Elasticsearch source code](https://github.com/elastic/elasticsearch/). Every logger has a corresponding [dynamic setting](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html) which can be used to control the verbosity of its logs. The setting’s name is the fully-qualified name of the package or class, prefixed with `logger.`.
消息由记录器的层次结构记录，该层次结构与[Elasticsearch 源代码](https://github.com/elastic/elasticsearch/)中的 Java 包和类的层次结构相匹配。每个记录器都有相应的[动态设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)，可用于控制其日志的详细程度。设置的名称是包或类的完全限定名称，以`logger.` 。

You may set each logger’s verbosity to the name of a log level, for instance `DEBUG`, which means that messages from this logger at levels up to the specified one will be included in the logs. You may also use the value `OFF` to suppress all messages from the logger.
您可以将每个记录器的详细程度设置为日志级别的名称，例如`DEBUG` ，这意味着来自该记录器的消息（最高级别为指定级别）将包含在日志中。您还可以使用值`OFF`来禁止来自记录器的所有消息。

For example, the `org.elasticsearch.discovery` package contains functionality related to the [discovery](https://www.elastic.co/guide/en/elasticsearch/reference/current/discovery-hosts-providers.html) process, and you can control the verbosity of its logs with the `logger.org.elasticsearch.discovery` setting. To enable `DEBUG` logging for this package, use the [Cluster update settings API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html) as follows:
例如， `org.elasticsearch.discovery`包包含与[发现](https://www.elastic.co/guide/en/elasticsearch/reference/current/discovery-hosts-providers.html)过程相关的功能，您可以使用以下命令控制其日志的详细程度： `logger.org.elasticsearch.discovery` 环境。要为此包启用调试`DEBUG`记录，请使用[集群更新设置 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html) ，如下所示：



```console
PUT /_cluster/settings
{
  "persistent": {
    "logger.org.elasticsearch.discovery": "DEBUG"
  }
}
```

Copy as curl 复制为卷曲[Try in Elastic 尝试使用弹性](http://localhost:5601/zzz/app/kibana#/dev_tools/console?load_from=https://www.elastic.co/guide/en/elasticsearch/reference/current/snippets/17.console) 

To reset this package’s log verbosity to its default level, set the logger setting to `null`:
要将此包的日志详细程度重置为其默认级别，请将记录器设置设置为`null` ：



```console
PUT /_cluster/settings
{
  "persistent": {
    "logger.org.elasticsearch.discovery": null
  }
}
```

Copy as curl 复制为卷曲[Try in Elastic 尝试使用弹性](http://localhost:5601/zzz/app/kibana#/dev_tools/console?load_from=https://www.elastic.co/guide/en/elasticsearch/reference/current/snippets/18.console) 

Other ways to change log levels include:
更改日志级别的其他方法包括：

1. `elasticsearch.yml`:
   `elasticsearch.yml` ：

   ```yaml
   logger.org.elasticsearch.discovery: DEBUG
   ```

   This is most appropriate when debugging a problem on a single node.
   当在单个节点上调试问题时，这是最合适的。

2. `log4j2.properties`:
   `log4j2.properties` ：

   ```properties
   logger.discovery.name = org.elasticsearch.discovery
   logger.discovery.level = debug
   ```

   This is most appropriate when you already need to change your Log4j 2 configuration for other reasons. For example, you may want to send logs for a particular logger to another file. However, these use cases are rare.
   当您因其他原因需要更改 Log4j 2 配置时，这是最合适的。例如，您可能希望将特定记录器的日志发送到另一个文件。然而，这些用例很少见。

Elasticsearch’s application logs are intended for humans to read and interpret. Different versions of Elasticsearch may report information in these logs in different ways, perhaps adding extra detail, removing unnecessary information, formatting the same information in different ways, renaming the logger or adjusting the log level for specific messages. Do not rely on the contents of the application logs remaining precisely the same between versions.
Elasticsearch 的应用程序日志旨在供人类阅读和解释。不同版本的 Elasticsearch  可能会以不同的方式报告这些日志中的信息，可能会添加额外的详细信息、删除不必要的信息、以不同的方式格式化相同的信息、重命名记录器或调整特定消息的日志级别。不要依赖应用程序日志的内容在版本之间保持完全相同。

To prevent leaking sensitive information in logs, Elasticsearch suppresses certain log messages by default even at the highest verbosity levels. To disable this protection on a node, set the Java system property `es.insecure_network_trace_enabled` to `true`. This feature is primarily intended for test systems which do not contain any sensitive information. If you set this property on a system which contains sensitive information, you must protect your logs from unauthorized access.
为了防止泄漏日志中的敏感信息，Elasticsearch 默认情况下会抑制某些日志消息，即使在最高详细级别也是如此。要在节点上禁用此保护，请设置 Java 系统属性 `es.insecure_network_trace_enabled` 为`true` 。此功能主要用于不包含任何敏感信息的测试系统。如果您在包含敏感信息的系统上设置此属性，则必须保护您的日志免遭未经授权的访问。

## Deprecation logging 弃用日志记录

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/setup/logging-config.asciidoc)

Elasticsearch also writes deprecation logs to the log directory. These logs record a message when you use deprecated Elasticsearch functionality. You can use the deprecation logs to update your application before upgrading Elasticsearch to a new major version.
Elasticsearch 还将弃用日志写入日志目录。当您使用已弃用的 Elasticsearch 功能时，这些日志会记录一条消息。在将 Elasticsearch 升级到新的主要版本之前，您可以使用弃用日志来更新您的应用程序。

By default, Elasticsearch rolls and compresses deprecation logs at 1GB. The default configuration preserves a maximum of five log files: four rolled logs and an active log.
默认情况下，Elasticsearch 滚动并压缩弃用日志为 1GB。默认配置最多保留五个日志文件：四个滚动日志和一个活动日志。

Elasticsearch emits deprecation log messages at the `CRITICAL` level. Those messages are indicating that a used deprecation feature will be removed in a next major version. Deprecation log messages at the `WARN` level indicates that a less critical feature was used, it won’t be removed in next major version, but might be removed in the future.
Elasticsearch 在`CRITICAL`级别发出弃用日志消息。这些消息表明已使用的弃用功能将在下一个主要版本中删除。 `WARN`级别的弃用日志消息表明使用了不太重要的功能，它不会在下一个主要版本中删除，但将来可能会删除。

To stop writing deprecation log messages, set `logger.deprecation.level` to `OFF` in `log4j2.properties` :
要停止写入弃用日志消息，请在`log4j2.properties`中将`logger.deprecation.level`设置为`OFF` ：

```properties
logger.deprecation.level = OFF
```

Alternatively, you can change the logging level dynamically:
或者，您可以动态更改日志记录级别：



```console
PUT /_cluster/settings
{
  "persistent": {
    "logger.org.elasticsearch.deprecation": "OFF"
  }
}
```

Copy as curl 复制为卷曲[Try in Elastic 尝试使用弹性](http://localhost:5601/zzz/app/kibana#/dev_tools/console?load_from=https://www.elastic.co/guide/en/elasticsearch/reference/current/snippets/19.console) 

Refer to [Configuring logging levels](https://www.elastic.co/guide/en/elasticsearch/reference/current/logging.html#configuring-logging-levels).
请参阅[配置日志记录级别](https://www.elastic.co/guide/en/elasticsearch/reference/current/logging.html#configuring-logging-levels)。

You can identify what is triggering deprecated functionality if `X-Opaque-Id` was used as an HTTP header. The user ID is included in the `X-Opaque-ID` field in deprecation JSON logs.
如果使用`X-Opaque-Id`作为 HTTP 标头，您可以识别触发已弃用功能的内容。用户 ID 包含在弃用 JSON 日志的`X-Opaque-ID`字段中。

```js
{
  "type": "deprecation",
  "timestamp": "2019-08-30T12:07:07,126+02:00",
  "level": "WARN",
  "component": "o.e.d.r.a.a.i.RestCreateIndexAction",
  "cluster.name": "distribution_run",
  "node.name": "node-0",
  "message": "[types removal] Using include_type_name in create index requests is deprecated. The parameter will be removed in the next major version.",
  "x-opaque-id": "MY_USER_ID",
  "cluster.uuid": "Aq-c-PAeQiK3tfBYtig9Bw",
  "node.id": "D7fUYfnfTLa2D7y-xw6tZg"
}
```

Deprecation logs can be indexed into `.logs-deprecation.elasticsearch-default` data stream `cluster.deprecation_indexing.enabled` setting is set to true.
弃用日志可以索引到 `.logs-deprecation.elasticsearch-default` 数据流 `cluster.deprecation_indexing.enabled` 设置设为 true。

## Deprecation logs throttling 弃用日志限制

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/setup/logging-config.asciidoc)

Deprecation logs are deduplicated based on a deprecated feature key and x-opaque-id so that if a feature is repeatedly used, it will not overload the deprecation logs. This applies to both indexed deprecation logs and logs emitted to log files. You can disable the use of `x-opaque-id` in throttling by changing `cluster.deprecation_indexing.x_opaque_id_used.enabled` to false, refer to this class [javadoc](https://artifacts.elastic.co/javadoc/org/elasticsearch/elasticsearch/8.15.1/org.elasticsearch.server/org/elasticsearch/common/logging/RateLimitingFilter.html) for more details.
弃用日志根据弃用的功能键和 x-opaque-id 进行重复数据删除，这样如果重复使用某个功能，它不会使弃用日志过载。这适用于索引弃用日志和发送到日志文件的日志。您可以通过更改来禁用`x-opaque-id`在限制中的使用 `cluster.deprecation_indexing.x_opaque_id_used.enabled` 为 false，请参阅此类[javadoc](https://artifacts.elastic.co/javadoc/org/elasticsearch/elasticsearch/8.15.1/org.elasticsearch.server/org/elasticsearch/common/logging/RateLimitingFilter.html)了解更多详细信息。

## JSON log format JSON 日志格式

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/setup/logging-config.asciidoc)

To make parsing Elasticsearch logs easier, logs are now printed in a JSON format. This is configured by a Log4J layout property `appender.rolling.layout.type = ECSJsonLayout`. This layout requires a `dataset` attribute to be set which is used to distinguish logs streams when parsing.
为了使解析 Elasticsearch 日志更容易，日志现在以 JSON 格式打印。这是由 Log4J 布局属性配置的 `appender.rolling.layout.type = ECSJsonLayout` 。这种布局需要设置一个`dataset`属性，用于在解析时区分日志流。

```properties
appender.rolling.layout.type = ECSJsonLayout
appender.rolling.layout.dataset = elasticsearch.server
```

Each line contains a single JSON document with the properties configured in `ECSJsonLayout`. See this class [javadoc](https://artifacts.elastic.co/javadoc/org/elasticsearch/elasticsearch/8.15.1/org.elasticsearch.server/org/elasticsearch/common/logging/ESJsonLayout.html) for more details. However if a JSON document contains an exception, it will be printed over multiple lines. The first line will contain regular properties and subsequent lines will contain the stacktrace formatted as a JSON array.
每行包含一个 JSON 文档，其属性在`ECSJsonLayout`中配置。有关更多详细信息，请参阅此类[javadoc](https://artifacts.elastic.co/javadoc/org/elasticsearch/elasticsearch/8.15.1/org.elasticsearch.server/org/elasticsearch/common/logging/ESJsonLayout.html) 。但是，如果 JSON 文档包含异常，它将分多行打印。第一行将包含常规属性，后续行将包含格式化为 JSON 数组的堆栈跟踪。

You can still use your own custom layout. To do that replace the line `appender.rolling.layout.type` with a different layout. See sample below:
您仍然可以使用自己的自定义布局。为此，请使用不同的布局替换行`appender.rolling.layout.type` 。请参阅下面的示例：

```properties
appender.rolling.type = RollingFile
appender.rolling.name = rolling
appender.rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.log
appender.rolling.layout.type = PatternLayout
appender.rolling.layout.pattern = [%d{ISO8601}][%-5p][%-25c{1.}] [%node_name]%marker %.-10000m%n
appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.log.gz
```

# Machine learning settings in Elasticsearch Elasticsearch 中的机器学习设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ml-settings.asciidoc)

You do not need to configure any settings to use machine learning. It is enabled by default.
您无需配置任何设置即可使用机器学习。默认情况下它是启用的。

Machine learning uses SSE4.2 instructions on x86_64 machines, so it works only on x86_64 machines whose CPUs [support](https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs) SSE4.2. (This limitation does not apply to aarch64 machines.) If you run Elasticsearch on older x86_64 hardware, you must disable machine learning (by setting `xpack.ml.enabled` to `false`). In this situation you should not attempt to use machine learning functionality in your cluster at all.
机器学习在 x86_64 机器上使用 SSE4.2 指令，因此它仅适用于 CPU[支持](https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs)SSE4.2 的 x86_64 机器。 （此限制不适用于 aarch64 计算机。）如果您在较旧的 x86_64 硬件上运行 Elasticsearch，则必须禁用机器学习（通过将`xpack.ml.enabled`设置为`false` ）。在这种情况下，您根本不应尝试在集群中使用机器学习功能。

## General machine learning settings 常规机器学习设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ml-settings.asciidoc)

- `node.roles: [ ml ]`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set `node.roles` to contain `ml` to identify the node as a *machine learning node*. If you want to run machine learning jobs, there must be at least one machine learning node in your cluster.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置`node.roles`以包含`ml`以将该节点标识为*机器学习节点*。如果要运行机器学习作业，集群中必须至少有一个机器学习节点。 If you set `node.roles`, you must explicitly specify all the required roles for the node. To learn more, refer to [Nodes](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html). 如果设置`node.roles` ，则必须显式指定节点所需的所有角色。要了解更多信息，请参阅[节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html)。    On dedicated coordinating nodes or dedicated master nodes, do not set the `ml` role.  在专用协调节点或专用主节点上，不要设置`ml`角色。 It is strongly recommended that dedicated machine learning nodes also have the `remote_cluster_client` role; otherwise, cross-cluster search fails when used in machine learning jobs or datafeeds. See [Remote-eligible node](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#remote-node).  强烈建议专用机器学习节点也具有`remote_cluster_client`角色；否则，在机器学习作业或数据馈送中使用时，跨集群搜索将失败。请参阅[远程合格节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#remote-node)。

- `xpack.ml.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The default value (`true`) enables machine learning APIs on the node.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）默认值 ( `true` ) 在节点上启用机器学习 API。  If you want to use machine learning features in your cluster, it is recommended that you use the default value for this setting on all nodes. 如果要在集群中使用机器学习功能，建议您在所有节点上使用此设置的默认值。  If set to `false`, the machine learning APIs are disabled on the node. For example, the node cannot open jobs, start datafeeds, receive transport (internal) communication requests, or requests from clients (including Kibana) related to machine learning APIs. If `xpack.ml.enabled` is not set uniformly across all nodes in your cluster then you are likely to experience problems with machine learning functionality not fully working. 如果设置为`false` ，则在节点上禁用机器学习 API。例如，节点无法打开作业、启动数据馈送、接收传输（内部）通信请求或来自与机器学习 API 相关的客户端（包括 Kibana）的请求。如果`xpack.ml.enabled`未在集群中的所有节点上统一设置，那么您可能会遇到机器学习功能无法完全运行的问题。 You must not use any machine learning functionality from ingest pipelines if `xpack.ml.enabled` is `false` on any node. Before setting `xpack.ml.enabled` to `false` on a node, consider whether you really meant to just exclude `ml` from the `node.roles`. Excluding `ml` from the [`node.roles`](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#node-roles) will stop the node from running machine learning jobs and NLP models, but it will still be aware that machine learning functionality exists. Setting `xpack.ml.enabled` to `false` should be reserved for situations where you cannot use machine learning functionality at all in your cluster due to hardware limitations as described [above](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html#ml-settings-description). 如果任何节点上的`xpack.ml.enabled`为`false` ，则不得使用摄取管道中的任何机器学习功能。在节点上将`xpack.ml.enabled`设置为`false`之前，请考虑您是否真的只想从`node.roles`中排除`ml` 。从[`node.roles`](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#node-roles)中排除`ml`将阻止节点运行机器学习作业和NLP模型，但它仍然会意识到机器学习功能的存在。将`xpack.ml.enabled`设置为`false`应该保留用于由于[上述](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html#ml-settings-description)硬件限制而无法在集群中使用机器学习功能的情况。

- `xpack.ml.inference_model.cache_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum inference cache size allowed. The inference cache exists in the JVM heap on each ingest node. The cache affords faster processing times for the `inference` processor. The value can be a static byte sized value (such as `2gb`) or a percentage of total allocated heap. Defaults to `40%`. See also [Machine learning circuit breaker settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html#model-inference-circuit-breaker).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）允许的最大推理缓存大小。推理缓存存在于每个摄取节点上的 JVM 堆中。高速缓存为`inference`处理器提供了更快的处理时间。该值可以是静态字节大小的值（例如`2gb` ）或总分配堆的百分比。默认为`40%` 。另请参阅[机器学习断路器设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html#model-inference-circuit-breaker)。



- `xpack.ml.inference_model.time_to_live` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The time to live (TTL) for trained models in the inference model cache. The TTL is calculated from last access. Users of the cache (such as the inference processor or inference aggregator) cache a model on its first use and reset the TTL on every use. If a cached model is not accessed for the duration of the TTL, it is flagged for eviction from the cache. If a document is processed later, the model is again loaded into the cache. To update this setting in Elasticsearch Service, see [Add Elasticsearch user settings](https://www.elastic.co/guide/en/cloud/current/ec-add-user-settings.html). Defaults to `5m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）推理模型缓存中训练模型的生存时间 (TTL)。 TTL 是根据上次访问计算的。缓存的用户（例如推理处理器或推理聚合器）在首次使用时缓存模型，并在每次使用时重置 TTL。如果在  TTL 时间内未访问缓存模型，则会将其标记为从缓存中逐出。如果稍后处理文档，模型将再次加载到缓存中。要在 Elasticsearch  Service 中更新此设置，请参阅[添加 Elasticsearch 用户设置](https://www.elastic.co/guide/en/cloud/current/ec-add-user-settings.html)。默认为`5m` 。

- `xpack.ml.max_inference_processors`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The total number of `inference` type processors allowed across all ingest pipelines. Once the limit is reached, adding an `inference` processor to a pipeline is disallowed. Defaults to `50`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）所有摄取管道允许的`inference`类型处理器总数。一旦达到限制，就不允许向管道添加`inference`处理器。默认为`50` 。

- `xpack.ml.max_machine_memory_percent`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The maximum percentage of the machine’s memory that machine learning may use for running analytics processes. These processes are separate to the Elasticsearch JVM. The limit is based on the total memory of the machine, not current free memory. Jobs are not allocated to a node if doing so would cause the estimated memory use of machine learning jobs to exceed the limit. When the operator privileges feature is enabled, this setting can be updated only by operator users. The minimum value is `5`; the maximum value is `200`. Defaults to `30`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）机器学习可用于运行分析进程的机器内存的最大百分比。这些进程独立于 Elasticsearch  JVM。该限制基于计算机的总内存，而不是当前可用内存。如果分配作业会导致机器学习作业的估计内存使用超出限制，则不会将作业分配给节点。当启用操作员权限功能时，此设置只能由操作员用户更新。最小值为`5` ；最大值为`200` 。默认为`30` 。  Do not configure this setting to a value higher than the amount of memory left over after running the Elasticsearch JVM unless you have enough swap space to accommodate it and have determined this is an appropriate configuration for a specialist use case. The maximum setting value is for the special case where it has been determined that using swap space for machine learning jobs is acceptable. The general best practice is to not use swap on Elasticsearch nodes. 请勿将此设置配置为高于运行 Elasticsearch JVM  后剩余内存量的值，除非您有足够的交换空间来容纳它，并且确定这是适合专业用例的配置。最大设置值适用于已确定可以接受将交换空间用于机器学习作业的特殊情况。一般最佳实践是不在 Elasticsearch 节点上使用交换。

- `xpack.ml.max_model_memory_limit`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The maximum `model_memory_limit` property value that can be set for any machine learning jobs in this cluster. If you try to create a job with a `model_memory_limit` property value that is greater than this setting value, an error occurs. Existing jobs are not affected when you update this setting. If this setting is `0` or unset, there is no maximum `model_memory_limit` value. If there are no nodes that meet the memory requirements for a job, this lack of a maximum memory limit means it’s possible to create jobs that cannot be assigned to any available nodes. For more information about the `model_memory_limit` property, see [Create anomaly detection jobs](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-put-job.html) or [Create data frame analytics jobs](https://www.elastic.co/guide/en/elasticsearch/reference/current/put-dfanalytics.html). Defaults to `0` if `xpack.ml.use_auto_machine_memory_percent` is `false`. If `xpack.ml.use_auto_machine_memory_percent` is `true` and `xpack.ml.max_model_memory_limit` is not explicitly set then it will default to the largest `model_memory_limit` that could be assigned in the cluster.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）可以为此集群中的任何机器学习作业设置的最大`model_memory_limit`属性值。如果您尝试创建`model_memory_limit`属性值大于此设置值的作业，则会发生错误。更新此设置时，现有作业不会受到影响。如果此设置为`0`或未设置，则没有最大`model_memory_limit`值。如果没有满足作业内存要求的节点，则缺乏最大内存限制意味着可能会创建无法分配给任何可用节点的作业。有关`model_memory_limit`属性的更多信息，请参阅[创建异常检测作业](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-put-job.html)或[创建数据框分析作业](https://www.elastic.co/guide/en/elasticsearch/reference/current/put-dfanalytics.html)。默认为`0`如果 `xpack.ml.use_auto_machine_memory_percent` 是`false` 。如果 `xpack.ml.use_auto_machine_memory_percent` 是`true`并且 `xpack.ml.max_model_memory_limit` 没有显式设置，那么它将默认为可以在集群中分配的最大`model_memory_limit` 。



- `xpack.ml.max_open_jobs`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The maximum number of jobs that can run simultaneously on a node. In this context, jobs include both anomaly detection jobs and data frame analytics jobs. The maximum number of jobs is also constrained by memory usage. Thus if the estimated memory usage of the jobs would be higher than allowed, fewer jobs will run on a node. Prior to version 7.1, this setting was a per-node non-dynamic setting. It became a cluster-wide dynamic setting in version 7.1. As a result, changes to its value after node startup are used only after every node in the cluster is running version 7.1 or higher. The minimum value is `1`; the maximum value is `512`. Defaults to `512`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）一个节点上可以同时运行的最大作业数。在这种情况下，作业包括异常检测作业和数据框架分析作业。最大作业数还受到内存使用量的限制。因此，如果作业的估计内存使用量高于允许的值，则节点上运行的作业将会减少。在版本 7.1 之前，此设置是每个节点的非动态设置。它在 7.1 版本中成为集群范围的动态设置。因此，只有在集群中的每个节点都运行版本 7.1  或更高版本后，才会使用节点启动后对其值的更改。最小值为`1` ；最大值为`512` 。默认为`512` 。

- `xpack.ml.nightly_maintenance_requests_per_second`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The rate at which the nightly maintenance task deletes expired model snapshots and results. The setting is a proxy to the [`requests_per_second`](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html#docs-delete-by-query-throttle) parameter used in the delete by query requests and controls throttling. When the operator privileges feature is enabled, this setting can be updated only by operator users. Valid values must be greater than `0.0` or equal to `-1.0`, where `-1.0` means a default value is used. Defaults to `-1.0` （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）夜间维护任务删除过期模型快照和结果的速率。该设置是在按查询删除请求和控制限制中使用的[`requests_per_second`](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html#docs-delete-by-query-throttle)参数的代理。当启用操作员权限功能时，此设置只能由操作员用户更新。有效值必须大于`0.0`或等于`-1.0` ，其中`-1.0`表示使用默认值。默认为`-1.0`

- `xpack.ml.node_concurrent_job_allocations`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The maximum number of jobs that can concurrently be in the `opening` state on each node. Typically, jobs spend a small amount of time in this state before they move to `open` state. Jobs that must restore large models when they are opening spend more time in the `opening` state. When the operator privileges feature is enabled, this setting can be updated only by operator users. Defaults to `2`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）每个节点上可以同时处于`opening`状态的作业的最大数量。通常，作业在进入`open`状态之前会在此状态花费少量时间。必须在打开时恢复大型模型的作业会花费更多时间处于`opening`状态。当启用操作员权限功能时，此设置只能由操作员用户更新。默认为`2` 。

## Advanced machine learning settings 高级机器学习设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ml-settings.asciidoc)

These settings are for advanced use cases; the default values are generally sufficient:
这些设置适用于高级用例；默认值通常就足够了：

- `xpack.ml.enable_config_migration`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Reserved. When the operator privileges feature is enabled, this setting can be updated only by operator users.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）保留。当启用操作员权限功能时，此设置只能由操作员用户更新。

- `xpack.ml.max_anomaly_records`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The maximum number of records that are output per bucket. Defaults to `500`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）每个存储桶输出的最大记录数。默认为`500` 。

- `xpack.ml.max_lazy_ml_nodes`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The number of lazily spun up machine learning nodes. Useful in situations where machine learning nodes are not desired until the first machine learning job opens. If the current number of machine learning nodes is greater than or equal to this setting, it is assumed that there are no more lazy nodes available as the desired number of nodes have already been provisioned. If a job is opened and this setting has a value greater than zero and there are no nodes that can accept the job, the job stays in the `OPENING` state until a new machine learning node is added to the cluster and the job is assigned to run on that node. When the operator privileges feature is enabled, this setting can be updated only by operator users. Defaults to `0`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）延迟旋转的机器学习节点的数量。在第一个机器学习作业打开之前不需要机器学习节点的情况下非常有用。如果机器学习节点的当前数量大于或等于此设置，则假定没有更多可用的惰性节点，因为已经配置了所需数量的节点。如果打开了一个作业，并且此设置的值大于零，并且没有可以接受该作业的节点，则该作业将保持在`OPENING`状态，直到将新的机器学习节点添加到集群并分配该作业来运行在该节点上。当启用操作员权限功能时，此设置只能由操作员用户更新。默认为`0` 。  This setting assumes some external process is capable of adding machine learning nodes to the cluster. This setting is only useful when used in conjunction with such an external process. 此设置假设某些外部进程能够将机器学习节点添加到集群。此设置仅在与此类外部进程结合使用时才有用。

- `xpack.ml.max_ml_node_size`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The maximum node size for machine learning nodes in a deployment that supports automatic cluster scaling. If you set it to the maximum possible size of future machine learning nodes, when a machine learning job is assigned to a lazy node it can check (and fail quickly) when scaling cannot support the size of the job. When the operator privileges feature is enabled, this setting can be updated only by operator users. Defaults to `0b`, which means it will be assumed that automatic cluster scaling can add arbitrarily large nodes to the cluster.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）支持自动集群扩展的部署中机器学习节点的最大节点大小。如果将其设置为未来机器学习节点的最大可能大小，则当将机器学习作业分配给惰性节点时，它可以在缩放无法支持作业大小时进行检查（并快速失败）。当启用操作员权限功能时，此设置只能由操作员用户更新。默认为`0b` ，这意味着将假定自动集群扩展可以向集群添加任意大的节点。



- `xpack.ml.model_repository`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The location of the machine learning model repository where the model artifact files are available in case of a model installation in a restricted or closed network. `xpack.ml.model_repository` can be a string of a file location or an HTTP/HTTPS server. Example values are:  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）机器学习模型存储库的位置，在受限或封闭网络中安装模型时，模型工件文件可用。 `xpack.ml.model_repository`可以是文件位置的字符串或 HTTP/HTTPS 服务器。示例值是： `xpack.ml.model_repository: file://${path.home}/config/models/` or 或者 `xpack.ml.model_repository: https://my-custom-backend` If `xpack.ml.model_repository` is a file location, it must point to a subdirectory of the `config` directory of Elasticsearch. 如果`xpack.ml.model_repository`是文件位置，则它必须指向 Elasticsearch `config`目录的子目录。

- `xpack.ml.persist_results_max_retries`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The maximum number of times to retry bulk indexing requests that fail while processing machine learning results. If the limit is reached, the machine learning job stops processing data and its status is `failed`. When the operator privileges feature is enabled, this setting can be updated only by operator users. The minimum value is `0`; the maximum value is `50`. Defaults to `20`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）处理机器学习结果时重试失败的批量索引请求的最大次数。如果达到限制，机器学习作业将停止处理数据，并且其状态为`failed` 。当启用操作员权限功能时，此设置只能由操作员用户更新。最小值为`0` ；最大值为`50` 。默认为`20` 。

- `xpack.ml.process_connect_timeout`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) The connection timeout for machine learning processes that run separately from the Elasticsearch JVM. When such processes are started they must connect to the Elasticsearch JVM. If the process does not connect within the time period specified by this setting then the process is assumed to have failed. When the operator privileges feature is enabled, this setting can be updated only by operator users. The minimum value is `5s`. Defaults to `10s`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）与 Elasticsearch JVM 分开运行的机器学习进程的连接超时。当此类进程启动时，它们必须连接到 Elasticsearch  JVM。如果进程在此设置指定的时间段内未连接，则假定该进程已失败。当启用操作员权限功能时，此设置只能由操作员用户更新。最小值为`5s` 。默认为`10s` 。

- `xpack.ml.use_auto_machine_memory_percent`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) If this setting is `true`, the `xpack.ml.max_machine_memory_percent` setting is ignored. Instead, the maximum percentage of the machine’s memory that can be used for running machine learning analytics processes is calculated automatically and takes into account the total node size and the size of the JVM on the node. When the operator privileges feature is enabled, this setting can be updated only by operator users. The default value is `false`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）如果此设置为`true` ，则 `xpack.ml.max_machine_memory_percent` 设置被忽略。相反，可用于运行机器学习分析进程的机器内存的最大百分比是自动计算的，并考虑总节点大小和节点上 JVM 的大小。当启用操作员权限功能时，此设置只能由操作员用户更新。默认值为`false` 。    If you do not have dedicated machine learning nodes (that is to say, the node has multiple roles), do not enable this setting. Its calculations assume that machine learning analytics are the main purpose of the node.  如果您没有专用的机器学习节点（即该节点具有多个角色），请勿启用此设置。其计算假设机器学习分析是该节点的主要目的。 The calculation assumes that dedicated machine learning nodes have at least `256MB` memory reserved outside of the JVM. If you have tiny machine learning nodes in your cluster, you shouldn’t use this setting.  该计算假设专用机器学习节点在 JVM 外部至少保留`256MB`内存。如果集群中有小型机器学习节点，则不应使用此设置。   If this setting is `true` it also affects the default value for `xpack.ml.max_model_memory_limit`. In this case `xpack.ml.max_model_memory_limit` defaults to the largest size that could be assigned in the current cluster. 如果此设置为`true`它也会影响默认值 `xpack.ml.max_model_memory_limit` 。在这种情况下 `xpack.ml.max_model_memory_limit` 默认为当前集群中可以分配的最大大小。

## Machine learning circuit breaker settings 机器学习断路器设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ml-settings.asciidoc)

The relevant circuit breaker settings can be found in the [Circuit Breakers page](https://www.elastic.co/guide/en/elasticsearch/reference/current/circuit-breaker.html#circuit-breakers-page-model-inference).
相关的断路器设置可以在[断路器页面](https://www.elastic.co/guide/en/elasticsearch/reference/current/circuit-breaker.html#circuit-breakers-page-model-inference)找到。

# nference API settings in Elasticsearch Elasticsearch 中的推理 API 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/inference-settings.asciidoc)

You do not need to configure any settings to use the inference APIs. Each setting has a default.
您无需配置任何设置即可使用推理 API。每个设置都有一个默认值。

## Inference API logging settings 推理 API 日志记录设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/inference-settings.asciidoc)

When certain failures occur, a log message is emitted. In the case of a reoccurring failure the logging throttler restricts repeated messages from being logged.
当发生某些故障时，会发出一条日志消息。如果再次发生故障，日志记录限制器会限制记录重复的消息。

- `xpack.inference.logging.reset_interval`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the interval for when a cleanup thread will clear an internal cache of the previously logged messages. Defaults to one day (`1d`).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定清理线程清除先前记录的消息的内部缓存的时间间隔。默认为一天 ( `1d` )。

- `xpack.inference.logging.wait_duration`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the amount of time to wait after logging a message before that message can be logged again. Defaults to one hour (`1h`).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定记录消息后再次记录该消息之前等待的时间。默认为一小时 ( `1h` )。

### Inference API HTTP settings 推理 API HTTP 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/inference-settings.asciidoc)

- `xpack.inference.http.max_response_size`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the maximum size in bytes an HTTP response is allowed to have, defaults to `50mb`, the maximum configurable value is `100mb`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定 HTTP 响应允许的最大大小（以字节为单位），默认为`50mb` ，最大可配置值为`100mb` 。

- `xpack.inference.http.max_total_connections`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the maximum number of connections the internal connection pool can lease. Defaults to `50`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定内部连接池可以租用的最大连接数。默认为`50` 。

- `xpack.inference.http.max_route_connections`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the maximum number of connections a single route can lease from the internal connection pool. If this setting is set to a value equal to or greater than `xpack.inference.http.max_total_connections`, then a single third party service could lease all available connections and other third party services would be unable to lease connections. Defaults to `20`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定单个路由可以从内部连接池租用的最大连接数。如果此设置设置为等于或大于的值 `xpack.inference.http.max_total_connections` ，那么单个第三方服务可以租用所有可用连接，而其他第三方服务将无法租用连接。默认为`20` 。

- `xpack.inference.http.connection_eviction_interval`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the interval that an eviction thread will run to remove expired and stale connections from the internal connection pool. Decreasing this time value can help improve throughput if multiple third party service are contending for the available connections in the pool. Defaults to one minute (`1m`).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定逐出线程运行以从内部连接池中删除过期和陈旧连接的时间间隔。如果多个第三方服务争用池中的可用连接，则减小此时间值有助于提高吞吐量。默认为一分钟 ( `1m` )。

- `xpack.inference.http.connection_eviction_max_idle_time`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the maximum duration a connection can be unused before it is marked as idle and can be closed and removed from the shared connection pool. Defaults to one minute (`1m`).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定连接在被标记为空闲、可以关闭并从共享连接池中删除之前可以不使用的最长持续时间。默认为一分钟 ( `1m` )。

- `xpack.inference.http.request_executor.queue_capacity`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the size of the internal queue for requests waiting to be sent. If the queue is full and a request is sent to the inference API, it will be rejected. Defaults to `2000`.

### Inference API HTTP Retry settings 推理 API HTTP 重试设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/inference-settings.asciidoc)

When a third-party service returns a transient failure code (for example, 429), the request is retried by the inference API. These settings govern the retry behavior. When a request is retried, exponential backoff is used.
当第三方服务返回暂时性失败代码（例如 429）时，推理 API 会重试该请求。这些设置控制重试行为。重试请求时，将使用指数退避。

- `xpack.inference.http.retry.initial_delay`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the initial delay before retrying a request. Defaults to one second (`1s`).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定重试请求之前的初始延迟。默认为一秒 ( `1s` )。

- `xpack.inference.http.retry.max_delay_bound`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the maximum delay for a request. Defaults to five seconds (`5s`).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定请求的最大延迟。默认为五秒 ( `5s` )。

- `xpack.inference.http.retry.timeout`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the maximum amount of time a request can be retried. Once the request exceeds this time, the request will no longer be retried and a failure will be returned. Defaults to 30 seconds (`30s`).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定请求可以重试的最长时间。一旦请求超过这个时间，将不再重试该请求，并返回失败。默认为 30 秒 ( `30s` )。

### Inference API Input text 推理 API 输入文本

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/inference-settings.asciidoc)

For certain third-party service integrations, when the service returns an error indicating that the request input was too large, the input will be truncated and the request is retried. These settings govern how the truncation is performed.
对于某些第三方服务集成，当服务返回错误指示请求输入太大时，输入将被截断并重试请求。这些设置控制截断的执行方式。

- `xpack.inference.truncator.reduction_percentage`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Specifies the percentage to reduce the input text by if the 3rd party service responds with an error indicating it is too long. Defaults to 50 percent (`0.5`).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）指定当第 3 方服务响应错误指示输入文本太长时减少输入文本的百分比。默认为 50% ( `0.5` )。

# Monitoring settings in Elasticsearch Elasticsearch 中的监控设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

## Deprecated in 7.16. 7.16 中已弃用。

Using the Elasticsearch Monitoring plugin to collect and ship monitoring data is deprecated. Elastic Agent and Metricbeat are the recommended methods for collecting and shipping monitoring data to a monitoring cluster. If you previously configured legacy collection methods, you should migrate to using [Elastic Agent](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-elastic-agent.html) or [Metricbeat](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-metricbeat.html) collection methods.
不推荐使用 Elasticsearch 监控插件来收集和发送监控数据。 Elastic Agent 和 Metricbeat 是收集监控数据并将其发送到监控集群的推荐方法。如果您之前配置了旧收集方法，则应迁移到使用[Elastic Agent](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-elastic-agent.html)或[Metricbeat](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-metricbeat.html)收集方法。

By default, Elasticsearch monitoring features are enabled but data collection is disabled. To enable data collection, use the `xpack.monitoring.collection.enabled` setting.
默认情况下，Elasticsearch 监控功能已启用，但数据收集已禁用。要启用数据收集，请使用 `xpack.monitoring.collection.enabled` 环境。

Except where noted otherwise, these settings can be dynamically updated on a live cluster with the [cluster-update-settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html) API.
除非另有说明，这些设置可以使用[cluster-update-settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html) API 在实时集群上动态更新。

To adjust how monitoring data is displayed in the monitoring UI, configure [`xpack.monitoring` settings](https://www.elastic.co/guide/en/kibana/8.15/monitoring-settings-kb.html) in `kibana.yml`. To control how monitoring data is collected from Logstash, configure monitoring settings in `logstash.yml`.
要调整监控数据在监控 UI 中的显示方式，请在`kibana.yml`中配置[`xpack.monitoring`设置](https://www.elastic.co/guide/en/kibana/8.15/monitoring-settings-kb.html)。要控制如何从 Logstash 收集监控数据，请在`logstash.yml`中配置监控设置。

For more information, see [Monitor a cluster](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitor-elasticsearch-cluster.html).
有关更多信息，请参阅[监控集群](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitor-elasticsearch-cluster.html)。

### General monitoring settings 常规监控设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

- `xpack.monitoring.enabled`

  [7.8.0]  [ 7.8.0 ] Deprecated in 7.8.0. Basic License features should always be enabled  7.8.0 中已弃用。应始终启用基本许可证功能 ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) This deprecated setting has no effect.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）此已弃用的设置无效。

### Monitoring collection settings 监控集合设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

The `xpack.monitoring.collection` settings control how data is collected from your Elasticsearch nodes.
`xpack.monitoring.collection`设置控制如何从 Elasticsearch 节点收集数据。

- `xpack.monitoring.collection.enabled`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0. 7.16.0 中已弃用。  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。  Set to `true` to enable the collection of monitoring data. When this setting is `false` (default), Elasticsearch monitoring data is not collected and all monitoring data from other sources such as Kibana, Beats, and Logstash is ignored.  设置为`true`以启用监控数据的收集。当此设置为`false` （默认）时，Elasticsearch 监控数据为 未收集的所有监控数据均来自其他来源，例如 Kibana、Beats、 Logstash 被忽略。



- `xpack.monitoring.collection.interval` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  [6.3.0]  [ 6.3.0 ] Deprecated in 6.3.0. Use `xpack.monitoring.collection.enabled` set to `false` instead.  6.3.0 中已弃用。使用 `xpack.monitoring.collection.enabled` 设置为`false`代替。 ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)) Setting to `-1` to disable data collection is no longer supported beginning with 7.0.0.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)）设置为`-1`以禁用数据收集 从 7.0.0 开始不再支持。 Controls how often data samples are collected. Defaults to `10s`. If you modify the collection interval, set the `xpack.monitoring.min_interval_seconds` option in `kibana.yml` to the same value. 控制收集数据样本的频率。默认为`10s` 。如果修改收集间隔，请设置 `xpack.monitoring.min_interval_seconds` `kibana.yml`中的选项设置为相同的值。

- `xpack.monitoring.elasticsearch.collection.enabled`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0.  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Controls whether statistics about your Elasticsearch cluster should be collected. Defaults to `true`. This is different from `xpack.monitoring.collection.enabled`, which allows you to enable or disable all monitoring collection. However, this setting simply disables the collection of Elasticsearch data while still allowing other data (e.g., Kibana, Logstash, Beats, or APM Server monitoring data) to pass through this cluster.  控制是否统计有关您的 应收集Elasticsearch集群。默认为`true` 。这不同于 `xpack.monitoring.collection.enabled` ，它允许您启用或禁用所有 监控采集。但是，此设置只是禁用收集 Elasticsearch 数据，同时仍允许其他数据（例如 Kibana、Logstash、Beats 或 APM） 服务器监控数据）通过这个集群来传递。

- `xpack.monitoring.collection.cluster.stats.timeout`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0.  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Timeout for collecting the cluster statistics, in [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `10s`.  收集集群超时 统计数据，以[时间为单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。默认为`10s` 。

- `xpack.monitoring.collection.node.stats.timeout`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0.  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Timeout for collecting the node statistics, in [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `10s`.  收集节点统计信息的超时时间， 以[时间为单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。默认为`10s` 。

- `xpack.monitoring.collection.indices`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0.  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Controls which indices the monitoring features collect data from. Defaults to all indices. Specify the index names as a comma-separated list, for example `test1,test2,test3`. Names can include wildcards, for example `test*`. You can explicitly exclude indices by prepending `-`. For example `test*,-test3` will monitor all indexes that start with `test` except for `test3`. System indices like .security* or .kibana* always start with a `.` and generally should be monitored. Consider adding `.*` to the list of indices ensure monitoring of system indices. For example: `.*,test*,-test3` 控制哪些索引 监控功能收集数据。默认为所有索引。指定索引 名称为逗号分隔列表，例如`test1,test2,test3` 。名称可以包含通配符，例如`test*` 。您可以通过在前面添加`-`来显式排除索引。例如`test*,-test3`将监控除`test3`之外的所有以`test`开头的索引。 .security* 或 .kibana* 等系统索引始终以`.`一般情况下应该进行监测。考虑将`.*`添加到索引列表中，以确保对系统索引的监控。例如： `.*,test*,-test3`

- `xpack.monitoring.collection.index.stats.timeout`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0.  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Timeout for collecting index statistics, in [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `10s`.  收集索引统计信息的超时， 以[时间为单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。默认为`10s` 。

- `xpack.monitoring.collection.index.recovery.active_only`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0.  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Controls whether or not all recoveries are collected. Set to `true` to collect only active recoveries. Defaults to `false`.  控制是否所有恢复都 集。设置为`true`以仅收集活动恢复。默认为`false` 。

- `xpack.monitoring.collection.index.recovery.timeout`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0.  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Timeout for collecting the recovery information, in [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `10s`.  收集恢复超时 信息，以[时间为单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。默认为`10s` 。



- `xpack.monitoring.history.duration` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html))   [7.16.0] Deprecated in 7.16.0.  （[动态的](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Retention duration beyond which the indices created by a monitoring exporter are automatically deleted, in [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `7d` (7 days).  保留期限超过 由监控导出器创建的索引将被自动删除， [时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。默认为`7d` （7 天）。 This setting has a minimum value of `1d` (1 day) to ensure that something is being monitored and it cannot be disabled. 此设置的最小值为`1d` （1 天），以确保某些内容正在受到监视并且无法禁用。  This setting currently impacts only `local`-type exporters. Indices created using the `http` exporter are not deleted automatically. 此设置目前仅影响`local`类型的导出器。使用`http`导出器创建的索引不会自动删除。

- `xpack.monitoring.exporters`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Configures where the agent stores monitoring data. By default, the agent uses a local exporter that indexes monitoring data on the cluster where it is installed. Use an HTTP exporter to send data to a separate monitoring cluster. For more information, see [Local exporter settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitoring-settings.html#local-exporter-settings), [HTTP exporter settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitoring-settings.html#http-exporter-settings), and [*How it works*](https://www.elastic.co/guide/en/elasticsearch/reference/current/how-monitoring-works.html).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）配置代理存储监控数据的位置。默认情况下，代理使用本地导出器来索引安装它的集群上的监控数据。使用 HTTP 导出器将数据发送到单独的监控集群。有关详细信息，请参阅[本地导出器设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitoring-settings.html#local-exporter-settings)、 [HTTP 导出器设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitoring-settings.html#http-exporter-settings)和[*工作原理*](https://www.elastic.co/guide/en/elasticsearch/reference/current/how-monitoring-works.html)。

### Local exporter settings 本地出口商设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

The `local` exporter is the default exporter used by monitoring features. As the name is meant to imply, it exports data to the *local* cluster, which means that there is not much needed to be configured.
`local`导出器是监控功能使用的默认导出器。顾名思义，它将数据导出到*本地*集群，这意味着不需要太多配置。

If you do not supply *any* exporters, then the monitoring features automatically create one for you. If any exporter is provided, then no default is added.
如果您不提供*任何*出口商，那么监控功能会自动为您创建一个。如果提供了任何导出器，则不会添加默认值。

```yaml
xpack.monitoring.exporters.my_local:
  type: local
```

- `type`

  [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  The value for a Local exporter must always be `local` and it is required.  本地出口商的值必须始终是`local` ，并且是必需的。

- `use_ingest`

  Whether to supply a placeholder pipeline to the cluster and a pipeline processor with every bulk request. The default value is `true`. If disabled, then it means that it will not use pipelines, which means that a future release cannot automatically upgrade bulk requests to future-proof them.  是否为集群提供占位符管道，并为每个批量请求提供管道处理器。默认值为`true` 。如果禁用，则意味着它将不使用管道，这意味着未来版本无法自动升级批量请求以适应未来需求。

- `cluster_alerts.management.enabled`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Whether to create cluster alerts for this cluster. The default value is `true`. To use this feature, Watcher must be enabled. If you have a basic license, cluster alerts are not displayed.  是否为此集群创建集群警报。默认值为`true` 。 要使用此功能，必须启用 Watcher。如果您有基本许可证， 不显示集群警报。

- `wait_master.timeout`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Time to wait for the master node to setup `local` exporter for monitoring, in [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). After that wait period, the non-master nodes warn the user for possible missing configuration. Defaults to `30s`.  等待主节点设置`local`导出器进行监控的时间，以[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。等待期过后，非主节点会警告用户可能丢失配置。默认为`30s` 。

### HTTP exporter settings HTTP 导出器设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

The following lists settings that can be supplied with the `http` exporter. All settings are shown as what follows the name you select for your exporter:
下面列出了可以随`http`导出器提供的设置。所有设置均显示在您为导出器选择的名称后面：

```yaml
xpack.monitoring.exporters.my_remote:
  type: http
  host: ["host:port", ...]
```

- `type`

  [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  The value for an HTTP exporter must always be `http` and it is required.  HTTP 导出器的值必须始终为`http` ，并且这是必需的。

- `host`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Host supports multiple formats, both as an array or as a single value. Supported formats include `hostname`, `hostname:port`, `http://hostname` `http://hostname:port`, `https://hostname`, and `https://hostname:port`. Hosts cannot be assumed. The default scheme is always `http` and the default port is always `9200` if not supplied as part of the `host` string.  Host 支持多种格式，既可以作为数组，也可以作为单个值。支持 格式包括`hostname` 、 `hostname:port` 、 `http://hostname` `http://hostname:port` 、 `https://hostname`和`https://hostname:port` 。无法假定主机。默认方案始终为`http` ，如果未作为`host`字符串的一部分提供，则默认端口始终为`9200` 。  `xpack.monitoring.exporters:  example1:    type: http    host: "10.1.2.3"  example2:    type: http    host: ["http://10.1.2.4"]  example3:    type: http    host: ["10.1.2.5", "10.1.2.6"]  example4:    type: http    host: ["https://10.1.2.3:9200"]`

- `auth.username`

  [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  The username is required if `auth.secure_password` is supplied.  如果提供了`auth.secure_password` ，则需要用户名。

- `auth.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html), [reloadable](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html#reloadable-secure-settings))   [7.16.0] Deprecated in 7.16.0.  （安全，可重新加载）[7.16.0] The password for the `auth.username`.  这 `auth.username`的密码。

- `connection.timeout`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Amount of time that the HTTP connection is supposed to wait for a socket to open for the request, in [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). The default value is `6s`.  HTTP 连接等待套接字打开的时间量 对于请求，以[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。默认值为`6s` 。

- `connection.read_timeout`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Amount of time that the HTTP connection is supposed to wait for a socket to send back a response, in [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). The default value is `10 * connection.timeout` (`60s` if neither are set).  HTTP 连接应该等待套接字的时间量 以[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)发回响应。默认值为`10 * connection.timeout` （如果两者均未设置，则为`60s` ）。

- `ssl`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Each HTTP exporter can define its own TLS / SSL settings or inherit them. See [X-Pack monitoring TLS/SSL settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitoring-settings.html#ssl-monitoring-settings).  每个 HTTP 导出器都可以定义自己的 TLS / SSL 设置或继承它们。看 [X-Pack 监控 TLS/SSL 设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitoring-settings.html#ssl-monitoring-settings)。

- `proxy.base_path`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  The base path to prefix any outgoing request, such as `/base/path` (e.g., bulk requests would then be sent as `/base/path/_bulk`). There is no default value.  为任何传出请求添加前缀的基本路径，例如`/base/path` （例如，批量请求将作为`/base/path/_bulk`发送）。没有默认值。

- `headers`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Optional headers that are added to every request, which can assist with routing requests through proxies.  添加到每个请求中的可选标头，可以帮助路由 通过代理请求。  `xpack.monitoring.exporters.my_remote:  headers:    X-My-Array: [abc, def, xyz]    X-My-Header: abc123` Array-based headers are sent `n` times where `n` is the size of the array. `Content-Type` and `Content-Length` cannot be set. Any headers created by the monitoring agent will override anything defined here. 基于数组的标头被发送`n`次，其中`n`是数组的大小。无法设置`Content-Type`和`Content-Length` 。监控代理创建的任何标头都将覆盖此处定义的任何内容。

- `index.name.time_format`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  A mechanism for changing the default date suffix for daily monitoring indices. The default format is `yyyy.MM.dd`. For example, `.monitoring-es-7-2021.08.26`.  更改每日监控索引默认日期后缀的机制。 默认格式为`yyyy.MM.dd` 。例如， `.monitoring-es-7-2021.08.26` 。

- `use_ingest`

  Whether to supply a placeholder pipeline to the monitoring cluster and a pipeline processor with every bulk request. The default value is `true`. If disabled, then it means that it will not use pipelines, which means that a future release cannot automatically upgrade bulk requests to future-proof them.  是否为每个批量请求提供一个占位符管道到监控集群和一个管道处理器。默认值为`true` 。如果禁用，则意味着它将不使用管道，这意味着未来版本无法自动升级批量请求以适应未来需求。

- `cluster_alerts.management.enabled`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Whether to create cluster alerts for this cluster. The default value is `true`. To use this feature, Watcher must be enabled. If you have a basic license, cluster alerts are not displayed.  是否为此集群创建集群警报。默认值为`true` 。 要使用此功能，必须启用 Watcher。如果您有基本许可证， 不显示集群警报。

- `cluster_alerts.management.blacklist`

    [7.16.0]  [ 7.16.0 ] Deprecated in 7.16.0.  Prevents the creation of specific cluster alerts. It also removes any applicable watches that already exist in the current cluster.  防止创建特定的集群警报。它还删除了任何适用的 当前集群中已存在的手表。 You can add any of the following watch identifiers to the list of blocked alerts: 您可以将以下任何手表标识符添加到阻止的警报列表中：  `elasticsearch_cluster_status`  `elasticsearch_version_mismatch`  `elasticsearch_nodes`  `kibana_version_mismatch`  `logstash_version_mismatch`  `xpack_license_expiration`  For example: `["elasticsearch_version_mismatch","xpack_license_expiration"]`. 例如： `["elasticsearch_version_mismatch","xpack_license_expiration"]` 。

## X-Pack monitoring TLS/SSL settings X-Pack 监控 TLS/SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

You can configure the following TLS/SSL settings.
您可以配置以下 TLS/SSL 设置。

- `xpack.monitoring.exporters.$NAME.ssl.supported_protocols`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))   [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `xpack.monitoring.exporters.$NAME.ssl.verification_mode`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))   [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 Controls the verification of certificates.  控制证书的验证。 Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `xpack.monitoring.exporters.$NAME.ssl.cipher_suites`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))   [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  支持的密码套件因您使用的 Java 版本而异。为了 例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

### X-Pack monitoring TLS/SSL key and trusted certificate settings

[edit](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

The following settings are used to specify a private key, certificate, and the trusted certificates that should be used when communicating over an SSL/TLS connection. A private key and certificate are optional and would be used if the server requires client authentication for PKI authentication.

### PEM encoded files PEM 编码文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

When using PEM encoded files, use the following settings:
使用 PEM 编码文件时，请使用以下设置：

- `xpack.monitoring.exporters.$NAME.ssl.key`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 Path to a PEM encoded file containing the private key.  包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `xpack.monitoring.exporters.$NAME.ssl.key_passphrase`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  [7.17.0] Deprecated in 7.17.0.  用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 [7.17.0] Prefer `ssl.secure_key_passphrase` instead.  更喜欢`ssl.secure_key_passphrase` 。 You cannot use this setting and `ssl.secure_key_passphrase` at the same time. 您不能同时使用此设置和`ssl.secure_key_passphrase` 。

- `xpack.monitoring.exporters.$NAME.ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html))  [7.16.0] Deprecated in 7.16.0.  （[安全的](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  用于解密私钥的密码。由于钥匙可能不 是否加密，该值是可选的。

- `xpack.monitoring.exporters.$NAME.ssl.certificate`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  指定 PEM 编码证书（或证书链）的路径 与密钥相关联。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。

- `xpack.monitoring.exporters.$NAME.ssl.certificate_authorities`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 List of paths to PEM encoded certificate files that should be trusted.  应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。

### Java keystore files Java 密钥库文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

When using Java keystore files (JKS), which contain the private key, certificate and certificates that should be trusted, use the following settings:
使用包含私钥、证书和应信任证书的 Java 密钥库文件 (JKS) 时，请使用以下设置：

- `xpack.monitoring.exporters.$NAME.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 The path for the keystore file that contains a private key and certificate.  包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html))  [7.16.0] Deprecated in 7.16.0.  （[安全的](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 The password for the keystore.  密钥库的密码。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html))  [7.16.0] Deprecated in 7.16.0.  （[安全的](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 The password for the key in the keystore. The default is the keystore password.  密钥库中密钥的密码。默认是密钥库密码。

- `xpack.monitoring.exporters.$NAME.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  包含要信任的证书的密钥库的路径。一定是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.monitoring.exporters.$NAME.ssl.truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `xpack.monitoring.exporters.$NAME.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html))  [7.16.0] Deprecated in 7.16.0.  （[安全的](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Password for the truststore.  信任库的密码。

### PKCS#12 files PKCS#12 文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/monitoring-settings.asciidoc)

Elasticsearch can be configured to use PKCS#12 container files (`.p12` or `.pfx` files) that contain the private key, certificate and certificates that should be trusted.
Elasticsearch 可以配置为使用 PKCS#12 容器文件（ `.p12`或`.pfx`文件），其中包含私钥、证书和应信任的证书。

PKCS#12 files are configured in the same way as Java keystore files:
PKCS#12 文件的配置方式与 Java 密钥库文件相同：

- `xpack.monitoring.exporters.$NAME.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 The path for the keystore file that contains a private key and certificate.  包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html))  [7.16.0] Deprecated in 7.16.0.  （[安全的](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 The password for the keystore.  密钥库的密码。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。

- `xpack.monitoring.exporters.$NAME.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html))  [7.16.0] Deprecated in 7.16.0.  （[安全的](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 The password for the key in the keystore. The default is the keystore password.  密钥库中密钥的密码。默认是密钥库密码。

- `xpack.monitoring.exporters.$NAME.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  包含要信任的证书的密钥库的路径。一定是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.monitoring.exporters.$NAME.ssl.truststore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （静态）[7.16.0] Set this to `PKCS12` to indicate that the truststore is a PKCS#12 file.  将其设置为`PKCS12`以指示信任库是 PKCS#12 文件。

- `xpack.monitoring.exporters.$NAME.ssl.truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting))  [7.16.0] Deprecated in 7.16.0.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.16.0 ] 7.16.0 中已弃用。 The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `xpack.monitoring.exporters.$NAME.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html))  [7.16.0] Deprecated in 7.16.0.  （[安全的](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)） [ 7.16.0 ] 7.16.0 中已弃用。 Password for the truststore.  信任库的密码。

# Nodes 节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Any time that you start an instance of Elasticsearch, you are starting a *node*. A collection of connected nodes is called a [cluster](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cluster.html). If you are running a single node of Elasticsearch, then you have a cluster of one node.
每当您启动 Elasticsearch 实例时，您都在启动一个*节点*。连接的节点的集合称为[集群](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cluster.html)。如果您运行的是 Elasticsearch 的单个节点，那么您就有一个只有一个节点的集群。

Every node in the cluster can handle [HTTP and transport](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html) traffic by default. The transport layer is used exclusively for communication between nodes; the HTTP layer is used by REST clients.
默认情况下，集群中的每个节点都可以处理[HTTP 和传输](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html)流量。传输层专门用于节点之间的通信； HTTP 层由 REST 客户端使用。

All nodes know about all the other nodes in the cluster and can forward client requests to the appropriate node.
所有节点都知道集群中的所有其他节点，并且可以将客户端请求转发到适当的节点。

The performance of an Elasticsearch node is often limited by the performance of the underlying storage. Review our recommendations for optimizing your storage for [indexing](https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-indexing-speed.html#indexing-use-faster-hardware) and [search](https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html#search-use-faster-hardware).
Elasticsearch 节点的性能通常受到底层存储性能的限制。查看我们关于优化[索引](https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-indexing-speed.html#indexing-use-faster-hardware)和[搜索](https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html#search-use-faster-hardware)存储的建议。

## Node roles 节点角色

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

You define a node’s roles by setting `node.roles` in `elasticsearch.yml`. If you set `node.roles`, the node is only assigned the roles you specify. If you don’t set `node.roles`, the node is assigned the following roles:
您可以通过在`elasticsearch.yml`中设置`node.roles`来定义节点的角色。如果您设置`node.roles` ，则仅向该节点分配您指定的角色。如果您不设置`node.roles` ，则会为该节点分配以下角色：

- `master`
- `data`
- `data_content`
- `data_hot`
- `data_warm`
- `data_cold`
- `data_frozen`
- `ingest`
- `ml`
- `remote_cluster_client`
- `transform`

If you set `node.roles`, ensure you specify every node role your cluster needs. Every cluster requires the following node roles:
如果您设置`node.roles` ，请确保指定集群所需的每个节点角色。每个集群都需要以下节点角色：

- `master`

- 

  `data_content` and `data_hot`
  `data_content`和`data_hot`
   OR 或者
   `data`

Some Elastic Stack features also require specific node roles:
一些 Elastic Stack 功能还需要特定的节点角色：

- Cross-cluster search and cross-cluster replication require the `remote_cluster_client` role. 
  跨集群搜索和跨集群复制需要`remote_cluster_client`角色。
- Stack Monitoring and ingest pipelines require the `ingest` role. 
  堆栈监控和摄取管道需要`ingest`角色。
- Fleet, the Elastic Security app, and transforms require the `transform` role. The `remote_cluster_client` role is also required to use cross-cluster search with these features. 
  Fleet、Elastic Security 应用程序和转换需要`transform`角色。还需要`remote_cluster_client`角色才能使用具有这些功能的跨集群搜索。
- Machine learning features, such as anomaly detection, require the `ml` role. 
  机器学习功能（例如异常检测）需要`ml`学习角色。

As the cluster grows and in particular if you have large machine learning jobs or continuous transforms, consider separating dedicated master-eligible nodes from dedicated data nodes, machine learning nodes, and transform nodes.
随着集群的增长，特别是如果您有大型机器学习作业或连续转换，请考虑将专用的主合格节点与专用数据节点、机器学习节点和转换节点分开。

- [Master-eligible node 主节点资格](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#master-node)

  A node that has the `master` role, which makes it eligible to be [elected as the *master* node](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery.html), which controls the cluster.  具有`master`角色的节点，使其有资格被[选举*为主*节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery.html)，控制集群。

- [Data node 数据节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#data-node)

  A node that has one of several data roles. Data nodes hold data and perform data related operations such as CRUD, search, and aggregations. A node with a generic `data` role can fill any of the specialized data node roles.  具有多个数据角色之一的节点。数据节点保存数据并执行数据相关操作，例如 CRUD、搜索和聚合。具有通用`data`角色的节点可以担任任何专用数据节点角色。

- [Ingest node 摄取节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#node-ingest-node)

  A node that has the `ingest` role. Ingest nodes are able to apply an [ingest pipeline](https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html) to a document in order to transform and enrich the document before indexing. With a heavy ingest load, it makes sense to use dedicated ingest nodes and to not include the `ingest` role from nodes that have the `master` or `data` roles.  具有`ingest`角色的节点。摄取节点能够将[摄取管道](https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html)应用于文档，以便在索引之前转换和丰富文档。对于较重的摄取负载，使用专用摄取节点并且不包括具有`master`或`data`角色的节点的`ingest`角色是有意义的。

- [Remote-eligible node 符合远程条件的节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#remote-node)

  A node that has the `remote_cluster_client` role, which makes it eligible to act as a remote client.  具有`remote_cluster_client`角色的节点，这使得它有资格充当远程客户端。

- [Machine learning node 机器学习节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#ml-node)

  A node that has the `ml` role. If you want to use machine learning features, there must be at least one machine learning node in your cluster. For more information, see [Machine learning settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html) and [Machine learning in the Elastic Stack](https://www.elastic.co/guide/en/machine-learning/8.15/index.html).  具有`ml`角色的节点。如果要使用机器学习功能，集群中必须至少有一个机器学习节点。有关更多信息，请参阅[机器学习设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html)和[Elastic Stack 中的机器学习](https://www.elastic.co/guide/en/machine-learning/8.15/index.html)。

- [Transform node 变换节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#transform-node)

  A node that has the `transform` role. If you want to use transforms, there must be at least one transform node in your cluster. For more information, see [Transforms settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-settings.html) and [*Transforming data*](https://www.elastic.co/guide/en/elasticsearch/reference/current/transforms.html).  具有`transform`角色的节点。如果要使用转换，集群中必须至少有一个转换节点。有关更多信息，请参阅[转换设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-settings.html)和[*转换数据*](https://www.elastic.co/guide/en/elasticsearch/reference/current/transforms.html)。

## Coordinating node 协调节点

Requests like search requests or bulk-indexing requests may involve data held on different data nodes. A search request, for example, is executed in two phases which are coordinated by the node which receives the client request — the *coordinating node*.
搜索请求或批量索引请求等请求可能涉及不同数据节点上保存的数据。例如，搜索请求分两个阶段执行，这两个阶段由接收客户端请求的节点（*协调节点*）协调。

In the *scatter* phase, the coordinating node forwards the request to the data nodes which hold the data. Each data node executes the request locally and returns its results to the coordinating node. In the *gather* phase, the coordinating node reduces each data node’s results into a single global result set.
在*分散*阶段，协调节点将请求转发到保存数据的数据节点。每个数据节点在本地执行请求并将其结果返回给协调节点。在*收集*阶段，协调节点将每个数据节点的结果缩减为单个全局结果集。

Every node is implicitly a coordinating node. This means that a node that has an explicit empty list of roles via `node.roles` will only act as a coordinating node, which cannot be disabled. As a result, such a node needs to have enough memory and CPU in order to deal with the gather phase.
每个节点都是隐式的协调节点。这意味着通过`node.roles`具有显式空角色列表的节点将仅充当协调节点，无法禁用。因此，这样的节点需要有足够的内存和 CPU 才能处理收集阶段。

## Master-eligible node 主节点资格

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

The master node is responsible for lightweight cluster-wide actions such as creating or deleting an index, tracking which nodes are part of the cluster, and deciding which shards to allocate to which nodes. It is important for cluster health to have a stable master node.
主节点负责轻量级集群范围内的操作，例如创建或删除索引、跟踪哪些节点是集群的一部分以及决定将哪些分片分配给哪些节点。拥有稳定的主节点对于集群健康非常重要。

Any master-eligible node that is not a [voting-only node](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#voting-only-node) may be elected to become the master node by the [master election process](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery.html).

Master nodes must have a `path.data` directory whose contents persist across restarts, just like data nodes, because this is where the cluster metadata is stored. The cluster metadata describes how to read the data stored on the data nodes, so if it is lost then the data stored on the data nodes cannot be read.
主节点必须有一个`path.data`目录，其内容在重新启动后仍然存在，就像数据节点一样，因为这是存储集群元数据的地方。集群元数据描述了如何读取存储在数据节点上的数据，因此如果丢失则存储在数据节点上的数据将无法读取。

### Dedicated master-eligible node 专用主节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

It is important for the health of the cluster that the elected master node has the resources it needs to fulfill its responsibilities. If the elected master node is overloaded with other tasks then the cluster will not operate well. The most reliable way to avoid overloading the master with other tasks is to configure all the master-eligible nodes to be *dedicated master-eligible nodes* which only have the `master` role, allowing them to focus on managing the cluster. Master-eligible nodes will still also behave as [coordinating nodes](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#coordinating-node) that route requests from clients to the other nodes in the cluster, but you should *not* use dedicated master nodes for this purpose.
对于集群的健康来说，当选的主节点拥有履行其职责所需的资源非常重要。如果选出的主节点因其他任务而超载，则集群将无法正常运行。避免主节点因其他任务而超载的最可靠方法是将所有符合主节点条件的节点配置为仅具有`master`角色*的专用主节点节点*，使它们能够专注于管理集群。符合主节点资格的节点仍将充当[协调节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#coordinating-node)，将客户端的请求路由到集群中的其他节点，但您*不应*为此目的使用专用主节点。

A small or lightly-loaded cluster may operate well if its master-eligible nodes have other roles and responsibilities, but once your cluster comprises more than a handful of nodes it usually makes sense to use dedicated master-eligible nodes.
如果小型或轻负载集群的符合主节点资格的节点具有其他角色和职责，则该集群可能会运行良好，但是一旦您的集群包含多个节点，那么使用专用的符合主节点资格的节点通常是有意义的。

To create a dedicated master-eligible node, set:
要创建专用的符合主节点资格的节点，请设置：

```yaml
node.roles: [ master ]
```

### Voting-only master-eligible node 仅投票的主节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

A voting-only master-eligible node is a node that participates in [master elections](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery.html) but which will not act as the cluster’s elected master node. In particular, a voting-only node can serve as a tiebreaker in elections.
仅投票的主节点是参与[主节点选举](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery.html)但不会充当集群选举主节点的节点。特别是，仅投票节点可以充当选举中的决胜局。

It may seem confusing to use the term "master-eligible" to describe a voting-only node since such a node is not actually eligible to become the master at all. This terminology is an unfortunate consequence of history: master-eligible nodes are those nodes that participate in elections and perform certain tasks during cluster state publications, and voting-only nodes have the same responsibilities even if they can never become the elected master.
使用术语“主节点资格”来描述仅投票节点可能看起来很混乱，因为这样的节点实际上根本没有资格成为主节点。这个术语是历史的不幸后果：符合主节点资格的节点是那些参与选举并在集群状态发布期间执行某些任务的节点，而仅投票节点即使永远无法成为当选主节点，也具有相同的责任。

To configure a master-eligible node as a voting-only node, include `master` and `voting_only` in the list of roles. For example to create a voting-only data node:
要将符合主资格的节点配置为仅投票节点，请在角色列表中包含`master`和`voting_only` 。例如创建一个仅投票的数据节点：

```yaml
node.roles: [ data, master, voting_only ]
```

Only nodes with the `master` role can be marked as having the `voting_only` role.
只有具有`master`角色的节点才能被标记为具有`voting_only`角色。

High availability (HA) clusters require at least three master-eligible nodes, at least two of which are not voting-only nodes. Such a cluster will be able to elect a master node even if one of the nodes fails.
高可用性 (HA) 集群需要至少三个符合主节点资格的节点，其中至少两个不是仅投票节点。即使其中一个节点发生故障，这样的集群也能够选举主节点。

Voting-only master-eligible nodes may also fill other roles in your cluster. For instance, a node may be both a data node and a voting-only master-eligible node. A *dedicated* voting-only master-eligible nodes is a voting-only master-eligible node that fills no other roles in the cluster. To create a dedicated voting-only master-eligible node, set:
仅投票的符合主节点资格的节点也可能担任集群中的其他角色。例如，一个节点可以既是数据节点又是仅投票的主节点。*专用的*仅投票主节点是仅投票主节点，在集群中不担任其他角色。要创建专用的仅投票的主合格节点，请设置：

```yaml
node.roles: [ master, voting_only ]
```

Since dedicated voting-only nodes never act as the cluster’s elected master, they may require less heap and a less powerful CPU than the true master nodes. However all master-eligible nodes, including voting-only nodes, are on the critical path for [publishing cluster state updates](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-state-publishing.html). Cluster state updates are usually independent of performance-critical workloads such as indexing or searches, but they are involved in management activities such as index creation and rollover, mapping updates, and recovery after a failure. The performance characteristics of these activities are a function of the speed of the storage on each master-eligible node, as well as the reliability and latency of the network interconnections between the elected master node and the other nodes in the cluster. You must therefore ensure that the storage and networking available to the nodes in your cluster are good enough to meet your performance goals.
由于专用的仅投票节点从不充当集群选举的主节点，因此它们可能比真正的主节点需要更少的堆和更弱的 CPU。然而，所有符合主节点资格的节点，包括仅投票节点，都处于[发布集群状态更新](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-state-publishing.html)的关键路径上。集群状态更新通常独立于性能关键型工作负载（例如索引或搜索），但它们涉及管理活动，例如索引创建和滚动、映射更新以及故障后恢复。这些活动的性能特征是每个符合主节点资格的节点上的存储速度以及所选主节点与集群中其他节点之间网络互连的可靠性和延迟的函数。因此，您必须确保集群中节点可用的存储和网络足以满足您的性能目标。

## Data nodes 数据节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Data nodes hold the shards that contain the documents you have indexed. Data nodes handle data related operations like CRUD, search, and aggregations. These operations are I/O-, memory-, and CPU-intensive. It is important to monitor these resources and to add more data nodes if they are overloaded.
数据节点保存包含您已索引的文档的分片。数据节点处理数据相关操作，例如 CRUD、搜索和聚合。这些操作是 I/O、内存和 CPU 密集型操作。监视这些资源并在过载时添加更多数据节点非常重要。

The main benefit of having dedicated data nodes is the separation of the master and data roles.
拥有专用数据节点的主要好处是主角色和数据角色的分离。

In a multi-tier deployment architecture, you use specialized data roles to assign data nodes to specific tiers: `data_content`,`data_hot`, `data_warm`, `data_cold`, or `data_frozen`. A node can belong to multiple tiers.
在多层部署架构中，您可以使用专门的数据角色将数据节点分配到特定层： `data_content` 、 `data_hot` 、 `data_warm` 、 `data_cold`或`data_frozen` 。一个节点可以属于多个层。

If you want to include a node in all tiers, or if your cluster does not use multiple tiers, then you can use the generic `data` role.
如果您想要在所有层中包含一个节点，或者您的集群不使用多个层，那么您可以使用通用`data`角色。

[Cluster shard limits](https://www.elastic.co/guide/en/elasticsearch/reference/current/misc-cluster-settings.html#cluster-shard-limit) prevent creation of more than 1000 non-frozen shards per node, and 3000 frozen shards per dedicated frozen node. Make sure you have enough nodes of each type in your cluster to handle the number of shards you need.
[集群分片限制](https://www.elastic.co/guide/en/elasticsearch/reference/current/misc-cluster-settings.html#cluster-shard-limit)防止每个节点创建超过 1000 个非冻结分片，以及每个专用冻结节点创建超过 3000 个冻结分片。确保集群中每种类型都有足够的节点来处理所需的分片数量。

If you assign a node to a specific tier using a specialized data role, then you shouldn’t also assign it the generic `data` role. The generic `data` role takes precedence over specialized data roles.
如果您使用专用数据角色将节点分配到特定层，则不应同时为其分配通用`data`角色。通用`data`角色优先于专用数据角色。

### Generic data node 通用数据节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Generic data nodes are included in all content tiers.
通用数据节点包含在所有内容层中。

To create a dedicated generic data node, set:
要创建专用通用数据节点，请设置：

```yaml
node.roles: [ data ]
```

### Content data node 内容数据节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Content data nodes are part of the content tier. Data stored in the content tier is generally a collection of items such as a product catalog or article archive. Unlike time series data, the value of the content remains relatively constant over time, so it doesn’t make sense to move it to a tier with different performance characteristics as it ages. Content data typically has long data retention requirements, and you want to be able to retrieve items quickly regardless of how old they are.
内容数据节点是内容层的一部分。存储在内容层中的数据通常是项目的集合，例如产品目录或文章档案。与时间序列数据不同，内容的价值随着时间的推移保持相对恒定，因此随着时间的推移将其移动到具有不同性能特征的层是没有意义的。内容数据通常具有长期数据保留要求，并且您希望能够快速检索项目，无论它们有多旧。

Content tier nodes are usually optimized for query performance—they prioritize processing power over IO throughput so they can process complex searches and aggregations and return results quickly. While they are also responsible for indexing, content data is generally not ingested at as high a rate as time series data such as logs and metrics. From a resiliency perspective the indices in this tier should be configured to use one or more replicas.
内容层节点通常针对查询性能进行优化 - 它们优先考虑处理能力而不是 IO  吞吐量，因此它们可以处理复杂的搜索和聚合并快速返回结果。虽然它们还负责索引，但内容数据的摄取速度通常不如日志和指标等时间序列数据高。从弹性角度来看，这一层中的索引应配置为使用一个或多个副本。

The content tier is required. System indices and other indices that aren’t part of a data stream are automatically allocated to the content tier.
内容层是必需的。系统索引和不属于数据流一部分的其他索引会自动分配到内容层。

To create a dedicated content node, set:
要创建专用内容节点，请设置：

```yaml
node.roles: [ data_content ]
```

### Hot data node 热点数据节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Hot data nodes are part of the hot tier. The hot tier is the Elasticsearch entry point for time series data and holds your most-recent, most-frequently-searched time series data. Nodes in the hot tier need to be fast for both reads and writes, which requires more hardware resources and faster storage (SSDs). For resiliency, indices in the hot tier should be configured to use one or more replicas.
热数据节点是热层的一部分。热层是 Elasticsearch 时间序列数据的入口点，保存最新、最常搜索的时间序列数据。热层中的节点需要快速读取和写入，这需要更多的硬件资源和更快的存储 (SSD)。为了实现弹性，热层中的索引应配置为使用一个或多个副本。

The hot tier is required. New indices that are part of a [data stream](https://www.elastic.co/guide/en/elasticsearch/reference/current/data-streams.html) are automatically allocated to the hot tier.
需要热层。作为[数据流](https://www.elastic.co/guide/en/elasticsearch/reference/current/data-streams.html)一部分的新索引会自动分配到热层。

To create a dedicated hot node, set:
要创建专用热节点，请设置：

```yaml
node.roles: [ data_hot ]
```

### Warm data node 温数据节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Warm data nodes are part of the warm tier. Time series data can move to the warm tier once it is being queried less frequently than the recently-indexed data in the hot tier. The warm tier typically holds data from recent weeks. Updates are still allowed, but likely infrequent. Nodes in the warm tier generally don’t need to be as fast as those in the hot tier. For resiliency, indices in the warm tier should be configured to use one or more replicas.
温数据节点是温层的一部分。一旦查询时间序列数据的频率低于热层中最近索引的数据的频率，时间序列数据就可以移动到热层。温暖层通常保存最近几周的数据。仍然允许更新，但可能不频繁。热层中的节点通常不需要像热层中的节点那么快。为了实现弹性，热层中的索引应配置为使用一个或多个副本。

To create a dedicated warm node, set:
要创建专用温节点，请设置：

```yaml
node.roles: [ data_warm ]
```

### Cold data node 冷数据节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Cold data nodes are part of the cold tier. When you no longer need to search time series data regularly, it can move from the warm tier to the cold tier. While still searchable, this tier is typically optimized for lower storage costs rather than search speed.
冷数据节点是冷层的一部分。当您不再需要定期搜索时间序列数据时，可以从暖层移动到冷层。虽然仍然可搜索，但该层通常针对较低的存储成本而不是搜索速度进行优化。

For better storage savings, you can keep [fully mounted indices](https://www.elastic.co/guide/en/elasticsearch/reference/current/searchable-snapshots.html#fully-mounted) of [searchable snapshots](https://www.elastic.co/guide/en/elasticsearch/reference/current/ilm-searchable-snapshot.html) on the cold tier. Unlike regular indices, these fully mounted indices don’t require replicas for reliability. In the event of a failure, they can recover data from the underlying snapshot instead. This potentially halves the local storage needed for the data. A snapshot repository is required to use fully mounted indices in the cold tier. Fully mounted indices are read-only.
为了更好地节省存储空间，您可以将[可搜索快照](https://www.elastic.co/guide/en/elasticsearch/reference/current/ilm-searchable-snapshot.html)的[完全安装](https://www.elastic.co/guide/en/elasticsearch/reference/current/searchable-snapshots.html#fully-mounted)索引保留在冷层上。与常规索引不同，这些完全安装的索引不需要副本来保证可靠性。如果发生故障，他们可以从底层快照恢复数据。这可能会将数据所需的本地存储减少一半。需要快照存储库才能在冷层中使用完全安装的索引。完全安装的索引是只读的。

Alternatively, you can use the cold tier to store regular indices with replicas instead of using searchable snapshots. This lets you store older data on less expensive hardware but doesn’t reduce required disk space compared to the warm tier.
或者，您可以使用冷层来存储带有副本的常规索引，而不是使用可搜索快照。这使您可以将较旧的数据存储在较便宜的硬件上，但与热层相比不会减少所需的磁盘空间。

To create a dedicated cold node, set:
要创建专用冷节点，请设置：

```yaml
node.roles: [ data_cold ]
```

### Frozen data node 冻结数据节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Frozen data nodes are part of the frozen tier. Once data is no longer being queried, or being queried rarely, it may move from the cold tier to the frozen tier where it stays for the rest of its life.
冻结数据节点是冻结层的一部分。一旦数据不再被查询或很少被查询，它可能会从冷层移动到冻结层，并在其余生中保留在那里。

The frozen tier requires a snapshot repository. The frozen tier uses [partially mounted indices](https://www.elastic.co/guide/en/elasticsearch/reference/current/searchable-snapshots.html#partially-mounted) to store and load data from a snapshot repository. This reduces local storage and operating costs while still letting you search frozen data. Because Elasticsearch must sometimes fetch frozen data from the snapshot repository, searches on the frozen tier are typically slower than on the cold tier.
冻结层需要快照存储库。冻结层使用[部分安装的索引](https://www.elastic.co/guide/en/elasticsearch/reference/current/searchable-snapshots.html#partially-mounted)来存储快照存储库和从快照存储库加载数据。这降低了本地存储和运营成本，同时仍然允许您搜索冻结数据。由于 Elasticsearch 有时必须从快照存储库获取冻结数据，因此冻结层上的搜索通常比冷层上的搜索慢。

To create a dedicated frozen node, set:
要创建专用冻结节点，请设置：

```yaml
node.roles: [ data_frozen ]
```

## Ingest node 摄取节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Ingest nodes can execute pre-processing pipelines, composed of one or more ingest processors. Depending on the type of operations performed by the ingest processors and the required resources, it may make sense to have dedicated ingest nodes, that will only perform this specific task.
摄取节点可以执行由一个或多个摄取处理器组成的预处理管道。根据摄取处理器执行的操作类型和所需资源，拥有仅执行此特定任务的专用摄取节点可能是有意义的。

To create a dedicated ingest node, set:
要创建专用摄取节点，请设置：

```yaml
node.roles: [ ingest ]
```

## Coordinating only node 仅协调节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

If you take away the ability to be able to handle master duties, to hold data, and pre-process documents, then you are left with a *coordinating* node that can only route requests, handle the search reduce phase, and distribute bulk indexing. Essentially, coordinating only nodes behave as smart load balancers.
如果您剥夺了处理主职责、保存数据和预处理文档的能力，那么您只剩下一个只能路由请求、处理搜索缩减阶段和分发批量索引的*协调*节点。本质上，仅协调节点的行为就像智能负载均衡器一样。

Coordinating only nodes can benefit large clusters by offloading the coordinating node role from data and master-eligible nodes. They join the cluster and receive the full [cluster state](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-state.html), like every other node, and they use the cluster state to route requests directly to the appropriate place(s).
仅协调节点可以通过从数据和符合主资格的节点卸载协调节点角色来使大型集群受益。它们加入集群并接收完整的[集群状态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-state.html)，就像每个其他节点一样，它们使用集群状态将请求直接路由到适当的位置。

Adding too many coordinating only nodes to a cluster can increase the burden on the entire cluster because the elected master node must await acknowledgement of cluster state updates from every node! The benefit of coordinating only nodes should not be overstated — data nodes can happily serve the same purpose.
向集群添加太多仅协调节点会增加整个集群的负担，因为选出的主节点必须等待每个节点对集群状态更新的确认！仅协调节点的好处不应被夸大——数据节点可以愉快地服务于相同的目的。

To create a dedicated coordinating node, set:
要创建专用协调节点，请设置：

```yaml
node.roles: [ ]
```

## Remote-eligible node 符合远程条件的节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

A remote-eligible node acts as a cross-cluster client and connects to [remote clusters](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters.html). Once connected, you can search remote clusters using [cross-cluster search](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cross-cluster-search.html). You can also sync data between clusters using [cross-cluster replication](https://www.elastic.co/guide/en/elasticsearch/reference/current/xpack-ccr.html).
符合远程条件的节点充当跨集群客户端并连接到[远程集群](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters.html)。连接后，您可以使用[跨集群搜索](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cross-cluster-search.html)来搜索远程集群。您还可以使用[跨集群复制](https://www.elastic.co/guide/en/elasticsearch/reference/current/xpack-ccr.html)在集群之间同步数据。

```yaml
node.roles: [ remote_cluster_client ]
```

## Machine learning node 机器学习节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Machine learning nodes run jobs and handle machine learning API requests. For more information, see [Machine learning settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html).
机器学习节点运行作业并处理机器学习 API 请求。有关更多信息，请参阅[机器学习设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html)。

To create a dedicated machine learning node, set:
要创建专用机器学习节点，请设置：

```yaml
node.roles: [ ml, remote_cluster_client]
```

The `remote_cluster_client` role is optional but strongly recommended. Otherwise, cross-cluster search fails when used in machine learning jobs or datafeeds. If you use cross-cluster search in your anomaly detection jobs, the `remote_cluster_client` role is also required on all master-eligible nodes. Otherwise, the datafeed cannot start. See [Remote-eligible node](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#remote-node).
`remote_cluster_client`角色是可选的，但强烈建议使用。否则，在机器学习作业或数据源中使用时，跨集群搜索将失败。如果您在异常检测作业中使用跨集群搜索，则所有符合主节点资格的节点上还需要`remote_cluster_client`角色。否则，数据馈送无法启动。请参阅[远程合格节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#remote-node)。

## Transform node 变换节点

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Transform nodes run transforms and handle transform API requests. For more information, see [Transforms settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-settings.html).
转换节点运行转换并处理转换 API 请求。有关详细信息，请参阅[变换设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-settings.html)。

To create a dedicated transform node, set:
要创建专用变换节点，请设置：

```yaml
node.roles: [ transform, remote_cluster_client ]
```

The `remote_cluster_client` role is optional but strongly recommended. Otherwise, cross-cluster search fails when used in transforms. See [Remote-eligible node](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#remote-node).
`remote_cluster_client`角色是可选的，但强烈建议使用。否则，在转换中使用跨集群搜索时会失败。请参阅[远程合格节点](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#remote-node)。

## Changing the role of a node 改变节点的角色

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Each data node maintains the following data on disk:
每个数据节点在磁盘上维护以下数据：

- the shard data for every shard allocated to that node, 
  分配给该节点的每个分片的分片数据，
- the index metadata corresponding with every shard allocated to that node, and 
  与分配给该节点的每个分片相对应的索引元数据，以及
- the cluster-wide metadata, such as settings and index templates. 
  集群范围的元数据，例如设置和索引模板。

Similarly, each master-eligible node maintains the following data on disk:
同样，每个符合主节点资格的节点在磁盘上维护以下数据：

- the index metadata for every index in the cluster, and 
  集群中每个索引的索引元数据，以及
- the cluster-wide metadata, such as settings and index templates. 
  集群范围的元数据，例如设置和索引模板。

Each node checks the contents of its data path at startup. If it discovers unexpected data then it will refuse to start. This is to avoid importing unwanted [dangling indices](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-gateway.html#dangling-indices) which can lead to a red cluster health. To be more precise, nodes without the `data` role will refuse to start if they find any shard data on disk at startup, and nodes without both the `master` and `data` roles will refuse to start if they have any index metadata on disk at startup.
每个节点在启动时检查其数据路径的内容。如果它发现意外的数据，那么它将拒绝启动。这是为了避免导入不需要的[悬空索引](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-gateway.html#dangling-indices)，这可能会导致红色集群运行状况。更准确地说，不具有`data`角色的节点在启动时如果在磁盘上发现有分片数据，将拒绝启动；而同时不具有`master`和`data`角色的节点在启动时如果磁盘上有索引元数据，将拒绝启动。

It is possible to change the roles of a node by adjusting its `elasticsearch.yml` file and restarting it. This is known as *repurposing* a node. In order to satisfy the checks for unexpected data described above, you must perform some extra steps to prepare a node for repurposing when starting the node without the `data` or `master` roles.
可以通过调整其`elasticsearch.yml`文件并重新启动来更改节点的角色。这称为*重新调整*节点的用途。为了满足上述对意外数据的检查，在启动没有`data`或`master`角色的节点时，您必须执行一些额外的步骤来准备节点以重新利用。

- If you want to repurpose a data node by removing the `data` role then you should first use an [allocation filter](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cluster.html#cluster-shard-allocation-filtering) to safely migrate all the shard data onto other nodes in the cluster. 
  如果您想通过删除`data`角色来重新调整数据节点的用途，那么您应该首先使用[分配过滤器](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cluster.html#cluster-shard-allocation-filtering)将所有分片数据安全地迁移到集群中的其他节点上。
- If you want to repurpose a node to have neither the `data` nor `master` roles then it is simplest to start a brand-new node with an empty data path and the desired roles. You may find it safest to use an [allocation filter](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cluster.html#cluster-shard-allocation-filtering) to migrate the shard data elsewhere in the cluster first. 
  如果您想重新调整节点的用途，使其既不具有`data`角色也不`master`角色，那么最简单的方法是启动一个具有空数据路径和所需角色的全新节点。您可能会发现首先使用[分配过滤器](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cluster.html#cluster-shard-allocation-filtering)将分片数据迁移到集群中的其他位置是最安全的。

If it is not possible to follow these extra steps then you may be able to use the [`elasticsearch-node repurpose`](https://www.elastic.co/guide/en/elasticsearch/reference/current/node-tool.html#node-tool-repurpose) tool to delete any excess data that prevents a node from starting.
如果无法执行这些额外的步骤，那么您可以使用[`elasticsearch-node repurpose`](https://www.elastic.co/guide/en/elasticsearch/reference/current/node-tool.html#node-tool-repurpose)工具来删除阻止节点启动的任何多余数据。

## Node data path settings 节点数据路径设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

## `path.data`

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

Every data and master-eligible node requires access to a data directory where shards and index and cluster metadata will be stored. The `path.data` defaults to `$ES_HOME/data` but can be configured in the `elasticsearch.yml` config file an absolute path or a path relative to `$ES_HOME` as follows:
每个数据和主节点都需要访问存储分片、索引和集群元数据的数据目录。 `path.data`默认为`$ES_HOME/data`但可以在`elasticsearch.yml`配置文件中配置绝对路径或相对于`$ES_HOME`的路径，如下所示：

```yaml
path.data:  /var/elasticsearch/data
```

Like all node settings, it can also be specified on the command line as:
与所有节点设置一样，它也可以在命令行上指定为：

```sh
./bin/elasticsearch -Epath.data=/var/elasticsearch/data
```

The contents of the `path.data` directory must persist across restarts, because this is where your data is stored. Elasticsearch requires the filesystem to act as if it were backed by a local disk, but this means that it will work correctly on properly-configured remote block devices (e.g. a SAN) and remote filesystems (e.g. NFS) as long as the remote storage behaves no differently from local storage. You can run multiple Elasticsearch nodes on the same filesystem, but each Elasticsearch node must have its own data path.
`path.data`目录的内容必须在重新启动后保留，因为这是存储数据的位置。 Elasticsearch 要求文件系统像本地磁盘一样运行，但这意味着只要远程存储正常运行，它就可以在正确配置的远程块设备（例如  SAN）和远程文件系统（例如 NFS）上正常工作和本地存储没有什么区别。您可以在同一文件系统上运行多个 Elasticsearch 节点，但每个 Elasticsearch 节点必须有自己的数据路径。

When using the `.zip` or `.tar.gz` distributions, the `path.data` setting should be configured to locate the data directory outside the Elasticsearch home directory, so that the home directory can be deleted without deleting your data! The RPM and Debian distributions do this for you already.
使用`.zip`或`.tar.gz`发行版时，应将`path.data`设置配置为将数据目录定位在 Elasticsearch 主目录之外，以便可以删除主目录而不删除数据！ RPM 和 Debian 发行版已经为您做到了这一点。

Don’t modify anything within the data directory or run processes that might interfere with its contents. If something other than Elasticsearch modifies the contents of the data directory, then Elasticsearch may fail, reporting corruption or other data inconsistencies, or may appear to work correctly having silently lost some of your data. Don’t attempt to take filesystem backups of the data directory; there is no supported way to restore such a backup. Instead, use [Snapshot and restore](https://www.elastic.co/guide/en/elasticsearch/reference/current/snapshot-restore.html) to take backups safely. Don’t run virus scanners on the data directory. A virus scanner can prevent Elasticsearch from working correctly and may modify the contents of the data directory. The data directory contains no executables so a virus scan will only find false positives.
不要修改数据目录中的任何内容或运行可能干扰其内容的进程。如果 Elasticsearch 以外的其他内容修改了数据目录的内容，则 Elasticsearch  可能会失败，报告损坏或其他数据不一致，或者可能看似正常工作但悄悄丢失了一些数据。不要尝试对数据目录进行文件系统备份；不支持恢复此类备份的方法。相反，请使用[快照和恢复](https://www.elastic.co/guide/en/elasticsearch/reference/current/snapshot-restore.html)来安全地进行备份。不要在数据目录上运行病毒扫描程序。病毒扫描程序可能会阻止 Elasticsearch 正常工作，并可能修改数据目录的内容。数据目录不包含可执行文件，因此病毒扫描只会发现误报。

## Other node settings 其他节点设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/node.asciidoc)

More node settings can be found in [*Configuring Elasticsearch*](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html) and [Important Elasticsearch configuration](https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html), including:
更多节点设置可以在[*配置Elasticsearch*](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html)和[重要Elasticsearch配置](https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html)中找到，包括：

- [`cluster.name`](https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html#cluster-name)
- [`node.name`](https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html#node-name)
- [network settings 网络设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html)

# Networking 联网

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

Each Elasticsearch node has two different network interfaces. Clients send requests to Elasticsearch’s REST APIs using its [HTTP interface](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#http-settings), but nodes communicate with other nodes using the [transport interface](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#transport-settings). The transport interface is also used for communication with [remote clusters](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters.html). The transport interface uses a custom binary protocol sent over [long-lived](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#long-lived-connections) TCP channels. Both interfaces can be configured to use [TLS for security](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-cluster.html).
每个 Elasticsearch 节点都有两个不同的网络接口。客户端使用 Elasticsearch 的[HTTP 接口](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#http-settings)向其 REST API 发送请求，而节点则使用[传输接口](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#transport-settings)与其他节点进行通信。传输接口还用于与[远程集群](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters.html)的通信。传输接口使用通过[长期](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#long-lived-connections)TCP 通道发送的自定义二进制协议。两个接口都可以配置为使用[TLS 来确保安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-cluster.html)。

You can configure both of these interfaces at the same time using the `network.*` settings. If you have a more complicated network, you might need to configure the interfaces independently using the `http.*` and `transport.*` settings. Where possible, use the `network.*` settings that apply to both interfaces to simplify your configuration and reduce duplication.
您可以使用`network.*`设置同时配置这两个接口。如果您有更复杂的网络，则可能需要使用`http.*`和`transport.*`设置独立配置接口。如果可能，请使用适用于两个接口的`network.*`设置来简化配置并减少重复。

By default Elasticsearch binds only to `localhost` which means it cannot be accessed remotely. This configuration is sufficient for a local development cluster made of one or more nodes all running on the same host. To form a cluster across multiple hosts, or which is accessible to remote clients, you must adjust some [network settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings) such as `network.host`.
默认情况下，Elasticsearch 仅绑定到`localhost` ，这意味着无法远程访问它。对于由一个或多个在同一主机上运行的节点组成的本地开发集群来说，此配置足够了。要形成跨多个主机或可供远程客户端访问的集群，您必须调整一些[网络设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings)，例如`network.host` 。

## Be careful with the network configuration! 小心网络配置！

Never expose an unprotected node to the public internet. If you do, you are permitting anyone in the world to download, modify, or delete any of the data in your cluster.
切勿将未受保护的节点暴露于公共互联网。如果您这样做，您就允许世界上的任何人下载、修改或删除您集群中的任何数据。

Configuring Elasticsearch to bind to a non-local address will [convert some warnings into fatal exceptions](https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html#dev-vs-prod). If a node refuses to start after configuring its network settings then you must address the logged exceptions before proceeding.
配置 Elasticsearch 绑定到非本地地址会将[一些警告转换为致命异常](https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html#dev-vs-prod)。如果节点在配置其网络设置后拒绝启动，则您必须先解决记录的异常，然后再继续。

## Commonly used network settings 常用的网络设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

Most users will need to configure only the following network settings.
大多数用户只需要配置以下网络设置。

- `network.host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Sets the address of this node for both HTTP and transport traffic. The node will bind to this address and will also use it as its publish address. Accepts an IP address, a hostname, or a [special value](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values).  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 设置此节点的 HTTP 和传输流量地址。该节点将绑定到该地址，并将其用作其发布地址。接受 IP 地址、主机名或[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。 Defaults to `_local_`. However, note that [security auto-configuration](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html) will add `http.host: 0.0.0.0` to your `elasticsearch.yml` configuration file, which overrides this default for HTTP traffic. 默认为`_local_` 。但请注意，[安全自动配置](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html)会将`http.host: 0.0.0.0`添加到您的`elasticsearch.yml`配置文件中，这会覆盖 HTTP 流量的默认设置。

- `http.port`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) The port to bind for HTTP client communication. Accepts a single value or a range. If a range is specified, the node will bind to the first available port in the range.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）为 HTTP 客户端通信绑定的端口。接受单个值或范围。如果指定了范围，则节点将绑定到该范围中的第一个可用端口。 Defaults to `9200-9300`. 默认为`9200-9300` 。

- `transport.port`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) The port to bind for communication between nodes. Accepts a single value or a range. If a range is specified, the node will bind to the first available port in the range. Set this setting to a single port, not a range, on every master-eligible node.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）为节点之间的通信而绑定的端口。接受单个值或范围。如果指定了范围，则节点将绑定到该范围中的第一个可用端口。将此设置设置为每个符合主节点资格的节点上的单个端口，而不是一个范围。 Defaults to `9300-9400`. 默认为`9300-9400` 。



- `remote_cluster.port`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) The port to bind for remote cluster client communication. Accepts a single value.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）为远程集群客户端通信绑定的端口。接受单个值。 Defaults to `9443`. 默认为`9443` 。

## Special values for network addresses 网络地址的特殊值

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

You can configure Elasticsearch to automatically determine its addresses by using the following special values. Use these values when configuring `network.host`, `network.bind_host`, `network.publish_host`, and the corresponding settings for the HTTP and transport interfaces.
您可以使用以下特殊值将 Elasticsearch 配置为自动确定其地址。配置`network.host` 、 `network.bind_host` 、 `network.publish_host`以及HTTP和传输接口的相应设置时，请使用这些值。

- `_local_`

  Any loopback addresses on the system, for example `127.0.0.1`.  系统上的任何环回地址，例如`127.0.0.1` 。

- `_site_`

  Any site-local addresses on the system, for example `192.168.0.1`.  系统上的任何站点本地地址，例如`192.168.0.1` 。

- `_global_`

  Any globally-scoped addresses on the system, for example `8.8.8.8`.  系统上的任何全局范围的地址，例如`8.8.8.8` 。

- `_[networkInterface]_`

  Use the addresses of the network interface called `[networkInterface]`. For example if you wish to use the addresses of an interface called `en0` then set `network.host: _en0_`.  使用名为`[networkInterface]`的网络接口的地址。例如，如果您希望使用名为`en0`的接口的地址，则设置`network.host: _en0_` 。

- `0.0.0.0`

  The addresses of all available network interfaces.  所有可用网络接口的地址。

In some systems these special values resolve to multiple addresses. If so, Elasticsearch will select one of them as its publish address and may change its selection on each node restart. Ensure your node is accessible at every possible address.
在某些系统中，这些特殊值解析为多个地址。如果是这样，Elasticsearch 将选择其中之一作为其发布地址，并可能在每次节点重新启动时更改其选择。确保您的节点在每个可能的地址都可访问。

Any values containing a `:` (e.g. an IPv6 address or some of the [special values](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)) must be quoted because `:` is a special character in YAML.
任何包含`:`的值（例如 IPv6 地址或某些[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)）都必须用引号引起来，因为`:`是 YAML 中的特殊字符。

### IPv4 vs IPv6 IPv4 与 IPv6

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

These special values yield both IPv4 and IPv6 addresses by default, but you can also add an `:ipv4` or `:ipv6` suffix to limit them to just IPv4 or IPv6 addresses respectively. For example, `network.host: "_en0:ipv4_"` would set this node’s addresses to the IPv4 addresses of interface `en0`.
默认情况下，这些特殊值会生成 IPv4 和 IPv6 地址，但您也可以添加`:ipv4`或`:ipv6`后缀以分别将它们限制为仅 IPv4 或 IPv6 地址。例如， `network.host: "_en0:ipv4_"`会将此节点的地址设置为接口`en0`的 IPv4 地址。

## Discovery in the Cloud 云端发现

More special settings are available when running in the Cloud with either the [EC2 discovery plugin](https://www.elastic.co/guide/en/elasticsearch/plugins/8.15/discovery-ec2.html) or the [Google Compute Engine discovery plugin](https://www.elastic.co/guide/en/elasticsearch/plugins/8.15/discovery-gce-network-host.html#discovery-gce-network-host) installed.
当在安装了[EC2 发现插件](https://www.elastic.co/guide/en/elasticsearch/plugins/8.15/discovery-ec2.html)或[Google Compute Engine 发现插件](https://www.elastic.co/guide/en/elasticsearch/plugins/8.15/discovery-gce-network-host.html#discovery-gce-network-host)的云中运行时，可以使用更多特殊设置。

## Binding and publishing 装订及出版

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

Elasticsearch uses network addresses for two distinct purposes known as binding and publishing. Most nodes will use the same address for everything, but more complicated setups may need to configure different addresses for different purposes.
Elasticsearch 将网络地址用于两个不同的目的，即绑定和发布。大多数节点将使用相同的地址来处理所有事情，但更复杂的设置可能需要为不同的目的配置不同的地址。

When an application such as Elasticsearch wishes to receive network communications, it must indicate to the operating system the address or addresses whose traffic it should receive. This is known as *binding* to those addresses. Elasticsearch can bind to more than one address if needed, but most nodes only bind to a single address. Elasticsearch can only bind to an address if it is running on a host that has a network interface with that address. If necessary, you can configure the transport and HTTP interfaces to bind to different addresses.
当 Elasticsearch 等应用程序希望接收网络通信时，它必须向操作系统指示应接收其流量的一个或多个地址。这称为*绑定*到这些地址。如果需要，Elasticsearch 可以绑定到多个地址，但大多数节点仅绑定到单个地址。 Elasticsearch 仅当运行在具有该地址的网络接口的主机上时才能绑定到该地址。如有必要，您可以配置传输和 HTTP 接口以绑定到不同的地址。

Each Elasticsearch node has an address at which clients and other nodes can contact it, known as its *publish address*. Each node has one publish address for its HTTP interface and one for its transport interface. These two addresses can be anything, and don’t need to be addresses of the network interfaces on the host. The only requirements are that each node must be:
每个 Elasticsearch 节点都有一个客户端和其他节点可以联系它的地址，称为*发布地址*。每个节点都有一个用于其 HTTP 接口的发布地址和一个用于其传输接口的发布地址。这两个地址可以是任何地址，不需要是主机上网络接口的地址。唯一的要求是每个节点必须是：

- Accessible at its HTTP publish address by all clients that will discover it using sniffing. 
  所有使用嗅探发现它的客户端都可以通过其 HTTP 发布地址进行访问。
- Accessible at its transport publish address by all other nodes in its cluster, and by any remote clusters that will discover it using [Remote clusters](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters.html#sniff-mode). 
  集群中的所有其他节点以及使用[远程集群](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters.html#sniff-mode)发现它的任何远程集群都可以通过其传输发布地址进行访问。

If you specify the transport publish address using a hostname then Elasticsearch will resolve this hostname to an IP address once during startup, and other nodes will use the resulting IP address instead of resolving the name again themselves. To avoid confusion, use a hostname which resolves to the node’s address in all network locations.
如果您使用主机名指定传输发布地址，则 Elasticsearch 将在启动期间将此主机名解析为 IP 地址一次，其他节点将使用生成的 IP 地址，而不是自行再次解析该名称。为了避免混淆，请使用可解析为所有网络位置中的节点地址的主机名。

### Using a single address 使用单一地址

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

The most common configuration is for Elasticsearch to bind to a single address at which it is accessible to clients and other nodes. In this configuration you should just set `network.host` to that address. You should not separately set any bind or publish addresses, nor should you separately configure the addresses for the HTTP or transport interfaces.
最常见的配置是将 Elasticsearch 绑定到客户端和其他节点可以访问的单个地址。在此配置中，您只需将`network.host`设置为该地址即可。您不应单独设置任何绑定或发布地址，也不应单独配置 HTTP 或传输接口的地址。

### Using multiple addresses 使用多个地址

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

Use the [advanced network settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#advanced-network-settings) if you wish to bind Elasticsearch to multiple addresses, or to publish a different address from the addresses to which you are binding. Set `network.bind_host` to the bind addresses, and `network.publish_host` to the address at which this node is exposed. In complex configurations, you can configure these addresses differently for the HTTP and transport interfaces.
如果您希望将 Elasticsearch 绑定到多个地址，或者发布与您绑定的地址不同的地址，请使用[高级网络设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#advanced-network-settings)。将`network.bind_host`设置为绑定地址，将`network.publish_host`为暴露该节点的地址。在复杂的配置中，您可以为 HTTP 和传输接口配置不同的地址。

## Advanced network settings 高级网络设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

These advanced settings let you bind to multiple addresses, or to use different addresses for binding and publishing. They are not required in most cases and you should not use them if you can use the [commonly used settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings) instead.
这些高级设置允许您绑定到多个地址，或使用不同的地址进行绑定和发布。大多数情况下不需要它们，如果您可以使用[常用的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings)，则不应使用它们。

- `network.bind_host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) The network address(es) to which the node should bind in order to listen for incoming connections. Accepts a list of IP addresses, hostnames, and [special values](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Defaults to the address given by `network.host`. Use this setting only if binding to multiple addresses or using different addresses for publishing and binding.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 节点应绑定到的网络地址，以便侦听传入连接。接受 IP 地址、主机名和[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)的列表。默认为`network.host`给出的地址。仅当绑定到多个地址或使用不同的地址进行发布和绑定时才使用此设置。

- `network.publish_host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) The network address that clients and other nodes can use to contact this node. Accepts an IP address, a hostname, or a [special value](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Defaults to the address given by `network.host`. Use this setting only if binding to multiple addresses or using different addresses for publishing and binding.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 客户端和其他节点可以用来联系该节点的网络地址。接受 IP 地址、主机名或[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。默认为`network.host`给出的地址。仅当绑定到多个地址或使用不同的地址进行发布和绑定时才使用此设置。

You can specify a list of addresses for `network.host` and `network.publish_host`. You can also specify one or more hostnames or [special values](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values) that resolve to multiple addresses. If you do this then Elasticsearch chooses one of the addresses for its publish address. This choice uses heuristics based on IPv4/IPv6 stack preference and reachability and may change when the node restarts. Ensure each node is accessible at all possible publish addresses.
您可以为`network.host`和`network.publish_host`指定地址列表。您还可以指定一个或多个主机名或解析为多个地址的[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。如果您执行此操作，则 Elasticsearch 会选择其中一个地址作为其发布地址。此选择使用基于 IPv4/IPv6 堆栈首选项和可达性的启发式方法，并且可能会在节点重新启动时发生变化。确保每个节点均可在所有可能的发布地址进行访问。

### Advanced TCP settings 高级 TCP 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network.asciidoc)

Use the following settings to control the low-level parameters of the TCP connections used by the HTTP and transport interfaces.
使用以下设置来控制 HTTP 和传输接口使用的 TCP 连接的低级参数。

- `network.tcp.keep_alive`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `SO_KEEPALIVE` option for network sockets, which determines whether each connection sends TCP keepalive probes. Defaults to `true`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 为网络套接字配置`SO_KEEPALIVE`选项，该选项确定每个连接是否发送 TCP keepalive 探测。默认为`true` 。

- `network.tcp.keep_idle`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPIDLE` option for network sockets, which determines the time in seconds that a connection must be idle before starting to send TCP keepalive probes. Defaults to `-1`, which means to use the system default. This value cannot exceed `300` seconds. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置网络套接字的`TCP_KEEPIDLE`选项，该选项确定在开始发送 TCP keepalive 探测之前连接必须空闲的时间（以秒为单位）。默认为`-1` ，表示使用系统默认值。该值不能超过`300`秒。仅适用于 Linux 和 macOS。

- `network.tcp.keep_interval`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPINTVL` option for network sockets, which determines the time in seconds between sending TCP keepalive probes. Defaults to `-1`, which means to use the system default. This value cannot exceed `300` seconds. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置网络套接字的`TCP_KEEPINTVL`选项，该选项确定发送 TCP keepalive 探测之间的时间（以秒为单位）。默认为`-1` ，表示使用系统默认值。该值不能超过`300`秒。仅适用于 Linux 和 macOS。

- `network.tcp.keep_count`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPCNT` option for network sockets, which determines the number of unacknowledged TCP keepalive probes that may be sent on a connection before it is dropped. Defaults to `-1`, which means to use the system default. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置网络套接字的`TCP_KEEPCNT`选项，该选项确定在连接断开之前可以在连接上发送的未确认的 TCP keepalive 探测的数量。默认为`-1` ，表示使用系统默认值。仅适用于 Linux 和 macOS。

- `network.tcp.no_delay`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `TCP_NODELAY` option on network sockets, which determines whether [TCP no delay](https://en.wikipedia.org/wiki/Nagle's_algorithm) is enabled. Defaults to `true`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 在网络套接字上配置`TCP_NODELAY`选项，该选项确定是否启用[TCP 无延迟](https://en.wikipedia.org/wiki/Nagle's_algorithm)。默认为`true` 。

- `network.tcp.reuse_address`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `SO_REUSEADDR` option for network sockets, which determines whether the address can be reused or not. Defaults to `false` on Windows and `true` otherwise.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 配置网络套接字的`SO_REUSEADDR`选项，该选项决定该地址是否可以重用。在 Windows 上默认为`false` ，否则`true` 。

- `network.tcp.send_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) Configures the size of the TCP send buffer for network sockets. Defaults to `-1` which means to use the system default.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）配置网络套接字的 TCP 发送缓冲区的大小。默认为`-1` ，表示使用系统默认值。

- `network.tcp.receive_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) Configures the size of the TCP receive buffer. Defaults to `-1` which means to use the system default.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）配置 TCP 接收缓冲区的大小。默认为`-1` ，表示使用系统默认值。

## Advanced HTTP settings 高级 HTTP 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/http.asciidoc)

Use the following advanced settings to configure the HTTP interface independently of the [transport interface](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#transport-settings). You can also configure both interfaces together using the [network settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings).
使用以下高级设置来配置独立于[传输接口](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#transport-settings)的 HTTP 接口。您还可以使用[网络设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings)同时配置两个接口。

- `http.host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Sets the address of this node for HTTP traffic. The node will bind to this address and will also use it as its HTTP publish address. Accepts an IP address, a hostname, or a [special value](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Use this setting only if you require different configurations for the transport and HTTP interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 设置此节点的 HTTP 流量地址。该节点将绑定到该地址，并将其用作其 HTTP 发布地址。接受 IP 地址、主机名或[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。仅当您需要对传输和 HTTP 接口进行不同配置时才使用此设置。 Defaults to the address given by `network.host`. However, note that [security auto-configuration](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html) will add `http.host: 0.0.0.0` to your `elasticsearch.yml` configuration file, which overrides this default. 默认为`network.host`给出的地址。但是，请注意，[安全自动配置](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html)会将`http.host: 0.0.0.0`添加到您的`elasticsearch.yml`配置文件中，这会覆盖此默认值。

- `http.bind_host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) The network address(es) to which the node should bind in order to listen for incoming HTTP connections. Accepts a list of IP addresses, hostnames, and [special values](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Defaults to the address given by `http.host` or `network.bind_host`. Use this setting only if you require to bind to multiple addresses or to use different addresses for publishing and binding, and you also require different binding configurations for the transport and HTTP interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 节点应绑定到的网络地址，以便侦听传入的 HTTP 连接。接受 IP 地址、主机名和[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)的列表。默认为`http.host`或`network.bind_host`给出的地址。仅当您需要绑定到多个地址或使用不同的地址进行发布和绑定，并且还需要对传输和 HTTP 接口进行不同的绑定配置时，才使用此设置。

- `http.publish_host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) The network address for HTTP clients to contact the node using sniffing. Accepts an IP address, a hostname, or a [special value](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Defaults to the address given by `http.host` or `network.publish_host`. Use this setting only if you require to bind to multiple addresses or to use different addresses for publishing and binding, and you also require different binding configurations for the transport and HTTP interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) HTTP 客户端使用嗅探联系节点的网络地址。接受 IP 地址、主机名或[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。默认为`http.host`或`network.publish_host`给出的地址。仅当您需要绑定到多个地址或使用不同的地址进行发布和绑定，并且还需要对传输和 HTTP 接口进行不同的绑定配置时，才使用此设置。

- `http.publish_port`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) The port of the [HTTP publish address](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#modules-network-binding-publishing). Configure this setting only if you need the publish port to be different from `http.port`. Defaults to the port assigned via `http.port`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数） [HTTP 发布地址](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#modules-network-binding-publishing)的端口。仅当您需要发布端口不同于`http.port`时才配置此设置。默认为通过`http.port`分配的端口。

- `http.max_content_length`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) Maximum size of an HTTP request body. If the body is compressed, the limit applies to the HTTP request body size before compression. Defaults to `100mb`. Configuring this setting to greater than `100mb` can cause cluster instability and is not recommended. If you hit this limit when sending a request to the [Bulk](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html) API, configure your client to send fewer documents in each bulk request. If you wish to index individual documents that exceed `100mb`, pre-process them into smaller documents before sending them to Elasticsearch. For instance, store the raw data in a system outside Elasticsearch and include a link to the raw data in the documents that Elasticsearch indexes.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）HTTP 请求正文的最大大小。如果主体被压缩，则限制适用于压缩前的 HTTP 请求主体大小。默认为`100mb` 。将此设置配置为大于`100mb`可能会导致集群不稳定，因此不建议这样做。如果您在向[批量](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html)API 发送请求时达到此限制，请将客户端配置为在每个批量请求中发送更少的文档。如果您希望对超过`100mb`的单个文档建立索引，请在将其发送到 Elasticsearch 之前将其预处理为较小的文档。例如，将原始数据存储在 Elasticsearch 外部的系统中，并在 Elasticsearch 索引的文档中包含指向原始数据的链接。

- `http.max_initial_line_length`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) Maximum size of an HTTP URL. Defaults to `4kb`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）HTTP URL 的最大大小。默认为`4kb` 。

- `http.max_header_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) Maximum size of allowed headers. Defaults to `16kb`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）允许的标头的最大大小。默认为`16kb` 。



- `http.compression` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Support for compression when possible (with Accept-Encoding). If HTTPS is enabled, defaults to `false`. Otherwise, defaults to `true`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean) 尽可能支持压缩（使用 Accept-Encoding）。如果启用 HTTPS，则默认为`false` 。否则，默认为`true` 。 Disabling compression for HTTPS mitigates potential security risks, such as a [BREACH attack](https://en.wikipedia.org/wiki/BREACH). To compress HTTPS traffic, you must explicitly set `http.compression` to `true`. 禁用 HTTPS 压缩可以减轻潜在的安全风险，例如[BREACH 攻击](https://en.wikipedia.org/wiki/BREACH)。要压缩 HTTPS 流量，您必须显式将`http.compression`设置为`true` 。

- `http.compression_level`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Defines the compression level to use for HTTP responses. Valid values  are in the range of 1 (minimum compression) and 9 (maximum compression). Defaults to `3`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）定义用于 HTTP 响应的压缩级别。有效值的范围为 1（最小压缩）和 9（最大压缩）。默认为`3` 。



- `http.cors.enabled` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Enable or disable cross-origin resource sharing, which determines  whether a browser on another origin can execute requests against  Elasticsearch. Set to `true` to enable Elasticsearch to process pre-flight [CORS](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing) requests. Elasticsearch will respond to those requests with the `Access-Control-Allow-Origin` header if the `Origin` sent in the request is permitted by the `http.cors.allow-origin` list. Set to `false` (the default) to make Elasticsearch ignore the `Origin` request header, effectively disabling CORS requests because Elasticsearch will never respond with the `Access-Control-Allow-Origin` response header.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 启用或禁用跨源资源共享，这决定了另一个源上的浏览器是否可以对 Elasticsearch 执行请求。设置为`true`以使 Elasticsearch 能够处理预检[CORS](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing)请求。如果`http.cors.allow-origin`列表允许请求中发送的`Origin` ，Elasticsearch 将使用`Access-Control-Allow-Origin`标头响应这些请求。设置为`false` （默认值）以使 Elasticsearch 忽略`Origin`请求标头，从而有效禁用 CORS 请求，因为 Elasticsearch 永远不会使用`Access-Control-Allow-Origin`响应标头进行响应。  If the client does not send a pre-flight request with an `Origin` header or it does not check the response headers from the server to validate the `Access-Control-Allow-Origin` response header, then cross-origin security is compromised. If CORS is not enabled on Elasticsearch, the only way for  the client to know is to send a pre-flight request and realize the  required response headers are missing. 如果客户端不发送带有`Origin`标头的飞行前请求，或者不检查来自服务器的响应标头以验证`Access-Control-Allow-Origin`响应标头，则跨源安全性会受到损害。如果 Elasticsearch 上未启用 CORS，客户端知道的唯一方法是发送预检请求并意识到缺少所需的响应标头。



- `http.cors.allow-origin` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Which origins to allow. If you prepend and append a forward slash (`/`) to the value, this will be treated as a regular expression, allowing you to support HTTP and HTTPs. For example, using `/https?:\/\/localhost(:[0-9]+)?/` would return the request header appropriately in both cases. Defaults to no origins allowed.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，字符串）允许哪个来源。如果您在值前添加正斜杠 ( `/` )，则这将被视为正则表达式，从而允许您支持 HTTP 和 HTTPs。例如，使用 `/https?:\/\/localhost(:[0-9]+)?/` 在这两种情况下都会适当地返回请求标头。默认为不允许来源。  A wildcard (`*`) is a valid value but is considered a security risk, as your Elasticsearch instance is open to cross origin requests from **anywhere**. 通配符 ( `*` ) 是一个有效值，但被视为存在安全风险，因为您的 Elasticsearch 实例对来自**任何地方**的跨源请求开放。



- `http.cors.max-age` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Browsers send a "preflight" OPTIONS-request to determine CORS settings. `max-age` defines for how long, in seconds, the result should be cached. Defaults to `1728000` (20 days).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）浏览器发送“预检”选项请求以确定 CORS 设置。 `max-age`定义结果应缓存多长时间（以秒为单位）。默认为`1728000` （20 天）。



- `http.cors.allow-methods` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Which methods to allow. Defaults to `OPTIONS, HEAD, GET, POST, PUT, DELETE`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，字符串）允许哪些方法。默认为 `OPTIONS, HEAD, GET, POST, PUT, DELETE` 。



- `http.cors.allow-headers` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Which headers to allow. Defaults to `X-Requested-With, Content-Type, Content-Length, Authorization, Accept, User-Agent, X-Elastic-Client-Meta`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，字符串）允许哪些标头。默认为 `X-Requested-With, Content-Type, Content-Length, Authorization, Accept, User-Agent, X-Elastic-Client-Meta` 。



- `http.cors.expose-headers` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Which response headers to expose in the client. Defaults to `X-elastic-product`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）要在客户端中公开哪些响应标头。默认为`X-elastic-product` 。



- `http.cors.allow-credentials` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Whether the `Access-Control-Allow-Credentials` header should be returned. Defaults to `false`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean) 是否 `Access-Control-Allow-Credentials` 应该返回标头。默认为`false` 。  This header is only returned when the setting is set to `true`. 仅当设置设置为`true`时才会返回此标头。

- `http.detailed_errors.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures whether detailed error reporting in HTTP responses is enabled. Defaults to `true`, which means that HTTP requests that include the [`?error_trace` parameter](https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#common-options-error-options) will return a detailed error message including a stack trace if they encounter an exception. If set to `false`, requests with the `?error_trace` parameter are rejected.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 配置是否启用 HTTP 响应中的详细错误报告。默认为`true` ，这意味着包含[`?error_trace`参数](https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#common-options-error-options)的 HTTP 请求如果遇到异常，将返回详细的错误消息，包括堆栈跟踪。如果设置为`false` ，则带有`?error_trace`参数的请求将被拒绝。

- `http.pipelining.max_events`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) The maximum number of events to be queued up in memory before an HTTP connection is closed, defaults to `10000`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）HTTP 连接关闭之前在内存中排队的最大事件数，默认为`10000` 。

- `http.max_warning_header_count`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) The maximum number of warning headers in client HTTP responses. Defaults to `-1` which means the number of warning headers is unlimited.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）客户端 HTTP 响应中警告标头的最大数量。默认为`-1`这意味着警告标头的数量是无限的。

- `http.max_warning_header_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) The maximum total size of warning headers in client HTTP responses. Defaults to `-1` which means the size of the warning headers is unlimited.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）客户端 HTTP 响应中警告标头的最大总大小。默认为`-1` ，这意味着警告标头的大小是无限的。

- `http.tcp.keep_alive`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `SO_KEEPALIVE` option for this socket, which determines whether it sends TCP keepalive probes. Defaults to `network.tcp.keep_alive`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 为此套接字配置`SO_KEEPALIVE`选项，该选项确定它是否发送 TCP keepalive 探测。默认为`network.tcp.keep_alive` 。

- `http.tcp.keep_idle`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPIDLE` option for HTTP sockets, which determines the time in seconds that a connection must be idle before starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which uses the system default. This value cannot exceed `300` seconds. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置 HTTP 套接字的`TCP_KEEPIDLE`选项，该选项确定在开始发送 TCP keepalive 探测之前连接必须空闲的时间（以秒为单位）。默认为`network.tcp.keep_idle` ，它使用系统默认值。该值不能超过`300`秒。仅适用于 Linux 和 macOS。

- `http.tcp.keep_interval`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPINTVL` option for HTTP sockets, which determines the time in seconds between sending TCP keepalive probes. Defaults to `network.tcp.keep_interval`, which uses the system default. This value cannot exceed `300` seconds. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置 HTTP 套接字的`TCP_KEEPINTVL`选项，该选项确定发送 TCP keepalive 探测之间的时间（以秒为单位）。默认为`network.tcp.keep_interval` ，它使用系统默认值。该值不能超过`300`秒。仅适用于 Linux 和 macOS。

- `http.tcp.keep_count`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPCNT` option for HTTP sockets, which determines the number of unacknowledged TCP keepalive probes that may be sent on a connection before it is dropped. Defaults to `network.tcp.keep_count`, which uses the system default. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置 HTTP 套接字的`TCP_KEEPCNT`选项，该选项确定在连接断开之前可以在连接上发送的未确认的 TCP keepalive 探测的数量。默认为`network.tcp.keep_count` ，它使用系统默认值。仅适用于 Linux 和 macOS。

- `http.tcp.no_delay`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `TCP_NODELAY` option on HTTP sockets, which determines whether [TCP no delay](https://en.wikipedia.org/wiki/Nagle's_algorithm) is enabled. Defaults to `true`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 在 HTTP 套接字上配置`TCP_NODELAY`选项，该选项确定是否启用[TCP 无延迟](https://en.wikipedia.org/wiki/Nagle's_algorithm)。默认为`true` 。

- `http.tcp.reuse_address`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `SO_REUSEADDR` option for HTTP sockets, which determines whether the address can be reused or not. Defaults to `false` on Windows and `true` otherwise.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 配置 HTTP 套接字的`SO_REUSEADDR`选项，该选项决定地址是否可以重用。在 Windows 上默认为`false` ，否则`true` 。

- `http.tcp.send_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) The size of the TCP send buffer for HTTP traffic. Defaults to `network.tcp.send_buffer_size`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）HTTP 流量的 TCP 发送缓冲区的大小。默认为`network.tcp.send_buffer_size` 。

- `http.tcp.receive_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) The size of the TCP receive buffer for HTTP traffic. Defaults to `network.tcp.receive_buffer_size`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）HTTP 流量的 TCP 接收缓冲区的大小。默认为 `network.tcp.receive_buffer_size` 。

- `http.client_stats.enabled`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting), boolean) Enable or disable collection of HTTP client stats. Defaults to `true`.  ( [Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting) , boolean) 启用或禁用 HTTP 客户端统计信息的收集。默认为`true` 。

- `http.client_stats.closed_channels.max_count`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) When `http.client_stats.enabled` is `true`, sets the maximum number of closed HTTP channels for which Elasticsearch reports statistics. Defaults to `10000`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）当`http.client_stats.enabled`为`true`时，设置 Elasticsearch 报告统计信息的关闭 HTTP 通道的最大数量。默认为`10000` 。

- `http.client_stats.closed_channels.max_age`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [time value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)) When `http.client_stats.enabled` is `true`, sets the maximum length of time after closing a HTTP channel that Elasticsearch will report that channel’s statistics. Defaults to `5m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[时间值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)）当`http.client_stats.enabled`为`true`时，设置关闭 HTTP 通道后 Elasticsearch 将报告该通道统计信息的最大时间长度。默认为`5m` 。

### HTTP client configuration HTTP 客户端配置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/http.asciidoc)

Many HTTP clients and proxies are configured for browser-like response latency and impose a fairly short timeout by default, reporting a failure if Elasticsearch takes longer than this timeout to complete the processing of a request. Elasticsearch will always eventually respond to every request, but some requests may require many minutes of processing time to complete. Consider carefully whether your client’s default response timeout is appropriate for your needs. In many cases it is better to wait longer for a response instead of failing, and this means you should disable any response timeouts:
许多 HTTP 客户端和代理都配置为类似浏览器的响应延迟，并默认施加相当短的超时，如果 Elasticsearch  完成请求处理所需的时间超过此超时，则会报告失败。 Elasticsearch  最终总是会响应每个请求，但某些请求可能需要很多分钟的处理时间才能完成。仔细考虑客户端的默认响应超时是否适合您的需求。在许多情况下，最好等待更长的时间来响应而不是失败，这意味着您应该禁用任何响应超时：

- If you react to a timeout by retrying the request, the retry will often end up being placed at the back of the same queue which held the original request. It will therefore take longer to complete the processing of the request if you time out and retry instead of waiting more patiently. Retrying also imposes additional load on Elasticsearch. 
  如果您通过重试请求来应对超时，则重试通常会被放置在保存原始请求的同一队列的后面。因此，如果您超时重试而不是更加耐心地等待，则需要更长的时间才能完成请求的处理。重试还会给 Elasticsearch 带来额外的负载。
- If a request is not idempotent and cannot be retried then failing the request is your last resort. Waiting more patiently for a response will usually allow the overall operation to succeed. 
  如果请求不是幂等的并且无法重试，那么失败该请求是您最后的选择。更加耐心地等待响应通常会让整个操作成功。

If you disable the response timeout in your client, make sure to configure TCP keepalives instead. TCP keepalives are the recommended way to prevent a client from waiting indefinitely in the event of a network outage.
如果您在客户端中禁用响应超时，请确保配置 TCP keepalive。 TCP keepalive 是防止客户端在网络中断时无限期等待的推荐方法。

## Advanced transport settings 高级传输设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/transport.asciidoc)

Use the following advanced settings to configure the transport interface independently of the [HTTP interface](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#http-settings). Use the [network settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings) to configure both interfaces together.
使用以下高级设置来配置独立于[HTTP 接口](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#http-settings)的传输接口。使用[网络设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings)一起配置两个接口。

- `transport.host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Sets the address of this node for transport traffic. The node will bind to this address and will also use it as its transport publish address. Accepts an IP address, a hostname, or a [special value](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Use this setting only if you require different configurations for the transport and HTTP interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 设置此节点的传输流量地址。该节点将绑定到该地址，并将其用作其传输发布地址。接受 IP 地址、主机名或[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。仅当您需要对传输和 HTTP 接口进行不同配置时才使用此设置。 Defaults to the address given by `network.host`. 默认为`network.host`给出的地址。

- `transport.bind_host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) The network address(es) to which the node should bind in order to listen for incoming transport connections. Accepts a list of IP addresses, hostnames, and [special values](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Defaults to the address given by `transport.host` or `network.bind_host`. Use this setting only if you require to bind to multiple addresses or to use different addresses for publishing and binding, and you also require different binding configurations for the transport and HTTP interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 节点应绑定到的网络地址，以便侦听传入的传输连接。接受 IP 地址、主机名和[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)的列表。默认为`transport.host`或`network.bind_host`给出的地址。仅当您需要绑定到多个地址或使用不同的地址进行发布和绑定，并且还需要对传输和 HTTP 接口进行不同的绑定配置时，才使用此设置。

- `transport.publish_host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) The network address at which the node can be contacted by other nodes. Accepts an IP address, a hostname, or a [special value](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Defaults to the address given by `transport.host` or `network.publish_host`. Use this setting only if you require to bind to multiple addresses or to use different addresses for publishing and binding, and you also require different binding configurations for the transport and HTTP interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 其他节点可以联系该节点的网络地址。接受 IP 地址、主机名或[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。默认为`transport.host`或`network.publish_host`给出的地址。仅当您需要绑定到多个地址或使用不同的地址进行发布和绑定，并且还需要对传输和 HTTP 接口进行不同的绑定配置时，才使用此设置。

- `transport.publish_port`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) The port of the [transport publish address](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#modules-network-binding-publishing). Set this parameter only if you need the publish port to be different from `transport.port`. Defaults to the port assigned via `transport.port`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）[传输发布地址](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#modules-network-binding-publishing)的端口。仅当您需要发布端口与`transport.port`不同时才设置此参数。默认为通过`transport.port`分配的端口。

- `transport.connect_timeout`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [time value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)) The connect timeout for initiating a new connection (in time setting format). Defaults to `30s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[时间值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)）发起新连接的连接超时（以时间设置格式）。默认为`30s` 。



- `transport.compress`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Determines which transport requests are compressed before sending them to another node. Elasticsearch will compress transport responses if and only if the corresponding request was compressed. See also `transport.compression_scheme`, which specifies the compression scheme which is used. Accepts the following values:  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 确定在将哪些传输请求发送到另一个节点之前对其进行压缩。当且仅当相应的请求被压缩时，Elasticsearch 才会压缩传输响应。另请参见`transport.compression_scheme` ，它指定使用的压缩方案。接受以下值：   `false`  No transport requests are compressed. This option uses the most network bandwidth, but avoids the CPU overhead of compression and decompression.  没有传输请求被压缩。此选项使用最多的网络带宽，但避免了压缩和解压缩的 CPU 开销。  `indexing_data`  Compresses only the raw indexing data sent between nodes during ingest, CCR following (excluding bootstrapping) and operations-based shard recovery (excluding file-based recovery which copies the raw Lucene data). This option is a good trade-off between network bandwidth savings and the extra CPU required for compression and decompression. This option is the default.  仅压缩在摄取、CCR 跟踪（不包括引导）和基于操作的分片恢复（不包括复制原始 Lucene 数据的基于文件的恢复）期间在节点之间发送的原始索引数据。此选项是网络带宽节省与压缩和解压缩所需的额外 CPU 之间的良好权衡。此选项是默认选项。  `true`  All transport requests are compressed. This option may perform better than `indexing_data` in terms of network bandwidth, but will require the most CPU for compression and decompression work.  所有传输请求都被压缩。该选项在网络带宽方面可能比`indexing_data`表现更好，但需要最多的 CPU 来进行压缩和解压缩工作。



- `transport.compression_scheme`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Configures the compression scheme for requests which are selected for compression by to the `transport.compress` setting. Accepts either `deflate` or `lz4`, which offer different trade-offs between compression ratio and CPU usage. Elasticsearch will use the same compression scheme for responses as for the corresponding requests. Defaults to `lz4`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 为通过`transport.compress`设置选择进行压缩的请求配置压缩方案。接受`deflate`或`lz4` ，它们在压缩比和 CPU 使用率之间提供不同的权衡。 Elasticsearch 将为响应使用与相应请求相同的压缩方案。默认为`lz4` 。

- `transport.tcp.keep_alive`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `SO_KEEPALIVE` option for transport sockets, which determines whether they send TCP keepalive probes. Defaults to `network.tcp.keep_alive`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 为传输套接字配置`SO_KEEPALIVE`选项，该选项确定它们是否发送 TCP keepalive 探测。默认为`network.tcp.keep_alive` 。

- `transport.tcp.keep_idle`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPIDLE` option for transport sockets, which determines the time in seconds that a connection must be idle before starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle` if set, or the system default otherwise. This value cannot exceed `300` seconds. In cases where the system default is higher than `300`, the value is automatically lowered to `300`. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置传输套接字的`TCP_KEEPIDLE`选项，该选项确定在开始发送 TCP keepalive 探测之前连接必须空闲的时间（以秒为单位）。如果设置则默认为`network.tcp.keep_idle` ，否则为系统默认值。该值不能超过`300`秒。如果系统默认值高于`300` ，该值会自动降低到`300` 。仅适用于 Linux 和 macOS。

- `transport.tcp.keep_interval`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPINTVL` option for transport sockets, which determines the time in seconds between sending TCP keepalive probes. Defaults to `network.tcp.keep_interval` if set, or the system default otherwise. This value cannot exceed `300` seconds. In cases where the system default is higher than `300`, the value is automatically lowered to `300`. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置传输套接字的`TCP_KEEPINTVL`选项，该选项确定发送 TCP keepalive 探测之间的时间（以秒为单位）。如果设置，则默认为`network.tcp.keep_interval` ，否则为系统默认值。该值不能超过`300`秒。如果系统默认值高于`300` ，该值会自动降低到`300` 。仅适用于 Linux 和 macOS。

- `transport.tcp.keep_count`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPCNT` option for transport sockets, which determines the number of unacknowledged TCP keepalive probes that may be sent on a connection before it is dropped. Defaults to `network.tcp.keep_count` if set, or the system default otherwise. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置传输套接字的`TCP_KEEPCNT`选项，该选项确定在连接断开之前可以在连接上发送的未确认的 TCP keepalive 探测的数量。如果设置则默认为`network.tcp.keep_count` ，否则为系统默认值。仅适用于 Linux 和 macOS。

- `transport.tcp.no_delay`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `TCP_NODELAY` option on transport sockets, which determines whether [TCP no delay](https://en.wikipedia.org/wiki/Nagle's_algorithm) is enabled. Defaults to `true`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 在传输套接字上配置`TCP_NODELAY`选项，该选项确定是否启用[TCP 无延迟](https://en.wikipedia.org/wiki/Nagle's_algorithm)。默认为`true` 。

- `transport.tcp.reuse_address`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `SO_REUSEADDR` option for network sockets, which determines whether the address can be reused or not. Defaults to `network.tcp.reuse_address`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 配置网络套接字的`SO_REUSEADDR`选项，该选项决定该地址是否可以重用。默认为`network.tcp.reuse_address` 。

- `transport.tcp.send_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) The size of the TCP send buffer for transport traffic. Defaults to `network.tcp.send_buffer_size`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）传输流量的 TCP 发送缓冲区的大小。默认为`network.tcp.send_buffer_size` 。

- `transport.tcp.receive_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) The size of the TCP receive buffer for transport traffic. Defaults to `network.tcp.receive_buffer_size`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）传输流量的 TCP 接收缓冲区的大小。默认为 `network.tcp.receive_buffer_size` 。

- `transport.ping_schedule`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [time value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)) Configures the time between sending application-level pings on all transport connections to promptly detect when a transport connection has failed. Defaults to `-1` meaning that application-level pings are not sent. You should use TCP keepalives (see `transport.tcp.keep_alive`) instead of application-level pings wherever possible.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[时间值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)）配置在所有传输连接上发送应用程序级 ping 之间的时间，以便及时检测传输连接何时失败。默认为`-1` ，表示不发送应用程序级 ping。您应该尽可能使用 TCP keepalive（请参阅`transport.tcp.keep_alive` ）而不是应用程序级 ping。

### Transport profiles 运输概况

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/transport.asciidoc)

Elasticsearch allows you to bind to multiple ports on different interfaces by the use of transport profiles. See this example configuration
Elasticsearch 允许您使用传输配置文件绑定到不同接口上的多个端口。请参阅此示例配置

```yaml
transport.profiles.default.port: 9300-9400
transport.profiles.default.bind_host: 10.0.0.1
transport.profiles.client.port: 9500-9600
transport.profiles.client.bind_host: 192.168.0.1
transport.profiles.dmz.port: 9700-9800
transport.profiles.dmz.bind_host: 172.16.1.2
```

The `default` profile is special. It is used as a fallback for any other profiles, if those do not have a specific configuration setting set, and is how this node connects to other nodes in the cluster. Other profiles can have any name and can be used to set up specific endpoints for incoming connections.
`default`配置文件很特殊。如果其他配置文件没有设置特定的配置设置，则它用作任何其他配置文件的后备，并且是该节点连接到集群中其他节点的方式。其他配置文件可以具有任何名称，并且可用于为传入连接设置特定端点。

The following parameters can be configured on each transport profile, as in the example above:
可以在每个传输配置文件上配置以下参数，如上例所示：

- `port`: The port to which to bind. 
  `port` ：要绑定的端口。
- `bind_host`: The host to which to bind. 
  `bind_host` ：要绑定的主机。
- `publish_host`: The host which is published in informational APIs. 
  `publish_host` ：在信息 API 中发布的主机。

Profiles also support all the other transport settings specified in the [transport settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#transport-settings) section, and use these as defaults. For example, `transport.profiles.client.tcp.reuse_address` can be explicitly configured, and defaults otherwise to `transport.tcp.reuse_address`.
配置文件还支持[传输设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#transport-settings)部分中指定的所有其他传输设置，并将这些设置用作默认值。例如， `transport.profiles.client.tcp.reuse_address` 可以显式配置，否则默认为`transport.tcp.reuse_address` 。

### Long-lived idle connections 长期空闲连接

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/transport.asciidoc)

A transport connection between two nodes is made up of a number of long-lived TCP connections, some of which may be idle for an extended period of time. Nonetheless, Elasticsearch requires these connections to remain open, and it can disrupt the operation of your cluster if any inter-node connections are closed by an external influence such as a firewall. It is important to configure your network to preserve long-lived idle connections between Elasticsearch nodes, for instance by leaving `*.tcp.keep_alive` enabled and ensuring that the keepalive interval is shorter than any timeout that might cause idle connections to be closed, or by setting `transport.ping_schedule` if keepalives cannot be configured. Devices which drop connections when they reach a certain age are a common source of problems to Elasticsearch clusters, and must not be used.
两个节点之间的传输连接由许多长期存在的 TCP 连接组成，其中一些连接可能会长时间处于空闲状态。尽管如此，Elasticsearch  要求这些连接保持打开状态，如果任何节点间连接被防火墙等外部影响关闭，则可能会中断集群的运行。配置网络以保留 Elasticsearch  节点之间的长期空闲连接非常重要，例如，启用`*.tcp.keep_alive`并确保 keepalive 间隔短于可能导致空闲连接关闭的任何超时，或者通过如果无法配置keepalive，则设置`transport.ping_schedule` 。当达到一定年龄时断开连接的设备是 Elasticsearch 集群问题的常见来源，因此不得使用。

### Request compression 请求压缩

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/transport.asciidoc)

The default `transport.compress` configuration option `indexing_data` will only compress requests that relate to the transport of raw indexing source data between nodes. This option primarily compresses data sent during ingest, ccr, and shard recovery. This default normally makes sense for local cluster communication as compressing raw documents tends significantly reduce inter-node network usage with minimal CPU impact.
默认的`transport.compress`配置选项`indexing_data`将仅压缩与节点之间原始索引源数据传输相关的请求。此选项主要压缩在摄取、ccr 和分片恢复期间发送的数据。此默认值通常对于本地集群通信有意义，因为压缩原始文档往往会显着减少节点间网络使用，同时对 CPU 的影响最小。

The `transport.compress` setting always configures local cluster request compression and is the fallback setting for remote cluster request compression. If you want to configure remote request compression differently than local request compression, you can set it on a per-remote cluster basis using the [`cluster.remote.${cluster_alias}.transport.compress` setting](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters-settings.html).
`transport.compress`设置始终配置本地集群请求压缩，并且是远程集群请求压缩的后备设置。如果您想要以不同于本地请求压缩的方式配置远程请求压缩，您可以使用以下命令在每个远程集群的基础上进行设置： `cluster.remote.${cluster_alias}.transport.compress` [环境](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters-settings.html)。

### Response compression 响应压缩

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/transport.asciidoc)

The compression settings do not configure compression for responses. Elasticsearch will compress a response if the inbound request was compressed—even when compression is not enabled. Similarly, Elasticsearch will not compress a response if the inbound request was uncompressed—even when compression is enabled. The compression scheme used to compress a response will be the same scheme the remote node used to compress the request.
压缩设置不会为响应配置压缩。如果入站请求被压缩，Elasticsearch 将压缩响应——即使未启用压缩。同样，如果入站请求未压缩，Elasticsearch 也不会压缩响应——即使启用了压缩。用于压缩响应的压缩方案将与远程节点用于压缩请求的方案相同。

## Advanced remote cluster (API key based model) settings 高级远程集群（基于 API 密钥的模型）设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/remote-cluster-network.asciidoc)

Use the following advanced settings to configure the remote cluster interface (API key based model) independently of the [transport interface](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#transport-settings). You can also configure both interfaces together using the [network settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings).
使用以下高级设置独立于[传输接口](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#transport-settings)配置远程集群接口（基于 API 密钥的模型）。您还可以使用[网络设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#common-network-settings)同时配置两个接口。

- `remote_cluster_server.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Determines whether the remote cluster server should be enabled. This setting must be `true` for `remote_cluster.port` and all following remote cluster settings to take effect. Enabling it allows the cluster to serve cross-cluster requests using the API key based model. Defaults to `false`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 确定是否应启用远程集群服务器。此设置必须为`true` ， `remote_cluster.port`和所有以下远程集群设置才能生效。启用它允许集群使用基于 API 密钥的模型来服务跨集群请求。默认为`false` 。

- `remote_cluster.host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) Sets the address of this node for remote cluster server traffic. The node will bind to this address and will also use it as its remote cluster server publish address. Accepts an IP address, a hostname, or a [special value](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Use this setting only if you require different configurations for the remote cluster server and transport interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 设置远程集群服务器流量的该节点的地址。该节点将绑定到该地址，并将其用作其远程集群服务器发布地址。接受 IP 地址、主机名或[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。仅当您需要远程集群服务器和传输接口的不同配置时才使用此设置。 Defaults to the address given by `transport.bind_host`. 默认为`transport.bind_host`给出的地址。

- `remote_cluster.bind_host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) The network address(es) to which the node should bind in order to listen for incoming remote cluster connections. Accepts a list of IP addresses, hostnames, and [special values](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Defaults to the address given by `remote_cluster.host`. Use this setting only if you require to bind to multiple addresses or to use different addresses for publishing and binding, and you also require different binding configurations for the remote cluster server and transport interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 节点应绑定到的网络地址，以便侦听传入的远程集群连接。接受 IP 地址、主机名和[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)的列表。默认为`remote_cluster.host`给出的地址。仅当您需要绑定到多个地址或使用不同的地址进行发布和绑定，并且还需要远程集群服务器和传输接口的不同绑定配置时，才使用此设置。

- `remote_cluster.publish_host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), string) The network address at which the node can be contacted by other nodes. Accepts an IP address, a hostname, or a [special value](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values). Defaults to the address given by `remote_cluster.host`. Use this setting only if you require to bind to multiple addresses or to use different addresses for publishing and binding, and you also require different binding configurations for the remote cluster server and transport interfaces.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , string) 其他节点可以联系该节点的网络地址。接受 IP 地址、主机名或[特殊值](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#network-interface-values)。默认为`remote_cluster.host`给出的地址。仅当您需要绑定到多个地址或使用不同的地址进行发布和绑定，并且还需要远程集群服务器和传输接口的不同绑定配置时，才使用此设置。

- `remote_cluster.publish_port`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) The port of the [remote cluster server publish address](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#modules-network-binding-publishing). Set this parameter only if you need the publish port to be different from `remote_cluster.port`. Defaults to the port assigned via `remote_cluster.port`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）[远程集群服务器发布地址](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#modules-network-binding-publishing)的端口。仅当您需要发布端口不同于`remote_cluster.port`时才设置此参数。默认为通过`remote_cluster.port`分配的端口。

- `remote_cluster.tcp.keep_alive`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `SO_KEEPALIVE` option for remote cluster sockets, which determines whether they send TCP keepalive probes. Defaults to `transport.tcp.keep_alive`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 为远程集群套接字配置`SO_KEEPALIVE`选项，该选项确定它们是否发送 TCP keepalive 探测。默认为`transport.tcp.keep_alive` 。

- `remote_cluster.tcp.keep_idle`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPIDLE` option for transport sockets, which determines the time in seconds that a connection must be idle before starting to send TCP keepalive probes. Defaults to `transport.tcp.keep_idle` if set, or the system default otherwise. This value cannot exceed `300` seconds. In cases where the system default is higher than `300`, the value is automatically lowered to `300`. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置传输套接字的`TCP_KEEPIDLE`选项，该选项确定在开始发送 TCP keepalive 探测之前连接必须空闲的时间（以秒为单位）。如果设置则默认为`transport.tcp.keep_idle` ，否则为系统默认值。该值不能超过`300`秒。如果系统默认值高于`300` ，该值会自动降低到`300` 。仅适用于 Linux 和 macOS。

- `remote_cluster.tcp.keep_interval`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPINTVL` option for transport sockets, which determines the time in seconds between sending TCP keepalive probes. Defaults to `transport.tcp.keep_interval` if set, or the system default otherwise. This value cannot exceed `300` seconds. In cases where the system default is higher than `300`, the value is automatically lowered to `300`. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置传输套接字的`TCP_KEEPINTVL`选项，该选项确定发送 TCP keepalive 探测之间的时间（以秒为单位）。如果设置则默认为`transport.tcp.keep_interval` ，否则为系统默认值。该值不能超过`300`秒。如果系统默认值高于`300` ，该值会自动降低到`300` 。仅适用于 Linux 和 macOS。

- `remote_cluster.tcp.keep_count`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Configures the `TCP_KEEPCNT` option for transport sockets, which determines the number of unacknowledged TCP keepalive probes that may be sent on a connection before it is dropped. Defaults to `transport.tcp.keep_count` if set, or the system default otherwise. Only applicable on Linux and macOS.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）配置传输套接字的`TCP_KEEPCNT`选项，该选项确定在连接断开之前可以在连接上发送的未确认的 TCP keepalive 探测的数量。如果设置则默认为`transport.tcp.keep_count` ，否则为系统默认值。仅适用于 Linux 和 macOS。

- `remote_cluster.tcp.no_delay`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `TCP_NODELAY` option on transport sockets, which determines whether [TCP no delay](https://en.wikipedia.org/wiki/Nagle's_algorithm) is enabled. Defaults to `transport.tcp.no_delay`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 在传输套接字上配置`TCP_NODELAY`选项，该选项确定是否启用[TCP 无延迟](https://en.wikipedia.org/wiki/Nagle's_algorithm)。默认为`transport.tcp.no_delay` 。

- `remote_cluster.tcp.reuse_address`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), boolean) Configures the `SO_REUSEADDR` option for network sockets, which determines whether the address can be reused or not. Defaults to `transport.tcp.reuse_address`.  ( [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) , boolean ) 配置网络套接字的`SO_REUSEADDR`选项，该选项决定该地址是否可以重用。默认为`transport.tcp.reuse_address` 。

- `remote_cluster.tcp.send_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) The size of the TCP send buffer for transport traffic. Defaults to `transport.tcp.send_buffer_size`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）传输流量的 TCP 发送缓冲区的大小。默认为 `transport.tcp.send_buffer_size` 。

- `remote_cluster.tcp.receive_buffer_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [byte value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)) The size of the TCP receive buffer for transport traffic. Defaults to `transport.tcp.receive_buffer_size`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[字节值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#byte-units)）传输流量的 TCP 接收缓冲区的大小。默认为 `transport.tcp.receive_buffer_size` 。

## Request tracing 请求追踪

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network/tracers.asciidoc)

You can trace individual requests made on the HTTP and transport layers.
您可以跟踪在 HTTP 和传输层上发出的各个请求。

Tracing can generate extremely high log volumes that can destabilize your cluster. Do not enable request tracing on busy or important clusters.
跟踪可能会生成极高的日志量，从而破坏集群的稳定性。不要在繁忙或重要的集群上启用请求跟踪。

### REST request tracer REST 请求跟踪器

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network/tracers.asciidoc)

The HTTP layer has a dedicated tracer that logs incoming requests and the corresponding outgoing responses. Activate the tracer by setting the level of the `org.elasticsearch.http.HttpTracer` logger to `TRACE`:
HTTP 层有一个专用跟踪器，用于记录传入请求和相应的传出响应。通过设置跟踪器的级别来激活跟踪器 `org.elasticsearch.http.HttpTracer` 记录到`TRACE` ：



```console
PUT _cluster/settings
{
   "persistent" : {
      "logger.org.elasticsearch.http.HttpTracer" : "TRACE"
   }
}
```

Copy as curl 复制为卷曲[Try in Elastic 尝试使用弹性](http://localhost:5601/zzz/app/kibana#/dev_tools/console?load_from=https://www.elastic.co/guide/en/elasticsearch/reference/current/snippets/20.console) 

You can also control which URIs will be traced, using a set of include and exclude wildcard patterns. By default every request will be traced.
您还可以使用一组包含和排除通配符模式来控制将跟踪哪些 URI。默认情况下，每个请求都会被跟踪。



```console
PUT _cluster/settings
{
   "persistent" : {
      "http.tracer.include" : "*",
      "http.tracer.exclude" : ""
   }
}
```

Copy as curl 复制为卷曲[Try in Elastic 尝试使用弹性](http://localhost:5601/zzz/app/kibana#/dev_tools/console?load_from=https://www.elastic.co/guide/en/elasticsearch/reference/current/snippets/21.console) 

By default, the tracer logs a summary of each request and response which matches these filters. To record the body of each request and response too, set the system property `es.insecure_network_trace_enabled` to `true`, and then set the levels of both the `org.elasticsearch.http.HttpTracer` and `org.elasticsearch.http.HttpBodyTracer` loggers to `TRACE`:
默认情况下，跟踪器会记录与这些过滤器匹配的每个请求和响应的摘要。要记录每个请求和响应的正文，请设置系统属性 `es.insecure_network_trace_enabled` 为`true` ，然后设置两个的级别 `org.elasticsearch.http.HttpTracer` 和 `org.elasticsearch.http.HttpBodyTracer` 记录器`TRACE` ：



```console
PUT _cluster/settings
{
   "persistent" : {
      "logger.org.elasticsearch.http.HttpTracer" : "TRACE",
      "logger.org.elasticsearch.http.HttpBodyTracer" : "TRACE"
   }
}
```

Copy as curl 复制为卷曲[Try in Elastic 尝试使用弹性](http://localhost:5601/zzz/app/kibana#/dev_tools/console?load_from=https://www.elastic.co/guide/en/elasticsearch/reference/current/snippets/22.console) 

Each message body is compressed, encoded, and split into chunks to avoid truncation:
每个消息正文都被压缩、编码并分割成块以避免截断：

```text
[TRACE][o.e.h.HttpBodyTracer     ] [master] [276] response body [part 1]: H4sIAAAAAAAA/9...
[TRACE][o.e.h.HttpBodyTracer     ] [master] [276] response body [part 2]: 2oJ93QyYLWWhcD...
[TRACE][o.e.h.HttpBodyTracer     ] [master] [276] response body (gzip compressed, base64-encoded, and split into 2 parts on preceding log lines)
```

Each chunk is annotated with an internal request ID (`[276]` in this example) which you should use to correlate the chunks with the corresponding summary lines. To reconstruct the output, base64-decode the data and decompress it using `gzip`. For instance, on Unix-like systems:
每个块都用内部请求 ID（本例中为`[276]` ）进行注释，您应该使用该 ID 将块与相应的摘要行关联起来。要重建输出，请对数据进行 base64 解码并使用`gzip`对其进行解压缩。例如，在类 Unix 系统上：

```sh
cat httptrace.log | sed -e 's/.*://' | base64 --decode | gzip --decompress
```

HTTP request and response bodies may contain sensitive information such as credentials and keys, so HTTP body tracing is disabled by default. You must explicitly enable it on each node by setting the system property `es.insecure_network_trace_enabled` to `true`. This feature is primarily intended for test systems which do not contain any sensitive information. If you set this property on a system which contains sensitive information, you must protect your logs from unauthorized access.
HTTP 请求和响应正文可能包含凭据和密钥等敏感信息，因此默认情况下禁用 HTTP 正文跟踪。您必须通过设置系统属性在每个节点上显式启用它 `es.insecure_network_trace_enabled` 为`true` 。此功能主要用于不包含任何敏感信息的测试系统。如果您在包含敏感信息的系统上设置此属性，则必须保护您的日志免遭未经授权的访问。

### Transport tracer 运输追踪器

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network/tracers.asciidoc)

The transport layer has a dedicated tracer that logs incoming and outgoing requests and responses. Activate the tracer by setting the level of the `org.elasticsearch.transport.TransportService.tracer` logger to `TRACE`:
传输层有一个专用跟踪器，用于记录传入和传出的请求和响应。通过设置跟踪器的级别来激活跟踪器 `org.elasticsearch.transport.TransportService.tracer` 记录到`TRACE` ：



```console
PUT _cluster/settings
{
   "persistent" : {
      "logger.org.elasticsearch.transport.TransportService.tracer" : "TRACE"
   }
}
```

Copy as curl 复制为卷曲[Try in Elastic 尝试使用弹性](http://localhost:5601/zzz/app/kibana#/dev_tools/console?load_from=https://www.elastic.co/guide/en/elasticsearch/reference/current/snippets/23.console) 

You can also control which actions will be traced, using a set of include and exclude wildcard patterns. By default every request will be traced except for fault detection pings:
您还可以使用一组包含和排除通配符模式来控制将跟踪哪些操作。默认情况下，除了故障检测 ping 之外，每个请求都会被跟踪：



```console
PUT _cluster/settings
{
   "persistent" : {
      "transport.tracer.include" : "*",
      "transport.tracer.exclude" : "internal:coordination/fault_detection/*"
   }
}
```

Copy as curl 复制为卷曲[Try in Elastic 尝试使用弹性](http://localhost:5601/zzz/app/kibana#/dev_tools/console?load_from=https://www.elastic.co/guide/en/elasticsearch/reference/current/snippets/24.console) 

## Networking threading model 网络线程模型

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/network/threading.asciidoc)

This section describes the threading model used by the networking subsystem in Elasticsearch. This information isn’t required to use Elasticsearch, but it may be useful to advanced users who are diagnosing network problems in a cluster.
本节介绍 Elasticsearch 中网络子系统使用的线程模型。使用 Elasticsearch 不需要此信息，但它对于诊断集群中的网络问题的高级用户可能有用。

Elasticsearch nodes communicate over a collection of TCP channels that together form a transport connection. Elasticsearch clients communicate with the cluster over HTTP, which also uses one or more TCP channels. Each of these TCP channels is owned by exactly one of the `transport_worker` threads in the node. This owning thread is chosen when the channel is opened and remains the same for the lifetime of the channel.
Elasticsearch 节点通过 TCP 通道集合进行通信，这些通道一起形成传输连接。 Elasticsearch 客户端通过 HTTP 与集群进行通信，HTTP 也使用一个或多个 TCP 通道。这些 TCP 通道中的每一个都由节点中的`transport_worker`线程之一拥有。该拥有线程在通道打开时被选择，并在通道的生命周期内保持不变。

Each `transport_worker` thread has sole responsibility for sending and receiving data over the channels it owns. Additionally, each http and transport server socket is assigned to one of the `transport_worker` threads. That worker has the responsibility of accepting new incoming connections to the server socket it owns.
每个`transport_worker`线程全权负责通过其拥有的通道发送和接收数据。此外，每个 http 和传输服务器套接字都分配给`transport_worker`线程之一。该工作人员有责任接受与其拥有的服务器套接字的新传入连接。

If a thread in Elasticsearch wants to send data over a particular channel, it passes the data to the owning `transport_worker` thread for the actual transmission.

Normally the `transport_worker` threads will not completely handle the messages they receive. Instead, they will do a small amount of preliminary processing and then dispatch (hand off) the message to a different [threadpool](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-threadpool.html) for the rest of their handling. For instance, bulk messages are dispatched to the `write` threadpool, searches are dispatched to one of the `search` threadpools, and requests for statistics and other management tasks are mostly dispatched to the `management` threadpool. However in some cases the processing of a message is expected to be so quick that Elasticsearch will do all of the processing on the `transport_worker` thread rather than incur the overhead of dispatching it elsewhere.
通常， `transport_worker`线程不会完全处理它们接收到的消息。相反，他们将进行少量的初步处理，然后将消息分派（移交）到不同的[线程池](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-threadpool.html)以进行其余的处理。例如，批量消息被分派到`write`线程池，搜索被分派到`search`线程池之一，统计请求和其他管理任务大部分被分派到`management`线程池。然而，在某些情况下，消息的处理速度预计会非常快，以至于 Elasticsearch 将在`transport_worker`线程上完成所有处理，而不是产生将其分派到其他地方的开销。

By default, there is one `transport_worker` thread per CPU. In contrast, there may sometimes be tens-of-thousands of TCP channels. If data arrives on a TCP channel and its owning `transport_worker` thread is busy, the data isn’t processed until the thread finishes whatever it is doing. Similarly, outgoing data are not sent over a channel until the owning `transport_worker` thread is free. This means that we require every `transport_worker` thread to be idle frequently. An idle `transport_worker` looks something like this in a stack dump:
默认情况下，每个 CPU 有一个`transport_worker`线程。相反，有时可能有数万个 TCP 通道。如果数据到达 TCP 通道并且其所属的`transport_worker`线程正忙，则在该线程完成其正在执行的操作之前不会处理数据。同样，只有在所属的`transport_worker`线程空闲之前，才会通过通道发送传出数据。这意味着我们要求每个`transport_worker`线程经常空闲。空闲的`transport_worker`在堆栈转储中看起来像这样：

```text
"elasticsearch[instance-0000000004][transport_worker][T#1]" #32 daemon prio=5 os_prio=0 cpu=9645.94ms elapsed=501.63s tid=0x00007fb83b6307f0 nid=0x1c4 runnable  [0x00007fb7b8ffe000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.EPoll.wait(java.base@17.0.2/Native Method)
	at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@17.0.2/EPollSelectorImpl.java:118)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@17.0.2/SelectorImpl.java:129)
	- locked <0x00000000c443c518> (a sun.nio.ch.Util$2)
	- locked <0x00000000c38f7700> (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(java.base@17.0.2/SelectorImpl.java:146)
	at io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:813)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:460)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.lang.Thread.run(java.base@17.0.2/Thread.java:833)
```

In the [Nodes hot threads](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-hot-threads.html) API an idle `transport_worker` thread is reported like this:
在[节点热线程](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-hot-threads.html)API 中，空闲的`transport_worker`线程的报告如下：

```text
   0.0% [cpu=0.0%, idle=100.0%] (500ms out of 500ms) cpu usage by thread 'elasticsearch[instance-0000000004][transport_worker][T#1]'
     10/10 snapshots sharing following 9 elements
       java.base@17.0.2/sun.nio.ch.EPoll.wait(Native Method)
       java.base@17.0.2/sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:118)
       java.base@17.0.2/sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:129)
       java.base@17.0.2/sun.nio.ch.SelectorImpl.select(SelectorImpl.java:146)
       io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:813)
       io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:460)
       io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
       io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
       java.base@17.0.2/java.lang.Thread.run(Thread.java:833)
```

Note that `transport_worker` threads should always be in state `RUNNABLE`, even when waiting for input, because they block in the native `EPoll#wait` method. The `idle=` time reports the proportion of time the thread spent waiting for input, whereas the `cpu=` time reports the proportion of time the thread spent processing input it has received.
请注意，即使在等待输入时， `transport_worker`线程也应始终处于`RUNNABLE`状态，因为它们会在本机`EPoll#wait`方法中阻塞。 `idle=` time 报告线程等待输入的时间比例，而`cpu=` time 报告线程处理收到的输入所花费的时间比例。

If a `transport_worker` thread is not frequently idle, it may build up a backlog of work. This can cause delays in processing messages on the channels that it owns. It’s hard to predict exactly which work will be delayed:
如果`transport_worker`线程不经常空闲，则可能会积压工作。这可能会导致其拥有的通道上的消息处理延迟。很难准确预测哪些工作会被推迟：

- There are many more channels than threads. If work related to one channel is causing delays to its worker thread, all other channels owned by that thread will also suffer delays. 
  通道比线程多得多。如果与一个通道相关的工作导致其工作线程延迟，则该线程拥有的所有其他通道也将遭受延迟。
- The mapping from TCP channels to worker threads is fixed but arbitrary. Each channel is assigned an owning thread in a round-robin fashion when the channel is opened. Each worker thread is responsible for many different kinds of channel. 
  从 TCP 通道到工作线程的映射是固定的但任意的。当通道打开时，每个通道都会以循环方式分配一个所属线程。每个工作线程负责许多不同类型的通道。
- There are many channels open between each pair of nodes. For each request, Elasticsearch will choose from the appropriate channels in a round-robin fashion. Some requests may end up on a channel owned by a delayed worker while other identical requests will be sent on a channel that’s working smoothly. 
  每对节点之间有许多开放的通道。对于每个请求，Elasticsearch 都会以循环方式从适当的渠道中进行选择。某些请求可能最终会到达延迟工作人员拥有的通道，而其他相同的请求将在正常工作的通道上发送。

If the backlog builds up too far, some messages may be delayed by many seconds. The node might even [fail its health checks](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-fault-detection.html) and be removed from the cluster. Sometimes, you can find evidence of busy `transport_worker` threads using the [Nodes hot threads](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-hot-threads.html) API. However, this API itself sends network messages so may not work correctly if the `transport_worker` threads are too busy. It is more reliable to use `jstack` to obtain stack dumps or use Java Flight Recorder to obtain a profiling trace. These tools are independent of any work the JVM is performing.
如果积压过多，某些消息可能会延迟很多秒。该节点甚至可能[无法通过健康检查](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-fault-detection.html)并从集群中删除。有时，您可以使用[Nodes 热线程](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-hot-threads.html)API 找到繁忙的`transport_worker`线程的证据。但是，此 API 本身会发送网络消息，因此如果`transport_worker`线程太忙，则可能无法正常工作。使用`jstack`获取堆栈转储或使用 Java Flight Recorder 获取分析跟踪更为可靠。这些工具独立于 JVM 正在执行的任何工作。

It may also be possible to identify some reasons for delays from the server logs. See for instance the following loggers:
还可以从服务器日志中识别延迟的某些原因。例如，请参阅以下记录器：

- `org.elasticsearch.transport.InboundHandler`

  This logger reports a warning if processing an inbound message occupies a network thread for unreasonably long, which is almost certainly a bug. The warning includes some information which can be used to identify the message that took unreasonably long to process.  如果处理入站消息占用网络线程的时间过长，则此记录器会报告警告，这几乎肯定是一个错误。该警告包含一些可用于识别处理时间过长的消息的信息。

- `org.elasticsearch.transport.OutboundHandler`

  This logger reports a warning if sending an outbound message takes longer than expected. This duration includes time spent waiting for network congestion to clear, and time spent processing other work on the same network thread, so does not always indicate the presence of a bug related to the outbound message specified in the log entry.  如果发送出站消息的时间比预期长，此记录器会报告警告。此持续时间包括等待网络拥塞清除所花费的时间以及在同一网络线程上处理其他工作所花费的时间，因此并不总是表明存在与日志条目中指定的出站消息相关的错误。

- `org.elasticsearch.common.network.ThreadWatchdog`

  This logger reports a warning and a thread dump when it notices that a network thread has not made progress between two consecutive checks, which is almost certainly a bug:  当该记录器注意到网络线程在两次连续检查之间没有取得进展时，它会报告警告和线程转储，这几乎肯定是一个错误：  `[WARN ][o.e.c.n.ThreadWatchdog   ] the following threads are active but did not make progress in the preceding [5s]: [elasticsearch[instance-0000000004][transport_worker][T#1]]] [WARN ][o.e.c.n.ThreadWatchdog   ] hot threads dump due to active threads not making progress [part 1]: H4sIAAAAAAAA/+1aa2/bOBb93l8hYLUYFWgYvWw5AQbYpEkn6STZbJyiwAwGA1qiY8US6ZJUHvPr90qk/JJky41TtDMuUIci... [WARN ][o.e.c.n.ThreadWatchdog   ] hot threads dump due to active threads not making progress [part 2]: LfXL/x70a3eL8ve6Ral74ZBrp5x7HmUD9KXQz1MaXUNfFC6SeEysxSw1cNXL9JXYl3AigAE7ywbm/AZ+ll3Ox4qXJHNjVr6h... [WARN ][o.e.c.n.ThreadWatchdog   ] hot threads dump due to active threads not making progress (gzip compressed, base64-encoded, and split into 2 parts on preceding log lines; ...` To reconstruct the thread dump, base64-decode the data and decompress it using `gzip`. For instance, on Unix-like systems: 要重建线程转储，请对数据进行 base64 解码并使用`gzip`对其进行解压缩。例如，在类 Unix 系统上：  `cat watchdog.log | sed -e 's/.*://' | base64 --decode | gzip --decompress` This mechanism can be controlled with the following settings: 该机制可以通过以下设置进行控制：   `network.thread.watchdog.interval`  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [time value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)) Defines the interval between watchdog checks. Defaults to `5s`. Set to `0` to disable the network thread watchdog.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[时间值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)）定义看门狗检查之间的间隔。默认为`5s` 。设置为`0`以禁用网络线程看门狗。  `network.thread.watchdog.quiet_time`  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), [time value](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)) Defines the interval between watchdog warnings. Defaults to `10m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，[时间值](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)）定义看门狗警告之间的间隔。默认为`10m` 。

# Node query cache settings 节点查询缓存设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/query_cache.asciidoc)

The results of queries used in the filter context are cached in the node query cache for fast lookup. There is one query cache per node that is shared by all shards. The cache uses an LRU eviction policy: when the cache is full, the least recently used query results are evicted to make way for new data. You cannot inspect the contents of the query cache.
过滤器上下文中使用的查询结果缓存在节点查询缓存中，以便快速查找。每个节点有一个查询缓存，由所有分片共享。缓存使用 LRU 驱逐策略：当缓存已满时，最近最少使用的查询结果将被驱逐，为新数据让路。您无法检查查询缓存的内容。

Term queries and queries used outside of a filter context are not eligible for caching.
术语查询和在过滤器上下文之外使用的查询不符合缓存条件。

By default, the cache holds a maximum of 10000 queries in up to 10% of the total heap space. To determine if a query is eligible for caching, Elasticsearch maintains a query history to track occurrences.
默认情况下，缓存最多可容纳 10000 个查询，占总堆空间的 10%。为了确定查询是否符合缓存条件，Elasticsearch 维护查询历史记录来跟踪出现情况。

Caching is done on a per segment basis if a segment contains at least 10000 documents and the segment has at least 3% of the total documents of a shard. Because caching is per segment, merging segments can invalidate cached queries.
如果一个段包含至少 10000 个文档并且该段至少占分片总文档的 3%，则按每个段进行缓存。由于缓存是按段进行的，因此合并段可能会使缓存的查询无效。

The following setting is *static* and must be configured on every data node in the cluster:
以下设置是*静态的*，必须在集群中的每个数据节点上进行配置：

- `indices.queries.cache.size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the memory size for the filter cache. Accepts either a percentage value, like `5%`, or an exact value, like `512mb`. Defaults to `10%`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制过滤器缓存的内存大小。接受百分比值（如`5%` ）或精确值（如`512mb` 。默认为`10%` 。

## Query cache index settings 查询缓存索引设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/query_cache.asciidoc)

The following setting is an *index* setting that can be configured on a per-index basis. Can only be set at index creation time or on a [closed index](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-open-close.html):
以下设置是可以针对每个索引进行配置的*索引*设置。只能在索引创建时或在[关闭索引](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-open-close.html)上设置：

- `index.queries.cache.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#index-modules-settings)) Controls whether to enable query caching. Accepts `true` (default) or `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#index-modules-settings)）控制是否启用查询缓存。接受`true` （默认）或`false` 。

# Search settings 搜索设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/indices/search-settings.asciidoc)

The following expert settings can be set to manage global search and aggregation limits.
可以设置以下专家设置来管理全局搜索和聚合限制。



- `indices.query.bool.max_clause_count`

  [8.0.0]  [ 8.0.0 ] Deprecated in 8.0.0. 8.0.0 中已弃用。 ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) This deprecated setting has no effect.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数） 此已弃用的设置没有任何效果。 Elasticsearch will now dynamically set the maximum number of allowed clauses in a query, using a heuristic based on the size of the search thread pool and the size of the heap allocated to the JVM. This limit has a minimum value of 1024 and will in most cases be larger (for example, a node with 30Gb RAM and 48 CPUs will have a maximum clause count of around 27,000). Larger heaps lead to higher values, and larger thread pools result in lower values. Elasticsearch 现在将根据搜索线程池的大小和分配给 JVM 的堆大小使用启发式动态设置查询中允许的最大子句数。此限制的最小值为  1024，并且在大多数情况下会更大（例如，具有 30Gb RAM 和 48 个 CPU 的节点的最大子句计数约为  27,000）。较大的堆会导致较高的值，较大的线程池会导致较低的值。 Queries with many clauses should be avoided whenever possible. If you previously bumped this setting to accommodate heavy queries, you might need to increase the amount of memory available to Elasticsearch, or to reduce the size of your search thread pool so that more memory is available to each concurrent search. 应尽可能避免包含多个子句的查询。如果您之前提高了此设置以适应繁重的查询，则可能需要增加 Elasticsearch 可用的内存量，或者减少搜索线程池的大小，以便为每个并发搜索提供更多内存。 In previous versions of Lucene you could get around this limit by nesting boolean queries within each other, but the limit is now based on the total number of leaf queries within the query as a whole and this workaround will no longer help. 在 Lucene 的早期版本中，您可以通过在彼此之间嵌套布尔查询来解决此限制，但现在该限制基于整个查询中叶查询的总数，并且此解决方法将不再有帮助。



- `search.max_buckets`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), integer) Maximum number of [aggregation buckets](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket.html) allowed in a single response. Defaults to 65,536.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)，整数）单个响应中允许的最大[聚合桶](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket.html)数。默认为 65,536。 Requests that attempt to return more than this limit will return an error. 尝试返回超过此限制的请求将返回错误。



- `search.aggs.only_allowed_metric_scripts`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), boolean) Configures whether only explicitly allowed scripts can be used in [scripted metrics aggregations](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-scripted-metric-aggregation.html). Defaults to `false`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)，布尔值）配置是否只能在[脚本化指标聚合](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-scripted-metric-aggregation.html)中使用明确允许的脚本。默认为`false` 。 Requests using scripts not contained in either [`search.aggs.allowed_inline_metric_scripts`](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-settings.html#search-settings-allowed-inline-scripts) or [`search.aggs.allowed_stored_metric_scripts`](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-settings.html#search-settings-allowed-stored-scripts) will return an error. 使用不包含在其中的脚本的请求或者将返回一个错误。



- `search.aggs.allowed_inline_metric_scripts`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), list of strings) List of inline scripts that can be used in scripted metrics aggregations when [`search.aggs.only_allowed_metric_scripts`](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-settings.html#search-settings-only-allowed-scripts) is set to `true`. Defaults to an empty list.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)，字符串列表）可在脚本化指标聚合中使用的内联脚本列表设置为`true` 。默认为空列表。 Requests using other inline scripts will return an error. 使用其他内联脚本的请求将返回错误。



- `search.aggs.allowed_stored_metric_scripts`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html), list of strings) List of ids of stored scripts that can be used in scripted metrics aggregations when [`search.aggs.only_allowed_metric_scripts`](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-settings.html#search-settings-only-allowed-scripts) is set to `true`. Defaults to an empty list.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)，字符串列表）存储脚本的 ID 列表，可在脚本化指标聚合中使用设置为`true` 。默认为空列表。 Requests using other stored scripts will return an error. 使用其他存储脚本的请求将返回错误。



- `indices.query.bool.max_nested_depth`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), integer) Maximum nested depth of queries. Defaults to `30`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)，整数）查询的最大嵌套深度。默认为`30` 。 This setting limits the nesting depth of queries. Deep nesting of queries may lead to stack overflow errors. 此设置限制查询的嵌套深度。查询的深度嵌套可能会导致堆栈溢出错误。

# Security settings in Elasticsearch Elasticsearch 中的安全设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

You configure `xpack.security` settings to [enable anonymous access](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#anonymous-access-settings) and perform message authentication, [set up document and field level security](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#field-document-security-settings), [configure realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#realm-settings), [encrypt communications with SSL](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ssl-tls-settings),and [audit security events](https://www.elastic.co/guide/en/elasticsearch/reference/current/auditing-settings.html).
您可以配置`xpack.security`设置以[启用匿名访问](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#anonymous-access-settings)并执行消息身份验证、[设置文档和字段级安全性](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#field-document-security-settings)、[配置领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#realm-settings)、[使用 SSL 加密通信](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ssl-tls-settings)以及[审核安全事件](https://www.elastic.co/guide/en/elasticsearch/reference/current/auditing-settings.html)。

All of these settings can be added to the `elasticsearch.yml` configuration file, with the exception of the secure settings, which you add to the Elasticsearch keystore. For more information about creating and updating the Elasticsearch keystore, see [Secure settings](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html).
所有这些设置都可以添加到`elasticsearch.yml`配置文件中，但安全设置除外，您可以将其添加到 Elasticsearch 密钥库中。有关创建和更新 Elasticsearch 密钥库的更多信息，请参阅[安全设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)。

## General security settings 常规安全设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

- `xpack.security.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Defaults to `true`, which enables Elasticsearch security features on the node. This setting must be enabled to use Elasticsearch’s authentication, authorization and audit features. （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）默认为`true` ，这会在节点上启用 Elasticsearch 安全功能。必须启用此设置才能使用 Elasticsearch 的身份验证、授权和审核功能。  If set to `false`, security features are disabled, which is not recommended. It also affects all Kibana instances that connect to this Elasticsearch instance; you do not need to disable security features in those `kibana.yml` files. For more information about disabling security features in specific Kibana instances, see [Kibana security settings](https://www.elastic.co/guide/en/kibana/8.15/security-settings-kb.html). 如果设置为`false` ，安全功能将被禁用，不建议这样做。它还会影响连接到此 Elasticsearch 实例的所有 Kibana 实例；您不需要禁用这些`kibana.yml`文件中的安全功能。有关禁用特定 Kibana 实例中的安全功能的更多信息，请参阅[Kibana 安全设置](https://www.elastic.co/guide/en/kibana/8.15/security-settings-kb.html)。

- `xpack.security.autoconfiguration.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Defaults to `true`, which enables [security auto configuration](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）默认为`true` ，启用[安全自动配置](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html)。 If set to `false`, security auto configuration is disabled, which is not recommended. When disabled, security is not configured automatically when starting Elasticsearch for the first time, which means that you must [manually configure security](https://www.elastic.co/guide/en/elasticsearch/reference/current/manually-configure-security.html). 如果设置为`false` ，则禁用安全自动配置，不建议这样做。禁用后，首次启动 Elasticsearch 时不会自动配置安全性，这意味着您必须[手动配置安全性](https://www.elastic.co/guide/en/elasticsearch/reference/current/manually-configure-security.html)。

- `xpack.security.enrollment.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Defaults to `false`. Controls enrollment (of nodes and Kibana) to a local node that’s been [autoconfigured for security](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html). When set to `true`, the local node can generate new enrollment tokens. Existing tokens can be used for enrollment if they are still valid.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）默认为`false` 。控制（节点和 Kibana）注册到已[自动配置安全性的](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html)本地节点。当设置为`true`时，本地节点可以生成新的注册令牌。如果现有令牌仍然有效，则可以使用它们进行注册。 The security autoconfiguration process will set this to `true` unless an administrator sets it to `false` before starting Elasticsearch. 安全自动配置过程会将其设置为`true`除非管理员在启动 Elasticsearch 之前将其设置为`false` 。

- `xpack.security.hide_settings`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A comma-separated list of settings that are omitted from the results of the [cluster nodes info API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html). You can use wildcards to include multiple settings in the list. For example, the following value hides all the settings for the ad1 active_directory realm: `xpack.security.authc.realms.active_directory.ad1.*`. The API already omits all `ssl` settings, `bind_dn`, and `bind_password` due to the sensitive nature of the information.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）从[集群节点信息 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html)的结果中省略的以逗号分隔的设置列表。您可以使用通配符在列表中包含多个设置。例如，以下值隐藏 ad1 active_directory 领域的所有设置： `xpack.security.authc.realms.active_directory.ad1.*` 。由于信息的敏感性，API 已省略所有`ssl`设置、 `bind_dn`和`bind_password` 。

- `xpack.security.fips_mode.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Enables fips mode of operation. Set this to `true` if you run this Elasticsearch instance in a FIPS 140-2 enabled JVM. For more information, see [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). Defaults to `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）启用 fips 操作模式。如果您在启用 FIPS 140-2 的 JVM 中运行此 Elasticsearch 实例，请将此设置为`true` 。有关详细信息，请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。默认为`false` 。

- `xpack.security.fips_mode.required_providers`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Optionally enforce specific Java JCE/JSSE security providers. For example, set this to `["BCFIPS", "BCJSSE"]` (case-insensitive) to require the Bouncy Castle FIPS JCE and JSSE security providers. Only applicable when `xpack.security.fips_mode.enabled` is set to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）可选择强制执行特定的 Java JCE/JSSE 安全提供程序。例如，将其设置为`["BCFIPS", "BCJSSE"]` （不区分大小写）以要求 Bouncy Castle FIPS JCE 和 JSSE 安全提供程序。仅适用于以下情况 `xpack.security.fips_mode.enabled` 设置为`true` 。

## Password hashing settings 密码哈希设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

- `xpack.security.authc.password_hashing.algorithm`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the hashing algorithm that is used for secure user credential storage. See [Table 2, “Password hashing algorithms”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#password-hashing-algorithms). If `xpack.security.fips_mode.enabled` is true (see [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html)), defaults to `pbkdf2_stretch`. In all other cases, defaults to `bcrypt`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于安全用户凭据存储的哈希算法。请参阅[表 2“密码散列算法”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#password-hashing-algorithms) 。如果 `xpack.security.fips_mode.enabled` 为 true（请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) ），默认为`pbkdf2_stretch` 。在所有其他情况下，默认为`bcrypt` 。

## Anonymous access settings 匿名访问设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

You can configure the following anonymous access settings in `elasticsearch.yml`. For more information, see [Enabling anonymous access](https://www.elastic.co/guide/en/elasticsearch/reference/current/anonymous-access.html).
您可以在`elasticsearch.yml`中配置以下匿名访问设置。有关详细信息，请参阅[启用匿名访问](https://www.elastic.co/guide/en/elasticsearch/reference/current/anonymous-access.html)。

- `xpack.security.authc.anonymous.username`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The username (principal) of the anonymous user. Defaults to `_es_anonymous_user`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）匿名用户的用户名（主体）。默认为`_es_anonymous_user` 。

- `xpack.security.authc.anonymous.roles`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The roles to associate with the anonymous user. Required.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）与匿名用户关联的角色。必需的。

- `xpack.security.authc.anonymous.authz_exception`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) When `true`, an HTTP 403 response is returned if the anonymous user does not have the appropriate permissions for the requested action. The user is not prompted to provide credentials to access the requested resource. When set to `false`, an HTTP 401 response is returned and the user can provide credentials with the appropriate permissions to gain access. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）当为`true`时，如果匿名用户没有所请求操作的适当权限，则会返回 HTTP 403 响应。系统不会提示用户提供访问所请求资源的凭据。当设置为`false`时，将返回 HTTP 401 响应，并且用户可以提供具有适当权限的凭据来获取访问权限。默认为`true` 。

## Automata Settings 自动机设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In places where the security features accept wildcard patterns (e.g. index patterns in roles, group matches in the role mapping API), each pattern is compiled into an Automaton. The follow settings are available to control this behaviour.
在安全功能接受通配符模式的地方（例如角色中的索引模式、角色映射 API 中的组匹配），每个模式都被编译到一个自动机中。以下设置可用于控制此行为。

- `xpack.security.automata.max_determinized_states`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The upper limit on how many automaton states may be created by a single pattern. This protects against too-difficult (e.g. exponentially hard) patterns. Defaults to `100,000`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）单个模式可以创建多少个自动机状态的上限。这可以防止过于困难（例如指数难度）的模式。默认为`100,000` 。

- `xpack.security.automata.cache.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Whether to cache the compiled automata. Compiling automata can be CPU intensive and may slowdown some operations. The cache reduces the frequency with which automata need to be compiled. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）是否缓存已编译的自动机。编译自动机可能会占用 CPU 资源，并且可能会减慢某些操作的速度。缓存降低了自动机需要编译的频率。默认为`true` 。

- `xpack.security.automata.cache.size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum number of items to retain in the automata cache. Defaults to `10,000`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）自动机缓存中保留的最大项目数。默认为`10,000` 。

- `xpack.security.automata.cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The length of time to retain in an item in the automata cache (based on most recent usage). Defaults to `48h` (48 hours).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）自动机缓存中项目的保留时间长度（基于最近的使用情况）。默认为`48h` （48 小时）。

## Document and field level security settings 文档和字段级安全设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

You can set the following document and field level security settings in `elasticsearch.yml`. For more information, see [Setting up field and document level security](https://www.elastic.co/guide/en/elasticsearch/reference/current/field-and-document-access-control.html).
您可以在`elasticsearch.yml`中设置以下文档和字段级别安全设置。有关详细信息，请参阅[设置字段和文档级别安全性](https://www.elastic.co/guide/en/elasticsearch/reference/current/field-and-document-access-control.html)。

- `xpack.security.dls_fls.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set to `false` to prevent document and field level security from being configured. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置为`false`以防止配置文档和字段级安全性。默认为`true` 。

- `xpack.security.dls.bitset.cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The time-to-live for cached `BitSet` entries for document level security. Document level security queries may depend on Lucene BitSet objects, and these are automatically cached to improve performance. Defaults to expire entries that are unused for `2h` (2 hours).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）文档级安全性的缓存`BitSet`条目的生存时间。文档级安全查询可能依赖于 Lucene BitSet 对象，并且这些对象会自动缓存以提高性能。默认为`2h` （2 小时）内未使用的条目过期。

- `xpack.security.dls.bitset.cache.size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum memory usage of cached `BitSet` entries for document level security. Document level security queries may depend on Lucene BitSet objects, and these are automatically cached to improve performance. Can be configured as a raw number of bytes (such as `200mb` or `1g`) or a percentage of the node’s JVM heap memory (such as `5%`). When the default value is exceeded, the least recently used entries are evicted. Defaults to `10%` of the heap assigned to the node.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）文档级安全性的缓存`BitSet`条目的最大内存使用量。文档级安全查询可能依赖于 Lucene BitSet 对象，并且这些对象会自动缓存以提高性能。可以配置为原始字节数（例如`200mb`或`1g` ）或节点 JVM 堆内存的百分比（例如`5%` ）。当超过默认值时，最近最少使用的条目将被逐出。默认为分配给节点的堆的`10%` 。

## Token service settings 令牌服务设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

You can set the following token service settings in `elasticsearch.yml`.
您可以在`elasticsearch.yml`中设置以下令牌服务设置。

- `xpack.security.authc.token.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set to `false` to disable the built-in token service. Defaults to `true` unless `xpack.security.http.ssl.enabled` is `false`. This prevents sniffing the token  from a connection over plain http.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置为`false`以禁用内置令牌服务。默认为`true`除非 `xpack.security.http.ssl.enabled` 是`false` 。这可以防止通过普通 http 连接嗅探令牌。

- `xpack.security.authc.token.timeout`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The length of time that a token is valid for. By default this value is `20m` or 20 minutes. The maximum value is 1 hour.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）令牌的有效时间长度。默认情况下，该值为`20m`或 20 分钟。最大值为 1 小时。

## API key service settings API密钥服务设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

You can set the following API key service settings in `elasticsearch.yml`.
您可以在`elasticsearch.yml`中设置以下 API 密钥服务设置。

- `xpack.security.authc.api_key.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set to `false` to disable the built-in API key service. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置为`false`以禁用内置 API 密钥服务。默认为`true` 。

- `xpack.security.authc.api_key.cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The time-to-live for cached API key entries. A API key id and a hash of its API key are cached for this period of time. Specify the time period using the standard Elasticsearch [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `1d`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）缓存的 API 密钥条目的生存时间。 API 密钥 ID 及其 API 密钥的哈希值将在这段时间内缓存。使用标准 Elasticsearch[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)指定时间段。默认为`1d` 。

- `xpack.security.authc.api_key.cache.max_keys`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum number of API key entries that can live in the cache at any given time. Defaults to 10,000.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）任何给定时间可以存在于缓存中的 API 密钥条目的最大数量。默认为 10,000。

- `xpack.security.authc.api_key.cache.hash_algo`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), Expert) The hashing algorithm that is used for the in-memory cached API key credentials. For possible values, see [Table 1, “Cache hash algorithms”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo). Defaults to `ssha256`.  （ [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) 、 Expert）用于内存中缓存的 API 密钥凭证的哈希算法。有关可能的值，请参阅[表 1，“缓存哈希算法”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo) 。默认为`ssha256` 。



- `xpack.security.authc.api_key.delete.retention_period`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) Invalidated or expired API keys older than the retention period are eligible for deletion. Defaults to `7d`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）早于保留期的无效或过期 API 密钥可以删除。默认为`7d` 。

Large real-time clock inconsistency across cluster nodes can cause problems with evaluating the API key retention period. That is, if the clock on the node invalidating the API key is significantly different than the one performing the deletion, the key may be retained for longer or shorter than the configured retention period.
集群节点之间较大的实时时钟不一致可能会导致评估 API 密钥保留期出现问题。也就是说，如果使 API 密钥失效的节点上的时钟与执行删除的节点上的时钟显着不同，则密钥的保留时间可能会长于或短于配置的保留期限。

- `xpack.security.authc.api_key.delete.interval`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting), Expert) Cluster nodes schedule the automatic deletion of invalidated or expired API keys that are older than the retention period. This setting controls the minimum time interval between two such deletion jobs. Defaults to `24h`.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)、专家）集群节点安排自动删除早于保留期的无效或过期的 API 密钥。此设置控制两个此类删除作业之间的最小时间间隔。默认为`24h` 。  This is a low-level setting that currently controls the interval between deletion jobs triggered per-node, not across the cluster. 这是一个低级设置，当前控制每个节点（而不是跨集群）触发的删除作业之间的间隔。

- `xpack.security.authc.api_key.delete.timeout`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), Expert) Sets the timeout of the internal search and delete call.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)、专家）设置内部搜索和删除调用的超时。

- `xpack.security.authc.api_key.hashing.algorithm`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the hashing algorithm that is used for securing API key credentials. See [Table 2, “Password hashing algorithms”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#password-hashing-algorithms). Defaults to `pbkdf2`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于保护 API 密钥凭据的哈希算法。请参阅[表 2“密码散列算法”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#password-hashing-algorithms) 。默认为`pbkdf2` 。

## Security domain settings 安全域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

You configure security domain settings in the `xpack.security.authc.domains` namespace in `elasticsearch.yml`.
您可以在`elasticsearch.yml`的`xpack.security.authc.domains`命名空间中配置安全域设置。

For example: 例如：

```yaml
xpack:
  security:
    authc:
      domains:
        my_domain: 
          realms: [ 'default_native', 'saml1' ] 
```

|      | Specifies the name of the security domain 指定安全域的名称   |
| ---- | ------------------------------------------------------------ |
|      | Specifies the realms that belong to the domain 指定属于域的领域 |

## Realm settings 领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

You configure realm settings in the `xpack.security.authc.realms` namespace in `elasticsearch.yml`.
您可以在`elasticsearch.yml`的`xpack.security.authc.realms`命名空间中配置领域设置。

For example: 例如：

```yaml
xpack.security.authc.realms:

    native.realm1: 
        order: 0 
        ...

    ldap.realm2:
        order: 1
        ...

    active_directory.realm3:
        order: 2
        ...
    ...
```

|      | Specifies the type of realm (for example, `native`, `ldap`, `active_directory`, `pki`, `file`, `kerberos`, `saml`) and the realm name. This information is required. 指定领域的类型（例如， `native` 、 `ldap` 、 `active_directory` 、 `pki` 、 `file` 、 `kerberos` 、 `saml` ）和领域名称。必须提供此信息。 |
| ---- | ------------------------------------------------------------ |
|      | Specifies priority of a realm in the realm chain. This information is required. 指定领域链中领域的优先级。必须提供此信息。 |

The valid settings vary depending on the realm type. For more information, see [*User authentication*](https://www.elastic.co/guide/en/elasticsearch/reference/current/setting-up-authentication.html).
有效设置因领域类型而异。有关详细信息，请参阅[*用户身份验证*](https://www.elastic.co/guide/en/elasticsearch/reference/current/setting-up-authentication.html)。

### Settings valid for all realms 设置对所有领域均有效

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

- `order`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The priority of the realm within the realm chain. Realms with a lower order are consulted first. The value must be unique for each realm. This setting is required.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）领域链中领域的优先级。首先咨询较低阶的领域。每个领域的值必须是唯一的。此设置是必需的。

- `enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Indicates whether a realm is enabled. You can use this setting to disable a realm without removing its configuration information. Defaults to `true`.  ([静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) 指示领域是否已启用。您可以使用此设置来禁用领域，而无需删除其配置信息。默认为`true` 。

### Native realm settings 本机领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [settings that are valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following optional settings:
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下可选设置：

- `cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The time-to-live for cached user entries. A user and a hash of its credentials are cached for this period of time. Specify the time period using the standard Elasticsearch [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `20m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）缓存的用户条目的生存时间。用户及其凭据的哈希值将在这段时间内被缓存。使用标准 Elasticsearch[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)指定时间段。默认为`20m` 。

- `cache.max_users`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum number of user entries that can live in the cache at any given time. Defaults to 100,000.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）在任何给定时间可以存在于缓存中的最大用户条目数。默认为 100,000。

- `cache.hash_algo`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), Expert) The hashing algorithm that is used for the in-memory cached user credentials. For possible values, see [Table 1, “Cache hash algorithms”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo). Defaults to `ssha256`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)、专家）用于内存中缓存的用户凭据的哈希算法。有关可能的值，请参阅[表 1，“缓存哈希算法”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo) 。默认为`ssha256` 。

- `authentication.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If set to `false`, disables authentication support in this realm, so that it only supports user lookups. (See the [run as](https://www.elastic.co/guide/en/elasticsearch/reference/current/run-as-privilege.html) and [authorization realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms) features). Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果设置为`false` ，则禁用此领域中的身份验证支持，以便它仅支持用户查找。 （请参阅[运行方式](https://www.elastic.co/guide/en/elasticsearch/reference/current/run-as-privilege.html)和[授权领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)功能）。默认为`true` 。

### File realm settings 文件领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [settings that are valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following settings:
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下设置：

- `cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The time-to-live for cached user entries. A user and a hash of its credentials are cached for this configured period of time. Defaults to `20m`. Specify values using the standard Elasticsearch [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `20m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）缓存的用户条目的生存时间。用户及其凭据的哈希值将在配置的时间段内进行缓存。默认为`20m` 。使用标准 Elasticsearch[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)指定值。默认为`20m` 。

- `cache.max_users`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum number of user entries that can live in the cache at a given time. Defaults to 100,000.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）给定时间可以存在于缓存中的最大用户条目数。默认为 100,000。

- `cache.hash_algo`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), Expert) The hashing algorithm that is used for the in-memory cached user credentials. See [Table 1, “Cache hash algorithms”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo). Defaults to `ssha256`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)、专家）用于内存中缓存的用户凭据的哈希算法。请参阅[表 1，“缓存哈希算法”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo) 。默认为`ssha256` 。

- `authentication.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If set to `false`, disables authentication support in this realm, so that it only supports user lookups. (See the [run as](https://www.elastic.co/guide/en/elasticsearch/reference/current/run-as-privilege.html) and [authorization realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms) features). Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果设置为`false` ，则禁用此领域中的身份验证支持，以便它仅支持用户查找。 （请参阅[运行方式](https://www.elastic.co/guide/en/elasticsearch/reference/current/run-as-privilege.html)和[授权领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)功能）。默认为`true` 。

### LDAP realm settings LDAP 领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [Settings valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following settings:
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下设置：

- `url`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) One or more LDAP URLs in the `ldap[s]://<server>:<port>` format. Required.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）一个或多个采用`ldap[s]://<server>:<port>`格式的 LDAP URL。必需的。 To provide multiple URLs, use a YAML array (`["ldap://server1:636", "ldap://server2:636"]`) or comma-separated string (`"ldap://server1:636, ldap://server2:636"`). 要提供多个 URL，请使用 YAML 数组 ( `["ldap://server1:636", "ldap://server2:636"]` ) 或逗号分隔的字符串 ( `"ldap://server1:636, ldap://server2:636"` ）。 While both are supported, you can’t mix the `ldap` and `ldaps` protocols. 虽然两者都受支持，但您不能混合使用`ldap`和`ldaps`协议。

- `load_balance.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The behavior to use when there are multiple LDAP URLs defined. For supported values see [load balancing and failover types](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#load-balancing). Defaults to `failover`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）定义多个 LDAP URL 时使用的行为。有关支持的值，请参阅[负载平衡和故障转移类型](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#load-balancing)。默认为`failover` 。

- `load_balance.cache_ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) When using `dns_failover` or `dns_round_robin` as the load balancing type, this setting controls the amount of time to cache DNS lookups. Defaults to `1h`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）当使用`dns_failover`或`dns_round_robin`作为负载平衡类型时，此设置控制缓存 DNS 查找的时间量。默认为`1h` 。

- `bind_dn`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The DN of the user that is used to bind to the LDAP and perform searches. Only applicable in user search mode. If not specified, an anonymous bind is attempted. Defaults to Empty. Due to its potential security impact, `bind_dn` is not exposed via the [nodes info API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于绑定到 LDAP 并执行搜索的用户的 DN。仅适用于用户搜索模式。如果未指定，则尝试匿名绑定。默认为空。由于其潜在的安全影响， `bind_dn`不会通过[节点信息 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html)公开。

- `bind_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) [6.3] Deprecated in 6.3.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 6.3 ] 6.3 中已弃用。 Use `secure_bind_password` instead. The password for the user that is used to bind to the LDAP directory. Defaults to Empty. Due to its potential security impact, `bind_password` is not exposed via the [nodes info API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html).  请改用`secure_bind_password` 。用于绑定到 LDAP 目录的用户的密码。默认为空。由于其潜在的安全影响， `bind_password`不会通过[节点信息 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html)公开。

- `secure_bind_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html), [Reloadable](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html#reloadable-secure-settings)) The password for the user that is used to bind to the LDAP directory. Defaults to Empty.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)、[可重新加载](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html#reloadable-secure-settings)）用于绑定到 LDAP 目录的用户的密码。默认为空。

- `user_dn_templates`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The DN template that replaces the user name with the string `{0}`. This setting is multivalued; you can specify multiple user contexts. Required to operate in user template mode. If `user_search.base_dn` is specified, this setting is not valid. For more information on the different modes, see [LDAP user authentication](https://www.elastic.co/guide/en/elasticsearch/reference/current/ldap-realm.html).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用字符串`{0}`替换用户名的 DN 模板。此设置是多值的；您可以指定多个用户上下文。需要在用户模板模式下操作。如果指定了`user_search.base_dn` ，则此设置无效。有关不同模式的更多信息，请参阅[LDAP 用户身份验证](https://www.elastic.co/guide/en/elasticsearch/reference/current/ldap-realm.html)。

- `authorization_realms`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The names of the realms that should be consulted for delegated authorization. If this setting is used, then the LDAP realm does not perform role mapping and instead loads the user from the listed realms. The referenced realms are consulted in the order that they are defined in this list. See [Delegating authorization to another realm](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应咨询委派授权的领域的名称。如果使用此设置，则 LDAP 领域不会执行角色映射，而是从列出的领域加载用户。所引用的领域按照它们在此列表中定义的顺序进行查询。请参阅[将授权委托给另一个领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)。  If any settings starting with `user_search` are specified, the `user_dn_templates` settings are ignored. 如果指定了以`user_search`开头的任何设置，则将忽略`user_dn_templates`设置。

- `user_group_attribute`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the attribute to examine on the user for group membership. If any `group_search` settings are specified, this setting is ignored. Defaults to `memberOf`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定要检查用户组成员身份的属性。如果指定了任何`group_search`设置，则该设置将被忽略。默认为`memberOf` 。

- `user_full_name_attribute`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the attribute to examine on the user for the full name of the user. Defaults to `cn`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定要在用户上检查用户全名的属性。默认为`cn` 。

- `user_email_attribute`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the attribute to examine on the user for the email address of the user. Defaults to `mail`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定要在用户上检查用户电子邮件地址的属性。默认为`mail` 。

- `user_search.base_dn`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies a container DN to search for users. Required to operated in user search mode. If `user_dn_templates` is specified, this setting is not valid. For more information on the different modes, see [LDAP user authentication](https://www.elastic.co/guide/en/elasticsearch/reference/current/ldap-realm.html).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于搜索用户的容器 DN。需要在用户搜索模式下操作。如果指定了`user_dn_templates` ，则此设置无效。有关不同模式的更多信息，请参阅[LDAP 用户身份验证](https://www.elastic.co/guide/en/elasticsearch/reference/current/ldap-realm.html)。

- `user_search.scope`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The scope of the user search. Valid values are `sub_tree`, `one_level` or `base`. `one_level` only searches objects directly contained within the `base_dn`. `sub_tree` searches all objects contained under `base_dn`. `base` specifies that the `base_dn` is the user object, and that it is the only user considered. Defaults to `sub_tree`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用户搜索的范围。有效值为`sub_tree` 、 `one_level`或`base` 。 `one_level`仅搜索直接包含在`base_dn`中的对象。 `sub_tree`搜索`base_dn`下包含的所有对象。 `base`指定`base_dn`是用户对象，并且它是唯一考虑的用户。默认为`sub_tree` 。

- `user_search.filter`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the filter used to search the directory in attempts to match an entry with the username provided by the user. Defaults to `(uid={0})`. `{0}` is substituted with the username provided when searching.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于搜索目录以尝试将条目与用户提供的用户名进行匹配的过滤器。默认为`(uid={0})` 。 `{0}`替换为搜索时提供的用户名。

- `user_search.attribute`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) [5.6] Deprecated in 5.6.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 5.6 ] 5.6 中已弃用。 Use `user_search.filter` instead. The attribute to match with the username sent with the request. Defaults to `uid`.  使用`user_search.filter`代替。与随请求发送的用户名匹配的属性。默认为`uid` 。

- `user_search.pool.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Enables or disables connection pooling for user search. If set to `false`, a new connection is created for every search. The default is `true` when `bind_dn` is set.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）启用或禁用用户搜索的连接池。如果设置为`false` ，则为每次搜索创建一个新连接。设置`bind_dn`时默认为`true` 。

- `user_search.pool.size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum number of connections to the LDAP server to allow in the connection pool. Defaults to `20`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）连接池中允许的 LDAP 服务器的最大连接数。默认为`20` 。

- `user_search.pool.initial_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The initial number of connections to create to the LDAP server on startup. Defaults to `0`. If the LDAP server is down, values greater than `0` could cause startup failures.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）启动时创建到 LDAP 服务器的初始连接数。默认为`0` 。如果 LDAP 服务器已关闭，大于`0`值可能会导致启动失败。

- `user_search.pool.health_check.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Enables or disables a health check on LDAP connections in the connection pool. Connections are checked in the background at the specified interval. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）启用或禁用对连接池中 LDAP 连接的运行状况检查。会按照指定的时间间隔在后台检查连接。默认为`true` 。

- `user_search.pool.health_check.dn`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The distinguished name that is retrieved as part of the health check. Defaults to the value of `bind_dn` if present; if not, falls back to `user_search.base_dn`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）作为运行状况检查的一部分检索的专有名称。默认为`bind_dn`的值（如果存在）；如果没有，则回退到`user_search.base_dn` 。

- `user_search.pool.health_check.interval`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The interval to perform background checks of connections in the pool. Defaults to `60s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）对池中的连接执行后台检查的时间间隔。默认为`60s` 。

- `group_search.base_dn`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The container DN to search for groups in which the user has membership. When this element is absent, Elasticsearch searches for the attribute specified by `user_group_attribute` set on the user in order to determine group membership.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于搜索用户具有成员资格的组的容器 DN。当此元素不存在时，Elasticsearch 会搜索用户上设置的`user_group_attribute`指定的属性，以确定组成员身份。

- `group_search.scope`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether the group search should be `sub_tree`, `one_level` or `base`.  `one_level` only searches objects directly contained within the `base_dn`. `sub_tree` searches all objects contained under `base_dn`. `base` specifies that the `base_dn` is a group object, and that it is the only group considered. Defaults to  `sub_tree`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定组搜索应为`sub_tree` 、 `one_level`还是`base` 。 `one_level`仅搜索直接包含在`base_dn`中的对象。 `sub_tree`搜索`base_dn`下包含的所有对象。 `base`指定`base_dn`是一个组对象，并且它是唯一考虑的组。默认为`sub_tree` 。

- `group_search.filter`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies a filter to use to look up a group. When not set, the realm searches for `group`, `groupOfNames`, `groupOfUniqueNames`, or `posixGroup` with the attributes `member`, `memberOf`, or `memberUid`. Any instance of `{0}` in the filter is replaced by the user attribute defined in `group_search.user_attribute`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于查找组的过滤器。如果未设置，领域将搜索具有`member` 、 `memberOf`或`memberUid`属性的`group` 、 `groupOfNames` 、 `groupOfUniqueNames`或`posixGroup` 。过滤器中的任何`{0}`实例都将替换为`group_search.user_attribute`中定义的用户属性。

- `group_search.user_attribute`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the user attribute that is fetched and provided as a parameter to the filter. If not set, the user DN is passed into the filter. Defaults to Empty.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定获取并作为参数提供给过滤器的用户属性。如果未设置，则将用户 DN 传递到过滤器中。默认为空。

- `unmapped_groups_as_roles`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If set to `true`, the names of any unmapped LDAP groups are used as role names and assigned to the user. A group is considered to be *unmapped* if it is not referenced in a [role-mapping file](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-roles.html#mapping-roles-file). API-based role mappings are not considered. Defaults to `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果设置为`true` ，则任何未映射的 LDAP 组的名称将用作角色名称并分配给用户。如果[角色映射文件](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-roles.html#mapping-roles-file)中未引用某个组，则该组将被视为*未映射*。不考虑基于 API 的角色映射。默认为`false` 。

- `files.role_mapping`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The [location](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-files.html) for the [YAML role mapping configuration file](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-roles.html). Defaults to `ES_PATH_CONF/role_mapping.yml`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [YAML 角色映射配置文件](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-roles.html)的[位置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-files.html)。默认为`ES_PATH_CONF/role_mapping.yml` 。

- `follow_referrals`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether Elasticsearch should follow referrals returned by the LDAP server. Referrals are URLs returned by the server that are to be used to continue the LDAP operation (for example, search). Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定 Elasticsearch 是否应遵循 LDAP 服务器返回的引用。引用是服务器返回的 URL，用于继续 LDAP 操作（例如搜索）。默认为`true` 。

- `metadata`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A list of additional LDAP attributes that should be loaded from the LDAP server and stored in the authenticated user’s metadata field.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应从 LDAP 服务器加载并存储在经过身份验证的用户的元数据字段中的其他 LDAP 属性列表。

- `timeout.tcp_connect`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The TCP connect timeout period for establishing an LDAP connection. An `s` at the end indicates seconds, or `ms` indicates milliseconds. Defaults to `5s` (5 seconds ).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）建立 LDAP 连接的 TCP 连接超时时间。末尾的`s`表示秒， `ms`表示毫秒。默认为`5s` （5 秒）。

- `timeout.tcp_read`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) [7.7] Deprecated in 7.7.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.7 ] 7.7 中已弃用。 The TCP read timeout period after establishing an LDAP connection. This is equivalent to and is deprecated in favor of `timeout.response` and they cannot be used simultaneously. An `s` at the end indicates seconds, or `ms` indicates milliseconds.  建立LDAP后TCP读取超时时间 联系。这相当于并已被弃用 `timeout.response`和它们不能同时使用。末尾的`s`表示秒， `ms`表示毫秒。

- `timeout.response`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The time interval to wait for the response from the LDAP server. An `s` at the end indicates seconds, or `ms` indicates milliseconds. Defaults to the value of `timeout.ldap_search`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）等待 LDAP 服务器响应的时间间隔。末尾的`s`表示秒， `ms`表示毫秒。默认为`timeout.ldap_search`的值。

- `timeout.ldap_search`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The timeout period for an LDAP search. The value is specified in the request and is enforced by the receiving LDAP Server. An `s` at the end indicates seconds, or `ms` indicates milliseconds. Defaults to `5s` (5 seconds ).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）LDAP 搜索的超时期限。该值在请求中指定，并由接收 LDAP 服务器强制执行。末尾的`s`表示秒， `ms`表示毫秒。默认为`5s` （5 秒）。

- `ssl.key`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。 If the LDAP server requires client authentication, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果 LDAP 服务器需要客户端身份验证，则会使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `ssl.key_passphrase`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  [7.17.0] Deprecated in 7.17.0.  （静态）用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 [7.17.0] Prefer `ssl.secure_key_passphrase` instead.  更喜欢`ssl.secure_key_passphrase` 。 You cannot use this setting and `ssl.secure_key_passphrase` at the same time. 您不能同时使用此设置和`ssl.secure_key_passphrase` 。

- `ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。

- `ssl.certificate`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。 This certificate is presented to clients when they connect. 当客户端连接时，会向客户端提供此证书。

- `ssl.certificate_authorities`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。 You cannot use this setting and `ssl.truststore.path` at the same time. 您不能同时使用此设置和`ssl.truststore.path` 。

- `ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。 You cannot use this setting and `ssl.key` at the same time. 您不能同时使用此设置和`ssl.key` 。

- `ssl.keystore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.keystore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0. 7.17.0 中已弃用。  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。

- `ssl.keystore.secure_key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库中密钥的密码。默认是密钥库密码。

- `ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `ssl.truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

- `ssl.truststore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the truststore file. It must be either `jks` or `PKCS12`. If the file name ends in ".p12", ".pfx" or "pkcs12", the default is `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）信任库文件的格式。它必须是`jks`或`PKCS12` 。如果文件名以“.p12”、“.pfx”或“pkcs12”结尾，则默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.verification_mode`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Indicates the type of verification when using `ldaps` to protect against man in the middle attacks and certificate forgery.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指示使用`ldaps`防止中间人攻击和证书伪造时的验证类型。 Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `ssl.supported_protocols`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `ssl.cipher_suites`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the cipher suites that should be supported when communicating with the LDAP server. Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与 LDAP 服务器通信时应支持的密码套件。支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

- `cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the time-to-live for cached user entries. A user and a hash of its credentials are cached for this period of time. Use the standard Elasticsearch [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to  `20m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定缓存的用户条目的生存时间。用户及其凭据的哈希值将在这段时间内被缓存。使用标准 Elasticsearch[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。默认为`20m` 。

- `cache.max_users`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the maximum number of user entries that the cache can contain. Defaults to `100000`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定缓存可以包含的最大用户条目数。默认为`100000` 。

- `cache.hash_algo`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), Expert) Specifies the hashing algorithm that is used for the in-memory cached user credentials. See [Table 1, “Cache hash algorithms”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo). Defaults to `ssha256`.  （ [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) 、 Expert）指定用于内存中缓存的用户凭据的哈希算法。请参阅[表 1，“缓存哈希算法”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo) 。默认为`ssha256` 。

- `authentication.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If set to `false`, disables authentication support in this realm, so that it only supports user lookups. (See the [run as](https://www.elastic.co/guide/en/elasticsearch/reference/current/run-as-privilege.html) and [authorization realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms) features). Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果设置为`false` ，则禁用此领域中的身份验证支持，以便它仅支持用户查找。 （请参阅[运行方式](https://www.elastic.co/guide/en/elasticsearch/reference/current/run-as-privilege.html)和[授权领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)功能）。默认为`true` 。

### Active Directory realm settings Active Directory 领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [settings that are valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following settings:
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下设置：

- `url`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) One or more LDAP URLs in the `ldap[s]://<server>:<port>` format. Defaults to `ldap://<domain_name>:389`. This setting is required when connecting using SSL/TLS or when using a custom port.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）一个或多个采用`ldap[s]://<server>:<port>`格式的 LDAP URL。默认为`ldap://<domain_name>:389` 。使用 SSL/TLS 连接或使用自定义端口时需要此设置。 To provide multiple URLs, use a YAML array (`["ldap://server1:636", "ldap://server2:636"]`) or comma-separated string (`"ldap://server1:636, ldap://server2:636"`). 要提供多个 URL，请使用 YAML 数组 ( `["ldap://server1:636", "ldap://server2:636"]` ) 或逗号分隔的字符串 ( `"ldap://server1:636, ldap://server2:636"` ）。 While both are supported, you can’t mix the `ldap` and `ldaps` protocols. 虽然两者都受支持，但您不能混合使用`ldap`和`ldaps`协议。 If no URL is provided, Elasticsearch uses a default of `ldap://<domain_name>:389`. This default uses the `domain_name` setting value and assumes an unencrypted connection to port 389. 如果未提供 URL，Elasticsearch 将使用默认值`ldap://<domain_name>:389` 。此默认值使用`domain_name`设置值，并假定与端口 389 的连接未加密。

- `load_balance.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The behavior to use when there are multiple LDAP URLs defined. For supported values see [load balancing and failover types](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#load-balancing). Defaults to `failover`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）定义多个 LDAP URL 时使用的行为。有关支持的值，请参阅[负载平衡和故障转移类型](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#load-balancing)。默认为`failover` 。

- `load_balance.cache_ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) When using `dns_failover` or `dns_round_robin` as the load balancing type, this setting controls the amount of time to cache DNS lookups. Defaults to `1h`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）当使用`dns_failover`或`dns_round_robin`作为负载平衡类型时，此设置控制缓存 DNS 查找的时间量。默认为`1h` 。

- `domain_name`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The domain name of Active Directory. If the `url` and the `user_search.base_dn` settings are not specified, the cluster can derive those values from this setting. Required.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Active Directory 的域名。如果未指定`url`和`user_search.base_dn`设置，集群可以从此设置派生这些值。必需的。

- `bind_dn`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The DN of the user that is used to bind to Active Directory and perform searches. Defaults to Empty. Due to its potential security impact, `bind_dn` is not exposed via the [nodes info API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于绑定到 Active Directory 并执行搜索的用户的 DN。默认为空。由于其潜在的安全影响， `bind_dn`不会通过[节点信息 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html)公开。

- `bind_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) [6.3] Deprecated in 6.3.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 6.3 ] 6.3 中已弃用。 Use `secure_bind_password` instead. The password for the user that is used to bind to Active Directory. Defaults to Empty. Due to its potential security impact, `bind_password` is not exposed via the [nodes info API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html).  请改用`secure_bind_password` 。用于绑定到 Active Directory 的用户的密码。默认为空。由于其潜在的安全影响， `bind_password`不会通过[节点信息 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html)公开。

- `secure_bind_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html), [Reloadable](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html#reloadable-secure-settings)) The password for the user that is used to bind to Active Directory. Defaults to Empty.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)、[可重新加载](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html#reloadable-secure-settings)）用于绑定到 Active Directory 的用户的密码。默认为空。

- `unmapped_groups_as_roles`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If set to `true`, the names of any unmapped Active Directory groups are used as role names and assigned to the user. A group is considered *unmapped* when it is not referenced in any role-mapping files. API-based role mappings are not considered. Defaults to `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果设置为`true` ，则任何未映射的 Active Directory 组的名称将用作角色名称并分配给用户。当某个组未在任何角色映射文件中引用时，该组将被视为*未映射*。不考虑基于 API 的角色映射。默认为`false` 。

- `files.role_mapping`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The [location](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-files.html) for the YAML role mapping configuration file. Defaults to `ES_PATH_CONF/role_mapping.yml`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）YAML 角色映射配置文件的[位置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-files.html)。默认为`ES_PATH_CONF/role_mapping.yml` 。

- `user_search.base_dn`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The context to search for a user. Defaults to the root of the Active Directory domain.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）搜索用户的上下文。默认为 Active Directory 域的根目录。

- `user_search.scope`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether the user search should be `sub_tree`, `one_level` or `base`. `one_level` only searches users directly contained within the `base_dn`. `sub_tree` searches all objects contained under `base_dn`. `base` specifies that the `base_dn` is a user object, and that it is the only user considered. Defaults to `sub_tree`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用户搜索应为`sub_tree` 、 `one_level`还是`base` 。 `one_level`仅搜索直接包含在`base_dn`中的用户。 `sub_tree`搜索`base_dn`下包含的所有对象。 `base`指定`base_dn`是一个用户对象，并且它是唯一考虑的用户。默认为`sub_tree` 。

- `user_search.filter`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies a filter to use to lookup a user given a username. The default filter looks up `user` objects with either `sAMAccountName` or `userPrincipalName`. If specified, this must be a valid LDAP user search filter. For example `(&(objectClass=user)(sAMAccountName={0}))`. For more information, see [Search Filter Syntax](https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于查找给定用户名的用户的过滤器。默认过滤器使用`sAMAccountName`或`userPrincipalName`查找`user`对象。如果指定，则这必须是有效的 LDAP 用户搜索过滤器。例如 `(&(objectClass=user)(sAMAccountName={0}))` 。有关详细信息，请参阅[搜索过滤器语法](https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx)。

- `user_search.upn_filter`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies a filter to use to lookup a user given a user principal name. The default filter looks up `user` objects with a matching `userPrincipalName`. If specified, this must be a valid LDAP user search filter. For example, `(&(objectClass=user)(userPrincipalName={1}))`. `{1}` is the full user principal name provided by the user. For more information, see [Search Filter Syntax](https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于查找给定用户主体名称的用户的过滤器。默认过滤器查找具有匹配的`userPrincipalName` `user`对象。如果指定，则这必须是有效的 LDAP 用户搜索过滤器。例如， `(&(objectClass=user)(userPrincipalName={1}))` 。 `{1}`是用户提供的完整用户主体名称。有关详细信息，请参阅[搜索过滤器语法](https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx)。

- `user_search.down_level_filter`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies a filter to use to lookup a user given a down level logon name (DOMAIN\user). The default filter looks up `user` objects with a matching `sAMAccountName` in the domain provided. If specified, this must be a valid LDAP user search filter. For example, `(&(objectClass=user)(sAMAccountName={0}))`. For more information, see [Search Filter Syntax](https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).  ([静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) 指定一个过滤器，用于查找给定下层登录名 (DOMAIN\user) 的用户。默认过滤器在提供的域中查找具有匹配`sAMAccountName`的`user`对象。如果指定，则这必须是有效的 LDAP 用户搜索过滤器。例如， `(&(objectClass=user)(sAMAccountName={0}))` 。有关详细信息，请参阅[搜索过滤器语法](https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx)。

- `user_search.pool.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Enables or disables connection pooling for user search. When disabled a new connection is created for every search. The default is `true` when `bind_dn` is provided.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）启用或禁用用户搜索的连接池。禁用后，将为每个搜索创建一个新连接。当提供`bind_dn`时，默认值为`true` 。

- `user_search.pool.size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum number of connections to the Active Directory server to allow in the connection pool. Defaults to `20`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）连接池中允许的与 Active Directory 服务器的最大连接数。默认为`20` 。

- `user_search.pool.initial_size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The initial number of connections to create to the Active Directory server on startup. Defaults to `0`. If the LDAP server is down, values greater than 0 could cause startup failures.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）启动时创建到 Active Directory 服务器的初始连接数。默认为`0` 。如果 LDAP 服务器已关闭，大于 0 的值可能会导致启动失败。

- `user_search.pool.health_check.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Enables or disables a health check on Active Directory connections in the connection pool. Connections are checked in the background at the specified interval. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）启用或禁用对连接池中 Active Directory 连接的运行状况检查。会按照指定的时间间隔在后台检查连接。默认为`true` 。

- `user_search.pool.health_check.dn`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The distinguished name to be retrieved as part of the health check. Defaults to the value of `bind_dn` if that setting is present. Otherwise, it defaults to the value of the `user_search.base_dn` setting.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）作为运行状况检查的一部分检索的专有名称。如果存在该设置，则默认为`bind_dn`的值。否则，它默认为`user_search.base_dn`设置的值。

- `user_search.pool.health_check.interval`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The interval to perform background checks of connections in the pool. Defaults to `60s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）对池中的连接执行后台检查的时间间隔。默认为`60s` 。

- `group_search.base_dn`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The context to search for groups in which the user has membership. Defaults to the root of the Active Directory domain.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于搜索用户具有成员资格的组的上下文。默认为 Active Directory 域的根目录。

- `group_search.scope`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether the group search should be `sub_tree`, `one_level` or `base`.  `one_level` searches for groups directly contained within the `base_dn`. `sub_tree` searches all objects contained under `base_dn`. `base` specifies that the `base_dn` is a group object, and that it is the only group considered. Defaults to `sub_tree`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定组搜索应为`sub_tree` 、 `one_level`还是`base` 。 `one_level`搜索直接包含在`base_dn`中的组。 `sub_tree`搜索`base_dn`下包含的所有对象。 `base`指定`base_dn`是一个组对象，并且它是唯一考虑的组。默认为`sub_tree` 。

- `metadata`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A list of additional LDAP attributes that should be loaded from the LDAP server and stored in the authenticated user’s metadata field.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应从 LDAP 服务器加载并存储在经过身份验证的用户的元数据字段中的其他 LDAP 属性列表。

- `timeout.tcp_connect`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The TCP connect timeout period for establishing an LDAP connection. An `s` at the end indicates seconds, or `ms` indicates milliseconds. Defaults to `5s` (5 seconds ).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）建立 LDAP 连接的 TCP 连接超时时间。末尾的`s`表示秒， `ms`表示毫秒。默认为`5s` （5 秒）。

- `timeout.tcp_read`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) [7.7] Deprecated in 7.7.  （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） [ 7.7 ] 7.7 中已弃用。 The TCP read timeout period after establishing an LDAP connection. This is equivalent to and is deprecated in favor of `timeout.response` and they cannot be used simultaneously. An `s` at the end indicates seconds, or `ms` indicates milliseconds. Defaults to the value of `timeout.ldap_search`.  建立LDAP后TCP读取超时时间 联系。这相当于并已被弃用 `timeout.response`和它们不能同时使用。末尾的`s`表示秒， `ms`表示毫秒。默认为`timeout.ldap_search`的值。

- `timeout.response`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The time interval to wait for the response from the AD server. An `s` at the end indicates seconds, or `ms` indicates milliseconds. Defaults to the value of `timeout.ldap_search`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）等待 AD 服务器响应的时间间隔。末尾的`s`表示秒， `ms`表示毫秒。默认为`timeout.ldap_search`的值。

- `timeout.ldap_search`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The timeout period for an LDAP search. The value is specified in the request and is enforced by the receiving LDAP Server. An `s` at the end indicates seconds, or `ms` indicates milliseconds. Defaults to `5s` (5 seconds ).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）LDAP 搜索的超时期限。该值在请求中指定，并由接收 LDAP 服务器强制执行。末尾的`s`表示秒， `ms`表示毫秒。默认为`5s` （5 秒）。

- `ssl.certificate`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。 This certificate is presented to clients when they connect. 当客户端连接时，会向客户端提供此证书。

- `ssl.certificate_authorities`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。 You cannot use this setting and `ssl.truststore.path` at the same time. 您不能同时使用此设置和`ssl.truststore.path` 。

- `ssl.key`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。 If the Active Directory server requires client authentication, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果 Active Directory 服务器需要客户端身份验证，则会使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `ssl.key_passphrase`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  [7.17.0] Deprecated in 7.17.0.  （静态）用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 [7.17.0] Prefer `ssl.secure_key_passphrase` instead.  更喜欢`ssl.secure_key_passphrase` 。 You cannot use this setting and `ssl.secure_key_passphrase` at the same time. 您不能同时使用此设置和`ssl.secure_key_passphrase` 。

- `ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。

- `ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。

- `ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `ssl.keystore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `ssl.secure_keystore.password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。 You cannot use this setting and `ssl.key` at the same time. 您不能同时使用此设置和`ssl.key` 。

- `ssl.keystore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

- `ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `ssl.truststore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the truststore file. It must be either `jks` or `PKCS12`. If the file name ends in ".p12", ".pfx" or "pkcs12", the default is `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）信任库文件的格式。它必须是`jks`或`PKCS12` 。如果文件名以“.p12”、“.pfx”或“pkcs12”结尾，则默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.verification_mode`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Indicates the type of verification when using `ldaps` to protect against man in the middle attacks and certificate forgery.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指示使用`ldaps`防止中间人攻击和证书伪造时的验证类型。 Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `ssl.supported_protocols`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `ssl.cipher_suites`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the cipher suites that should be supported when communicating with the Active Directory server. Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与 Active Directory 服务器通信时应支持的密码套件。支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

- `cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the time-to-live for cached user entries. A user and a hash of its credentials are cached for this configured period of time. Use the standard Elasticsearch [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)). Defaults to `20m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定缓存的用户条目的生存时间。用户及其凭据的哈希值将在配置的时间段内进行缓存。使用标准 Elasticsearch[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units))。默认为`20m` 。

- `cache.max_users`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the maximum number of user entries that the cache can contain. Defaults to `100000`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定缓存可以包含的最大用户条目数。默认为`100000` 。

- `cache.hash_algo`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting), Expert) Specifies the hashing algorithm that is used for the in-memory cached user credentials. See [Table 1, “Cache hash algorithms”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo). Defaults to `ssha256`.  （ [Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) 、 Expert）指定用于内存中缓存的用户凭据的哈希算法。请参阅[表 1，“缓存哈希算法”](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#cache-hash-algo) 。默认为`ssha256` 。

- `authentication.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If set to `false`, disables authentication support in this realm, so that it only supports user lookups. (See the [run as](https://www.elastic.co/guide/en/elasticsearch/reference/current/run-as-privilege.html) and [authorization realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms) features). Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果设置为`false` ，则禁用此领域中的身份验证支持，以便它仅支持用户查找。 （请参阅[运行方式](https://www.elastic.co/guide/en/elasticsearch/reference/current/run-as-privilege.html)和[授权领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)功能）。默认为`true` 。

- `follow_referrals`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If set to `true`, Elasticsearch follows referrals returned by the LDAP server. Referrals are URLs returned by the server that are to be used to continue the LDAP operation (such as `search`). Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果设置为`true` ，Elasticsearch 会遵循 LDAP 服务器返回的引用。引用是服务器返回的 URL，用于继续 LDAP 操作（例如`search` ）。默认为`true` 。

### PKI realm settings PKI 领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [settings that are valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following settings:
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下设置：

- `username_pattern`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The regular expression pattern used to extract the username from the certificate DN. The username is used for auditing and logging. The username can also be used with the [role mapping API](https://www.elastic.co/guide/en/elasticsearch/reference/current/role-mapping-resources.html) and [authorization delegation](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-authorization-delegation.html). The first match group is the used as the username. Defaults to `CN=(.*?)(?:,|$)`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于从证书 DN 中提取用户名的正则表达式模式。用户名用于审核和记录。用户名还可以与[角色映射 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/role-mapping-resources.html)和[授权委托](https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-authorization-delegation.html)一起使用。第一个匹配组用作用户名。默认为`CN=(.*?)(?:,|$)` 。

- `certificate_authorities`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to the PEM certificate files that should be used to authenticate a user’s certificate as trusted. Defaults to the trusted certificates configured for SSL. This setting cannot be used with `truststore.path`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应用于将用户证书验证为可信的 PEM 证书文件的路径列表。默认为为 SSL 配置的受信任证书。此设置不能与`truststore.path`一起使用。

- `truststore.algorithm`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Algorithm for the truststore. Defaults to `SunX509`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）信任库的算法。默认为`SunX509` 。

- `truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

If `truststore.path` is set, this setting is required.
如果设置了`truststore.path` ，则需要进行此设置。

- `truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

- `truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path of a truststore to use. Defaults to the trusted certificates configured for SSL. This setting cannot be used with `certificate_authorities`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）要使用的信任库的路径。默认为为 SSL 配置的受信任证书。此设置不能与`certificate_authorities`一起使用。

- `files.role_mapping`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the [location](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-files.html) of the [YAML role mapping configuration file](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-roles.html). Defaults to `ES_PATH_CONF/role_mapping.yml`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定[YAML 角色映射配置文件](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-roles.html)的[位置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-files.html)。默认为`ES_PATH_CONF/role_mapping.yml` 。

- `authorization_realms`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The names of the realms that should be consulted for delegated authorization. If this setting is used, then the PKI realm does not perform role mapping and instead loads the user from the listed realms. See [Delegating authorization to another realm](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应咨询委派授权的领域的名称。如果使用此设置，则 PKI 领域不会执行角色映射，而是从列出的领域加载用户。请参阅[将授权委托给另一个领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)。

- `cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the time-to-live for cached user entries. A user and a hash of its credentials are cached for this period of time. Use the standard Elasticsearch [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)). Defaults to `20m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定缓存的用户条目的生存时间。用户及其凭据的哈希值将在这段时间内被缓存。使用标准 Elasticsearch[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units))。默认为`20m` 。

- `cache.max_users`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the maximum number of user entries that the cache can contain. Defaults to `100000`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定缓存可以包含的最大用户条目数。默认为`100000` 。

- `delegation.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Generally, in order for the clients to be authenticated by the PKI realm they must connect directly to Elasticsearch. That is, they must not pass through proxies which terminate the TLS connection. In order to allow for a **trusted** and **smart** proxy, such as Kibana, to sit before Elasticsearch and terminate TLS connections, but still allow clients to be authenticated on Elasticsearch by this realm, you need to toggle this to `true`. Defaults to `false`. If delegation is enabled, then either `truststore.path` or `certificate_authorities` setting must be defined. For more details, see [Configuring authentication delegation for PKI realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/pki-realm.html#pki-realm-for-proxied-clients).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）通常，为了让客户端通过 PKI 领域进行身份验证，它们必须直接连接到 Elasticsearch。也就是说，它们不得通过终止 TLS 连接的代理。为了允许**可信的****智能**代理（例如 Kibana）位于 Elasticsearch 之前并终止 TLS 连接，但仍然允许客户端通过该领域在 Elasticsearch 上进行身份验证，您需要将其切换为`true` 。默认为`false` 。如果启用委派，则必须定义`truststore.path`或`certificate_authorities`设置。有关更多详细信息，请参阅[配置 PKI 领域的身份验证委派](https://www.elastic.co/guide/en/elasticsearch/reference/current/pki-realm.html#pki-realm-for-proxied-clients)。

### SAML realm settings SAML 领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [settings that are valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following settings.
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下设置。

- `idp.entity_id` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

   ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Entity ID of the SAML Identity Provider. An Entity ID is a URI with a maximum length of 1024 characters. It can be a URL (https://idp.example.com/) or a URN (`urn:example.com:idp`) and can be found in the configuration or the SAML metadata of the Identity Provider.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）SAML 身份提供商的实体 ID。实体 ID 是最大长度为 1024 个字符的 URI。它可以是 URL ( https://idp.example.com/ ) 或 URN ( `urn:example.com:idp` )，并且可以在身份提供商的配置或 SAML 元数据中找到。

- `idp.metadata.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path *(recommended)* or URL to a SAML 2.0 metadata file describing the capabilities and configuration of the Identity Provider. If a path is provided, then it is resolved relative to the Elasticsearch config directory. If a URL is provided, then it must be either a `file` URL or a `https` URL.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）描述身份提供者的功能和配置的 SAML 2.0 元数据文件的路径*（推荐）*或 URL。如果提供了路径，则会相对于 Elasticsearch 配置目录进行解析。如果提供了 URL，则它必须是`file` URL 或`https` URL。 Elasticsearch automatically polls this metadata resource and reloads the IdP configuration when changes are detected. File based resources are polled at a frequency determined by the global Elasticsearch `resource.reload.interval.high` setting, which defaults to 5 seconds. HTTPS resources are polled at a frequency determined by the realm’s `idp.metadata.http.refresh` and `idp.metadata.http.minimum_refresh` settings. Elasticsearch 会自动轮询此元数据资源，并在检测到更改时重新加载 IdP 配置。基于文件的资源的轮询频率由全局 Elasticsearch `resource.reload.interval.high`设置确定，默认为 5 秒。 HTTPS 资源的轮询频率由领域的`idp.metadata.http.refresh`和 `idp.metadata.http.minimum_refresh` 设置。 If the metadata resource is loaded from a file then the file must exist at node startup, if it does not exist then the node will fail to start. If the resource is loaded over HTTPS then (by default) the node will be tolerant of a failure to load the resource - the node will start and will continue to poll the URL for updates. The affected SAML realm will fail to authenticate users until the problem is resolved. To force the node to fail if the metadata is unavailable set `idp.metadata.http.fail_on_error` to `true`. 如果元数据资源是从文件加载的，那么该文件在节点启动时必须存在，如果不存在则节点将无法启动。如果通过 HTTPS 加载资源，则（默认情况下）节点将容忍加载资源失败 - 节点将启动并继续轮询 URL 以获取更新。在问题解决之前，受影响的 SAML 领域将无法对用户进行身份验证。如果元数据不可用，则强制节点失败 `idp.metadata.http.fail_on_error` 为`true` 。

- `idp.metadata.http.fail_on_error`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) If set to `true`, the realm will fail on startup (and prevent the node from starting) if it attempts to load metadata over HTTPS and that metadata is not available. If set to `false` (the default), the node will start but the affected SAML realm will not support user authentication until the metadata can be successfully loaded. This setting is ignored if metadata is loaded from a file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果设置为`true` ，则如果领域尝试通过 HTTPS 加载元数据并且该元数据不可用，则该领域将在启动时失败（并阻止节点启动）。如果设置为`false` （默认值），节点将启动，但受影响的 SAML 领域将不支持用户身份验证，直到可以成功加载元数据。如果从文件加载元数据，则忽略此设置。

- `idp.metadata.http.refresh` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the frequency with which `https` metadata is checked for changes. Defaults to `1h` (1 hour).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制检查`https`元数据是否发生更改的频率。默认为`1h` （1 小时）。 Under some circumstances Elasticsearch may determine that the metadata needs to be checked more frequently. This may occur if previous attempts to load the metadata encountered an error, or if the metadata indicates that it is due to expire in less than the configured refresh interval. In these cases Elasticsearch will poll more often, but never more frequently than `idp.metadata.http.minimum_refresh`. If there is an attempt to authenticate against a realm that has not yet loaded metadata successfully, that realm may attempt to load metadata outside of the configured polling frequency. 在某些情况下，Elasticsearch 可能会确定需要更频繁地检查元数据。如果之前加载元数据的尝试遇到错误，或者元数据表明它将在小于配置的刷新间隔内过期，则可能会发生这种情况。在这些情况下，Elasticsearch 会更频繁地进行轮询，但绝不会比 `idp.metadata.http.minimum_refresh` 。如果尝试对尚未成功加载元数据的领域进行身份验证，则该领域可能会尝试在配置的轮询频率之外加载元数据。

- `idp.metadata.http.minimum_refresh`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the minimum frequency with which `https` metadata is checked for changes. In regular operation Elasticsearch will use the value of `idp.metadata.http.refresh` as the polling interval. However, under some circumstances Elasticsearch may determine that it needs to poll more frequently. In these cases, the `minimum_refresh` will set the minimum frequency at which the metdata will be checked. Defaults to `5m` (5 minutes) and must not be set to a value greater than `idp.metadata.http.refresh` （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制检查`https`数据更改的最小频率。在常规操作中，Elasticsearch 将使用`idp.metadata.http.refresh`的值作为轮询间隔。然而，在某些情况下，Elasticsearch 可能会确定它需要更频繁地轮询。在这些情况下， `minimum_refresh`将设置检查元数据的最小频率。默认为`5m` （5 分钟），并且不得设置为大于`idp.metadata.http.refresh`的值

- `idp.use_single_logout` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Indicates whether to utilise the Identity Provider’s Single Logout service (if one exists in the IdP metadata file). Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指示是否使用身份提供商的单点注销服务（如果 IdP 元数据文件中存在该服务）。默认为`true` 。

- `sp.entity_id` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Entity ID to use for this SAML Service Provider. This should be entered as a URI. We recommend that you use the base URL of your Kibana instance. For example, `https://kibana.example.com/`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于此 SAML 服务提供商的实体 ID。这应该作为 URI 输入。我们建议您使用 Kibana 实例的基本 URL。例如， `https://kibana.example.com/` 。

- `sp.acs` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The URL of the Assertion Consumer Service within Kibana. Typically this is the "api/security/saml/callback" endpoint of your Kibana server. For example, `https://kibana.example.com/api/security/saml/callback`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Kibana 中断言消费者服务的 URL。通常，这是 Kibana 服务器的“api/security/saml/callback”端点。例如， `https://kibana.example.com/api/security/saml/callback` 。

- `sp.logout` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The URL of the Single Logout service within Kibana. Typically this is the "logout" endpoint of your Kibana server. For example, `https://kibana.example.com/logout`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Kibana 中单点注销服务的 URL。通常，这是 Kibana 服务器的“注销”端点。例如， `https://kibana.example.com/logout` 。

- `attributes.principal` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Name of the SAML attribute that contains the user’s principal (username).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户主体（用户名）的 SAML 属性的名称。

- `attributes.groups` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Name of the SAML attribute that contains the user’s groups.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户组的 SAML 属性的名称。

- `attributes.name` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Name of the SAML attribute that contains the user’s full name.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户全名的 SAML 属性的名称。

- `attributes.mail` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Name of the SAML attribute that contains the user’s email address.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户电子邮件地址的 SAML 属性的名称。

- `attributes.dn` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Name of the SAML attribute that contains the user’s X.50 *Distinguished Name*.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户的 X.50*可分辨名称*的 SAML 属性的名称。

- `attribute_patterns.principal` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A Java regular expression that is matched against the SAML attribute specified by `attributes.principal` before it is applied to the user’s *principal* property. The attribute value must match the pattern and the value of the first *capturing group* is used as the principal. For example, `^([^@]+)@example\\.com$` matches email addresses from the "example.com" domain and uses the local-part as the principal.  ([静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Java 正则表达式，在应用于用户的*主体*属性之前，与`attributes.principal`指定的 SAML 属性进行匹配。属性值必须与模式匹配，并且第一个*捕获组*的值用作主体。例如， `^([^@]+)@example\\.com$`匹配来自“example.com”域的电子邮件地址，并使用本地部分作为主体。

- `attribute_patterns.groups` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) As per `attribute_patterns.principal`, but for the *group* property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）按照`attribute_patterns.principal` ，但针对*组*属性。

- `attribute_patterns.name` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) As per `attribute_patterns.principal`, but for the *name* property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）按照`attribute_patterns.principal` ，但针对*name*属性。

- `attribute_patterns.mail` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) As per `attribute_patterns.principal`, but for the *mail* property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）按照`attribute_patterns.principal` ，但针对*邮件*属性。

- `attribute_patterns.dn` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) As per `attribute_patterns.principal`, but for the *dn* property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）按照`attribute_patterns.principal` ，但针对*dn*属性。

- `attribute_delimiters.groups` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A plain string that is used as a delimiter to split a single-valued SAML attribute specified by `attributes.groups` before it is applied to the user’s *groups* property. For example, splitting the SAML attribute value `engineering,elasticsearch-admins,employees` on a delimiter value of `,` will result in `engineering`, `elasticsearch-admins`, and `employees` as the list of groups for the user. The delimiter will always be split on, regardless of escaping in the input string. This setting does not support multi-valued SAML attributes. It cannot be used together with the `attribute_patterns` setting. You can only configure this setting for the groups attribute.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）一个纯字符串，用作分隔符，用于在将`attributes.groups`指定的单值 SAML 属性应用于用户的*groups*属性之前对其进行分割。例如，拆分SAML属性值 `engineering,elasticsearch-admins,employees` 如果分隔符值为`,`将导致`engineering` 、 `elasticsearch-admins`和`employees`作为用户的组列表。无论输入字符串中是否进行转义，分隔符都将始终被分割。此设置不支持多值 SAML 属性。它不能与`attribute_patterns`设置一起使用。您只能为组属性配置此设置。

- `nameid_format` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The NameID format that should be requested when asking the IdP to authenticate the current user. The default is to not include the `nameid_format` attribute.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）请求 IdP 对当前用户进行身份验证时应请求的 NameID 格式。默认情况下不包含`nameid_format`属性。

- `nameid.allow_create` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The value of the `AllowCreate` attribute of the `NameIdPolicy` element in an authentication request. The default value is false.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）身份验证请求中`NameIdPolicy`元素的`AllowCreate`属性的值。默认值为 false。

- `nameid.sp_qualifier` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The value of the `SPNameQualifier` attribute of the `NameIdPolicy` element in an authentication request. The default is to not include the `SPNameQualifier` attribute.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）身份验证请求中`NameIdPolicy`元素的`SPNameQualifier`属性的值。默认情况下不包含`SPNameQualifier`属性。

- `force_authn` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether to set the `ForceAuthn` attribute when requesting that the IdP authenticate the current user. If set to `true`, the IdP is required to verify the user’s identity, irrespective of any existing sessions they might have. Defaults to `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定在请求 IdP 对当前用户进行身份验证时是否设置`ForceAuthn`属性。如果设置为`true` ，则 IdP 需要验证用户的身份，而不管他们可能拥有的任何现有会话。默认为`false` 。

- `populate_user_metadata` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether to populate the Elasticsearch user’s metadata with the values that are provided by the SAML attributes. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定是否使用 SAML 属性提供的值填充 Elasticsearch 用户的元数据。默认为`true` 。

- `authorization_realms`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The names of the realms that should be consulted for delegated authorization. If this setting is used, then the SAML realm does not perform role mapping and instead loads the user from the listed realms. See [Delegating authorization to another realm](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应咨询委派授权的领域的名称。如果使用此设置，则 SAML 领域不会执行角色映射，而是从列出的领域加载用户。请参阅[将授权委托给另一个领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)。

- `allowed_clock_skew` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum amount of skew that can be tolerated between the IdP’s clock and the Elasticsearch node’s clock. Defaults to `3m` (3 minutes).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）IdP 时钟与 Elasticsearch 节点时钟之间可以容忍的最大偏差量。默认为`3m` （3 分钟）。

- `req_authn_context_class_ref` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A comma separated list of Authentication Context Class Reference values to be included in the Requested Authentication Context when requesting the IdP to authenticate the current user. The Authentication Context of the corresponding authentication response should contain at least one of the requested values.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）当请求 IdP 对当前用户进行身份验证时，要包含在请求的身份验证上下文中的身份验证上下文类参考值的逗号分隔列表。相应的身份验证响应的身份验证上下文应至少包含所请求的值之一。 For more information, see [Requesting specific authentication methods](https://www.elastic.co/guide/en/elasticsearch/reference/current/saml-guide-stack.html#req-authn-context). 有关详细信息，请参阅[请求特定身份验证方法](https://www.elastic.co/guide/en/elasticsearch/reference/current/saml-guide-stack.html#req-authn-context)。

### SAML realm signing settings SAML 领域签名设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

If a signing key is configured (that is, either `signing.key` or `signing.keystore.path` is set), then Elasticsearch signs outgoing SAML messages. Signing can be configured using the following settings:
如果配置了签名密钥（即设置了`signing.key`或`signing.keystore.path` ），则Elasticsearch 会对传出的SAML 消息进行签名。可以使用以下设置来配置签名：

- `signing.saml_messages` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A list of SAML message types that should be signed or `*` to sign all messages. Each element in the list should be the local name of a SAML XML Element. Supported element types are `AuthnRequest`, `LogoutRequest` and `LogoutResponse`. Only valid if `signing.key` or `signing.keystore.path` is also specified. Defaults to `*`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应签名的 SAML 消息类型列表或`*`对所有消息进行签名。列表中的每个元素都应该是 SAML XML 元素的本地名称。支持的元素类型包括`AuthnRequest` 、 `LogoutRequest`和`LogoutResponse` 。仅当同时指定`signing.key`或`signing.keystore.path`时才有效。默认为`*` 。

- `signing.key` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path to the PEM encoded private key to use for SAML message signing. `signing.key` and `signing.keystore.path` cannot be used at the same time.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于 SAML 消息签名的 PEM 编码私钥的路径。 `signing.key`和`signing.keystore.path`不能同时使用。

- `signing.secure_key_passphrase` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Specifies the passphrase to decrypt the PEM encoded private key (`signing.key`) if it is encrypted.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 指定用于解密 PEM 编码的私钥 ( `signing.key` )（如果已加密）的密码。

- `signing.certificate` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path to the PEM encoded certificate (or certificate chain) that corresponds to the `signing.key`. This certificate must also be included in the Service Provider metadata or manually configured within the IdP to allow for signature validation. This setting can only be used if `signing.key` is set.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与`signing.key`对应的 PEM 编码证书（或证书链）的路径。此证书还必须包含在服务提供商元数据中或在 IdP 中手动配置以允许签名验证。仅当设置了`signing.key`时才能使用此设置。

- `signing.keystore.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path to the keystore that contains a private key and certificate. It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `signing.key` at the same time.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`signing.key` 。

- `signing.keystore.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The type of the keystore in `signing.keystore.path`. Must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or "pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） `signing.keystore.path`中密钥库的类型。必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `signing.keystore.alias` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the alias of the key within the keystore that should be used for SAML message signing. If the keystore contains more than one private key, this setting must be specified.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定密钥库中应用于 SAML 消息签名的密钥的别名。如果密钥库包含多个私钥，则必须指定此设置。

- `signing.keystore.secure_password` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password to the keystore in `signing.keystore.path`.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)） `signing.keystore.path`中密钥库的密码。

- `signing.keystore.secure_key_password` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore (`signing.keystore.path`). Defaults to the keystore password.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）密钥库中密钥的密码 ( `signing.keystore.path` )。默认为密钥库密码。

### SAML realm encryption settings SAML 领域加密设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

If an encryption key is configured (that is, either `encryption.key` or `encryption.keystore.path` is set), then Elasticsearch publishes an encryption certificate when generating metadata and attempts to decrypt incoming SAML content. Encryption can be configured using the following settings:
如果配置了加密密钥（即设置了`encryption.key`或`encryption.keystore.path` ），则 Elasticsearch 会在生成元数据时发布加密证书并尝试解密传入的 SAML 内容。可以使用以下设置来配置加密：

- `encryption.key` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path to the PEM encoded private key to use for SAML message decryption. `encryption.key` and `encryption.keystore.path` cannot be used at the same time.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于 SAML 消息解密的 PEM 编码私钥的路径。 `encryption.key`和`encryption.keystore.path`不能同时使用。

- `encryption.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Specifies the passphrase to decrypt the PEM encoded private key (`encryption.key`) if it is encrypted.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 指定用于解密 PEM 编码私钥 ( `encryption.key` )（如果已加密）的密码。

- `encryption.certificate` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path to the PEM encoded certificate (or certificate chain) that is associated with the `encryption.key`. This certificate must also be included in the Service Provider metadata or manually configured within the IdP to enable message encryption. This setting can be used only if `encryption.key` is set.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与`encryption.key`关联的 PEM 编码证书（或证书链）的路径。此证书还必须包含在服务提供商元数据中或在 IdP 中手动配置以启用消息加密。仅当设置了`encryption.key`时才能使用此设置。

- `encryption.keystore.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path to the keystore that contains a private key and certificate. It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `encryption.key` at the same time.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`encryption.key` 。

- `encryption.keystore.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The type of the keystore (`encryption.keystore.path`). Must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or "pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库的类型 ( `encryption.keystore.path` )。必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `encryption.keystore.alias` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the alias of the key within the keystore (`encryption.keystore.path`) that should be used for SAML message decryption. If not specified, all compatible key pairs from the keystore are considered as candidate keys for decryption.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定密钥库中应用于 SAML 消息解密的密钥的别名 ( `encryption.keystore.path` )。如果未指定，则密钥库中的所有兼容密钥对都被视为解密的候选密钥。

- `encryption.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password to the keystore (`encryption.keystore.path`).  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码 ( `encryption.keystore.path` )。

- `encryption.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore (`encryption.keystore.path`). Only a single password is supported. If you are using multiple decryption keys, they cannot have individual passwords.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 密钥库中密钥的密码 ( `encryption.keystore.path` )。仅支持单个密码。如果您使用多个解密密钥，则它们不能有单独的密码。

### SAML realm SSL settings SAML 领域 SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

If you are loading the IdP metadata over SSL/TLS (that is, `idp.metadata.path` is a URL using the `https` protocol), the following settings can be used to configure SSL.
如果您通过 SSL/TLS 加载 IdP 元数据（即`idp.metadata.path`是使用`https`协议的 URL），则可以使用以下设置来配置 SSL。

These settings are not used for any purpose other than loading metadata over https.
除了通过 https 加载元数据之外，这些设置不用于任何其他目的。

- `ssl.key` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `ssl.key_passphrase` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  [7.17.0] Deprecated in 7.17.0.  （静态）用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 [7.17.0] Prefer `ssl.secure_key_passphrase` instead.  更喜欢`ssl.secure_key_passphrase` 。 You cannot use this setting and `ssl.secure_key_passphrase` at the same time. 您不能同时使用此设置和`ssl.secure_key_passphrase` 。

- `ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 You cannot use this setting and `ssl.key_passphrase` at the same time. 您不能同时使用此设置和`ssl.key_passphrase` 。

- `ssl.certificate` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。

- `ssl.certificate_authorities` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。

- `ssl.keystore.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `ssl.keystore.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.keystore.password` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。 You cannot use this setting and `ssl.keystore.password` at the same time. 您不能同时使用此设置和`ssl.keystore.password` 。

- `ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0. 7.17.0 中已弃用。  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。 You cannot use this setting and `ssl.keystore.secure_key_password` at the same time. 您不能使用此设置并且 `ssl.keystore.secure_key_password` 同时。

- `ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

You cannot use this setting and `ssl.keystore.key_password` at the same time.
您不能同时使用此设置和`ssl.keystore.key_password` 。

- `ssl.truststore.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `ssl.truststore.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the truststore file. It must be either `jks` or `PKCS12`. If the file name ends in ".p12", ".pfx" or "pkcs12", the default is `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）信任库文件的格式。它必须是`jks`或`PKCS12` 。如果文件名以“.p12”、“.pfx”或“pkcs12”结尾，则默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.truststore.password` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。 This setting cannot be used with `ssl.truststore.password`. 此设置不能与`ssl.truststore.password`一起使用。

- `ssl.verification_mode` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the verification of certificates.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制证书的验证。 Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `ssl.supported_protocols` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `ssl.cipher_suites` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

### Kerberos realm settings Kerberos 领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [settings that are valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following settings:
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下设置：

- `keytab.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path to the Kerberos keytab file that contains the service principal used by this Elasticsearch node. This must be a location within the Elasticsearch configuration directory and the file must have read permissions. Required.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定包含此 Elasticsearch 节点使用的服务主体的 Kerberos 密钥表文件的路径。这必须是 Elasticsearch 配置目录中的位置，并且该文件必须具有读取权限。必需的。

- `remove_realm_name` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set to `true` to remove the realm part of principal names. Principal names in Kerberos have the form `user/instance@REALM`. If this option is `true`, the realm part (`@REALM`) will not be included in the username. Defaults to `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置为`true`以删除主体名称的领域部分。 Kerberos 中的主体名称的格式为`user/instance@REALM` 。如果此选项为`true` ，则领域部分 ( `@REALM` ) 将不会包含在用户名中。默认为`false` 。

- `krb.debug`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set to `true` to enable debug logs for the Java login module that provides support for Kerberos authentication. Defaults to `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置为`true`可为提供 Kerberos 身份验证支持的 Java 登录模块启用调试日志。默认为`false` 。

- `cache.ttl` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The time-to-live for cached user entries. A user is cached for this period of time. Specify the time period using the standard Elasticsearch [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). Defaults to `20m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）缓存的用户条目的生存时间。用户在这段时间被缓存。使用标准 Elasticsearch[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)指定时间段。默认为`20m` 。

- `cache.max_users` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum number of user entries that can live in the cache at any given time. Defaults to 100,000.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）在任何给定时间可以存在于缓存中的最大用户条目数。默认为 100,000。

- `authorization_realms` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The names of the realms that should be consulted for delegated authorization. If this setting is used, then the Kerberos realm does not perform role mapping and instead loads the user from the listed realms. See [Delegating authorization to another realm](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应咨询委派授权的领域的名称。如果使用此设置，则 Kerberos 领域不会执行角色映射，而是从列出的领域加载用户。请参阅[将授权委托给另一个领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)。

### OpenID Connect realm settings OpenID Connect 领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [settings that are valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following settings.
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下设置。

- `op.issuer` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A verifiable Identifier for your OpenID Connect Provider. An Issuer Identifier is usually a case sensitive URL using the https scheme that contains scheme, host, and optionally, port number and path components and no query or fragment components. The value for this setting should be provided by your OpenID Connect Provider.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）您的 OpenID Connect 提供商的可验证标识符。颁发者标识符通常是使用 https 方案的区分大小写的 URL，其中包含方案、主机以及可选的端口号和路径组件，但不包含查询或片段组件。此设置的值应由您的 OpenID Connect 提供商提供。

- `op.authorization_endpoint` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The URL for the Authorization Endpoint at the OpenID Connect Provider. The value for this setting should be provided by your OpenID Connect Provider.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）OpenID Connect 提供商处的授权端点的 URL。此设置的值应由您的 OpenID Connect 提供商提供。

- `op.token_endpoint` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The URL for the Token Endpoint at the OpenID Connect Provider. The value for this setting should be provided by your OpenID Connect Provider.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）OpenID Connect 提供商处令牌端点的 URL。此设置的值应由您的 OpenID Connect 提供商提供。

- `op.userinfo_endpoint` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The URL for the User Info Endpoint at the OpenID Connect Provider. The value for this setting should be provided by your OpenID Connect Provider.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）OpenID Connect 提供商处的用户信息端点的 URL。此设置的值应由您的 OpenID Connect 提供商提供。

- `op.endsession_endpoint` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The URL for the End Session Endpoint at the OpenID Connect Provider. The value for this setting should be provided by your OpenID Connect Provider.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）OpenID Connect 提供商处的结束会话端点的 URL。此设置的值应由您的 OpenID Connect 提供商提供。

- `op.jwkset_path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) （[静止的](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）

The file name or URL to a JSON Web Key Set (JWKS) with the public key material used to verify tokens and claims responses signed by the OpenID Connect Provider. A value is considered a file name if it does not begin with `https` or `http`. The file name is resolved relative to the Elasticsearch configuration directory.  Changes to the file are polled at a frequency determined by the global Elasticsearch `resource.reload.interval.high` setting, which defaults to 5 seconds.
JSON Web 密钥集 (JWKS) 的文件名或 URL，其中包含用于验证由 OpenID Connect 提供商签名的令牌和声明响应的公钥材料。如果某个值不以`https`或`http`开头，则该值被视为文件名。文件名是相对于 Elasticsearch 配置目录解析的。文件更改的轮询频率由全局 Elasticsearch `resource.reload.interval.high`设置确定，默认为 5 秒。

\+ If a URL is provided, then it must begin with `https://` or `http://`. Elasticsearch automatically caches the retrieved JWK and will attempt to refresh the JWK upon signature verification failure, as this might indicate that the OpenID Connect Provider has rotated the signing keys.
\+ 如果提供了 URL，则必须以`https://`或`http://`开头。 Elasticsearch 自动缓存检索到的 JWK，并在签名验证失败时尝试刷新 JWK，因为这可能表明 OpenID Connect 提供商已轮换签名密钥。

- `authorization_realms`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The names of the realms that should be consulted for delegated authorization. If this setting is used, then the OpenID Connect realm does not perform role mapping and instead loads the user from the listed realms. See [Delegating authorization to another realm](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应咨询委派授权的领域的名称。如果使用此设置，则 OpenID Connect 领域不会执行角色映射，而是从列出的领域加载用户。请参阅[将授权委托给另一个领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)。

- `rp.client_id` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The OAuth 2.0 Client Identifier that was assigned to Elasticsearch during registration at the OpenID Connect Provider.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）在 OpenID Connect 提供商注册期间分配给 Elasticsearch 的 OAuth 2.0 客户端标识符。

- `rp.client_secret`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The OAuth 2.0 Client Secret that was assigned to Elasticsearch during registration at the OpenID Connect Provider.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 在 OpenID Connect 提供商处注册期间分配给 Elasticsearch 的 OAuth 2.0 客户端密钥。

- `rp.client_auth_method` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The client authentication method used by Elasticsearch to authenticate to the OpenID Connect Provider. Can be `client_secret_basic`, `client_secret_post`, or `client_secret_jwt`. Defaults to `client_secret_basic`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Elasticsearch 用于向 OpenID Connect 提供程序进行身份验证的客户端身份验证方法。可以是`client_secret_basic` 、 `client_secret_post`或`client_secret_jwt` 。默认为`client_secret_basic` 。

- `rp.client_auth_jwt_signature_algorithm` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The signature algorithm that Elasticsearch uses to sign the JWT with which it authenticates as a client to the OpenID Connect Provider when `client_secret_jwt` is selected for `rp.client_auth_method`. Can be either `HS256`, `HS384`, or `HS512`. Defaults to `HS384`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）当为`rp.client_auth_method`选择`client_secret_jwt`时，Elasticsearch 用于对 JWT 进行签名的签名算法，通过该算法作为 OpenID Connect Provider 的客户端进行身份验证。可以是`HS256` 、 `HS384`或`HS512` 。默认为`HS384` 。

- `rp.redirect_uri` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Redirect URI within Kibana. If you want to use the authorization code flow, this is the `api/security/oidc/callback` endpoint of your Kibana server. If you want to use the implicit flow,  it is the `api/security/oidc/implicit` endpoint. For example, `https://kibana.example.com/api/security/oidc/callback`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Kibana 中的重定向 URI。如果您想使用授权代码流，这是 Kibana 服务器的`api/security/oidc/callback`端点。如果要使用隐式流，则为`api/security/oidc/implicit`端点。例如， `https://kibana.example.com/api/security/oidc/callback` 。

- `rp.response_type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) OAuth 2.0 Response Type value that determines the authorization processing flow to be used. Can be `code` for authorization code grant flow, or one of `id_token`, `id_token token` for the implicit flow.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）OAuth 2.0 响应类型值，确定要使用的授权处理流程。可以是授权代码授予流程的`code` ，也可以是隐式流程的`id_token` 、 `id_token token`之一。

- `rp.signature_algorithm` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The signature algorithm that will be used by Elasticsearch in order to verify the signature of the id tokens it will receive from the OpenID Connect Provider. Allowed values are `HS256`, `HS384`, `HS512`, `ES256`, `ES384`, `ES512`, `RS256`, `RS384`, `RS512`, `PS256`, `PS384`, `PS512`. Defaults to `RS256`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Elasticsearch 将使用的签名算法，以验证从 OpenID Connect 提供商接收的 id 令牌的签名。允许的值为`HS256` 、 `HS384` 、 `HS512` 、 `ES256` 、 `ES384` 、 `ES512` 、 `RS256` 、 `RS384` 、 `RS512` 、 `PS256` 、 `PS384` 、 `PS512` 。默认为`RS256` 。

- `rp.requested_scopes` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The scope values that will be requested by the OpenID Connect Provider as part of the Authentication Request. Optional, defaults to `openid` （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）OpenID Connect 提供商将作为身份验证请求的一部分请求的范围值。可选，默认为`openid`

- `rp.post_logout_redirect_uri` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The Redirect URI (usually within Kibana) that the OpenID Connect Provider should redirect the browser to after a successful Single Logout.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）成功单点注销后，OpenID Connect 提供商应将浏览器重定向到的重定向 URI（通常在 Kibana 内）。

- `claims.principal`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the OpenID Connect claim that contains the user’s principal (username).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户主体（用户名）的 OpenID Connect 声明的名称。

- `claims.groups` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the OpenID Connect claim that contains the user’s groups.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户组的 OpenID Connect 声明的名称。

- `claims.name` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the OpenID Connect claim that contains the user’s full name.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户全名的 OpenID Connect 声明的名称。

- `claims.mail` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the OpenID Connect claim that contains the user’s email address.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户电子邮件地址的 OpenID Connect 声明的名称。

- `claims.dn` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the OpenID Connect claim that contains the user’s X.509 *Distinguished Name*.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户的 X.509*可分辨名称*的 OpenID Connect 声明的名称。

- `claim_patterns.principal` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A Java regular expression that is matched against the OpenID Connect claim specified by `claims.principal` before it is applied to the user’s *principal* property. The attribute value must match the pattern and the value of the first *capturing group* is used as the principal. For example, `^([^@]+)@example\\.com$` matches email addresses from the "example.com" domain and uses the local-part as the principal.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Java 正则表达式，在应用于用户的*主体*属性之前，与由`claims.principal`指定的 OpenID Connect 声明进行匹配。属性值必须与模式匹配，并且第一个*捕获组*的值用作主体。例如， `^([^@]+)@example\\.com$`匹配来自“example.com”域的电子邮件地址，并使用本地部分作为主体。

- `claim_patterns.groups` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) As per `claim_patterns.principal`, but for the *group* property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）按照`claim_patterns.principal` ，但针对*组*属性。

- `claim_patterns.name` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) As per `claim_patterns.principal`, but for the *name* property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）按照`claim_patterns.principal` ，但针对*name*属性。

- `claim_patterns.mail` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) As per `claim_patterns.principal`, but for the *mail* property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）按照`claim_patterns.principal` ，但针对*邮件*属性。

- `claim_patterns.dn` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) As per `claim_patterns.principal`, but for the *dn* property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）按照`claim_patterns.principal` ，但针对*dn*属性。

- `allowed_clock_skew` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum allowed clock skew to be taken into consideration when validating id tokens with regards to their creation and expiration times. Defaults to `60s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）验证 id 令牌的创建和过期时间时要考虑的最大允许时钟偏差。默认为`60s` 。

- `populate_user_metadata` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether to populate the Elasticsearch user’s metadata with the values that are provided by the OpenID Connect claims. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定是否使用 OpenID Connect 声明提供的值填充 Elasticsearch 用户的元数据。默认为`true` 。

- `http.proxy.host`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the address of the proxy server that will be used by the internal http client for all back-channel communication to the OpenID Connect Provider endpoints. This includes requests to the Token Endpoint, the Userinfo Endpoint and requests to fetch the JSON Web Key Set from the OP if `op.jwkset_path` is set as a URL.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定代理服务器的地址，内部 http 客户端将使用该地址进行与 OpenID Connect Provider 端点的所有反向通道通信。这包括对令牌端点、用户信息端点的请求以及从 OP 获取 JSON Web 密钥集的请求（如果`op.jwkset_path`设置为 URL）。

- `http.proxy.scheme`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the protocol to use to connect to the proxy server that will be used by the http client for all back-channel communication to the OpenID Connect Provider endpoints. Defaults to `http`. Allowed values are `http` or `https`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定用于连接到代理服务器的协议，http 客户端将使用该协议与 OpenID Connect Provider 端点进行所有反向通道通信。默认为`http` 。允许的值为`http`或`https` 。

- `http.proxy.port`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the port of the proxy server that will be used by the http client for all backchannel communication to the OpenID Connect Provider endpoints. Defaults to `80`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定代理服务器的端口，http 客户端将使用该端口与 OpenID Connect Provider 端点进行所有反向通道通信。默认为`80` 。

- `http.connect_timeout` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the behavior of the http client used for back-channel communication to the OpenID Connect Provider endpoints. Specifies the timeout until a connection is established. A value of zero means the timeout is not used. Defaults to `5s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制用于与 OpenID Connect Provider 端点进行反向通道通信的 http 客户端的行为。指定建立连接之前的超时时间。值为零表示不使用超时。默认为`5s` 。

- `http.connection_read_timeout` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the behavior of the http client used for back-channel communication to the OpenID Connect Provider endpoints. Specifies the timeout used when requesting a connection from the connection manager. Defaults to `5s` （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制用于与 OpenID Connect Provider 端点进行反向通道通信的 http 客户端的行为。指定从连接管理器请求连接时使用的超时。默认为`5s`

- `http.socket_timeout` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the behavior of the http client used for back-channel communication to the OpenID Connect Provider endpoints. Specifies the socket timeout (SO_TIMEOUT) in milliseconds, which is the timeout for waiting for data or, put differently, a maximum period inactivity between two consecutive data packets). Defaults to `5s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制用于与 OpenID Connect Provider 端点进行反向通道通信的 http 客户端的行为。指定套接字超时（SO_TIMEOUT）以毫秒为单位，这是等待数据的超时时间，或者换句话说，两个连续数据包之间不活动的最大时间段。默认为`5s` 。

- `http.max_connections` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the behavior of the http client used for back-channel communication to the OpenID Connect Provider endpoints. Specifies the maximum number of connections allowed across all endpoints. Defaults to `200`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制用于与 OpenID Connect Provider 端点进行反向通道通信的 http 客户端的行为。指定所有端点允许的最大连接数。默认为`200` 。

- `http.max_endpoint_connections` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the behavior of the http client used for back-channel communication to the OpenID Connect Provider endpoints. Specifies the maximum number of connections allowed per endpoint. Defaults to `200`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制用于与 OpenID Connect Provider 端点进行反向通道通信的 http 客户端的行为。指定每个端点允许的最大连接数。默认为`200` 。

- `http.tcp.keep_alive` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Whether to enable TCP keepalives on HTTP connections used for back-channel communication to the OpenID Connect Provider endpoints. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）是否在用于与 OpenID Connect Provider 端点进行反向通道通信的 HTTP 连接上启用 TCP keepalive。默认为`true` 。

- `http.connection_pool_ttl` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the behavior of the http client used for back-channel communication to the OpenID Connect Provider endpoints. Specifies the time-to-live of connections in the connection pool (default to 3 minutes). A connection is closed if it is idle for more than the specified timeout.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制用于与 OpenID Connect Provider 端点进行反向通道通信的 http 客户端的行为。指定连接池中连接的生存时间（默认为 3 分钟）。如果连接空闲时间超过指定的超时时间，则连接将被关闭。

The server can also set the `Keep-Alive` HTTP response header. The effective time-to-live value is the smaller value between this setting and the `Keep-Alive` reponse header. Configure this setting to `-1` to let the server dictate the value. If the header is not set by the server and the setting has value of `-1`, the time-to-live is infinite and connections never expire.
服务器还可以设置`Keep-Alive` HTTP 响应标头。有效生存时间值是此设置与`Keep-Alive`响应标头之间较小的值。将此设置配置为`-1`以让服务器指定该值。如果服务器未设置标头并且设置值为`-1` ，则生存时间是无限的并且连接永远不会过期。

### OpenID Connect realm SSL settings OpenID Connect 领域 SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

The following settings can be used to configure SSL for all outgoing http connections to the OpenID Connect Provider endpoints.
以下设置可用于为 OpenID Connect Provider 端点的所有传出 http 连接配置 SSL。

These settings are *only* used for the back-channel communication between Elasticsearch and the OpenID Connect Provider
这些设置*仅*用于 Elasticsearch 和 OpenID Connect 提供商之间的反向通道通信

- `ssl.key` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `ssl.key_passphrase` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  [7.17.0] Deprecated in 7.17.0.  （静态）用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 [7.17.0] Prefer `ssl.secure_key_passphrase` instead.  更喜欢`ssl.secure_key_passphrase` 。 You cannot use this setting and `ssl.secure_key_passphrase` at the same time. 您不能同时使用此设置和`ssl.secure_key_passphrase` 。

- `ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 You cannot use this setting and `ssl.key_passphrase` at the same time. 您不能同时使用此设置和`ssl.key_passphrase` 。

- `ssl.certificate` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。

- `ssl.certificate_authorities` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。

- `ssl.keystore.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `ssl.keystore.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.keystore.password` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。 You cannot use this setting and `ssl.keystore.password` at the same time. 您不能同时使用此设置和`ssl.keystore.password` 。

- `ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。 You cannot use this setting and `ssl.keystore.secure_key_password` at the same time. 您不能使用此设置并且 `ssl.keystore.secure_key_password` 同时。

- `ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。 You cannot use this setting and `ssl.keystore.key_password` at the same time. 您不能同时使用此设置和`ssl.keystore.key_password` 。

- `ssl.truststore.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `ssl.truststore.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the truststore file. It must be either `jks` or `PKCS12`. If the file name ends in ".p12", ".pfx" or "pkcs12", the default is `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）信任库文件的格式。它必须是`jks`或`PKCS12` 。如果文件名以“.p12”、“.pfx”或“pkcs12”结尾，则默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.truststore.password` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。 You cannot use this setting and `ssl.truststore.password` at the same time. 您不能同时使用此设置和`ssl.truststore.password` 。

- `ssl.verification_mode` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the verification of certificates.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制证书的验证。 Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `ssl.supported_protocols` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `ssl.cipher_suites` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

### JWT realm settings JWT 领域设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

In addition to the [settings that are valid for all realms](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings), you can specify the following settings.
除了[对所有领域有效的设置](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#ref-realm-settings)之外，您还可以指定以下设置。

- `token_type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The token type, `id_token` or `access_token`, that the JWT realm uses to verify incoming JWTs. Defaults to `id_token`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）JWT 领域用于验证传入 JWT 的令牌类型`id_token`或`access_token` 。默认为`id_token` 。

- `allowed_audiences` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A list of allowed JWT audiences that Elasticsearch should verify. Elasticsearch will only consume JWTs that were intended for any of these audiences, as denoted by the `aud` claim in the JWT). The audiences are compared with exact string matches and do not support wildcards or regex. Examples of `aud` claim are `https://example.com/client1` and `other_service,elasticsearch`. When `token_type` is `access_token`, the audiences can be optionally denoted by a different claim in the JWT if `aud` does not exist. See also [`fallback_claims.aud`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#security-settings-jwt-fallback-claims-aud).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Elasticsearch 应验证的允许的 JWT 受众列表。 Elasticsearch 将仅使用针对任何这些受众的 JWT，如 JWT 中的`aud`声明所示）。受众与精确的字符串匹配进行比较，并且不支持通配符或正则表达式。 `aud`声明的示例为`https://example.com/client1`和`other_service,elasticsearch` 。当`token_type`为`access_token`时，如果`aud`不存在，则可以选择在 JWT 中用不同的声明来表示受众。另请参阅[`fallback_claims.aud`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#security-settings-jwt-fallback-claims-aud) 。

- `allowed_clock_skew` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The maximum allowed clock skew to be taken into consideration when validating JWTs with regards to their creation, not before, and expiration times.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）在验证 JWT 的创建时间（而不是之前时间和过期时间）时要考虑的最大允许时钟偏差。

- `allowed_issuer` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A verifiable Identifier for your JWT Issuer. An Issuer Identifier is usually a case sensitive URL using the https scheme that contains scheme, host, and optionally, port number and path components and no query or fragment components. However, it can be any string. The value for this setting should be provided by your JWT Issuer. The issuer is compared with exact string matches and do not support wildcards or regex. Examples of `iss` claim are `https://example.com:8443/jwt` and `issuer123`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）JWT 发行者的可验证标识符。颁发者标识符通常是使用 https 方案的区分大小写的  URL，其中包含方案、主机以及可选的端口号和路径组件，但不包含查询或片段组件。但是，它可以是任何字符串。此设置的值应由您的 JWT  颁发者提供。颁发者与精确字符串匹配进行比较，不支持通配符或正则表达式。 `iss`声明的示例为`https://example.com:8443/jwt`和`issuer123` 。

- `allowed_subjects` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A list of allowed JWT subjects that Elasticsearch should verify. Elasticsearch will only consume JWTs that were issued for any of these subjects, as denoted by the `sub` claim in the JWT. The subjects are compared with exact string matches and do not support wildcards or regex. Examples of `sub` claim are `https://example.com/user1` and `user_1,user2`. When `token_type` is `access_token`, this setting is mandatory and the subject can be optionally denoted by a different claim in the JWT if `sub` does not exist. See also [`fallback_claims.sub`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#security-settings-jwt-fallback-claims-sub).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Elasticsearch 应验证的允许 JWT 主题的列表。 Elasticsearch 将仅使用为任何这些主题颁发的 JWT，如 JWT 中的`sub`声明所示。主题与精确的字符串匹配进行比较，不支持通配符或正则表达式。 `sub`声明的示例为`https://example.com/user1`和`user_1,user2` 。当`token_type`为`access_token`时，此设置是强制性的，如果`sub`不存在，则可以选择在 JWT 中通过不同的声明来表示主题。另请参阅[`fallback_claims.sub`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#security-settings-jwt-fallback-claims-sub) 。



- `fallback_claims.sub` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The alternative claim to look for the subject information if the `sub` claim does not exist. It is configurable only when the `token_type` is `access_token`. The fallback is applied everywhere the `sub` claim is used.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果`sub`声明不存在，则查找主题信息的替代声明。仅当`token_type`为`access_token`时才可配置。后备适用于所有`sub`声明的地方。



- `fallback_claims.aud` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The alternative claim to look for the audiences information if the `aud` claim does not exist. It is configurable only when the `token_type` is `access_token`. The fallback is applied everywhere the `aud` claim is used.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）如果`aud`声明不存在，则查找受众信息的替代声明。仅当`token_type`为`access_token`时才可配置。后备适用于使用`aud`声明的任何地方。

- `required_claims` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Additional claims and associated values that Elasticsearch should verify. This is a group setting that takes key/value pairs, where the key is a string and the value must be either a string or an array of strings. The values are compared with exact string matches and do not support wildcards or regex.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Elasticsearch 应验证的其他声明和关联值。这是一个采用键/值对的组设置，其中键是字符串，值必须是字符串或字符串数组。这些值与精确的字符串匹配进行比较，并且不支持通配符或正则表达式。

For example: 例如：

```yaml
xpack.security.authc.realms.jwt.jwt1:
  required_claims:
    token_use: "id"
    versions: ["1.0", "2.0"]
```

- `allowed_signature_algorithms` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) A list of signature algorithms that will be used by Elasticsearch in order to verify the signature of the JWT it will receive from the JWT Issuer. Defaults to `RS256`. Examples are `HS512,RS512,ES512` and `ES384`. Allowed values are `HS256`, `HS384`, `HS512`, `ES256`, `ES384`, `ES512`, `RS256`, `RS384`, `RS512`, `PS256`, `PS384`, `PS512`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）Elasticsearch 将使用的签名算法列表，以验证将从 JWT 发行者处收到的 JWT 的签名。默认为`RS256` 。例如`HS512,RS512,ES512`和`ES384` 。允许的值为`HS256` 、 `HS384` 、 `HS512` 、 `ES256` 、 `ES384` 、 `ES512` 、 `RS256` 、 `RS384` 、 `RS512` 、 `PS256` 、 `PS384` 、 `PS512` 。

- `authorization_realms`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The names of the realms that should be consulted for delegated authorization. If this setting is used, then the JWT realm does not perform role mapping and instead loads the user from the listed realms. See [Delegating authorization to another realm](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms).  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应咨询委派授权的领域的名称。如果使用此设置，则 JWT 领域不会执行角色映射，而是从列出的领域加载用户。请参阅[将授权委托给另一个领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/realm-chains.html#authorization_realms)。

- `claims.dn` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the JWT claim that contains the user’s Distinguished Name (DN), which uniquely identifies a user or group.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）JWT 声明的名称，包含用户的专有名称 (DN)，它唯一标识用户或组。

- `claim_patterns.dn` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Accepts the same Java regular expression as [`claim_patterns.principal`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#jwt-claim-pattern-principal), but for the `dn` property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）接受与[`claim_patterns.principal`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#jwt-claim-pattern-principal)相同的 Java 正则表达式，但用于`dn`属性。

- `claims.groups` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the JWT claim that contains the user’s groups, such as `groups` and `roles`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户组（例如`groups`和`roles`的 JWT 声明的名称。

- `claim_patterns.group` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Accepts the same Java regular expression as [`claim_patterns.principal`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#jwt-claim-pattern-principal), but for the `group` property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）接受与[`claim_patterns.principal`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#jwt-claim-pattern-principal)相同的 Java 正则表达式，但用于`group`属性。

- `claims.mail` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the JWT claim that contains the user’s e-mail address.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户电子邮件地址的 JWT 声明的名称。

- `claim_patterns.mail` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Accepts the same Java regular expression as [`claim_patterns.principal`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#jwt-claim-pattern-principal), but for the `mail` property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）接受与[`claim_patterns.principal`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#jwt-claim-pattern-principal)相同的 Java 正则表达式，但用于`mail`属性。

- `claims.name` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the JWT claim that contains the user’s username.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户用户名的 JWT 声明的名称。

- `claim_patterns.name` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Accepts the same Java regular expression as [`claim_patterns.principal`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#jwt-claim-pattern-principal), but for the `name` property.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）接受与[`claim_patterns.principal`](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#jwt-claim-pattern-principal)相同的 Java 正则表达式，但用于`name`属性。

- `claims.principal`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The name of the JWT claim that contains the user’s principal (username), such as `sub`, `name`, `email`, and `dn`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含用户主体（用户名）的 JWT 声明的名称，例如`sub` 、 `name` 、 `email`和`dn` 。



- `claim_patterns.principal` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) An optional Java regular expression that is matched against the JWT claim specified by `claims.principal` before it is applied to the user’s `principal` property. The value must match the pattern and the value of the first *capturing group* is used as the principal. For example, `^([^@]+)@example\\.com$` matches email addresses from the `example.com` domain and uses the local-part as the principal. Another example is `sub` which may not need a pattern setting.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）一个可选的 Java 正则表达式，在应用于用户的`principal`属性之前，它与由`claims.principal`指定的 JWT 声明进行匹配。该值必须与模式匹配，并且第一个*捕获组*的值用作主体。例如， `^([^@]+)@example\\.com$`匹配来自`example.com`域的电子邮件地址，并使用本地部分作为主体。另一个例子是`sub` ，它可能不需要模式设置。

- `client_authentication.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether to use `shared_secret` or `none` to authenticate incoming client requests. If this value is `shared_secret`, the client is authenticated using an HTTP request header that must match a pre-configured secret value. The client must provide this shared secret with every request in the `ES-Client-Authentication` header. If this value is `none`, then the request header `ES-Client-Authentication` is ignored. Defaults to `shared_secret`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定是否使用`shared_secret`或`none`来验证传入的客户端请求。如果该值为`shared_secret` ，则使用必须与预先配置的秘密值匹配的HTTP请求标头对客户端进行身份验证。客户端必须在`ES-Client-Authentication`标头中为每个请求提供此共享密钥。如果该值为`none` ，则忽略请求标头`ES-Client-Authentication` 。默认为`shared_secret` 。 Enabling client authentication is recommended. If JWT bearer tokens are shared with other clients or services, client authentication restricts which ones are allowed to submit those JWTs to Elasticsearch. 建议启用客户端身份验证。如果 JWT 不记名令牌与其他客户端或服务共享，则客户端身份验证会限制哪些客户端或服务可以将这些 JWT 提交到 Elasticsearch。

- `client_authentication.shared_secret` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html), [reloadable](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html#reloadable-secure-settings)) Secret value string for client authentication. Required if `client_authentication.type` is `shared_secret`.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)，[可重新加载](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html#reloadable-secure-settings)）用于客户端身份验证的秘密值字符串。如果`client_authentication.type`为`shared_secret` ，则为必需。

- `client_authentication.rotation_grace_period`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Sets the grace period for how long after rotating the `client_authentication.shared_secret` is valid. `client_authentication.shared_secret` can be rotated by updating the keystore then calling the [reload API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-reload-secure-settings.html). Defaults to `1m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置旋转后多长时间的宽限期 `client_authentication.shared_secret` 是有效的。 `client_authentication.shared_secret` 可以通过更新密钥库然后调用[重新加载 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-reload-secure-settings.html)来轮换。默认为`1m` 。

- `http.connect_timeout` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Sets the timeout for the HTTP client that is used for fetching the JSON Web Key Set from a remote URL. A value of zero means the timeout is not used. Defaults to `5s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）设置用于从远程 URL 获取 JSON Web 密钥集的 HTTP 客户端的超时。值为零表示不使用超时。默认为`5s` 。

- `http.connection_read_timeout` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the HTTP timeout used when requesting a connection from the connection manager. Defaults to `5s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定从连接管理器请求连接时使用的 HTTP 超时。默认为`5s` 。

- `http.socket_timeout` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the maximum socket timeout (SO_TIMEOUT) for the HTTP client to wait for inactivity between two consecutive data packets. Defaults to `5s`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定 HTTP 客户端等待两个连续数据包之间不活动的最大套接字超时 (SO_TIMEOUT)。默认为`5s` 。

- `http.max_connections` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the maximum number of connections allowed across all endpoints.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定所有端点允许的最大连接数。

- `http.max_endpoint_connections` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the maximum number of connections allowed per endpoint.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定每个端点允许的最大连接数。

- `jwt.cache.size`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the maximum number of JWT cache entries. If clients use a different JWT for every request, set to `0` to disable the JWT cache. Defaults to `100000`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定 JWT 缓存条目的最大数量。如果客户端对每个请求使用不同的 JWT，请设置为`0`以禁用 JWT 缓存。默认为`100000` 。

- `jwt.cache.ttl`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the time-to-live for the period of time to cache JWT entries. JWTs can only be cached if client authentication is successful (or disabled). Uses the standard Elasticsearch [time units](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units). If clients use a different JWT for every request, set to `0` to disable the JWT cache. Defaults to `20m`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定缓存 JWT 条目的时间段的生存时间。仅当客户端身份验证成功（或禁用）时，才能缓存 JWT。使用标准 Elasticsearch[时间单位](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html#time-units)。如果客户端对每个请求使用不同的 JWT，请设置为`0`以禁用 JWT 缓存。默认为`20m` 。

- `pkc_jwkset_path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The file name or URL to a JSON Web Key Set (JWKS) with the public key material that the JWT Realm uses for verifying token signatures. A value is considered a file name if it does not begin with `https`. The file name is resolved relative to the Elasticsearch configuration directory. If a URL is provided, then it must begin with `https://` (`http://` is not supported). Elasticsearch automatically caches the JWK set and will attempt to refresh the JWK set upon signature verification failure, as this might indicate that the JWT Provider has rotated the signing keys.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）JSON Web 密钥集 (JWKS) 的文件名或 URL，其中包含 JWT 领域用于验证令牌签名的公钥材料。如果某个值不以`https`开头，则该值将被视为文件名。文件名是相对于 Elasticsearch 配置目录解析的。如果提供 URL，则必须以`https://`开头（不支持`http://` ）。 Elasticsearch 自动缓存 JWK 集，并在签名验证失败时尝试刷新 JWK 集，因为这可能表明 JWT 提供程序已轮换签名密钥。

- `hmac_jwkset` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Contents of a JSON Web Key Set (JWKS), including the secret key that the JWT realm uses to verify token signatures. This format supports multiple keys and optional attributes, and is preferred over the `hmac_key` setting. Cannot be used in conjunction with the `hmac_key` setting. Refer to [Configure Elasticsearch to use a JWT realm](https://www.elastic.co/guide/en/elasticsearch/reference/current/jwt-auth-realm.html).  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) JSON Web 密钥集 (JWKS) 的内容，包括 JWT 领域用于验证令牌签名的密钥。此格式支持多个密钥和可选属性，并且优于`hmac_key`设置。不能与`hmac_key`设置结合使用。请参阅[配置 Elasticsearch 以使用 JWT 领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/jwt-auth-realm.html)。

- `hmac_key` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Contents of a single JSON Web Key (JWK), including the secret key that the JWT realm uses to verify token signatures. This format only supports a single key without attributes, and cannot be used with the `hmac_jwkset` setting. This format is compatible with OIDC. The HMAC key must be a UNICODE string, where the key bytes are the UTF-8 encoding of the UNICODE string. The `hmac_jwkset` setting is preferred. Refer to [Configure Elasticsearch to use a JWT realm](https://www.elastic.co/guide/en/elasticsearch/reference/current/jwt-auth-realm.html).  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 单个 JSON Web 密钥 (JWK) 的内容，包括 JWT 领域用于验证令牌签名的密钥。此格式仅支持没有属性的单个密钥，并且不能与`hmac_jwkset`设置一起使用。此格式与 OIDC 兼容。 HMAC 密钥必须是 UNICODE 字符串，其中密钥字节是 UNICODE 字符串的 UTF-8 编码。 `hmac_jwkset`设置是首选。请参阅[配置 Elasticsearch 以使用 JWT 领域](https://www.elastic.co/guide/en/elasticsearch/reference/current/jwt-auth-realm.html)。

- `populate_user_metadata` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies whether to populate the Elasticsearch user’s metadata with the values that are provided by the JWT claims. Defaults to `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定是否使用 JWT 声明提供的值填充 Elasticsearch 用户的元数据。默认为`true` 。

### JWT realm SSL settings JWT 领域 SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

The following settings can be used to configure SSL for fetching the JSON Web Key Set from a remote URL.
以下设置可用于配置 SSL 以从远程 URL 获取 JSON Web 密钥集。

These settings are *only* used for the back-channel communication between Elasticsearch and the JWT Issuer.
这些设置*仅*用于 Elasticsearch 和 JWT 发行者之间的反向通道通信。

- `ssl.key` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `ssl.key_passphrase` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  [7.17.0] Deprecated in 7.17.0.  （静态）用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 [7.17.0] Prefer `ssl.secure_key_passphrase` instead.  更喜欢`ssl.secure_key_passphrase` 。 You cannot use this setting and `ssl.secure_key_passphrase` at the same time. 您不能同时使用此设置和`ssl.secure_key_passphrase` 。

- `ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 You cannot use this setting and `ssl.key_passphrase` at the same time. 您不能同时使用此设置和`ssl.key_passphrase` 。

- `ssl.certificate` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。

- `ssl.certificate_authorities` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。

- `ssl.keystore.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `ssl.keystore.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.keystore.password` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。 You cannot use this setting and `ssl.keystore.password` at the same time. 您不能同时使用此设置和`ssl.keystore.password` 。

- `ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。 You cannot use this setting and `ssl.keystore.secure_key_password` at the same time. 您不能使用此设置并且 `ssl.keystore.secure_key_password` 同时。

- `ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。 You cannot use this setting and `ssl.keystore.key_password` at the same time. 您不能同时使用此设置和`ssl.keystore.key_password` 。

- `ssl.truststore.path` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `ssl.truststore.type` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the truststore file. It must be either `jks` or `PKCS12`. If the file name ends in ".p12", ".pfx" or "pkcs12", the default is `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）信任库文件的格式。它必须是`jks`或`PKCS12` 。如果文件名以“.p12”、“.pfx”或“pkcs12”结尾，则默认为`PKCS12` 。否则，它默认为`jks` 。

- `ssl.truststore.password` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。 You cannot use this setting and `ssl.truststore.password` at the same time. 您不能同时使用此设置和`ssl.truststore.password` 。

- `ssl.verification_mode` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the verification of certificates.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制证书的验证。 Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `ssl.supported_protocols` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `ssl.cipher_suites` [![logo cloud](https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg)](https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&placement=docs-body)

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

### Load balancing and failover 负载平衡和故障转移

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

The [static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) `load_balance.type` setting can have the following values:
[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)`load_balance.type`设置可以具有以下值：

- `failover`: The URLs specified are used in the order that they are specified. The first server that can be connected to will be used for all subsequent connections. If a connection to that server fails then the next server that a connection can be established to will be used for subsequent connections. 
  `failover` ：指定的 URL 按指定的顺序使用。第一个可以连接的服务器将用于所有后续连接。如果与该服务器的连接失败，则可以建立连接的下一个服务器将用于后续连接。
- `dns_failover`: In this mode of operation, only a single URL may be specified. This URL must contain a DNS name. The system will be queried for all IP addresses that correspond to this DNS name. Connections to the Active Directory or LDAP server will always be tried in the order in which they were retrieved. This differs from `failover` in that there is no reordering of the list and if a server has failed at the beginning of the list, it will still be tried for each subsequent connection. 
  `dns_failover` ：在此操作模式下，只能指定单个 URL。此 URL 必须包含 DNS 名称。系统将查询与该 DNS 名称对应的所有 IP 地址。将始终按照检索的顺序尝试连接到 Active Directory 或 LDAP 服务器。这与`failover`的不同之处在于，不会对列表进行重新排序，并且如果服务器在列表开头发生故障，则仍会尝试每个后续连接。
- `round_robin`: Connections will continuously iterate through the list of provided URLs. If a server is unavailable, iterating through the list of URLs will continue until a successful connection is made. 
  `round_robin` ：连接将不断迭代提供的 URL 列表。如果服务器不可用，则将继续遍历 URL 列表，直到成功建立连接。
- `dns_round_robin`: In this mode of operation, only a single URL may be specified. This URL must contain a DNS name. The system will be queried for all IP addresses that correspond to this DNS name. Connections will continuously iterate through the list of addresses. If a server is unavailable, iterating through the list of URLs will continue until a successful connection is made. 
  `dns_round_robin` ：在此操作模式下，只能指定单个 URL。此 URL 必须包含 DNS 名称。系统将查询与该 DNS 名称对应的所有 IP 地址。连接将不断迭代地址列表。如果服务器不可用，则将继续遍历 URL 列表，直到成功建立连接。

## General TLS settings 常规 TLS 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

- `xpack.security.ssl.diagnose.trust`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls whether to output diagnostic messages for SSL/TLS trust failures. If this is `true` (the default), a message will be printed to the Elasticsearch log whenever an SSL connection (incoming or outgoing) is rejected due to a failure to establish trust. This diagnostic message contains information that can be used to determine the cause of the failure and assist with resolving the problem. Set to `false` to disable these messages.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制是否输出 SSL/TLS 信任失败的诊断消息。如果这是`true` （默认值），则只要 SSL 连接（传入或传出）由于无法建立信任而被拒绝，一条消息就会打印到 Elasticsearch 日志中。此诊断消息包含可用于确定故障原因并帮助解决问题的信息。设置为`false`可禁用这些消息。

### TLS/SSL key and trusted certificate settings TLS/SSL 密钥和可信证书设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

The following settings are used to specify a private key, certificate, and the trusted certificates that should be used when communicating over an SSL/TLS connection. If no trusted certificates are configured, the default certificates that are trusted by the JVM will be trusted along with the certificate(s) associated with a key in the same context. The key and certificate must be in place for connections that require client authentication or when acting as a SSL enabled server.
以下设置用于指定通过 SSL/TLS 连接进行通信时应使用的私钥、证书和受信任证书。如果未配置受信任的证书，则 JVM  信任的默认证书以及与同一上下文中的密钥关联的证书将受到信任。对于需要客户端身份验证的连接或充当启用 SSL 的服务器时，密钥和证书必须就位。



Storing trusted certificates in a PKCS#12 file, although supported, is uncommon in practice. The [`elasticsearch-certutil` tool](https://www.elastic.co/guide/en/elasticsearch/reference/current/certutil.html), as well as Java’s `keytool`, are designed to generate PKCS#12 files that can be used both as a keystore and as a truststore, but this may not be the case for container files that are created using other tools. Usually, PKCS#12 files only contain secret and private entries. To confirm that a PKCS#12 container includes trusted certificate ("anchor") entries look for `2.16.840.1.113894.746875.1.1: <Unsupported tag 6>` in the `openssl pkcs12 -info` output, or `trustedCertEntry` in the `keytool -list` output.
尽管支持将受信任的证书存储在 PKCS#12 文件中，但在实践中并不常见。 [`elasticsearch-certutil`工具](https://www.elastic.co/guide/en/elasticsearch/reference/current/certutil.html)以及 Java 的`keytool`旨在生成既可用作密钥库又可用作信任库的 PKCS#12 文件，但对于使用其他工具创建的容器文件可能并非如此。通常，PKCS#12 文件仅包含秘密和私有条目。要确认 PKCS#12 容器包含可信证书（“锚点”）条目，请查找 `2.16.840.1.113894.746875.1.1: <Unsupported tag 6>` 在`openssl pkcs12 -info`输出中，或在`keytool -list`输出中的`trustedCertEntry`中。

#### HTTP TLS/SSL settings HTTP TLS/SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

You can configure the following TLS/SSL settings.
您可以配置以下 TLS/SSL 设置。

- `xpack.security.http.ssl.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Used to enable or disable TLS/SSL on the HTTP networking layer, which Elasticsearch uses to communicate with other clients. The default is `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于启用或禁用 HTTP 网络层上的 TLS/SSL，Elasticsearch 使用该网络层与其他客户端进行通信。默认为`false` 。

- `xpack.security.http.ssl.supported_protocols`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `xpack.security.http.ssl.client_authentication`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the server’s behavior in regard to requesting a certificate from client connections. Valid values are `required`, `optional`, and `none`. `required` forces a client to present a certificate, while `optional` requests a client certificate but the client is not required to present one. Defaults to `none`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制服务器在从客户端连接请求证书方面的行为。有效值包括`required` 、 `optional`和`none` 。 `required`强制客户端提供证书，而`optional`则请求客户端证书但不要求客户端提供证书。默认为`none` 。

- `xpack.security.http.ssl.verification_mode`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The SSL settings in `xpack.security.http.ssl` control a *server context* for TLS, which defines the settings for the TLS connection. The use of `verification_mode` in a TLS *server* is discouraged. Defines how to verify the certificates presented by another party in the TLS connection:  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)） `xpack.security.http.ssl`中的 SSL 设置控制 TLS 的*服务器上下文*，它定义 TLS 连接的设置。不鼓励在 TLS*服务器*中使用`verification_mode` 。定义如何验证 TLS 连接中另一方提供的证书： Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `xpack.security.http.ssl.cipher_suites`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

## HTTP TLS/SSL key and trusted certificate settings HTTP TLS/SSL 密钥和可信证书设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

The following settings are used to specify a private key, certificate, and the trusted certificates that should be used when communicating over an SSL/TLS connection. A private key and certificate must be configured.
以下设置用于指定通过 SSL/TLS 连接进行通信时应使用的私钥、证书和受信任证书。必须配置私钥和证书。

## PEM encoded files PEM 编码文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

When using PEM encoded files, use the following settings:
使用 PEM 编码文件时，请使用以下设置：

- `xpack.security.http.ssl.key`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `xpack.security.http.ssl.key_passphrase`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  [7.17.0] Deprecated in 7.17.0.  （静态）用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 [7.17.0] Prefer `ssl.secure_key_passphrase` instead.  更喜欢`ssl.secure_key_passphrase` 。 You cannot use this setting and `ssl.secure_key_passphrase` at the same time. 您不能同时使用此设置和`ssl.secure_key_passphrase` 。

- `xpack.security.http.ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。

- `xpack.security.http.ssl.certificate`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。

- `xpack.security.http.ssl.certificate_authorities`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。

## Java keystore files Java 密钥库文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

When using Java keystore files (JKS), which contain the private key, certificate and certificates that should be trusted, use the following settings:
使用包含私钥、证书和应信任证书的 Java 密钥库文件 (JKS) 时，请使用以下设置：

- `xpack.security.http.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.security.http.ssl.keystore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `xpack.security.http.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `xpack.security.http.ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。

- `xpack.security.http.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `xpack.security.http.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.security.http.ssl.truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `xpack.security.http.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

## PKCS#12 files PKCS#12 文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

Elasticsearch can be configured to use PKCS#12 container files (`.p12` or `.pfx` files) that contain the private key, certificate and certificates that should be trusted.
Elasticsearch 可以配置为使用 PKCS#12 容器文件（ `.p12`或`.pfx`文件），其中包含私钥、证书和应信任的证书。

PKCS#12 files are configured in the same way as Java keystore files:
PKCS#12 文件的配置方式与 Java 密钥库文件相同：

- `xpack.security.http.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.security.http.ssl.keystore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `xpack.security.http.ssl.keystore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `xpack.security.http.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `xpack.security.http.ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。

- `xpack.security.http.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `xpack.security.http.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.security.http.ssl.truststore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set this to `PKCS12` to indicate that the truststore is a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）将此设置为`PKCS12`以指示信任库是 PKCS#12 文件。

- `xpack.security.http.ssl.truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `xpack.security.http.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

#### Transport TLS/SSL settings 传输 TLS/SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

You can configure the following TLS/SSL settings.
您可以配置以下 TLS/SSL 设置。

- `xpack.security.transport.ssl.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Used to enable or disable TLS/SSL on the transport networking layer, which nodes use to communicate with each other. The default is `false`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于启用或禁用传输网络层上的 TLS/SSL，节点使用该层相互通信。默认为`false` 。

- `xpack.security.transport.ssl.supported_protocols`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `xpack.security.transport.ssl.client_authentication`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the server’s behavior in regard to requesting a certificate from client connections. Valid values are `required`, `optional`, and `none`. `required` forces a client to present a certificate, while `optional` requests a client certificate but the client is not required to present one. Defaults to `required`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制服务器在从客户端连接请求证书方面的行为。有效值包括`required` 、 `optional`和`none` 。 `required`强制客户端提供证书，而`optional`则请求客户端证书但不要求客户端提供证书。默认为`required` 。

- `xpack.security.transport.ssl.verification_mode`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Defines how to verify the certificates presented by another party in the TLS connection:  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）定义如何验证 TLS 连接中另一方提供的证书： Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `xpack.security.transport.ssl.cipher_suites`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

## Transport TLS/SSL key and trusted certificate settings 传输 TLS/SSL 密钥和可信证书设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

The following settings are used to specify a private key, certificate, and the trusted certificates that should be used when communicating over an SSL/TLS connection. A private key and certificate must be configured.
以下设置用于指定通过 SSL/TLS 连接进行通信时应使用的私钥、证书和受信任证书。必须配置私钥和证书。

## PEM encoded files PEM 编码文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

When using PEM encoded files, use the following settings:
使用 PEM 编码文件时，请使用以下设置：

- `xpack.security.transport.ssl.key`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `xpack.security.transport.ssl.key_passphrase`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  [7.17.0] Deprecated in 7.17.0.  （静态）用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。 [7.17.0] Prefer `ssl.secure_key_passphrase` instead.  更喜欢`ssl.secure_key_passphrase` 。 You cannot use this setting and `ssl.secure_key_passphrase` at the same time. 您不能同时使用此设置和`ssl.secure_key_passphrase` 。

- `xpack.security.transport.ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。

- `xpack.security.transport.ssl.certificate`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。

- `xpack.security.transport.ssl.certificate_authorities`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。

## Java keystore files Java 密钥库文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

When using Java keystore files (JKS), which contain the private key, certificate and certificates that should be trusted, use the following settings:
使用包含私钥、证书和应信任证书的 Java 密钥库文件 (JKS) 时，请使用以下设置：

- `xpack.security.transport.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.security.transport.ssl.keystore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `xpack.security.transport.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `xpack.security.transport.ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。

- `xpack.security.transport.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `xpack.security.transport.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.security.transport.ssl.truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `xpack.security.transport.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

## PKCS#12 files PKCS#12 文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

Elasticsearch can be configured to use PKCS#12 container files (`.p12` or `.pfx` files) that contain the private key, certificate and certificates that should be trusted.
Elasticsearch 可以配置为使用 PKCS#12 容器文件（ `.p12`或`.pfx`文件），其中包含私钥、证书和应信任的证书。

PKCS#12 files are configured in the same way as Java keystore files:
PKCS#12 文件的配置方式与 Java 密钥库文件相同：

- `xpack.security.transport.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.security.transport.ssl.keystore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `xpack.security.transport.ssl.keystore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the keystore.  [7.17.0] Deprecated in 7.17.0.  （静态）密钥库的密码。 [7.17.0] Prefer `ssl.keystore.secure_password` instead.  更喜欢`ssl.keystore.secure_password` 。

- `xpack.security.transport.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `xpack.security.transport.ssl.keystore.key_password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the key in the keystore. The default is the keystore password. [7.17.0] Deprecated in 7.17.0.  （静态）密钥库中密钥的密码。默认是密钥库密码。 [7.17.0] Prefer `ssl.keystore.secure_key_password` instead.  更喜欢 `ssl.keystore.secure_key_password` 反而。 You cannot use this setting and `ssl.keystore.secure_password` at the same time. 您不能同时使用此设置和`ssl.keystore.secure_password` 。

- `xpack.security.transport.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `xpack.security.transport.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.security.transport.ssl.truststore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set this to `PKCS12` to indicate that the truststore is a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）将此设置为`PKCS12`以指示信任库是 PKCS#12 文件。

- `xpack.security.transport.ssl.truststore.password`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The password for the truststore.  [7.17.0] Deprecated in 7.17.0.  （静态）信任库的密码。 [7.17.0] Prefer `ssl.truststore.secure_password` instead.  更喜欢 `ssl.truststore.secure_password` 反而。 You cannot use this setting and `ssl.truststore.secure_password` at the same time. 您不能使用此设置并且 `ssl.truststore.secure_password` 同时。

- `xpack.security.transport.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

#### Remote cluster server (API key based model) TLS/SSL settings 远程集群服务器（基于 API 密钥的模型）TLS/SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

You can configure the following TLS/SSL settings.
您可以配置以下 TLS/SSL 设置。

- `xpack.security.remote_cluster_server.ssl.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Used to enable or disable TLS/SSL on the remote cluster server  networking layer, which Elasticsearch uses to communicate with remote  cluster clients. The default is `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于在远程集群服务器网络层上启用或禁用 TLS/SSL，Elasticsearch 使用该网络层与远程集群客户端进行通信。默认值为`true` 。

- `xpack.security.remote_cluster_server.ssl.supported_protocols`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `xpack.security.remote_cluster_server.ssl.client_authentication`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Controls the server’s behavior in regard to requesting a certificate from client connections. Valid values are `required`, `optional`, and `none`. `required` forces a client to present a certificate, while `optional` requests a client certificate but the client is not required to present one. Defaults to `none`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）控制服务器在从客户端连接请求证书方面的行为。有效值包括`required` 、 `optional`和`none` 。 `required`强制客户端提供证书，而`optional`则请求客户端证书但不要求客户端提供证书。默认为`none` 。

- `xpack.security.remote_cluster_server.ssl.verification_mode`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The SSL settings in `xpack.security.remote_cluster_server.ssl` control a *server context* for TLS, which defines the settings for the TLS connection. The use of `verification_mode` in a TLS *server* is discouraged. Defines how to verify the certificates presented by another party in the TLS connection:  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）SSL 设置 `xpack.security.remote_cluster_server.ssl` 控制 TLS 的*服务器上下文*，它定义 TLS 连接的设置。不鼓励在 TLS*服务器*中使用`verification_mode` 。定义如何验证 TLS 连接中另一方提供的证书： Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `xpack.security.remote_cluster_server.ssl.cipher_suites`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

## Remote cluster server (API key based model) TLS/SSL key and trusted certificate settings 远程集群服务器（基于 API 密钥的模型）TLS/SSL 密钥和可信证书设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

The following settings are used to specify a private key, certificate, and the trusted certificates that should be used when communicating over an SSL/TLS connection. A private key and certificate must be configured.
以下设置用于指定通过 SSL/TLS 连接进行通信时应使用的私钥、证书和受信任证书。必须配置私钥和证书。

## PEM encoded files PEM 编码文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

When using PEM encoded files, use the following settings:
使用 PEM 编码文件时，请使用以下设置：

- `xpack.security.remote_cluster_server.ssl.key`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `xpack.security.remote_cluster_server.ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。

- `xpack.security.remote_cluster_server.ssl.certificate`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。

- `xpack.security.remote_cluster_server.ssl.certificate_authorities`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。

## Java keystore files Java 密钥库文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

When using Java keystore files (JKS), which contain the private key, certificate and certificates that should be trusted, use the following settings:
使用包含私钥、证书和应信任证书的 Java 密钥库文件 (JKS) 时，请使用以下设置：

- `xpack.security.remote_cluster_server.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.security.remote_cluster_server.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `xpack.security.remote_cluster_server.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `xpack.security.remote_cluster_server.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.security.remote_cluster_server.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

## PKCS#12 files PKCS#12 文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

Elasticsearch can be configured to use PKCS#12 container files (`.p12` or `.pfx` files) that contain the private key, certificate and certificates that should be trusted.
Elasticsearch 可以配置为使用 PKCS#12 容器文件（ `.p12`或`.pfx`文件），其中包含私钥、证书和应信任的证书。

PKCS#12 files are configured in the same way as Java keystore files:
PKCS#12 文件的配置方式与 Java 密钥库文件相同：

- `xpack.security.remote_cluster_server.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.security.remote_cluster_server.ssl.keystore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `xpack.security.remote_cluster_server.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `xpack.security.remote_cluster_server.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `xpack.security.remote_cluster_server.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.security.remote_cluster_server.ssl.truststore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set this to `PKCS12` to indicate that the truststore is a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）将此设置为`PKCS12`以指示信任库是 PKCS#12 文件。

- `xpack.security.remote_cluster_server.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

#### Remote cluster client (API key based model) TLS/SSL settings 远程集群客户端（基于 API 密钥的模型）TLS/SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

You can configure the following TLS/SSL settings.
您可以配置以下 TLS/SSL 设置。

- `xpack.security.remote_cluster_client.ssl.enabled`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Used to enable or disable TLS/SSL on the remote cluster client  networking layer, which Elasticsearch uses to communicate with remote  cluster servers. The default is `true`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）用于在远程集群客户端网络层上启用或禁用 TLS/SSL，Elasticsearch 使用该网络层与远程集群服务器进行通信。默认值为`true` 。

- `xpack.security.remote_cluster_client.ssl.supported_protocols`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported protocols with versions. Valid protocols: `SSLv2Hello`, `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM’s SSL provider supports TLSv1.3, the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is `TLSv1.2,TLSv1.1`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的协议及其版本。有效协议： `SSLv2Hello` 、 `SSLv3` 、 `TLSv1` 、 `TLSv1.1` 、 `TLSv1.2` 、 `TLSv1.3` 。如果 JVM 的 SSL 提供程序支持 TLSv1.3，则默认值为`TLSv1.3,TLSv1.2,TLSv1.1` 。否则，默认为`TLSv1.2,TLSv1.1` 。 Elasticsearch relies on your JDK’s implementation of SSL and TLS. View [Supported SSL/TLS versions by JDK version](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html) for more information. Elasticsearch 依赖于 JDK 的 SSL 和 TLS 实现。查看[按 JDK 版本支持的 SSL/TLS 版本](https://www.elastic.co/guide/en/elasticsearch/reference/current/jdk-tls-versions.html)以了解更多信息。  If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` or `SSLv3`. See [FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html). 如果 `xpack.security.fips_mode.enabled` 为`true`时，您不能使用`SSLv2Hello`或`SSLv3` 。请参阅[FIPS 140-2](https://www.elastic.co/guide/en/elasticsearch/reference/current/fips-140-compliance.html) 。

- `xpack.security.remote_cluster_client.ssl.verification_mode`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Defines how to verify the certificates presented by another party in the TLS connection:  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）定义如何验证 TLS 连接中另一方提供的证书： Valid values 选择痛点   `full`  Validates that the provided certificate: has an issue date that’s within the `not_before` and `not_after` dates; chains to a trusted Certificate Authority (CA); has a `hostname` or IP address that matches the names within the certificate.  验证所提供的证书： 颁发日期在`not_before`和`not_after`日期内；链接至受信任的证书颁发机构 (CA)；具有与证书中的名称匹配的`hostname`或 IP 地址。  `certificate`  Validates the provided certificate and verifies that it’s signed by a trusted authority (CA), but doesn’t check the certificate `hostname`.  验证提供的证书并验证它是否由受信任的颁发机构 (CA) 签名，但不检查证书`hostname` 。  `none`   Performs no certificate validation.  不执行证书验证。  Setting certificate validation to `none` disables many security benefits of SSL/TLS, which is very dangerous. Only set this value if instructed by Elastic Support as a temporary diagnostic mechanism when attempting to resolve TLS errors. 将证书验证设置为`none`会禁用 SSL/TLS 的许多安全优势，这是非常危险的。仅当 Elastic Support 指示在尝试解决 TLS 错误时将其作为临时诊断机制时，才设置此值。    Defaults to `full`. 默认为`full` 。

- `xpack.security.remote_cluster_client.ssl.cipher_suites`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Supported cipher suites vary depending on which version of Java you use. For example, for version 12 the default value is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`, `TLS_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`, `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`, `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`, `TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`, `TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）支持的密码套件因您使用的 Java 版本而异。例如，对于版本 12，默认值为`TLS_AES_256_GCM_SHA384` 、 `TLS_AES_128_GCM_SHA256` 、 `TLS_CHACHA20_POLY1305_SHA256` 、 `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` , `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256` , `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` , `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` , `TLS_RSA_WITH_AES_256_GCM_SHA384` , `TLS_RSA_WITH_AES_128_GCM_SHA256` , `TLS_RSA_WITH_AES_256_CBC_SHA256` , `TLS_RSA_WITH_AES_128_CBC_SHA256` 、 `TLS_RSA_WITH_AES_256_CBC_SHA` 、 `TLS_RSA_WITH_AES_128_CBC_SHA` 。 For more information, see Oracle’s [Java Cryptography Architecture documentation](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2). 有关更多信息，请参阅 Oracle 的[Java 加密体系结构文档](https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2)。

## Remote cluster client (API key based model) TLS/SSL key and trusted certificate settings 远程集群客户端（基于 API 密钥的模型）TLS/SSL 密钥和可信证书设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

The following settings are used to specify a private key, certificate, and the trusted certificates that should be used when communicating over an SSL/TLS connection. A private key and certificate are optional and would be used if the server requires client authentication for PKI authentication.
以下设置用于指定通过 SSL/TLS 连接进行通信时应使用的私钥、证书和受信任证书。私钥和证书是可选的，如果服务器需要客户端身份验证进行 PKI 身份验证，则将使用私钥和证书。

## PEM encoded files PEM 编码文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

When using PEM encoded files, use the following settings:
使用 PEM 编码文件时，请使用以下设置：

- `xpack.security.remote_cluster_client.ssl.key`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Path to a PEM encoded file containing the private key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥的 PEM 编码文件的路径。 If HTTP client authentication is required, it uses this file. You cannot use this setting and `ssl.keystore.path` at the same time. 如果需要 HTTP 客户端身份验证，则使用此文件。您不能同时使用此设置和`ssl.keystore.path` 。

- `xpack.security.remote_cluster_client.ssl.secure_key_passphrase`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The passphrase that is used to decrypt the private key. Since the key might not be encrypted, this value is optional.  ( [Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) ) 用于解密私钥的密码。由于密钥可能未加密，因此该值是可选的。

- `xpack.security.remote_cluster_client.ssl.certificate`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Specifies the path for the PEM encoded certificate (or certificate chain) that is associated with the key.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）指定与密钥关联的 PEM 编码证书（或证书链）的路径。 This setting can be used only if `ssl.key` is set. 仅当设置了`ssl.key`时才能使用此设置。

- `xpack.security.remote_cluster_client.ssl.certificate_authorities`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) List of paths to PEM encoded certificate files that should be trusted.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）应信任的 PEM 编码证书文件的路径列表。 This setting and `ssl.truststore.path` cannot be used at the same time. 此设置和`ssl.truststore.path`不能同时使用。

## Java keystore files Java 密钥库文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

When using Java keystore files (JKS), which contain the private key, certificate and certificates that should be trusted, use the following settings:
使用包含私钥、证书和应信任证书的 Java 密钥库文件 (JKS) 时，请使用以下设置：

- `xpack.security.remote_cluster_client.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.security.remote_cluster_client.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `xpack.security.remote_cluster_client.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `xpack.security.remote_cluster_client.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.security.remote_cluster_client.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

## PKCS#12 files PKCS#12 文件

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/ssl-settings.asciidoc)

Elasticsearch can be configured to use PKCS#12 container files (`.p12` or `.pfx` files) that contain the private key, certificate and certificates that should be trusted.
Elasticsearch 可以配置为使用 PKCS#12 容器文件（ `.p12`或`.pfx`文件），其中包含私钥、证书和应信任的证书。

PKCS#12 files are configured in the same way as Java keystore files:
PKCS#12 文件的配置方式与 Java 密钥库文件相同：

- `xpack.security.remote_cluster_client.ssl.keystore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore file that contains a private key and certificate.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含私钥和证书的密钥库文件的路径。 It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and `ssl.key` at the same time. 它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。您不能同时使用此设置和`ssl.key` 。

- `xpack.security.remote_cluster_client.ssl.keystore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The format of the keystore file. It must be either `jks` or `PKCS12`. If the keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults to `PKCS12`. Otherwise, it defaults to `jks`.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）密钥库文件的格式。它必须是`jks`或`PKCS12` 。如果密钥库路径以“.p12”、“.pfx”或“.pkcs12”结尾，则此设置默认为`PKCS12` 。否则，它默认为`jks` 。

- `xpack.security.remote_cluster_client.ssl.keystore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the keystore.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库的密码。

- `xpack.security.remote_cluster_client.ssl.keystore.secure_key_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) The password for the key in the keystore. The default is the keystore password.  ([安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) 密钥库中密钥的密码。默认是密钥库密码。

- `xpack.security.remote_cluster_client.ssl.truststore.path`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) The path for the keystore that contains the certificates to trust. It must be either a Java keystore (jks) or a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）包含要信任的证书的密钥库的路径。它必须是 Java 密钥库 (jks) 或 PKCS#12 文件。 You cannot use this setting and `ssl.certificate_authorities` at the same time. 您不能同时使用此设置和`ssl.certificate_authorities` 。

- `xpack.security.remote_cluster_client.ssl.truststore.type`

  ([Static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)) Set this to `PKCS12` to indicate that the truststore is a PKCS#12 file.  （[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)）将此设置为`PKCS12`以指示信任库是 PKCS#12 文件。

- `xpack.security.remote_cluster_client.ssl.truststore.secure_password`

  ([Secure](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)) Password for the truststore.  （[安全](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html)）信任库的密码。

### Transport profile TLS/SSL settings 传输配置文件 TLS/SSL 设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

The same settings that are available for the [default transport](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#transport-tls-ssl-settings) are also available for each transport profile. By default, the settings for a transport profile will be the same as the default transport unless they are specified.
可用于[默认传输](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#transport-tls-ssl-settings)的相同设置也可用于每个传输配置文件。默认情况下，除非指定，否则传输配置文件的设置将与默认传输相同。

As an example, lets look at the key setting. For the default transport this is `xpack.security.transport.ssl.key`. In order to use this setting in a transport profile, use the prefix `transport.profiles.$PROFILE.xpack.security.` and append the portion of the setting after `xpack.security.transport.`. For the key setting, this would be `transport.profiles.$PROFILE.xpack.security.ssl.key`.
作为示例，让我们看一下按键设置。对于默认传输，这是 `xpack.security.transport.ssl.key` 。为了在传输配置文件中使用此设置，请使用前缀 `transport.profiles.$PROFILE.xpack.security.` 并将设置部分附加到`xpack.security.transport.` 。对于密钥设置，这将是 `transport.profiles.$PROFILE.xpack.security.ssl.key` 。

#### IP filtering settings IP过滤设置

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-settings.asciidoc)

You can configure the following settings for [IP filtering](https://www.elastic.co/guide/en/elasticsearch/reference/current/ip-filtering.html).
您可以配置以下[IP 过滤](https://www.elastic.co/guide/en/elasticsearch/reference/current/ip-filtering.html)设置。

- `xpack.security.transport.filter.allow`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) List of IP addresses to allow.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）允许的 IP 地址列表。

- `xpack.security.transport.filter.deny`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) List of IP addresses to deny.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）要拒绝的 IP 地址列表。

- `xpack.security.http.filter.allow`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) List of IP addresses to allow just for HTTP.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）仅允许 HTTP 的 IP 地址列表。

- `xpack.security.http.filter.deny`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) List of IP addresses to deny just for HTTP.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）仅针对 HTTP 拒绝的 IP 地址列表。

- `transport.profiles.$PROFILE.xpack.security.filter.allow`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) List of IP addresses to allow for this profile.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）允许此配置文件的 IP 地址列表。

- `transport.profiles.$PROFILE.xpack.security.filter.deny`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) List of IP addresses to deny for this profile.  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）要对此配置文件拒绝的 IP 地址列表。

- `xpack.security.remote_cluster.filter.allow`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) List of IP addresses to allow just for the [remote cluster server configured with the API key based model](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters-api-key.html).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）仅允许[使用基于 API 密钥的模型配置的远程集群服务器](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters-api-key.html)的 IP 地址列表。

- `xpack.security.remote_cluster.filter.deny`

  ([Dynamic](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)) List of IP addresses to deny just for the remote cluster server configured with the [API key based model](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters-api-key.html).  （[动态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#dynamic-cluster-setting)）仅针对使用基于[API 密钥的模型](https://www.elastic.co/guide/en/elasticsearch/reference/current/remote-clusters-api-key.html)配置的远程集群服务器拒绝的 IP 地址列表。

#### User cache and password hash algorithms 用户缓存和密码哈希算法

[edit 编辑](https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/settings/security-hash-settings.asciidoc)

Certain realms store user credentials in memory. To limit exposure to credential theft and mitigate credential compromise, the cache only stores a hashed version of the user credentials in memory. By default, the user cache is hashed with a salted `sha-256` hash algorithm. You can use a different hashing algorithm by setting the [static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) `cache.hash_algo` realm settings to any of the following values:
某些领域将用户凭据存储在内存中。为了限制凭证被盗的风险并减少凭证泄露，缓存仅在内存中存储用户凭证的哈希版本。默认情况下，用户缓存使用加盐`sha-256`哈希算法进行哈希处理。您可以通过将[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)`cache.hash_algo`领域设置设置为以下任意值来使用不同的哈希算法：



**Table 1. Cache hash algorithms
表 1. 缓存哈希算法**

| Algorithm 算法                             |      |      | Description 描述                                             |
| ------------------------------------------ | ---- | ---- | ------------------------------------------------------------ |
| `ssha256`                                  |      |      | Uses a salted `sha-256` algorithm (default). 使用加盐`sha-256`算法（默认）。 |
| `md5`                                      |      |      | Uses `MD5` algorithm. 使用`MD5`算法。                        |
| `sha1`                                     |      |      | Uses `SHA1` algorithm. 使用`SHA1`算法。                      |
| `bcrypt`                                   |      |      | Uses `bcrypt` algorithm with salt generated in 1024 rounds. 使用`bcrypt`算法，并在 1024 轮中生成盐。 |
| `bcrypt4`                                  |      |      | Uses `bcrypt` algorithm with salt generated in 16 rounds. 使用`bcrypt`算法，盐分 16 轮生成。 |
| `bcrypt5`                                  |      |      | Uses `bcrypt` algorithm with salt generated in 32 rounds. 使用`bcrypt`算法，盐分 32 轮生成。 |
| `bcrypt6`                                  |      |      | Uses `bcrypt` algorithm with salt generated in 64 rounds. 使用`bcrypt`算法，盐在 64 轮中生成。 |
| `bcrypt7`                                  |      |      | Uses `bcrypt` algorithm with salt generated in 128 rounds. 使用`bcrypt`算法，盐在 128 轮中生成。 |
| `bcrypt8`                                  |      |      | Uses `bcrypt` algorithm with salt generated in 256 rounds. 使用`bcrypt`算法，并在 256 轮中生成盐。 |
| `bcrypt9`                                  |      |      | Uses `bcrypt` algorithm with salt generated in 512 rounds. 使用`bcrypt`算法，并在 512 轮中生成盐。 |
| `pbkdf2`                                   |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 10000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，进行 10000 次迭代。 |
| `pbkdf2_1000`                              |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 1000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，进行 1000 次迭代。 |
| `pbkdf2_10000`                             |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 10000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，进行 10000 次迭代。 |
| `pbkdf2_50000`                             |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 50000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，进行 50000 次迭代。 |
| `pbkdf2_100000`                            |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 100000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 100000 次迭代。 |
| `pbkdf2_500000`                            |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                              pseudorandom function using 500000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 500000 次迭代。 |
| `pbkdf2_1000000`                           |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 1000000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 1000000 次迭代。 |
| `pbkdf2_stretch`                           |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 10000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 10000 次迭代。 |
| `pbkdf2_stretch_1000`                      |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 1000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 1000 次迭代。 |
| `pbkdf2_stretch_10000`                     |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 10000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 10000 次迭代。 |
| `pbkdf2_stretch_50000`                     |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 50000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 50000 次迭代。 |
| `pbkdf2_stretch_100000`                    |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 100000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 100000 次迭代。 |
| `pbkdf2_stretch_500000`                    |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 500000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 500000 次迭代。 |
| `pbkdf2_stretch_1000000`                   |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 1000000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 1000000 次迭代。 |
| `noop`,`clear_text` `noop` ， `clear_text` |      |      | Doesn’t hash the credentials and keeps it in clear text in                            memory. CAUTION: keeping clear text is considered insecure                            and can be compromised at the OS level (for example through                            memory dumps and using `ptrace`). 不对凭据进行哈希处理并将其以明文形式保存在内存中。注意：保留明文被认为是不安全的，并且可能在操作系统级别受到损害（例如通过内存转储和使用`ptrace` ）。 |

Likewise, realms that store passwords hash them using cryptographically strong and password-specific salt values. You can configure the algorithm for password hashing by setting the [static](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting) `xpack.security.authc.password_hashing.algorithm` setting to one of the following:
同样，存储密码的领域使用加密强度高且特定于密码的盐值对密码进行哈希处理。您可以通过设置[静态](https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html#static-cluster-setting)来配置密码哈希算法 `xpack.security.authc.password_hashing.algorithm` 设置为以下之一：



**Table 2. Password hashing algorithms
表 2. 密码哈希算法**

| Algorithm 算法           |      |      | Description 描述                                             |
| ------------------------ | ---- | ---- | ------------------------------------------------------------ |
| `bcrypt`                 |      |      | Uses `bcrypt` algorithm with salt generated in 1024 rounds. (default) 使用`bcrypt`算法，并在 1024 轮中生成盐。 （默认） |
| `bcrypt4`                |      |      | Uses `bcrypt` algorithm with salt generated in 16 rounds. 使用`bcrypt`算法，盐分 16 轮生成。 |
| `bcrypt5`                |      |      | Uses `bcrypt` algorithm with salt generated in 32 rounds. 使用`bcrypt`算法，盐分 32 轮生成。 |
| `bcrypt6`                |      |      | Uses `bcrypt` algorithm with salt generated in 64 rounds. 使用`bcrypt`算法，盐在 64 轮中生成。 |
| `bcrypt7`                |      |      | Uses `bcrypt` algorithm with salt generated in 128 rounds. 使用`bcrypt`算法，盐在 128 轮中生成。 |
| `bcrypt8`                |      |      | Uses `bcrypt` algorithm with salt generated in 256 rounds. 使用`bcrypt`算法，并在 256 轮中生成盐。 |
| `bcrypt9`                |      |      | Uses `bcrypt` algorithm with salt generated in 512 rounds. 使用`bcrypt`算法，并在 512 轮中生成盐。 |
| `bcrypt10`               |      |      | Uses `bcrypt` algorithm with salt generated in 1024 rounds. 使用`bcrypt`算法，并在 1024 轮中生成盐。 |
| `bcrypt11`               |      |      | Uses `bcrypt` algorithm with salt generated in 2048 rounds. 使用`bcrypt`算法，并在 2048 轮中生成盐。 |
| `bcrypt12`               |      |      | Uses `bcrypt` algorithm with salt generated in 4096 rounds. 使用`bcrypt`算法，并在 4096 轮中生成盐。 |
| `bcrypt13`               |      |      | Uses `bcrypt` algorithm with salt generated in 8192 rounds. 使用`bcrypt`算法，盐在 8192 轮中生成。 |
| `bcrypt14`               |      |      | Uses `bcrypt` algorithm with salt generated in 16384 rounds. 使用`bcrypt`算法，并在 16384 轮中生成盐。 |
| `pbkdf2`                 |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 10000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，进行 10000 次迭代。 |
| `pbkdf2_1000`            |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 1000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，进行 1000 次迭代。 |
| `pbkdf2_10000`           |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 10000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，进行 10000 次迭代。 |
| `pbkdf2_50000`           |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 50000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，进行 50000 次迭代。 |
| `pbkdf2_100000`          |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 100000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 100000 次迭代。 |
| `pbkdf2_500000`          |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                              pseudorandom function using 500000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 500000 次迭代。 |
| `pbkdf2_1000000`         |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 1000000 iterations. 使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 1000000 次迭代。 |
| `pbkdf2_stretch`         |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 10000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 10000 次迭代。 |
| `pbkdf2_stretch_1000`    |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 1000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 1000 次迭代。 |
| `pbkdf2_stretch_10000`   |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 10000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 10000 次迭代。 |
| `pbkdf2_stretch_50000`   |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 50000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 50000 次迭代。 |
| `pbkdf2_stretch_100000`  |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 100000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 100000 次迭代。 |
| `pbkdf2_stretch_500000`  |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 500000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 500000 次迭代。 |
| `pbkdf2_stretch_1000000` |      |      | Uses `PBKDF2` key derivation function with `HMAC-SHA512` as a                             pseudorandom function using 1000000 iterations, after hashing the                             initial input with SHA512 first. 首先使用 SHA512 对初始输入进行哈希处理后，使用`PBKDF2`密钥派生函数和`HMAC-SHA512`作为伪随机函数，使用 1000000 次迭代。 |