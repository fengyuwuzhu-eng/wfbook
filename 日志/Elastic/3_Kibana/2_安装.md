# 安装

[TOC]

## 支持的平台

Packages of Kibana are provided for and tested against Linux, Darwin, and Windows.Kibana 软件包是为 Linux、Darwin 和 Windows 提供的，并针对 Windows 进行了测试。由于 Kibana 在 Node.js  上运行，因此我们为这些平台提供了必要的 Node.js 二进制文件。 Running Kibana against a separately maintained version of Node.js is not supported.不支持针对单独维护的 Node.js 版本运行 Kibana。

为了支持某些较旧的 Linux 平台（尤其是 CentOS7 / RHEL7），Kibana for Linux 附带了支持 glibc 2.17 的 Node.js 自定义版本。

## Elasticsearch 版本

Kibana should be configured to run against an Elasticsearch node of the same version. 
Kibana 应配置为针对相同版本的 Elasticsearch 节点运行。这是官方支持的配置。

Running different major version releases of Kibana and Elasticsearch (e.g. Kibana 5.x and Elasticsearch 2.x) is not supported, nor is running a minor version of Kibana that is newer than the version of Elasticsearch (e.g. Kibana 5.1 and Elasticsearch 5.0).
不支持运行 Kibana 和 Elasticsearch 的不同主要版本（例如 Kibana 5.x 和 Elasticsearch  2.x），也不支持运行比 Elasticsearch 版本更新的 Kibana 次要版本（例如 Kibana 5.1 和  Elasticsearch 5.0）。

Running a minor version of Elasticsearch that is higher than Kibana will generally work in order to facilitate an upgrade process where Elasticsearch is upgraded first (e.g. Kibana 5.0 and Elasticsearch 5.1). In this configuration, a warning will be logged on Kibana server startup, so it’s only meant to be temporary until Kibana is upgraded to the same version as Elasticsearch.
运行高于 Kibana 的 Elasticsearch 次要版本通常可以正常工作，以便于首先升级 Elasticsearch 的升级过程（例如  Kibana 5.0 和 Elasticsearch 5.1）。在此配置中，Kibana 服务器启动时将记录警告，因此在 Kibana 升级到与 Elasticsearch 相同的版本之前，它只是暂时的。

Running different patch version releases of Kibana and Elasticsearch (e.g. Kibana 5.0.0 and Elasticsearch 5.0.1) is generally supported, though we encourage users to run the same versions of Kibana and Elasticsearch down to the patch version.
通常支持运行 Kibana 和 Elasticsearch 的不同补丁版本（例如 Kibana 5.0.0 和 Elasticsearch 5.0.1），但我们鼓励用户运行相同版本的 Kibana 和 Elasticsearch，直到补丁版本。

## 安装包

Kibana is provided in the following package formats:
Kibana 提供以下格式包：

| 软件包         | 说明                                                         |
| -------------- | ------------------------------------------------------------ |
| `tar.gz`/`zip` | `tar.gz` 软件包可用于在 Linux 和 Darwin 上安装，是开始使用 Kibana 的最简单选择。`zip` 包是 Windows 唯一支持的包。 |
| `deb`          | `deb` 软件包适用于 Debian、Ubuntu 和其他基于 Debian 的系统。Debian 软件包可以从 Elastic 网站或我们的 Debian 存储库下载。 |
| `rpm`          | `rpm` 软件包适合安装在 Red Hat、SLES、OpenSuSE 和其他基于 RPM 的系统上。RPM 可以从 Elastic 网站或我们的 RPM 存储库下载。 |
| `docker`       | 映像可用于将 Kibana 作为 Docker 容器运行。它们可以从 Elastic Docker Registry 下载。 |

If your Elasticsearch installation is protected by [Elastic Stack security features](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/elasticsearch-security.html) see [Configuring security in Kibana](https://www.elastic.co/guide/en/kibana/8.15/using-kibana-with-security.html) for additional setup instructions.
如果您的 Elasticsearch 安装受 [Elastic Stack 安全功能](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/elasticsearch-security.html)保护，请参阅[在 Kibana 中配置安全性](https://www.elastic.co/guide/en/kibana/8.15/using-kibana-with-security.html)，了解更多设置说明。

## 在 Linux 或 macOS 上从存档安装

Kibana is provided for Linux and Darwin as a `.tar.gz` package. These packages are the easiest formats to use when trying out Kibana.
Kibana 作为 `.tar.gz` 软件包提供给 Linux 和 Darwin。这些软件包是试用 Kibana 时最容易使用的格式。

This package contains both free and subscription features. [Start a 30-day trial](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html) to try out all of the features.
此软件包包含免费和订阅功能。[开始 30 天试用](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html)以试用所有功能。

The latest stable version of Kibana can be found on the [Download Kibana](https://www.elastic.co/downloads/kibana) page. Other versions can be found on the [Past Releases page](https://www.elastic.co/downloads/past-releases).
Kibana 的最新稳定版本可以在[下载 Kibana](https://www.elastic.co/downloads/kibana) 页面上找到。其他版本可以在 [Past Releases 页面上](https://www.elastic.co/downloads/past-releases)找到。

macOS is supported for development purposes only and is not covered under the support SLA for [production-supported operating systems](https://www.elastic.co/support/matrix#kibana).
macOS 仅支持用于开发目的，不在[生产支持的操作系统](https://www.elastic.co/support/matrix#kibana)的支持 SLA 中。

### 下载并安装 Linux 64 位软件包

The Linux archive for Kibana v8.15.1 can be downloaded and installed as follows:
Kibana v8.15.1 的 Linux 存档可以按如下方式下载和安装：

```sh
curl -O https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-linux-x86_64.tar.gz
curl https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-linux-x86_64.tar.gz.sha512 | shasum -a 512 -c - 
tar -xzf kibana-8.15.1-linux-x86_64.tar.gz
cd kibana-8.15.1/ 
```

|      | Compares the SHA of the downloaded `.tar.gz` archive and the published checksum, which should output `kibana-{version}-linux-x86_64.tar.gz: OK`. 将下载的 `.tar.gz` 存档的 SHA 与已发布的校验和进行比较，后者应输出 `kibana-{version}-linux-x86_64.tar.gz: OK` 。 |
| ---- | ------------------------------------------------------------ |
|      | This directory is known as `$KIBANA_HOME`. 此目录称为 `$KIBANA_HOME。` |

### 下载并安装 Darwin 软件包

### macOS Gatekeeper 警告

Apple’s rollout of stricter notarization requirements affected the notarization of the 8.15.1 Kibana artifacts. If macOS displays a dialog when you first run Kibana that interrupts it, you will need to take an action to allow it to run.
Apple 推出更严格的公证要求，影响了 8.15.1 Kibana 工件的公证。如果 macOS 在您首次运行 Kibana 时显示一个对话框，该对话框会中断它，您将需要采取措施以允许它运行。

To prevent Gatekeeper checks on the Kibana files, run the following command on the downloaded `.tar.gz` archive or the directory to which was extracted:
要防止 Gatekeeper 对 Kibana 文件进行检查，请对下载的 `.tar.gz` 存档或提取到的目录运行以下命令：

```sh
xattr -d -r com.apple.quarantine <archive-or-directory>
```

Alternatively, you can add a security override if a Gatekeeper popup appears by following the instructions in the *How to open an app that hasn’t been notarized or is from an unidentified developer* section of [Safely open apps on your Mac](https://support.apple.com/en-us/HT202491).
或者，如果出现 Gatekeeper 弹出窗口，您可以按照在 [Mac 上安全打开应用程序](https://support.apple.com/en-us/HT202491)如何*打开尚未公证或来自身份不明开发人员*的应用程序部分中的说明添加安全性覆盖。

The Darwin archive for Kibana v8.15.1 can be downloaded and installed as follows:
可以按如下方式下载和安装 Kibana v8.15.1 的 Darwin 存档：

```sh
curl -O https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-darwin-x86_64.tar.gz
curl https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-darwin-x86_64.tar.gz.sha512 | shasum -a 512 -c - 
tar -xzf kibana-8.15.1-darwin-x86_64.tar.gz
cd kibana-8.15.1/ 
```

|      | Compares the SHA of the downloaded `.tar.gz` archive and the published checksum, which should output `kibana-{version}-darwin-x86_64.tar.gz: OK`. 将下载的 `.tar.gz` 存档的 SHA 与已发布的校验和进行比较，后者应输出 `kibana-{version}-darwin-x86_64.tar.gz: OK` 。 |
| ---- | ------------------------------------------------------------ |
|      | This directory is known as `$KIBANA_HOME`. 此目录称为 `$KIBANA_HOME。` |

### 启动 Elasticsearch 并为 Kibana 生成注册令牌

When you start Elasticsearch for the first time, the following security configuration occurs automatically:
首次启动 Elasticsearch 时，以下安全配置会自动发生：

- [Certificates and keys](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/configuring-stack-security.html#stack-security-certificates) for TLS are generated for the transport and HTTP layers. 
  TLS 的[证书和密钥](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/configuring-stack-security.html#stack-security-certificates)是为传输层和 HTTP 层生成的。
- The TLS configuration settings are written to `elasticsearch.yml`. 
  TLS 配置设置将写入 `elasticsearch.yml`。
- A password is generated for the `elastic` user. 
  将为 `elastic` 用户生成密码。
- An enrollment token is generated for Kibana. 
  为 Kibana 生成注册令牌。

You can then start Kibana and enter the enrollment token to securely connect Kibana with Elasticsearch. The enrollment token is valid for 30 minutes.
然后，您可以启动 Kibana 并输入注册令牌，以安全地将 Kibana 与 Elasticsearch 连接起来。注册令牌的有效期为 30 分钟。

### 从命令行运行 Kibana

Kibana can be started from the command line as follows:
可以从命令行启动 Kibana，如下所示：

```sh
./bin/kibana
```

By default, Kibana runs in the foreground, prints its logs to the standard output (`stdout`), and can be stopped by pressing **Ctrl-C**.
默认情况下，Kibana 在前台运行，将其日志打印到标准输出 （`stdout`），并且可以通过按 **Ctrl-C** 来停止。

If this is the first time you’re starting Kibana, this command generates a unique link in your terminal to enroll your Kibana instance with Elasticsearch.
如果这是您第一次启动 Kibana，此命令会在您的终端中生成一个唯一链接，以便向 Elasticsearch 注册您的 Kibana 实例。

1. In your terminal, click the generated link to open Kibana in your browser. 
   在终端中，单击生成的链接以在浏览器中打开 Kibana。
2. In your browser, paste the enrollment token that was generated in the terminal when you started Elasticsearch, and then click the button to connect your Kibana instance with Elasticsearch. 
   在浏览器中，粘贴启动 Elasticsearch 时在终端中生成的注册令牌，然后单击按钮以将 Kibana 实例与 Elasticsearch 连接。
3. Log in to Kibana as the `elastic` user with the password that was generated when you started Elasticsearch. 
   以 `Elastic` 用户身份登录 Kibana，并使用启动 Elasticsearch 时生成的密码。

If you need to reset the password for the `elastic` user or other built-in users, run the [`elasticsearch-reset-password`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/reset-password.html) tool. To generate new enrollment tokens for Kibana or Elasticsearch nodes, run the [`elasticsearch-create-enrollment-token`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html) tool. These tools are available in the Elasticsearch `bin` directory.
如果需要为 `elastic` 用户或其他内置用户重置密码，请运行 [`elasticsearch-reset-password`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/reset-password.html) 工具。要为 Kibana 或 Elasticsearch 节点生成新的注册令牌，请运行该工具[ `elasticsearch-create-enrollment-token` ](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html)。这些工具位于 Elasticsearch `bin` 目录中。

### 通过配置文件配置 Kibana

Kibana loads its configuration from the `$KIBANA_HOME/config/kibana.yml` file by default.  The format of this config file is explained in [Configuring Kibana](https://www.elastic.co/guide/en/kibana/8.15/settings.html).
默认情况下， `$KIBANA_HOME/config/kibana.yml` Kibana 会从文件中加载其配置。此配置文件的格式在 [配置 Kibana](https://www.elastic.co/guide/en/kibana/8.15/settings.html) 中进行了说明。

### `.tar.gz` 存档的目录布局

The `.tar.gz` packages are entirely self-contained. All files and directories are, by default, contained within `$KIBANA_HOME` — the directory created when unpacking the archive.
`.tar.gz` 包是完全独立的。默认情况下，所有文件和目录都包含在 `$KIBANA_HOME` 中 — 解压缩存档时创建的目录。

This is very convenient because you don’t have to create any directories to start using Kibana, and uninstalling Kibana is as easy as removing the `$KIBANA_HOME` directory.  However, it is advisable to change the default locations of the config and data directories so that you do not delete important data later on.
这非常方便，因为您无需创建任何目录即可开始使用 Kibana，卸载 Kibana 就像删除 `$KIBANA_HOME` 目录一样简单。但是，建议更改 config 和 data 目录的默认位置，以便以后不会删除重要数据。

| Type 类型        | Description 描述                                             | Default Location 默认位置                                    | Setting 设置    |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------------- |
| **home 家**      | Kibana home directory or `$KIBANA_HOME` Kibana 主目录或 `$KIBANA_HOME` | Directory created by unpacking the archive 通过解压缩存档创建的目录 |                 |
| **bin 站**       | Binary scripts including `kibana` to start the Kibana server    and `kibana-plugin` to install plugins 二进制脚本，包括用于启动 Kibana 服务器的 `kibana` 和用于安装插件的 `kibana-plugin` | `$KIBANA_HOME\bin`                                           |                 |
| **config 配置**  | Configuration files including `kibana.yml` 配置文件，包括 `kibana.yml` | `$KIBANA_HOME\config`                                        | `KBN_PATH_CONF` |
| **data 数据**    | The location of the data files written to disk by Kibana and its plugins Kibana 及其插件写入磁盘的数据文件的位置 | `$KIBANA_HOME\data`                                          |                 |
| **plugins 插件** | Plugin files location. Each plugin will be contained in a subdirectory. 插件文件位置。每个插件都将包含在一个子目录中。 | `$KIBANA_HOME\plugins` `$KIBANA_HOME\插件`                   |                 |

## 在 Windows 上安装

Kibana 可以使用 `.zip` 包安装在 Windows 上。

This package contains both free and subscription features. [Start a 30-day trial](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html) to try out all of the features.
此软件包包含免费和订阅功能。[开始 30 天试用](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html)以试用所有功能。

### 下载并安装 `.zip` 包

Download the `.zip` windows archive for Kibana v8.15.1 from https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-windows-x86_64.zip
从 https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-windows-x86_64.zip 下载 Kibana v8.15.1 的 `.zip` Windows 存档

Unzip it with your favourite unzip tool. This will create a folder called kibana-8.15.1-windows-x86_64, which we will refer to as `$KIBANA_HOME`. In a terminal window, `CD` to the `$KIBANA_HOME` directory, for instance:
使用您最喜欢的解压缩工具解压缩它。这将创建一个名为 kibana-8.15.1-windows-x86_64 的文件夹，我们将其称为 `$KIBANA_HOME`。在终端窗口中，`CD` 到 `$KIBANA_HOME` 目录，例如：

```sh
CD c:\kibana-8.15.1-windows-x86_64
```

### 启动 Elasticsearch 并为 Kibana 生成注册令牌

When you start Elasticsearch for the first time, the following security configuration occurs automatically:
首次启动 Elasticsearch 时，以下安全配置会自动发生：

- [Certificates and keys](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/configuring-stack-security.html#stack-security-certificates) for TLS are generated for the transport and HTTP layers. 
  TLS 的[证书和密钥](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/configuring-stack-security.html#stack-security-certificates)是为传输层和 HTTP 层生成的。
- The TLS configuration settings are written to `elasticsearch.yml`. 
  TLS 配置设置将写入 `elasticsearch.yml`。
- A password is generated for the `elastic` user. 
  将为 `elastic` 用户生成密码。
- An enrollment token is generated for Kibana. 
  为 Kibana 生成注册令牌。

You can then start Kibana and enter the enrollment token to securely connect Kibana with Elasticsearch. The enrollment token is valid for 30 minutes.
然后，您可以启动 Kibana 并输入注册令牌，以安全地将 Kibana 与 Elasticsearch 连接起来。注册令牌的有效期为 30 分钟。

### 从命令行运行 Kibana

Kibana can be started from the command line as follows:
可以从命令行启动 Kibana，如下所示：

```sh
.\bin\kibana.bat
```

By default, Kibana runs in the foreground, prints its logs to `STDOUT`, and can be stopped by pressing **Ctrl-C**.
默认情况下，Kibana 在前台运行，将其日志打印到 `STDOUT`，并且可以通过按 **Ctrl-C** 来停止。

If this is the first time you’re starting Kibana, this command generates a unique link in your terminal to enroll your Kibana instance with Elasticsearch.
如果这是您第一次启动 Kibana，此命令会在您的终端中生成一个唯一链接，以便向 Elasticsearch 注册您的 Kibana 实例。

1. In your terminal, click the generated link to open Kibana in your browser. 
   在终端中，单击生成的链接以在浏览器中打开 Kibana。
2. In your browser, paste the enrollment token that was generated in the terminal when you started Elasticsearch, and then click the button to connect your Kibana instance with Elasticsearch. 
   在浏览器中，粘贴启动 Elasticsearch 时在终端中生成的注册令牌，然后单击按钮以将 Kibana 实例与 Elasticsearch 连接。
3. Log in to Kibana as the `elastic` user with the password that was generated when you started Elasticsearch. 
   以 `Elastic` 用户身份登录 Kibana，并使用启动 Elasticsearch 时生成的密码。

If you need to reset the password for the `elastic` user or other built-in users, run the [`elasticsearch-reset-password`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/reset-password.html) tool. To generate new enrollment tokens for Kibana or Elasticsearch nodes, run the [`elasticsearch-create-enrollment-token`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html) tool. These tools are available in the Elasticsearch `bin` directory.
如果需要为 `elastic` 用户或其他内置用户重置密码，请运行 [`elasticsearch-reset-password`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/reset-password.html) 工具。要为 Kibana 或 Elasticsearch 节点生成新的注册令牌，请运行该工具[ `elasticsearch-create-enrollment-token` ](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html)。这些工具位于 Elasticsearch `bin` 目录中。

### Configure Kibana via the config file 通过配置文件配置 Kibana

Kibana loads its configuration from the `$KIBANA_HOME/config/kibana.yml` file by default.  The format of this config file is explained in [Configuring Kibana](https://www.elastic.co/guide/en/kibana/8.15/settings.html).
默认情况下， `$KIBANA_HOME/config/kibana.yml` Kibana 会从文件中加载其配置。此配置文件的格式在 [配置 Kibana](https://www.elastic.co/guide/en/kibana/8.15/settings.html) 中进行了说明。

### `.zip` 存档的目录布局

The `.zip` package is entirely self-contained. All files and directories are, by default, contained within `$KIBANA_HOME` — the directory created when unpacking the archive.
`.zip` 包是完全独立的。默认情况下，所有文件和目录都包含在 `$KIBANA_HOME` 中 — 解压缩存档时创建的目录。

This is very convenient because you don’t have to create any directories to start using Kibana, and uninstalling Kibana is as easy as removing the `$KIBANA_HOME` directory.  However, it is advisable to change the default locations of the config and data directories so that you do not delete important data later on.
这非常方便，因为您无需创建任何目录即可开始使用 Kibana，卸载 Kibana 就像删除 `$KIBANA_HOME` 目录一样简单。但是，建议更改 config 和 data 目录的默认位置，以便以后不会删除重要数据。

| Type 类型       | Description 描述                                             | Default Location 默认位置                                    | Setting 设置                               |
| --------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------ |
| **home 家**     | Kibana home directory or `$KIBANA_HOME` Kibana 主目录或 `$KIBANA_HOME` | Directory created by unpacking the archive 通过解压缩存档创建的目录 |                                            |
| **bin 站**      | Binary scripts including `kibana` to start the Kibana server    and `kibana-plugin` to install plugins 二进制脚本，包括用于启动 Kibana 服务器的 `kibana` 和用于安装插件的 `kibana-plugin` | `$KIBANA_HOME\bin`                                           |                                            |
| **config 配置** | Configuration files including `kibana.yml` 配置文件，包括 `kibana.yml` | `$KIBANA_HOME\config`                                        | `KBN_PATH_CONF`                            |
|                 | data 数据                                                    | `The location of the data files written to disk by Kibana and its plugins` | `$KIBANA_HOME\data`                        |
|                 | plugins 插件                                                 | `Plugin files location. Each plugin will be contained in a subdirectory.` | `$KIBANA_HOME\plugins` `$KIBANA_HOME\插件` |

## 使用 Debian 包安装

此软件包包含免费和订阅功能。[开始 30 天试用](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html)以试用所有功能。

### 导入 Elastic PGP 密钥

We sign all of our packages with the Elastic Signing Key (PGP key [D88E42B4](https://pgp.mit.edu/pks/lookup?op=vindex&search=0xD27D666CD88E42B4), available from https://pgp.mit.edu) with fingerprint:
我们使用带有指纹的弹性签名密钥（PGP 密钥[D88E42B4](https://pgp.mit.edu/pks/lookup?op=vindex&search=0xD27D666CD88E42B4)，可从 https://pgp.mit.edu 获得）对所有软件包进行签名：

```bash
4609 5ACC 8548 582C 1A26 99A9 D27D 666C D88E 42B4
```

下载并安装公有签名密钥：

```bash
wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo gpg --dearmor -o /usr/share/keyrings/elasticsearch-keyring.gpg
```

### 从 APT 存储库安装

在继续之前，可能需要在 Debian 上安装 `apt-transport-https` 软件包：

```bash
sudo apt-get install apt-transport-https
```

将存储库定义保存到 `/etc/apt/sources.list.d/elastic-8.x.list` ：

```bash
echo "deb [signed-by=/usr/share/keyrings/elasticsearch-keyring.gpg] https://artifacts.elastic.co/packages/8.x/apt stable main" | sudo tee /etc/apt/sources.list.d/elastic-8.x.list
```

不要使用 `add-apt-repository`，因为它也会添加 `deb-src` 条目，但我们不提供源包。如果您添加了 `deb-src` 条目，将看到如下错误：

```bash
Unable to find expected entry 'main/source/Sources' in Release file
(Wrong sources.list entry or malformed file)
```

从 `/etc/apt/sources.list` 文件中删除 `deb-src` 条目，安装应该可以按预期工作。

可以使用以下命令安装 Kibana Debian 软件包：

```bash
sudo apt-get update && sudo apt-get install kibana
```

如果同一个 Kibana 存储库存在两个条目，将在 `apt-get update` 期间看到如下错误：

```bash
Duplicate sources.list entry https://artifacts.elastic.co/packages/8.x/apt/ ...`
```

Examine `/etc/apt/sources.list.d/kibana-8.x.list` for the duplicate entry or locate the duplicate entry amongst the files in `/etc/apt/sources.list.d/` and the `/etc/apt/sources.list` file.
检查 `/etc/apt/sources.list.d/kibana-8.x.list` `/etc/apt/sources.list.d/` 和 `/etc/apt/sources.list` 文件中的文件或找到重复的条目。

### 手动下载并安装

Kibana v8.15.1 的 Debian 软件包可以从网站下载，并按如下方式安装：

```bash
wget https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-amd64.deb
shasum -a 512 kibana-8.15.1-amd64.deb 
sudo dpkg -i kibana-8.15.1-amd64.deb
```

将 `shasum` 生成的 SHA 与[发布的 SHA](https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-amd64.deb.sha512)进行比较。

### 启动 Elasticsearch 并为 Kibana 生成注册令牌

首次启动 Elasticsearch 时，以下安全配置会自动发生：

- 启用身份验证和授权，并为内置超级用户 `Elastic` 生成密码。
- Certificates and keys for TLS are generated for the transport and HTTP  layer, and TLS is enabled and configured with these keys and  certificates. 
  TLS 的证书和密钥是为传输层和 HTTP 层生成的，TLS 是使用这些密钥和证书启用和配置的。

密码、证书和密钥将输出到您的终端。

然后，可以使用该工具 [ `elasticsearch-create-enrollment-token` ](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html) 为 Kibana 生成注册令牌：

```bash
bin/elasticsearch-create-enrollment-token -s kibana
```

启动 Kibana 并输入注册令牌，以安全地将 Kibana 与 Elasticsearch 连接起来。

### 通过配置文件配置 Kibana

默认情况下，Kibana 从 `/etc/kibana/kibana.yml` 文件加载其配置。

### Debian 软件包的目录布局

Debian 软件包将配置文件、日志和数据目录放在基于 Debian 的系统的适当位置：

| 类型    | 描述                                                         | 默认位置                    | 设置            |
| ------- | ------------------------------------------------------------ | --------------------------- | --------------- |
| home    | Kibana 主目录或 `$KIBANA_HOME`                               | `/usr/share/kibana`         |                 |
| bin     | 二进制脚本，包括用于启动 Kibana 服务器的 `kibana` 和用于安装插件的 `kibana-plugin` | `/usr/share/kibana/bin`     |                 |
| config  | 配置文件，包括 `kibana.yml`                                  | `/etc/kibana`               | `KBN_PATH_CONF` |
| data    | Kibana 及其插件写入磁盘的数据文件的位置                      | `/var/lib/kibana`           | `path.data`     |
| logs    | 日志文件位置                                                 | `/var/log/kibana`           | `path.logs`     |
| plugins | 插件文件位置。每个插件都将包含在一个子目录中。               | `/usr/share/kibana/plugins` |                 |

## 使用 RPM 安装

The RPM for Kibana can be [downloaded from our website](https://www.elastic.co/guide/en/kibana/current/rpm.html#install-rpm) or from our [RPM repository](https://www.elastic.co/guide/en/kibana/current/rpm.html#rpm-repo). It can be used to install Kibana on any RPM-based system such as OpenSuSE, SLES, Red Hat, and Oracle Enterprise.
RPM for Kibana 可以从我们的网站或我们的 [RPM 存储库](https://www.elastic.co/guide/en/kibana/current/rpm.html#rpm-repo)[下载](https://www.elastic.co/guide/en/kibana/current/rpm.html#install-rpm)。它可用于在任何基于 RPM 的系统（如 OpenSuSE、SLES、Red Hat 和 Oracle Enterprise）上安装 Kibana。

RPM install is not supported on distributions with old versions of RPM, such as SLES 11. Refer to [Install from archive on Linux or macOS](https://www.elastic.co/guide/en/kibana/current/targz.html) instead.
使用旧版本 RPM 的发行版（如 SLES 11）不支持 RPM 安装。请参阅 [在 Linux 或 macOS 上从存档安装](https://www.elastic.co/guide/en/kibana/current/targz.html)。

This package contains both free and subscription features. [Start a 30-day trial](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html) to try out all of the features.
此软件包包含免费和订阅功能。[开始 30 天试用](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html)以试用所有功能。

The latest stable version of Kibana can be found on the [Download Kibana](https://www.elastic.co/downloads/kibana) page. Other versions can be found on the [Past Releases page](https://www.elastic.co/downloads/past-releases).
Kibana 的最新稳定版本可以在[下载 Kibana](https://www.elastic.co/downloads/kibana) 页面上找到。其他版本可以在 [Past Releases 页面上](https://www.elastic.co/downloads/past-releases)找到。

For a step-by-step example of setting up the Elastic Stack on your own premises, try out our tutorial: [Installing a self-managed Elastic Stack](https://www.elastic.co/guide/en/elastic-stack/8.15/installing-stack-demo-self.html).
有关在您自己的本地设置 Elastic Stack 的分步示例，请试用我们的教程：[安装自行管理的 Elastic Stack](https://www.elastic.co/guide/en/elastic-stack/8.15/installing-stack-demo-self.html)。

### 导入 Elastic PGP 密钥

We sign all of our packages with the Elastic Signing Key (PGP key [D88E42B4](https://pgp.mit.edu/pks/lookup?op=vindex&search=0xD27D666CD88E42B4), available from https://pgp.mit.edu) with fingerprint:
我们使用带有指纹的弹性签名密钥（PGP 密钥[D88E42B4](https://pgp.mit.edu/pks/lookup?op=vindex&search=0xD27D666CD88E42B4)，可从 https://pgp.mit.edu 获得）对所有软件包进行签名：

```
4609 5ACC 8548 582C 1A26 99A9 D27D 666C D88E 42B4
```

Download and install the public signing key:
下载并安装公有签名密钥：

```sh
rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch
```

### 从 RPM 存储库安装

Create a file called `kibana.repo` in the `/etc/yum.repos.d/` directory for RedHat based distributions, or in the `/etc/zypp/repos.d/` directory for OpenSuSE based distributions, containing:
对于基于 RedHat 的发行版，请在 `/etc/yum.repos.d/` 目录中创建名为 `kibana.repo` 的文件，对于基于 OpenSuSE 的发行版，请在 `/etc/zypp/repos.d/` 目录中创建一个名为 kibana.repo 的文件，其中包含：

```sh
[kibana-8.x]
name=Kibana repository for 8.x packages
baseurl=https://artifacts.elastic.co/packages/8.x/yum
gpgcheck=1
gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
enabled=1
autorefresh=1
type=rpm-md
```

And your repository is ready for use. You can now install Kibana with one of the following commands:
您的存储库已准备就绪，可供使用。您现在可以使用以下命令之一安装 Kibana：

```sh
sudo yum install kibana 
sudo dnf install kibana 
sudo zypper install kibana 
```

|      | Use `yum` on older Red Hat based distributions. 在较旧的基于 Red Hat 的发行版上使用 `yum`。 |
| ---- | ------------------------------------------------------------ |
|      | Use `dnf` on Fedora and other newer Red Hat distributions. 在 Fedora 和其他较新的 Red Hat 发行版上使用 `dnf`。 |
|      | Use `zypper` on OpenSUSE based distributions 在基于 OpenSUSE 的发行版上使用 `zypper` |

### 手动下载并安装 RPM

The RPM for Kibana v8.15.1 can be downloaded from the website and installed as follows:
可以从网站下载适用于 Kibana v8.15.1 的 RPM，并按如下方式进行安装：

```sh
wget https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-x86_64.rpm
wget https://artifacts.elastic.co/downloads/kibana/kibana-8.15.1-x86_64.rpm.sha512
shasum -a 512 -c kibana-8.15.1-x86_64.rpm.sha512 
sudo rpm --install kibana-8.15.1-x86_64.rpm
```

|      | Compares the SHA of the downloaded RPM and the published checksum, which should output `kibana-{version}-x86_64.rpm: OK`. 将下载的 RPM 的 SHA 与已发布的校验和进行比较，后者应输出 `kibana-{version}-x86_64.rpm: OK` . |
| ---- | ------------------------------------------------------------ |
|      |                                                              |

### 启动 Elasticsearch 并为 Kibana 生成注册令牌

When you start Elasticsearch for the first time, the following security configuration occurs automatically:
首次启动 Elasticsearch 时，以下安全配置会自动发生：

- Authentication and authorization are enabled, and a password is generated for the `elastic` built-in superuser. 
  启用身份验证和授权，并为 `Elastic` 内置超级用户生成密码。
- Certificates and keys for TLS are generated for the transport and HTTP  layer, and TLS is enabled and configured with these keys and  certificates. 
  TLS 的证书和密钥是为传输层和 HTTP 层生成的，TLS 是使用这些密钥和证书启用和配置的。

The password and certificate and keys are output to your terminal.
密码、证书和密钥将输出到您的终端。

You can then generate an enrollment token for Kibana with the [`elasticsearch-create-enrollment-token`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html) tool:
然后，您可以使用该工具[ `elasticsearch-create-enrollment-token` ](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html)为 Kibana 生成注册令牌：

```sh
bin/elasticsearch-create-enrollment-token -s kibana
```

Start Kibana and enter the enrollment token to securely connect Kibana with Elasticsearch.
启动 Kibana 并输入注册令牌，以安全地将 Kibana 与 Elasticsearch 连接起来。

### Run Kibana with `systemd` 使用 `systemd` 运行 Kibana

To configure Kibana to start automatically when the system starts, run the following commands:
要将 Kibana 配置为在系统启动时自动启动，请运行以下命令：

```sh
sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable kibana.service
```

Kibana can be started and stopped as follows:
Kibana 可以按如下方式启动和停止：

```sh
sudo systemctl start kibana.service
sudo systemctl stop kibana.service
```

These commands provide no feedback as to whether Kibana was started successfully or not. Log information can be accessed via `journalctl -u kibana.service`.
这些命令不会提供有关 Kibana 是否已成功启动的反馈。日志信息可通过 `journalctl -u kibana.service` 访问。

### 通过配置文件配置 Kibana

Kibana loads its configuration from the `/etc/kibana/kibana.yml` file by default.  The format of this config file is explained in [Configuring Kibana](https://www.elastic.co/guide/en/kibana/8.15/settings.html).
默认情况下，Kibana 从 `/etc/kibana/kibana.yml` 文件加载其配置。此配置文件的格式在 [配置 Kibana](https://www.elastic.co/guide/en/kibana/8.15/settings.html) 中进行了说明。

### RPM 的目录布局

The RPM places config files, logs, and the data directory in the appropriate locations for an RPM-based system:
RPM 将配置文件、日志和数据目录放置在基于 RPM 的系统的适当位置：

| Type 类型        | Description 描述                                             | Default Location 默认位置   | Setting 设置           |
| ---------------- | ------------------------------------------------------------ | --------------------------- | ---------------------- |
| **home 家**      | Kibana home directory or `$KIBANA_HOME` Kibana 主目录或 `$KIBANA_HOME` | `/usr/share/kibana`         |                        |
| **bin 站**       | Binary scripts including `kibana` to start the Kibana server    and `kibana-plugin` to install plugins 二进制脚本，包括用于启动 Kibana 服务器的 `kibana` 和用于安装插件的 `kibana-plugin` | `/usr/share/kibana/bin`     |                        |
| **config 配置**  | Configuration files including `kibana.yml` 配置文件，包括 `kibana.yml` | `/etc/kibana`               | `KBN_PATH_CONF`        |
| **data 数据**    | The location of the data files written to disk by Kibana and its plugins Kibana 及其插件写入磁盘的数据文件的位置 | `/var/lib/kibana`           | `path.data`            |
| **logs 原木**    | Logs files location 日志文件位置                             | `/var/log/kibana`           | `path.logs` `路径日志` |
| **plugins 插件** | Plugin files location. Each plugin will be contained in a subdirectory. 插件文件位置。每个插件都将包含在一个子目录中。 | `/usr/share/kibana/plugins` |                        |

## 使用 Docker 安装

Docker images for Kibana are available from the Elastic Docker registry. The base image is [ubuntu:20.04](https://hub.docker.com/_/ubuntu).
适用于 Kibana 的 Docker 映像可从 Elastic Docker 注册表获取。基础映像为 [ubuntu：20.04](https://hub.docker.com/_/ubuntu)。

A list of all published Docker images and tags is available at [www.docker.elastic.co](https://www.docker.elastic.co). The source code is in [GitHub](https://github.com/elastic/dockerfiles/tree/8.15/kibana).
[www.docker.elastic.co](https://www.docker.elastic.co) 上提供了所有已发布的 Docker 镜像和标签的列表。源代码位于 [GitHub](https://github.com/elastic/dockerfiles/tree/8.15/kibana) 中。

These images contain both free and subscription features. [Start a 30-day trial](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html) to try out all of the features.
这些映像包含免费和订阅功能。[开始 30 天试用](https://www.elastic.co/guide/en/kibana/current/managing-licenses.html)以试用所有功能。

### 在 Docker 中运行 Kibana 进行开发

[edit 编辑](https://github.com/elastic/kibana/edit/8.15/docs/setup/docker.asciidoc)

Use Docker commands to run Kibana on a single-node Elasticsearch cluster for development or testing.
使用 Docker 命令在单节点 Elasticsearch 集群上运行 Kibana 以进行开发或测试。

This setup doesn’t run multiple Elasticsearch nodes by default. To create a multi-node cluster with Kibana, use Docker Compose instead. Refer to [Start a multi-node cluster with Docker Compose](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/docker.html#docker-compose-file) in the Elasticsearch documentation.
默认情况下，此设置不会运行多个 Elasticsearch 节点。要使用 Kibana 创建多节点集群，请改用 Docker Compose。请参阅 Elasticsearch 文档中[的使用 Docker Compose 启动多节点集群](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/docker.html#docker-compose-file)。

1. Install Docker. Visit [Get Docker](https://docs.docker.com/get-docker/) to install Docker for your environment.
   安装 Docker。访问[获取 Docker](https://docs.docker.com/get-docker/) 为您的环境安装 Docker。

   If using Docker Desktop, make sure to allocate at least 4GB of memory. You can adjust memory usage in Docker Desktop by going to **Settings > Resources**.
   如果使用 Docker Desktop，请确保分配至少 4GB 的内存。您可以通过转到**设置 > 资源**来调整 Docker Desktop 中的内存使用情况。

2. Create a new Docker network for Elasticsearch and Kibana.
   为 Elasticsearch 和 Kibana 创建新的 Docker 网络。

   ```sh
   docker network create elastic
   ```

3. Pull the Elasticsearch Docker image.
   拉取 Elasticsearch Docker 镜像。

   ```sh
   docker pull docker.elastic.co/elasticsearch/elasticsearch:8.15.1
   ```

4. Optional: Install [Cosign](https://docs.sigstore.dev/system_config/installation/) for your environment. Then use Cosign to verify the Elasticsearch image’s signature.
   可选：为您的环境安装 [Cosign](https://docs.sigstore.dev/system_config/installation/)。然后使用 Cosign 验证 Elasticsearch 映像的签名。

   ```sh
   wget https://artifacts.elastic.co/cosign.pub
   cosign verify --key cosign.pub docker.elastic.co/elasticsearch/elasticsearch:8.15.1
   ```

   The `cosign` command prints the check results and the signature payload in JSON format:
   `cosign` 命令以 JSON 格式打印检查结果和签名有效负载：

   ```sh
   Verification for docker.elastic.co/elasticsearch/elasticsearch:8.15.1 --
   The following checks were performed on each of these signatures:
     - The cosign claims were validated
     - Existence of the claims in the transparency log was verified offline
     - The signatures were verified against the specified public key
   ```

5. Start an Elasticsearch container.
   启动 Elasticsearch 容器。

   ```sh
   docker run --name es01 --net elastic -p 9200:9200 -it -m 1GB docker.elastic.co/elasticsearch/elasticsearch:8.15.1
   ```

   Use the `-m` flag to set a memory limit for the container. This removes the need to [manually set the JVM size](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/docker.html#docker-set-heap-size).
   使用 `-m` 标志设置容器的内存限制。这样就无需[手动设置 JVM 大小](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/docker.html#docker-set-heap-size)。

   The command prints the `elastic` user password and an enrollment token for Kibana.
   该命令打印 Kibana 的`弹性用户密码`和注册令牌。

6. Copy the generated `elastic` password and enrollment token. These credentials are only shown when you start Elasticsearch for the first time. You can regenerate the credentials using the following commands.
   复制`生成的弹性`密码和注册令牌。这些凭证仅在您首次启动 Elasticsearch 时显示。您可以使用以下命令重新生成凭证。

   ```sh
   docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic
   docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana
   ```

7. Pull the Kibana Docker image.
   拉取 Kibana Docker 镜像。

   ```sh
   docker pull docker.elastic.co/kibana/kibana:8.15.1
   ```

8. Optional: Verify the Kibana image’s signature.
   可选：验证 Kibana 映像的签名。

   ```sh
   wget https://artifacts.elastic.co/cosign.pub
   cosign verify --key cosign.pub docker.elastic.co/kibana/kibana:8.15.1
   ```

9. Start a Kibana container.
   启动 Kibana 容器。

   ```sh
   docker run --name kib01 --net elastic -p 5601:5601 docker.elastic.co/kibana/kibana:8.15.1
   ```

10. When Kibana starts, it outputs a unique generated link to the terminal. To access Kibana, open this link in a web browser. 
    当 Kibana 启动时，它会向终端输出一个生成的唯一链接。要访问 Kibana，请在 Web 浏览器中打开此链接。

11. In your browser, enter the enrollment token that was generated when you started Elasticsearch.
    在浏览器中，输入启动 Elasticsearch 时生成的注册令牌。

    To regenerate the token, run:
    要重新生成令牌，请运行：

    ```sh
    docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana
    ```

12. Log in to Kibana as the `elastic` user with the password that was generated when you started Elasticsearch.
    以 `Elastic` 用户身份登录 Kibana，并使用启动 Elasticsearch 时生成的密码。

    To regenerate the password, run:
    要重新生成密码，请运行：

    ```sh
    docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic
    ```

#### Remove Docker containers 删除 Docker 容器

[edit 编辑](https://github.com/elastic/kibana/edit/8.15/docs/setup/docker.asciidoc)

To remove the containers and their network, run:
要删除容器及其网络，请运行：

```sh
# Remove the Elastic network
docker network rm elastic

# Remove the Elasticsearch container
docker rm es01

# Remove the Kibana container
docker rm kib01
```

### Configure Kibana on Docker 在 Docker 上配置 Kibana

[edit 编辑](https://github.com/elastic/kibana/edit/8.15/docs/setup/docker.asciidoc)

The Docker images provide several methods for configuring Kibana. The conventional approach is to provide a `kibana.yml` file as described in [Configuring Kibana](https://www.elastic.co/guide/en/kibana/8.15/settings.html), but it’s also possible to use environment variables to define settings.
Docker 镜像提供了几种配置 Kibana 的方法。传统方法是提供 `kibana.yml` 文件，如[配置 Kibana](https://www.elastic.co/guide/en/kibana/8.15/settings.html) 中所述，但也可以使用环境变量来定义设置。

#### Bind-mounted configuration 绑定挂载配置

[edit 编辑](https://github.com/elastic/kibana/edit/8.15/docs/setup/docker.asciidoc)

One way to configure Kibana on Docker is to provide `kibana.yml` via bind-mounting. With `docker-compose`, the bind-mount can be specified like this:
在 Docker 上配置 Kibana 的一种方法是通过绑定挂载提供 `kibana.yml`。使用 `docker-compose` 时，可以像这样指定 bind-mount：

```yaml
version: '2'
services:
  kibana:
    image: docker.elastic.co/kibana/kibana:8.15.1
    volumes:
      - ./kibana.yml:/usr/share/kibana/config/kibana.yml
```

### Persist the Kibana keystore 保留 Kibana 密钥库

[edit 编辑](https://github.com/elastic/kibana/edit/8.15/docs/setup/docker.asciidoc)

By default, Kibana auto-generates a keystore file for secure settings at startup. To persist your [secure settings](https://www.elastic.co/guide/en/kibana/8.15/secure-settings.html), use the `kibana-keystore` utility to bind-mount the parent directory of the keystore to the container. For example:
默认情况下，Kibana 会在启动时自动生成密钥库文件以进行安全设置。要保留[您的安全设置](https://www.elastic.co/guide/en/kibana/8.15/secure-settings.html)，请使用 `kibana-keystore` 实用程序将密钥库的父目录绑定到容器。例如：

```sh
docker run -it --rm -v full_path_to/config:/usr/share/kibana/config -v full_path_to/data:/usr/share/kibana/data docker.elastic.co/kibana/kibana:8.15.1 bin/kibana-keystore create
docker run -it --rm -v full_path_to/config:/usr/share/kibana/config -v full_path_to/data:/usr/share/kibana/data docker.elastic.co/kibana/kibana:8.15.1 bin/kibana-keystore add test_keystore_setting
```

#### Environment variable configuration 环境变量配置

Under Docker, Kibana can be configured via environment variables. When the container starts, a helper process checks the environment for variables that can be mapped to Kibana command-line arguments.
在 Docker 下，可以通过环境变量配置 Kibana。当容器启动时，帮助程序进程会检查环境中是否有可以映射到 Kibana 命令行参数的变量。

For compatibility with container orchestration systems, these environment variables are written in all capitals, with underscores as word separators. The helper translates these names to valid Kibana setting names.
为了与容器编排系统兼容，这些环境变量全部大写，下划线作为单词分隔符。帮助程序将这些名称转换为有效的 Kibana 设置名称。

All information that you include in environment variables is visible through the `ps` command, including sensitive information.
环境变量中包含的所有信息（包括敏感信息）都可以通过 `ps` 命令看到。

Some example translations are shown here:
以下是一些示例翻译：

**Table 1. Example Docker Environment Variables
表 1.示例 Docker 环境变量**

| **Environment Variable 环境变量** | **Kibana Setting Kibana 设置**                   |
| --------------------------------- | ------------------------------------------------ |
| `SERVER_NAME`                     | `server.name`                                    |
| `SERVER_BASEPATH`                 | `server.basePath`                                |
| `ELASTICSEARCH_HOSTS`             | `elasticsearch.hosts` `elasticsearch.hosts` 文件 |

In general, any setting listed in [*Configure Kibana*](https://www.elastic.co/guide/en/kibana/current/settings.html) can be configured with this technique.
通常，[*Configure Kibana*](https://www.elastic.co/guide/en/kibana/current/settings.html) 中列出的任何设置都可以使用此技术进行配置。

Supplying array options can be tricky. The following example shows the syntax for providing an array to `ELASTICSEARCH_HOSTS`.
提供数组选项可能很棘手。以下示例显示了向 `ELASTICSEARCH_HOSTS` 提供数组的语法。

These variables can be set with `docker-compose` like this:
这些变量可以使用 `docker-compose` 进行设置，如下所示：

```yaml
version: '2'
services:
  kibana:
    image: docker.elastic.co/kibana/kibana:8.15.1
    environment:
      SERVER_NAME: kibana.example.org
      ELASTICSEARCH_HOSTS: '["http://es01:9200","http://es02:9200","http://es03:9200"]'
```

Since environment variables are translated to CLI arguments, they take precedence over settings configured in `kibana.yml`.
由于环境变量被转换为 CLI 参数，因此它们优先于 `kibana.yml` 中配置的设置。

#### Docker defaults Docker 默认值

The following settings have different default values when using the Docker images:
使用 Docker 镜像时，以下设置具有不同的默认值：

| `server.host` `服务器主机`                       | `"0.0.0.0"` `“0.0.0.0”`     |
| ------------------------------------------------ | --------------------------- |
| `server.shutdownTimeout` `server.shutdown超时`   | `"5s"` `“5 秒”`             |
| `elasticsearch.hosts` `elasticsearch.hosts` 文件 | `http://elasticsearch:9200` |
| `monitoring.ui.container.elasticsearch.enabled`  | `true` `真`                 |

These settings are defined in the default `kibana.yml`. They can be overridden with a [custom `kibana.yml`](https://www.elastic.co/guide/en/kibana/current/docker.html#bind-mount-config) or via [environment variables](https://www.elastic.co/guide/en/kibana/current/docker.html#environment-variable-config).
这些设置在默认`kibana.yml`中定义。可以使用[自定义`kibana.yml`](https://www.elastic.co/guide/en/kibana/current/docker.html#bind-mount-config)或通过[环境变量](https://www.elastic.co/guide/en/kibana/current/docker.html#environment-variable-config)覆盖它们。

If replacing `kibana.yml` with a custom version, be sure to copy the defaults to the custom file if you want to retain them. If not, they will be "masked" by the new file.
如果将 `kibana.yml` 替换为自定义版本，请务必将默认值复制到自定义文件（如果要保留它们）。否则，它们将被新文件“屏蔽”。

## 启动和停止 Kibana

The method for starting and stopping Kibana varies depending on how you installed it.  If a password protected keystore is used, the environment variable `KBN_KEYSTORE_PASSPHRASE_FILE` can be used to point to a file containing the password, the environment variable `KEYSTORE_PASSWORD` can be defined, or you will be prompted to enter to enter the password on startup,
启动和停止 Kibana 的方法因安装方式而异。如果使用受密码保护的密钥库，则可以使用环境变量 `KBN_KEYSTORE_PASSPHRASE_FILE` 指向包含密码的文件，可以定义环境变量 `KEYSTORE_PASSWORD`，或者系统会提示您在启动时输入密码。

### 存档包 （`.tar.gz`）

如果使用 `.tar.gz` 软件包在 Linux 或 Darwin 上安装了 Kibana，则可以从命令行启动和停止 Kibana。

#### 从命令行运行 Kibana

可以从命令行启动 Kibana，如下所示：

```bash
./bin/kibana
```

默认情况下，Kibana 在前台运行，将其日志打印到标准输出 （`stdout`），并且可以通过按 **Ctrl-C** 来停止。

如果这是第一次启动 Kibana，此命令会在终端中生成一个唯一链接，以便向 Elasticsearch 注册您的 Kibana 实例。

1. 在终端中，单击生成的链接以在浏览器中打开 Kibana。
2. 在浏览器中，粘贴启动 Elasticsearch 时在终端中生成的注册令牌，然后单击按钮以将 Kibana 实例与 Elasticsearch 连接。
3. 以 `Elastic` 用户身份登录 Kibana，并使用启动 Elasticsearch 时生成的密码。

如果需要为 `elastic` 用户或其他内置用户重置密码，请运行 [`elasticsearch-reset-password`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/reset-password.html) 工具。要为 Kibana 或 Elasticsearch 节点生成新的注册令牌，请运行该工具[ `elasticsearch-create-enrollment-token` ](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html)。这些工具位于 Elasticsearch `bin` 目录中。

### 存档包 （`.zip`）

如果在 Windows 上使用 `.zip` 软件包安装了 Kibana，则可以从命令行停止和启动 Kibana。

#### 从命令行运行 Kibana

可以从命令行启动 Kibana，如下所示：

```cmd
.\bin\kibana.bat
```

默认情况下，Kibana 在前台运行，将其日志打印到 `STDOUT`，并且可以通过按 **Ctrl-C** 来停止。

如果这是第一次启动 Kibana，此命令会在您的终端中生成一个唯一链接，以便向 Elasticsearch 注册您的 Kibana 实例。

1. 在终端中，单击生成的链接以在浏览器中打开 Kibana。
2. 在浏览器中，粘贴启动 Elasticsearch 时在终端中生成的注册令牌，然后单击按钮以将 Kibana 实例与 Elasticsearch 连接。
3. 以 `Elastic` 用户身份登录 Kibana，并使用启动 Elasticsearch 时生成的密码。

如果需要为 `elastic` 用户或其他内置用户重置密码，请运行 [`elasticsearch-reset-password`](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/reset-password.html) 工具。要为 Kibana 或 Elasticsearch 节点生成新的注册令牌，请运行该工具[ `elasticsearch-create-enrollment-token` ](https://www.elastic.co/guide/en/elasticsearch/reference/8.15/create-enrollment-token.html)。这些工具位于 Elasticsearch `bin` 目录中。

### Debian 和 RPM 软件包

#### 使用 `systemd` 运行 Kibana

要将 Kibana 配置为在系统启动时自动启动，请运行以下命令：

```sh
sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable kibana.service
```

Kibana 可以按如下方式启动和停止：

```sh
sudo systemctl start kibana.service
sudo systemctl stop kibana.service
```

这些命令不会提供有关 Kibana 是否已成功启动的反馈。日志信息可通过 `journalctl -u kibana.service` 访问。