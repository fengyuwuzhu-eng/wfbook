# 配置要求

[TOC]

## 硬件配置

### 控制器

控制器节点运行 Identity 服务、Image 服务、Placement 服务、Compute 管理部分、Networking 管理部分、各种 Networking 代理和 Dashboard 。它还包括支持服务，如 SQL 数据库、消息队列和 NTP 。

可选地，控制器节点运行部分块存储、对象存储、Orchestration 和 Telemetry 服务。

控制器节点至少需要两个网络接口。

### 计算

The compute node runs the [hypervisor](https://docs.openstack.org/install-guide/common/glossary.html#term-hypervisor) portion of Compute that operates instances. 计算节点运行 compute 的管理程序部分，该部分操作实例。默认情况下，Compute 使用 KVM 管理程序。计算节点还运行网络服务代理，该代理将实例连接到虚拟网络，并通过安全组向实例提供防火墙服务。

可以部署多个计算节点。每个节点至少需要两个网络接口。

### 块设备存储

The optional Block Storage node contains the disks that the Block Storage and Shared File System services provision for instances.可选的块存储节点包含块存储和共享文件系统服务为实例提供的磁盘。

为了简单起见，计算节点和该节点之间的服务流量使用管理网络。生产环境应实施单独的存储网络，以提高性能和安全性。

可以部署多个块存储节点。每个节点至少需要一个网络接口。

### 对象存储

The optional Object Storage node contain the disks that the Object Storage service uses for storing accounts, containers, and objects.可选的对象存储节点包含对象存储服务用于存储帐户、容器和对象的磁盘。

为了简单起见，计算节点和该节点之间的服务流量使用管理网络。生产环境应实施单独的存储网络，以提高性能和安全性。

此服务需要两个节点。每个节点至少需要一个网络接口。可以部署两个以上的对象存储节点。

## 网络

从下面的虚拟网络选项中选择一种选项。

### 网络选项1：提供商网络

提供商网络选项以最简单的方式部署 OpenStack 网络服务，主要使用第2层（桥接 / 交换）服务和 VLAN 网络分段。本质上，它将虚拟网络连接到物理网络，并依靠物理网络基础设施提供第 3 层（路由）服务。此外，DHCP 服务向实例提供 IP 地址信息。

OpenStack 用户需要有关底层网络基础设施的更多信息，以创建与基础设施完全匹配的虚拟网络。

> 警告:
>
> 此选项不支持自助服务（专用）网络、第 3 层（路由）服务以及 LBaaS 和 FWaaS 等高级服务。如果需要这些功能，请考虑下面的自助服务网络选项。

 ![](../../Image/n/network1-services.png)

### 网络选项2：自助服务网络

自助服务网络选项通过第 3 层（路由）服务增强了提供商网络选项，该服务支持使用覆盖分割方法（如 VXLAN ）的自助服务网络。本质上，它使用 NAT 将虚拟网络路由到物理网络。此外，该选项为LBaaS 和 FWaaS 等高级服务提供了基础。

OpenStack 用户可以在不了解数据网络基础设施的情况下创建虚拟网络。如果相应地配置了第 2 层插件，这也可以包括 VLAN 网络。

 ![](../../Image/n/network2-services.png)                                             

## 环境

本节介绍如何使用示例架构配置控制器节点和一个计算节点。

必须用有管理员权限的帐号来配置每个节点。

Note

The **systemctl enable** call on openSUSE outputs a warning message when the service uses SysV Init scripts instead of native systemd files. This warning can be ignored.

以下最小需求支持概念验证环境，使用核心服务和几个 CirrOS 实例:

- 控制节点: 1 处理器, 4 GB 内存, 及5 GB 存储
- 计算节点: 1 处理器, 2 GB 内存, 及10 GB 存储

每个节点配置一个磁盘分区满足大多数的基本安装。但是，对于有额外服务如块存储服务的，应该考虑采用Logical Volume Manager (LVM)  进行安装。

## 安全

OpenStack 服务支持各种各样的安全方式，包括密码 password、policy 和 encryption，支持的服务包括数据库服务器，且消息 broker 至少支持 password 的安全方式。

为了简化安装过程，本指南只包含了可适用的密码安全。可以手动创建安全密码，使用`pwgen <http://sourceforge.net/projects/pwgen/>`__工具生成密码或者运行下面的命令：

```bash
openssl rand -hex 10
```

对 OpenStack 服务而言，本指南使用`SERVICE_PASS` 表示服务帐号密码，使用`SERVICE_DBPASS` 表示数据库密码。

下面的表格给出了需要密码的服务列表以及它们在指南中关联关系：

| 密码名称                 | 描述                                   |
| ------------------------ | -------------------------------------- |
| 数据库密码(不能使用变量) | 数据库的root密码                       |
| `ADMIN_PASS`             | `admin` 用户密码                       |
| `CEILOMETER_DBPASS`      | Telemetry 服务的数据库密码             |
| `CEILOMETER_PASS`        | Telemetry 服务的 ceilometer 用户密码   |
| `CINDER_DBPASS`          | 块设备存储服务的数据库密码             |
| `CINDER_PASS`            | 块设备存储服务的 `cinder` 密码         |
| `DASH_DBPASS`            | Database password for the dashboard    |
| `DEMO_PASS`              | `demo` 用户的密码                      |
| `GLANCE_DBPASS`          | 镜像服务的数据库密码                   |
| `GLANCE_PASS`            | 镜像服务的 `glance` 用户密码           |
| `HEAT_DBPASS`            | Orchestration 服务的数据库密码         |
| `HEAT_DOMAIN_PASS`       | Orchestration 域的密码                 |
| `HEAT_PASS`              | Orchestration 服务中``heat``用户的密码 |
| `KEYSTONE_DBPASS`        | 认证服务的数据库密码                   |
| `NEUTRON_DBPASS`         | 网络服务的数据库密码                   |
| `NEUTRON_PASS`           | 网络服务的 `neutron` 用户密码          |
| `NOVA_DBPASS`            | 计算服务的数据库密码                   |
| `NOVA_PASS`              | 计算服务中`nova` 用户的密码            |
| `RABBIT_PASS`            | RabbitMQ的 `guest` 用户密码            |
| `SWIFT_PASS`             | 对象存储服务用户 `swift` 的密码        |

OpenStack和配套服务在安装和操作过程中需要管理员权限。

网络服务设定内核网络参数的默认值并且修改防火墙规则。

## 操作系统

- openSUSE 和 SUSE Linux Enterprise Server

  * openSUSE Leap 42.3
  * openSUSE Leap 15
  * SUSE Linux Enterprise Server 12 SP4
  * SUSE Linux Enterprise Server 15

- Red Hat Enterprise Linux 和 CentOS

  * Red Hat Enterprise Linux 7

  * Red Hat Enterprise Linux 8

  > Note:
  >
  > OpenStack Wallaby is available for CentOS Stream 8.
  >
  > OpenStack Ussuri and Victoria are available for both CentOS 8 and RHEL 8. 
  >
  > OpenStack Train and earlier are available on both CentOS 7 and RHEL 7.

- Ubuntu

  * Ubuntu 16.04+ (LTS).
  
  > Note
  >
  > The Ubuntu Cloud Archive pockets for Pike and Queens provide OpenStack packages for Ubuntu 16.04 LTS; 
  >
  > OpenStack Queens is installable direct using Ubuntu 18.04 LTS;
  >
  > the Ubuntu Cloud Archive pockets for Rocky and Stein provide OpenStack packages for Ubuntu 18.04 LTS;
  >
  > the Ubuntu Cloud Archive pocket for Victoria provides OpenStack packages for Ubuntu 20.04 LTS.