# 配置

[TOC]

## 概述

Placement 的静态配置位于两个主要文件中：`placement.conf` 和 `policy.yaml` 。

## 配置

### Configuration Options 配置选项

​                                          

The following is an overview of all available configuration options in Placement.  For a sample configuration file, refer to [Sample Configuration File](https://docs.openstack.org/placement/yoga/configuration/sample-config.html).
以下是 Placement 中所有可用配置选项的概述。有关示例配置文件，请参阅示例配置文件。

#### DEFAULT[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#default) 默认 ¶

- tempdir[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.tempdir)

  Type 类型 string 字符串 Default 违约 `<None>`  Explicitly specify the temporary working directory. 显式指定临时工作目录。

- pybasedir[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.pybasedir)

  Type 类型 string 字符串 Default 违约 `<Path>`  This option has a sample default set, which means that its actual default value may vary from the one documented above. 此选项具有示例默认值集，这意味着其实际默认值可能与上面记录的默认值不同。 The directory where the Placement python modules are installed. 放置 python 模块的安装目录。 This is the default path for other config options which need to persist Placement internal data. It is very unlikely that you need to change this option from its default value. 这是其他需要保留放置内部数据的配置选项的默认路径。您不太可能需要更改此选项的默认值。 Possible values: 可能的值： The full path to a directory. 目录的完整路径。 Related options: 相关选项： `state_path`

- state_path[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.state_path)

  Type 类型 string 字符串 Default 违约 `$pybasedir`  The top-level directory for maintaining state used in Placement. 用于维护 Placement 中使用的状态的顶级目录。 This directory is used to store Placement’s internal state. It is used by some tests that have behaviors carried over from Nova. 此目录用于存储 Placement 的内部状态。它被一些具有从 Nova 继承而来的行为的测试使用。 Possible values: 可能的值： The full path to a directory. Defaults to value provided in `pybasedir`. 目录的完整路径。默认值为 `pybasedir` 中提供的值。

- debug[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.debug) 调试 ¶

  Type 类型 boolean 布尔 Default 违约 `False` Mutable 可变 This option can be changed without restarting. 此选项无需重新启动即可更改。  If set to true, the logging level will be set to DEBUG instead of the default INFO level. 如果设置为 true，则日志记录级别将设置为 DEBUG，而不是默认的 INFO 级别。

- log_config_append[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.log_config_append)

  Type 类型 string 字符串 Default 违约 `<None>` Mutable 可变 This option can be changed without restarting. 此选项无需重新启动即可更改。  The name of a logging configuration file. This file is appended to any  existing logging configuration files. For details about logging  configuration files, see the Python logging module documentation. Note  that when logging configuration files are used then all logging  configuration is set in the configuration file and other logging  configuration options are ignored (for example, log-date-format). 日志记录配置文件的名称。此文件将追加到任何现有的日志记录配置文件中。有关日志记录配置文件的详细信息，请参阅 Python  日志记录模块文档。请注意，使用日志记录配置文件时，将在配置文件中设置所有日志记录配置，并忽略其他日志记录配置选项（例如，log-date-format）。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id1) 已弃用的变体 ¶   Group 群 Name 名字  DEFAULT 违约 log-config 日志配置 DEFAULT 违约 log_config

- log_date_format[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.log_date_format)

  Type 类型 string 字符串 Default 违约 `%Y-%m-%d %H:%M:%S`  Defines the format string for %(asctime)s in log records. Default: the value  above . This option is ignored if log_config_append is set. 定义日志记录中 %（asctime）s 的格式字符串。默认值：上面的值。如果设置了此选项log_config_append则忽略此选项。

- log_file[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.log_file)

  Type 类型 string 字符串 Default 违约 `<None>`  (Optional) Name of log file to send logging output to. If no default is set,  logging will go to stderr as defined by use_stderr. This option is  ignored if log_config_append is set. （可选）要将日志记录输出发送到的日志文件的名称。如果未设置默认值，则日志记录将转到 use_stderr 定义的 stderr。如果设置了此选项log_config_append则忽略此选项。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id2) 已弃用的变体 ¶   Group 群 Name 名字  DEFAULT 违约 logfile 日志文件

- log_dir[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.log_dir)

  Type 类型 string 字符串 Default 违约 `<None>`  (Optional) The base directory used for relative log_file  paths. This option is ignored if log_config_append is set. （可选）用于相对log_file路径的基目录。如果设置了此选项log_config_append则忽略此选项。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id3) 已弃用的变体 ¶   Group 群 Name 名字  DEFAULT 违约 logdir

- watch_log_file[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.watch_log_file)

  Type 类型 boolean 布尔 Default 违约 `False`  Uses logging handler designed to watch file system. When log file is moved  or removed this handler will open a new log file with specified path  instantaneously. It makes sense only if log_file option is specified and Linux platform is used. This option is ignored if log_config_append is  set. 使用旨在监视文件系统的日志记录处理程序。移动或删除日志文件时，此处理程序将立即打开具有指定路径的新日志文件。仅当指定log_file选项并使用 Linux 平台时才有意义。如果设置了此选项log_config_append则忽略此选项。

- use_syslog[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.use_syslog)

  Type 类型 boolean 布尔 Default 违约 `False`  Use syslog for logging. Existing syslog format is DEPRECATED and will be  changed later to honor RFC5424. This option is ignored if  log_config_append is set. 使用 syslog 进行日志记录。现有的 syslog 格式已弃用，稍后将进行更改以遵守RFC5424。如果设置了此选项log_config_append则忽略此选项。

- use_journal[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.use_journal)

  Type 类型 boolean 布尔 Default 违约 `False`  Enable journald for logging. If running in a systemd environment you may wish  to enable journal support. Doing so will use the journal native protocol which includes structured metadata in addition to log messages.This  option is ignored if log_config_append is set. 启用 journald 进行日志记录。如果在 systemd 环境中运行，您可能希望启用日志支持。这样做将使用日志本机协议，该协议除了日志消息外，还包括结构化元数据。如果设置了此选项log_config_append则忽略此选项。

- syslog_log_facility[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.syslog_log_facility)

  Type 类型 string 字符串 Default 违约 `LOG_USER`  Syslog facility to receive log lines. This option is ignored if log_config_append is set. 用于接收日志行的 Syslog 工具。如果设置了此选项log_config_append则忽略此选项。

- use_json[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.use_json)

  Type 类型 boolean 布尔 Default 违约 `False`  Use JSON formatting for logging. This option is ignored if log_config_append is set. 使用 JSON 格式进行日志记录。如果设置了此选项log_config_append则忽略此选项。

- use_stderr[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.use_stderr)

  Type 类型 boolean 布尔 Default 违约 `False`  Log output to standard error. This option is ignored if log_config_append is set. 将输出记录为标准错误。如果设置了此选项log_config_append则忽略此选项。

- use_eventlog[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.use_eventlog)

  Type 类型 boolean 布尔 Default 违约 `False`  Log output to Windows Event Log. 将输出记录到 Windows 事件日志。

- log_rotate_interval[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.log_rotate_interval)

  Type 类型 integer 整数 Default 违约 `1`  The amount of time before the log files are rotated. This option is ignored unless log_rotation_type is set to “interval”. 轮换日志文件之前的时间量。除非log_rotation_type设置为“interval”，否则将忽略此选项。

- log_rotate_interval_type[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.log_rotate_interval_type)

  Type 类型 string 字符串 Default 违约 `days` Valid Values 有效值 Seconds, Minutes, Hours, Days, Weekday, Midnight 秒、分、时、日、平日、午夜  Rotation interval type. The time of the last file change (or the time when the  service was started) is used when scheduling the next rotation. 轮换间隔类型。在计划下一次轮换时，将使用上次文件更改的时间（或服务启动的时间）。

- max_logfile_count[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.max_logfile_count)

  Type 类型 integer 整数 Default 违约 `30`  Maximum number of rotated log files. 轮换日志文件的最大数量。

- max_logfile_size_mb[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.max_logfile_size_mb)

  Type 类型 integer 整数 Default 违约 `200`  Log file maximum size in MB. This option is ignored if “log_rotation_type” is not set to “size”. 日志文件的最大大小（以 MB 为单位）。如果“log_rotation_type”未设置为“size”，则忽略此选项。

- log_rotation_type[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.log_rotation_type)

  Type 类型 string 字符串 Default 违约 `none` Valid Values 有效值 interval, size, none 间隔、大小、无  Log rotation type. 日志轮换类型。 Possible values 可能的值 interval 间隔Rotate logs at predefined time intervals. 按预定义的时间间隔轮换日志。 size 大小Rotate logs once they reach a predefined size. 一旦日志达到预定义的大小，就轮换日志。 none 没有Do not rotate log files. 不要轮换日志文件。

- logging_context_format_string[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.logging_context_format_string)

  Type 类型 string 字符串 Default 违约 `%(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [%(request_id)s %(user_identity)s] %(instance)s%(message)s`  Format string to use for log messages with context. Used by oslo_log.formatters.ContextFormatter 设置字符串格式以用于具有上下文的日志消息。由 oslo_log.formatters.ContextFormatter 使用

- logging_default_format_string[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.logging_default_format_string)

  Type 类型 string 字符串 Default 违约 `%(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [-] %(instance)s%(message)s`  Format string to use for log messages when context is undefined. Used by oslo_log.formatters.ContextFormatter 在未定义上下文时用于日志消息的格式字符串。由 oslo_log.formatters.ContextFormatter 使用

- logging_debug_format_suffix[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.logging_debug_format_suffix)

  Type 类型 string 字符串 Default 违约 `%(funcName)s %(pathname)s:%(lineno)d`  Additional data to append to log message when logging level for the message is  DEBUG. Used by oslo_log.formatters.ContextFormatter 当消息的日志记录级别为 DEBUG 时，要追加到日志消息的其他数据。由 oslo_log.formatters.ContextFormatter 使用

- logging_exception_prefix[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.logging_exception_prefix)

  Type 类型 string 字符串 Default 违约 `%(asctime)s.%(msecs)03d %(process)d ERROR %(name)s %(instance)s`  Prefix each line of exception output with this format. Used by oslo_log.formatters.ContextFormatter 在异常输出的每一行前面加上此格式。由 oslo_log.formatters.ContextFormatter 使用

- logging_user_identity_format[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.logging_user_identity_format)

  Type 类型 string 字符串 Default 违约 `%(user)s %(project)s %(domain)s %(user_domain)s %(project_domain)s`  Defines the format string for %(user_identity)s that is used in  logging_context_format_string. Used by  oslo_log.formatters.ContextFormatter 定义 logging_context_format_string 中使用的 %（user_identity）s 的格式字符串。由 oslo_log.formatters.ContextFormatter 使用

- default_log_levels[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.default_log_levels)

  Type 类型 list 列表 Default 违约 `['amqp=WARN', 'amqplib=WARN', 'boto=WARN', 'qpid=WARN', 'sqlalchemy=WARN', 'suds=INFO', 'oslo.messaging=INFO', 'oslo_messaging=INFO', 'iso8601=WARN', 'requests.packages.urllib3.connectionpool=WARN', 'urllib3.connectionpool=WARN', 'websocket=WARN', 'requests.packages.urllib3.util.retry=WARN', 'urllib3.util.retry=WARN', 'keystonemiddleware=WARN', 'routes.middleware=WARN', 'stevedore=WARN', 'taskflow=WARN', 'keystoneauth=WARN', 'oslo.cache=INFO', 'oslo_policy=INFO', 'dogpile.core.dogpile=INFO']`  List of package logging levels in logger=LEVEL pairs. This option is ignored if log_config_append is set. logger=LEVEL 对中的包日志记录级别列表。如果设置了此选项log_config_append则忽略此选项。

- publish_errors[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.publish_errors)

  Type 类型 boolean 布尔 Default 违约 `False`  Enables or disables publication of error events. 启用或禁用错误事件的发布。

- instance_format[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.instance_format)

  Type 类型 string 字符串 Default 违约 `"[instance: %(uuid)s] "`  The format for an instance that is passed with the log message. 与日志消息一起传递的实例的格式。

- instance_uuid_format[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.instance_uuid_format)

  Type 类型 string 字符串 Default 违约 `"[instance: %(uuid)s] "`  The format for an instance UUID that is passed with the log message. 与日志消息一起传递的实例 UUID 的格式。

- rate_limit_interval[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.rate_limit_interval)

  Type 类型 integer 整数 Default 违约 `0`  Interval, number of seconds, of log rate limiting. 对数速率限制的间隔、秒数。

- rate_limit_burst[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.rate_limit_burst)

  Type 类型 integer 整数 Default 违约 `0`  Maximum number of logged messages per rate_limit_interval. 每个rate_limit_interval记录的最大消息数。

- rate_limit_except_level[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.rate_limit_except_level)

  Type 类型 string 字符串 Default 违约 `CRITICAL`  Log level name used by rate limiting: CRITICAL, ERROR, INFO, WARNING, DEBUG or empty string. Logs with level greater or equal to  rate_limit_except_level are not filtered. An empty string means that all levels are filtered. 速率限制使用的日志级别名称：CRITICAL、ERROR、INFO、WARNING、DEBUG 或空字符串。级别大于或等于 rate_limit_except_level 的日志不会被过滤。空字符串表示筛选所有级别。

- fatal_deprecations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#DEFAULT.fatal_deprecations)

  Type 类型 boolean 布尔 Default 违约 `False`  Enables or disables fatal status of deprecations. 启用或禁用弃用的致命状态。

#### api[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#api) 接口 ¶

Options under this group are used to define Placement API.
此组下的选项用于定义放置 API。

- auth_strategy[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#api.auth_strategy)

  Type 类型 string 字符串 Default 违约 `keystone` Valid Values 有效值 keystone, noauth2 基斯通，Noauth2  This determines the strategy to use for authentication: keystone or noauth2. ‘noauth2’ is designed for testing only, as it does no actual credential checking. ‘noauth2’ provides administrative credentials only if ‘admin’ is specified as the username. 这决定了用于身份验证的策略：keystone 或 noauth2。“noauth2”仅用于测试，因为它不进行实际的凭据检查。仅当将“admin”指定为用户名时，“noauth2”才提供管理凭据。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id4) 已弃用的变体 ¶   Group 群 Name 名字  DEFAULT 违约 auth_strategy

#### cors[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#cors)

- allowed_origin[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#cors.allowed_origin)

  Type 类型 list 列表 Default 违约 `<None>`  Indicate whether this resource may be shared with the domain received in the  requests “origin” header. Format:  “<protocol>://<host>[:<port>]”, no trailing slash.  Example: https://horizon.example.com 指示是否可以与请求“源”标头中接收的域共享此资源。格式：“：//[：]”，无尾斜杠。示例：https://horizon.example.com

- allow_credentials[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#cors.allow_credentials)

  Type 类型 boolean 布尔 Default 违约 `True`  Indicate that the actual request can include user credentials 指示实际请求可以包含用户凭据

- expose_headers[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#cors.expose_headers)

  Type 类型 list 列表 Default 违约 `[]`  Indicate which headers are safe to expose to the API. Defaults to HTTP Simple Headers. 指示哪些标头可以安全地向 API 公开。默认为 HTTP Simple 标头。

- max_age[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#cors.max_age)

  Type 类型 integer 整数 Default 违约 `3600`  Maximum cache age of CORS preflight requests. CORS 预检请求的最长缓存期限。

- allow_methods[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#cors.allow_methods)

  Type 类型 list 列表 Default 违约 `['OPTIONS', 'GET', 'HEAD', 'POST', 'PUT', 'DELETE', 'TRACE', 'PATCH']`  Indicate which methods can be used during the actual request. 指示在实际请求期间可以使用的方法。

- allow_headers[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#cors.allow_headers)

  Type 类型 list 列表 Default 违约 `[]`  Indicate which header field names may be used during the actual request. 指示在实际请求期间可以使用哪些标头字段名称。

#### keystone_authtoken[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone-authtoken)

- www_authenticate_uri[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.www_authenticate_uri)

  Type 类型 string 字符串 Default 违约 `<None>`  Complete “public” Identity API endpoint. This endpoint should not be an “admin”  endpoint, as it should be accessible by all end users. Unauthenticated  clients are redirected to this endpoint to authenticate. Although this  endpoint should ideally be unversioned, client support in the wild  varies. If you’re using a versioned v2 endpoint here, then this should *not* be the same endpoint the service user utilizes for validating tokens,  because normal end users may not be able to reach that endpoint. 完整的“公共”标识 API  终结点。此终结点不应是“管理”终结点，因为它应可供所有最终用户访问。未经身份验证的客户端将重定向到此终结点进行身份验证。尽管理想情况下，此终结点应为无版本控制，但外部客户端支持各不相同。如果在此处使用受版本控制的 v2 终结点，则这不应与服务用户用于验证令牌的终结点相同，因为普通最终用户可能无法访问该终结点。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id5) 已弃用的变体 ¶   Group 群 Name 名字  keystone_authtoken auth_uri

- auth_uri[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.auth_uri)

  Type 类型 string 字符串 Default 违约 `<None>`  Complete “public” Identity API endpoint. This endpoint should not be an “admin”  endpoint, as it should be accessible by all end users. Unauthenticated  clients are redirected to this endpoint to authenticate. Although this  endpoint should ideally be unversioned, client support in the wild  varies. If you’re using a versioned v2 endpoint here, then this should *not* be the same endpoint the service user utilizes for validating tokens,  because normal end users may not be able to reach that endpoint. This  option is deprecated in favor of www_authenticate_uri and will be  removed in the S release. 完整的“公共”标识 API  终结点。此终结点不应是“管理”终结点，因为它应可供所有最终用户访问。未经身份验证的客户端将重定向到此终结点进行身份验证。尽管理想情况下，此终结点应为无版本控制，但外部客户端支持各不相同。如果在此处使用受版本控制的 v2 终结点，则这不应与服务用户用于验证令牌的终结点相同，因为普通最终用户可能无法访问该终结点。此选项已弃用，取而代之的是  www_authenticate_uri，并将在 S 版本中删除。  Warning 警告 This option is deprecated for removal since Queens. Its value may be silently ignored  in the future. 自 Queens 起，此选项已弃用，无法删除。它的价值将来可能会被默默地忽略。 Reason 原因 The auth_uri option is deprecated in favor of www_authenticate_uri and will be removed in the S  release. auth_uri选项已弃用，取而代之的是 www_authenticate_uri，并将在 S 版本中删除。

- auth_version[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.auth_version)

  Type 类型 string 字符串 Default 违约 `<None>`  API version of the Identity API endpoint. 身份 API 端点的 API 版本。

- interface[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.interface) 接口 ¶

  Type 类型 string 字符串 Default 违约 `internal`  Interface to use for the Identity API endpoint. Valid values are “public”, “internal” (default) or “admin”. 用于标识 API 端点的接口。有效值为“public”、“internal”（默认值）或“admin”。

- delay_auth_decision[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.delay_auth_decision)

  Type 类型 boolean 布尔 Default 违约 `False`  Do not handle authorization requests within the middleware, but delegate  the authorization decision to downstream WSGI components. 不要在中间件中处理授权请求，而是将授权决策委托给下游 WSGI 组件。

- http_connect_timeout[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.http_connect_timeout)

  Type 类型 integer 整数 Default 违约 `<None>`  Request timeout value for communicating with Identity API server. 与身份 API 服务器通信的请求超时值。

- http_request_max_retries[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.http_request_max_retries)

  Type 类型 integer 整数 Default 违约 `3`  How many times are we trying to reconnect when communicating with Identity API Server. 在与 Identity API Server 通信时，我们尝试重新连接的次数。

- cache[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.cache) 缓存 ¶

  Type 类型 string 字符串 Default 违约 `<None>`  Request environment key where the Swift cache object is stored. When auth_token middleware is deployed with a Swift cache, use this option to have the  middleware share a caching backend with swift. Otherwise, use the `memcached_servers` option instead. 请求存储 Swift 缓存对象的环境密钥。当auth_token中间件使用 Swift 缓存进行部署时，请使用此选项让中间件与 swift 共享缓存后端。否则，请改用该 `memcached_servers` 选项。

- certfile[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.certfile) cert文件 ¶

  Type 类型 string 字符串 Default 违约 `<None>`  Required if identity server requires client certificate 如果身份服务器需要客户端证书，则为必填项

- keyfile[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.keyfile) 密钥文件 ¶

  Type 类型 string 字符串 Default 违约 `<None>`  Required if identity server requires client certificate 如果身份服务器需要客户端证书，则为必填项

- cafile[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.cafile) cafile 文件 ¶

  Type 类型 string 字符串 Default 违约 `<None>`  A PEM encoded Certificate Authority to use when verifying HTTPs connections. Defaults to system CAs. 验证 HTTP 连接时使用的 PEM 编码证书颁发机构。默认为系统 CA。

- insecure[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.insecure) 不安全 ¶

  Type 类型 boolean 布尔 Default 违约 `False`  Verify HTTPS connections. 验证 HTTPS 连接。

- region_name[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.region_name)

  Type 类型 string 字符串 Default 违约 `<None>`  The region in which the identity server can be found. 可以在其中找到身份服务器的区域。

- memcached_servers[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcached_servers)

  Type 类型 list 列表 Default 违约 `<None>`  Optionally specify a list of memcached server(s) to use for caching. If left  undefined, tokens will instead be cached in-process. （可选）指定要用于缓存的 memcached 服务器列表。如果未定义，则令牌将改为在进程内缓存。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id6) 已弃用的变体 ¶   Group 群 Name 名字  keystone_authtoken memcache_servers

- token_cache_time[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.token_cache_time)

  Type 类型 integer 整数 Default 违约 `300`  In order to prevent excessive effort spent validating tokens, the  middleware caches previously-seen tokens for a configurable duration (in seconds). Set to -1 to disable caching completely. 为了防止在验证令牌方面花费过多的努力，中间件会缓存以前看到的令牌，并缓存可配置的持续时间（以秒为单位）。设置为 -1 可完全禁用缓存。

- memcache_security_strategy[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcache_security_strategy)

  Type 类型 string 字符串 Default 违约 `None` Valid Values 有效值 None, MAC, ENCRYPT 无、MAC、加密  (Optional) If defined, indicate whether token data should be authenticated or  authenticated and encrypted. If MAC, token data is authenticated (with  HMAC) in the cache. If ENCRYPT, token data is encrypted and  authenticated in the cache. If the value is not one of these options or  empty, auth_token will raise an exception on initialization. （可选）如果已定义，请指示是应对令牌数据进行身份验证还是进行身份验证和加密。如果是 MAC，则在缓存中对令牌数据进行身份验证（使用 HMAC）。如果是  ENCRYPT，则在缓存中对令牌数据进行加密和身份验证。如果该值不是这些选项之一或为空，则auth_token将在初始化时引发异常。

- memcache_secret_key[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcache_secret_key)

  Type 类型 string 字符串 Default 违约 `<None>`  (Optional, mandatory if memcache_security_strategy is defined) This string is used for key derivation. （可选，如果定义了memcache_security_strategy，则为必填项）此字符串用于密钥派生。

- memcache_pool_dead_retry[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcache_pool_dead_retry)

  Type 类型 integer 整数 Default 违约 `300`  (Optional) Number of seconds memcached server is considered dead before it is tried again. （可选）memcached 服务器在重试之前被视为已死的秒数。

- memcache_pool_maxsize[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcache_pool_maxsize)

  Type 类型 integer 整数 Default 违约 `10`  (Optional) Maximum total number of open connections to every memcached server. （可选）与每个 memcached 服务器的最大打开连接总数。

- memcache_pool_socket_timeout[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcache_pool_socket_timeout)

  Type 类型 integer 整数 Default 违约 `3`  (Optional) Socket timeout in seconds for communicating with a memcached server. （可选）套接字超时（以秒为单位）用于与 memcached 服务器通信。

- memcache_pool_unused_timeout[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcache_pool_unused_timeout)

  Type 类型 integer 整数 Default 违约 `60`  (Optional) Number of seconds a connection to memcached is held unused in the pool before it is closed. （可选）在池中关闭之前，与 memcached 的连接在池中保持未使用的秒数。

- memcache_pool_conn_get_timeout[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcache_pool_conn_get_timeout)

  Type 类型 integer 整数 Default 违约 `10`  (Optional) Number of seconds that an operation will wait to get a memcached client connection from the pool. （可选）操作等待从池中获取 memcached 客户端连接的秒数。

- memcache_use_advanced_pool[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.memcache_use_advanced_pool)

  Type 类型 boolean 布尔 Default 违约 `True`  (Optional) Use the advanced (eventlet safe) memcached client pool. （可选）使用高级（eventlet 安全）memcached 客户端池。

- include_service_catalog[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.include_service_catalog)

  Type 类型 boolean 布尔 Default 违约 `True`  (Optional) Indicate whether to set the X-Service-Catalog header. If False,  middleware will not ask for service catalog on token validation and will not set the X-Service-Catalog header. （可选）指示是否设置 X-Service-Catalog 标头。如果为 False，则中间件不会在令牌验证时请求服务目录，也不会设置 X-Service-Catalog 标头。

- enforce_token_bind[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.enforce_token_bind)

  Type 类型 string 字符串 Default 违约 `permissive`  Used to control the use and type of token binding. Can be set to: “disabled” to not check token binding. “permissive” (default) to validate binding  information if the bind type is of a form known to the server and ignore it if not. “strict” like “permissive” but if the bind type is unknown  the token will be rejected. “required” any form of token binding is  needed to be allowed. Finally the name of a binding method that must be  present in tokens. 用于控制令牌绑定的用途和类型。可以设置为：“disabled”不检查令牌绑定。“permissive”（默认值）用于验证绑定信息（如果绑定类型是服务器已知的形式），如果不是，则忽略它。  “strict”与“permissive”类似，但如果绑定类型未知，则令牌将被拒绝。“必需”需要允许任何形式的令牌绑定。最后，标记中必须存在的绑定方法的名称。

- service_token_roles[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.service_token_roles)

  Type 类型 list 列表 Default 违约 `['service']`  A choice of roles that must be present in a service token. Service tokens are allowed to request that an expired token can be used and so this  check should tightly control that only actual services should be sending this token. Roles here are applied as an ANY check so any role in this  list must be present. For backwards compatibility reasons this currently only affects the allow_expired check. 服务令牌中必须存在的角色选择。允许服务令牌请求可以使用过期的令牌，因此此检查应严格控制只有实际服务才能发送此令牌。此处的角色作为 ANY 检查应用，因此此列表中的任何角色都必须存在。出于向后兼容性的原因，这目前仅影响allow_expired检查。

- service_token_roles_required[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.service_token_roles_required)

  Type 类型 boolean 布尔 Default 违约 `False`  For backwards compatibility reasons we must let valid service tokens pass  that don’t pass the service_token_roles check as valid. Setting this  true will become the default in a future release and should be enabled  if possible. 出于向后兼容性的原因，我们必须让未通过service_token_roles检查的有效服务令牌通过。在将来的版本中，设置此 true 将成为默认值，如果可能，应启用此设置。

- service_type[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.service_type)

  Type 类型 string 字符串 Default 违约 `<None>`  The name or type of the service as it appears in the service catalog. This  is used to validate tokens that have restricted access rules. 服务目录中显示的服务的名称或类型。这用于验证具有受限访问规则的令牌。

- auth_type[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.auth_type)

  Type 类型 unknown type 未知类型 Default 违约 `<None>`  Authentication type to load 要加载的身份验证类型 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id7) 已弃用的变体 ¶   Group 群 Name 名字  keystone_authtoken auth_plugin

- auth_section[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#keystone_authtoken.auth_section)

  Type 类型 unknown type 未知类型 Default 违约 `<None>`  Config Section from which to load plugin specific options 从中加载插件特定选项的 Config 部分

#### oslo_middleware[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo-middleware)

- enable_proxy_headers_parsing[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_middleware.enable_proxy_headers_parsing)

  Type 类型 boolean 布尔 Default 违约 `False`  Whether the application is behind a proxy or not. This determines if the middleware should parse the headers or not. 应用程序是否位于代理后面。这决定了中间件是否应该解析标头。

#### oslo_policy[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo-policy)

- enforce_scope[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.enforce_scope)

  Type 类型 boolean 布尔 Default 违约 `False`  This option controls whether or not to enforce scope when evaluating policies. If `True`, the scope of the token used in the request is compared to the `scope_types` of the policy being enforced. If the scopes do not match, an `InvalidScope` exception will be raised. If `False`, a message will be logged informing operators that policies are being invoked with mismatching scope. 此选项控制在评估策略时是否强制实施范围。如果 `True` ，则将请求中使用的令牌的范围与 `scope_types` 正在强制执行的策略的范围进行比较。如果范围不匹配，则会引发 `InvalidScope` 异常。如果 `False` ，将记录一条消息，通知操作员正在调用范围不匹配的策略。

- enforce_new_defaults[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.enforce_new_defaults)

  Type 类型 boolean 布尔 Default 违约 `False`  This option controls whether or not to use old deprecated defaults when evaluating policies. If `True`, the old deprecated defaults are not going to be evaluated. This means  if any existing token is allowed for old defaults but is disallowed for  new defaults, it will be disallowed. It is encouraged to enable this  flag along with the `enforce_scope` flag so that you can get the benefits of new defaults and `scope_type` together. If `False`, the deprecated policy check string is logically OR’d with the new  policy check string, allowing for a graceful upgrade experience between  releases with new policies, which is the default behavior. 此选项控制在评估策略时是否使用旧的已弃用默认值。如果 `True` ，则不会评估旧的已弃用默认值。这意味着，如果任何现有令牌被允许用于旧的默认值，但不允许用于新的默认值，则将不允许该令牌。建议将此标志与该标志一起启用， `enforce_scope` 以便您可以 `scope_type` 一起获得新默认值的好处。如果 `False` ，则弃用的策略检查字符串在逻辑上与新策略检查字符串一起 OR'd，从而允许在具有新策略的版本之间提供正常升级体验，这是默认行为。

- policy_file[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.policy_file)

  Type 类型 string 字符串 Default 违约 `policy.json`  The relative or absolute path of a file that maps roles to permissions for a given service. Relative paths must be specified in relation to the  configuration file setting this option. 将角色映射到给定服务的权限的文件的相对路径或绝对路径。必须指定与设置此选项的配置文件相关的相对路径。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id8) 已弃用的变体 ¶   Group 群 Name 名字  DEFAULT 违约 policy_file

- policy_default_rule[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.policy_default_rule)

  Type 类型 string 字符串 Default 违约 `default`  Default rule. Enforced when a requested rule is not found. 默认规则。在未找到请求的规则时强制执行。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id9) 已弃用的变体 ¶   Group 群 Name 名字  DEFAULT 违约 policy_default_rule

- policy_dirs[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.policy_dirs)

  Type 类型 multi-valued 多值 Default 违约 `policy.d`  Directories where policy configuration files are stored. They can be relative to  any directory in the search path defined by the config_dir option, or  absolute paths. The file defined by policy_file must exist for these  directories to be searched.  Missing or empty directories are ignored. 存储策略配置文件的目录。它们可以相对于config_dir选项定义的搜索路径中的任何目录，也可以是绝对路径。policy_file定义的文件必须存在，才能搜索这些目录。缺少或空的目录将被忽略。 Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id10) 已弃用的变体 ¶   Group 群 Name 名字  DEFAULT 违约 policy_dirs

- remote_content_type[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.remote_content_type)

  Type 类型 string 字符串 Default 违约 `application/x-www-form-urlencoded` Valid Values 有效值 application/x-www-form-urlencoded, application/json application/x-www-form-urlencoded， application/json  Content Type to send and receive data for REST based policy check 用于发送和接收数据以进行基于 REST 的策略检查的内容类型

- remote_ssl_verify_server_crt[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.remote_ssl_verify_server_crt)

  Type 类型 boolean 布尔 Default 违约 `False`  server identity verification for REST based policy check 用于基于 REST 的策略检查的服务器身份验证

- remote_ssl_ca_crt_file[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.remote_ssl_ca_crt_file)

  Type 类型 string 字符串 Default 违约 `<None>`  Absolute path to ca cert file for REST based policy check 用于基于 REST 的策略检查的 ca 证书文件的绝对路径

- remote_ssl_client_crt_file[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.remote_ssl_client_crt_file)

  Type 类型 string 字符串 Default 违约 `<None>`  Absolute path to client cert for REST based policy check 用于基于 REST 的策略检查的客户端证书的绝对路径

- remote_ssl_client_key_file[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#oslo_policy.remote_ssl_client_key_file)

  Type 类型 string 字符串 Default 违约 `<None>`  Absolute path client key file REST based policy check 基于绝对路径客户端密钥文件REST的策略检查

#### placement[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement) 放置 ¶

- randomize_allocation_candidates[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement.randomize_allocation_candidates)

  Type 类型 boolean 布尔 Default 违约 `False`  If True, when limiting allocation candidate results, the results will be a random sampling of the full result set. If False, allocation candidates are returned in a deterministic but undefined order. That is, all things being equal, two requests for allocation candidates will return the same results in the same order; but no guarantees are made as to how that order is determined. 如果为 True，则在限制分配候选结果时，结果将是完整结果集的随机抽样。如果为 False，则按确定性但未定义的顺序返回分配候选项。也就是说，在所有条件相同的情况下，两个分配候选请求将以相同的顺序返回相同的结果;但对于如何确定该顺序，无法保证。

- incomplete_consumer_project_id[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement.incomplete_consumer_project_id)

  Type 类型 string 字符串 Default 违约 `00000000-0000-0000-0000-000000000000`  Early API microversions (<1.8) allowed creating allocations and not specifying a project or user identifier for the consumer. In cleaning up the data modeling, we no longer allow missing project and user information. If an older client makes an allocation, we’ll use this in place of the information it doesn’t provide. 早期的 API 微版本 （<1.8） 允许创建分配，而不为使用者指定项目或用户标识符。在清理数据建模时，我们不再允许丢失项目和用户信息。如果较旧的客户端进行分配，我们将使用它来代替它不提供的信息。

- incomplete_consumer_user_id[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement.incomplete_consumer_user_id)

  Type 类型 string 字符串 Default 违约 `00000000-0000-0000-0000-000000000000`  Early API microversions (<1.8) allowed creating allocations and not specifying a project or user identifier for the consumer. In cleaning up the data modeling, we no longer allow missing project and user information. If an older client makes an allocation, we’ll use this in place of the information it doesn’t provide. 早期的 API 微版本 （<1.8） 允许创建分配，而不为使用者指定项目或用户标识符。在清理数据建模时，我们不再允许丢失项目和用户信息。如果较旧的客户端进行分配，我们将使用它来代替它不提供的信息。

- allocation_conflict_retry_count[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement.allocation_conflict_retry_count)

  Type 类型 integer 整数 Default 违约 `10`  The number of times to retry, server-side, writing allocations when there is a resource provider generation conflict. Raising this value may be useful when many concurrent allocations to the same resource provider are expected. 当存在资源提供程序生成冲突时，在服务器端重试写入分配的次数。当需要对同一资源提供程序进行许多并发分配时，提高此值可能很有用。

#### placement_database[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement-database)

The *Placement API Database* is a the database used with the placement service. If the connection option is not set, the placement service will not start.
Placement API 数据库是与放置服务一起使用的数据库。如果未设置连接选项，则放置服务将不会启动。

- connection[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.connection) 连接 ¶

  Type 类型 string 字符串 Default 违约 `<None>`  The SQLAlchemy connection string to use to connect to the database. 用于连接到数据库的 SQLAlchemy 连接字符串。

- connection_parameters[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.connection_parameters)

  Type 类型 string 字符串 Default 违约 `''`  Optional URL parameters to append onto the connection URL at connect time; specify as param1=value1&param2=value2&… 可选的 URL 参数，用于在连接时附加到连接 URL;指定为 param1=value1¶m2=value2&...

- sqlite_synchronous[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.sqlite_synchronous)

  Type 类型 boolean 布尔 Default 违约 `True`  If True, SQLite uses synchronous mode. 如果为 True，则 SQLite 使用同步模式。

- slave_connection[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.slave_connection)

  Type 类型 string 字符串 Default 违约 `<None>`  The SQLAlchemy connection string to use to connect to the slave database. 用于连接到从属数据库的 SQLAlchemy 连接字符串。

- mysql_sql_mode[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.mysql_sql_mode)

  Type 类型 string 字符串 Default 违约 `TRADITIONAL`  The SQL mode to be used for MySQL sessions. This option, including the  default, overrides any server-set SQL mode. To use whatever SQL mode is  set by the server configuration, set this to no value. Example:  mysql_sql_mode= 用于 MySQL 会话的 SQL 模式。此选项（包括默认值）将覆盖任何服务器设置的 SQL 模式。若要使用服务器配置设置的任何 SQL 模式，请将其设置为无值。示例：mysql_sql_mode=

- connection_recycle_time[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.connection_recycle_time)

  Type 类型 integer 整数 Default 违约 `3600`  Connections which have been present in the connection pool longer than this number  of seconds will be replaced with a new one the next time they are  checked out from the pool. 连接池中存在的时间超过此秒数的连接将在下次从池中签出时替换为新连接。

- max_pool_size[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.max_pool_size)

  Type 类型 integer 整数 Default 违约 `<None>`  Maximum number of SQL connections to keep open in a pool. Setting a value of 0 indicates no limit. 池中要保持打开的最大 SQL 连接数。将值设置为 0 表示没有限制。

- max_retries[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.max_retries)

  Type 类型 integer 整数 Default 违约 `10`  Maximum number of database connection retries during startup. Set to -1 to specify an infinite retry count. 启动期间数据库连接重试的最大次数。设置为 -1 可指定无限重试计数。

- retry_interval[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.retry_interval)

  Type 类型 integer 整数 Default 违约 `10`  Interval between retries of opening a SQL connection. 打开 SQL 连接的重试次数间隔。

- max_overflow[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.max_overflow)

  Type 类型 integer 整数 Default 违约 `<None>`  If set, use this value for max_overflow with SQLAlchemy. 如果设置了此值，则将此值用于 SQLAlchemy 的max_overflow。

- connection_debug[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.connection_debug)

  Type 类型 integer 整数 Default 违约 `0`  Verbosity of SQL debugging information: 0=None, 100=Everything. SQL 调试信息的详细程度：0=无，100=所有内容。

- connection_trace[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.connection_trace)

  Type 类型 boolean 布尔 Default 违约 `False`  Add Python stack traces to SQL as comment strings. 将 Python 堆栈跟踪作为注释字符串添加到 SQL。

- pool_timeout[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.pool_timeout)

  Type 类型 integer 整数 Default 违约 `<None>`  If set, use this value for pool_timeout with SQLAlchemy. 如果设置了此值，则将此值用于 SQLAlchemy 的pool_timeout。

- sync_on_startup[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#placement_database.sync_on_startup)

  Type 类型 boolean 布尔 Default 违约 `False`  If True, database schema migrations will be attempted when the web service starts. 如果为 True，则在 Web 服务启动时将尝试数据库架构迁移。

#### profiler[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler) 探查器 ¶

- enabled[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.enabled) 已启用 ¶

  Type 类型 boolean 布尔 Default 违约 `False`  Enable the profiling for all services on this node. 为此节点上的所有服务启用性能分析。 Default value is False (fully disable the profiling feature). 默认值为 False（完全禁用分析功能）。 Possible values: 可能的值： True: Enables the feature True：启用该功能 False: Disables the feature. The profiling cannot be started via this project operations. If the profiling is triggered by another project, this project part will be empty. False：关闭该功能。无法通过此项目操作启动分析。如果分析是由另一个项目触发的，则此项目部分将为空。  Deprecated Variations[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#id11) 已弃用的变体 ¶   Group 群 Name 名字  profiler 分析器 profiler_enabled

- trace_sqlalchemy[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.trace_sqlalchemy)

  Type 类型 boolean 布尔 Default 违约 `False`  Enable SQL requests profiling in services. 在服务中启用 SQL 请求分析。 Default value is False (SQL requests won’t be traced). 默认值为 False（不会跟踪 SQL 请求）。 Possible values: 可能的值： True: Enables SQL requests profiling. Each SQL query will be part of the trace and can the be analyzed by how much time was spent for that. True：启用 SQL 请求分析。每个 SQL 查询都将是跟踪的一部分，并且可以通过为此花费的时间进行分析。 False: Disables SQL requests profiling. The spent time is only shown on a higher level of operations. Single SQL queries cannot be analyzed this way. False：禁用 SQL 请求分析。花费的时间仅在更高级别的操作上显示。不能以这种方式分析单个 SQL 查询。

- hmac_keys[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.hmac_keys)

  Type 类型 string 字符串 Default 违约 `SECRET_KEY`  Secret key(s) to use for encrypting context data for performance profiling. 用于加密上下文数据以进行性能分析的密钥。 This string value should have the following format: <key1>[,<key2>,…<keyn>], where each key is some random string. A user who triggers the profiling via the REST API has to set one of these keys in the headers of the REST API call to include profiling results of this node for this particular project. 此字符串值应采用以下格式：[，,...]，其中每个键都是一些随机字符串。通过 REST API 触发分析的用户必须在 REST API 调用的标头中设置其中一个键，以包含此特定项目的此节点的分析结果。 Both “enabled” flag and “hmac_keys” config options should be set to enable profiling. Also, to generate correct profiling information across all services at least one key needs to be consistent between OpenStack projects. This ensures it can be used from client side to generate the trace, containing information from all possible resources. “enabled”标志和“hmac_keys”配置选项都应设置为启用分析。此外，为了在所有服务中生成正确的分析信息，OpenStack项目之间至少需要有一个密钥保持一致。这确保了可以从客户端使用它来生成跟踪，其中包含来自所有可能资源的信息。

- connection_string[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.connection_string)

  Type 类型 string 字符串 Default 违约 `messaging://`  Connection string for a notifier backend. 通知程序后端的连接字符串。 Default value is `messaging://` which sets the notifier to oslo_messaging. 默认值是 `messaging://` 将通知程序设置为 oslo_messaging。 Examples of possible values: 可能的值示例： `messaging://` - use oslo_messaging driver for sending spans.  `messaging://` - 使用oslo_messaging驱动程序发送 span。 `redis://127.0.0.1:6379` - use redis driver for sending spans.  `redis://127.0.0.1:6379` - 使用 Redis 驱动发送 SPAN。 `mongodb://127.0.0.1:27017` - use mongodb driver for sending spans.  `mongodb://127.0.0.1:27017` - 使用 MongoDB 驱动程序发送 span。 `elasticsearch://127.0.0.1:9200` - use elasticsearch driver for sending spans.  `elasticsearch://127.0.0.1:9200` - 使用Elasticsearch驱动发送span。 `jaeger://127.0.0.1:6831` - use jaeger tracing as driver for sending spans.  `jaeger://127.0.0.1:6831` - 使用 Jaeger Tracing 作为发送 span 的驱动程序。

- es_doc_type[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.es_doc_type)

  Type 类型 string 字符串 Default 违约 `notification`  Document type for notification indexing in elasticsearch. Elasticsearch 中用于通知索引的文档类型。

- es_scroll_time[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.es_scroll_time)

  Type 类型 string 字符串 Default 违约 `2m`  This parameter is a time value parameter (for example: es_scroll_time=2m), indicating for how long the nodes that participate in the search will maintain relevant resources in order to continue and support it. 该参数是一个时间值参数（例如：es_scroll_time=2m），表示参与搜索的节点将维护相关资源多长时间，以便继续和支持它。

- es_scroll_size[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.es_scroll_size)

  Type 类型 integer 整数 Default 违约 `10000`  Elasticsearch splits large requests in batches. This parameter defines maximum size of each batch (for example: es_scroll_size=10000). Elasticsearch 将大型请求分批拆分。此参数定义每个批次的最大大小（例如：es_scroll_size=10000）。

- socket_timeout[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.socket_timeout)

  Type 类型 floating point 浮点 Default 违约 `0.1`  Redissentinel provides a timeout option on the connections. This parameter defines that timeout (for example: socket_timeout=0.1). Redissentinel 在连接上提供超时选项。此参数定义超时（例如：socket_timeout=0.1）。

- sentinel_service_name[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.sentinel_service_name)

  Type 类型 string 字符串 Default 违约 `mymaster`  Redissentinel uses a service name to identify a master redis service. This parameter defines the name (for example: `sentinal_service_name=mymaster`). Redissentinel 使用服务名称来标识主 redis 服务。此参数定义名称（例如： `sentinal_service_name=mymaster` ）。

- filter_error_trace[¶](https://docs.openstack.org/placement/yoga/configuration/config.html#profiler.filter_error_trace)

  Type 类型 boolean 布尔 Default 违约 `False`  Enable filter traces that contain error/exception to a separated place. 将包含错误/异常的筛选器跟踪启用到一个单独的位置。 Default value is set to False. 默认值设置为 False。 Possible values: 可能的值： True: Enable filter traces that contain error/exception. True：启用包含错误/异常的筛选器跟踪。 False: Disable the filter. False：关闭过滤器。

### 示例配置文件

​                                          

The following is a sample Placement configuration for adaptation and use. For a detailed overview of all available configuration options, refer to [Configuration Options](https://docs.openstack.org/placement/yoga/configuration/config.html).
以下是用于适配和使用的 Placement 配置示例。有关所有可用配置选项的详细概述，请参阅配置选项。

The sample configuration can also be viewed in [`file form`](https://docs.openstack.org/placement/yoga/_downloads/d6765e63bfdf84fceddab88fe16dab3b/placement.conf.sample).
也可以在 中 `file form` 查看示例配置。



 

Important 重要



The sample configuration file is auto-generated from placement when this documentation is built. You must ensure your version of placement matches the version of this documentation.
在构建本文档时，示例配置文件是从放置中自动生成的。您必须确保您的展示位置版本与本文档的版本一致。

```bash
[DEFAULT]

#
# From oslo.log
#

# If set to true, the logging level will be set to DEBUG instead of the default
# INFO level. (boolean value)
# Note: This option can be changed without restarting.
#debug = false

# The name of a logging configuration file. This file is appended to any
# existing logging configuration files. For details about logging configuration
# files, see the Python logging module documentation. Note that when logging
# configuration files are used then all logging configuration is set in the
# configuration file and other logging configuration options are ignored (for
# example, log-date-format). (string value)
# Note: This option can be changed without restarting.
# Deprecated group/name - [DEFAULT]/log_config
#log_config_append = <None>

# Defines the format string for %%(asctime)s in log records. Default:
# %(default)s . This option is ignored if log_config_append is set. (string
# value)
#log_date_format = %Y-%m-%d %H:%M:%S

# (Optional) Name of log file to send logging output to. If no default is set,
# logging will go to stderr as defined by use_stderr. This option is ignored if
# log_config_append is set. (string value)
# Deprecated group/name - [DEFAULT]/logfile
#log_file = <None>

# (Optional) The base directory used for relative log_file  paths. This option
# is ignored if log_config_append is set. (string value)
# Deprecated group/name - [DEFAULT]/logdir
#log_dir = <None>

# Uses logging handler designed to watch file system. When log file is moved or
# removed this handler will open a new log file with specified path
# instantaneously. It makes sense only if log_file option is specified and Linux
# platform is used. This option is ignored if log_config_append is set. (boolean
# value)
#watch_log_file = false

# Use syslog for logging. Existing syslog format is DEPRECATED and will be
# changed later to honor RFC5424. This option is ignored if log_config_append is
# set. (boolean value)
#use_syslog = false

# Enable journald for logging. If running in a systemd environment you may wish
# to enable journal support. Doing so will use the journal native protocol which
# includes structured metadata in addition to log messages.This option is
# ignored if log_config_append is set. (boolean value)
#use_journal = false

# Syslog facility to receive log lines. This option is ignored if
# log_config_append is set. (string value)
#syslog_log_facility = LOG_USER

# Use JSON formatting for logging. This option is ignored if log_config_append
# is set. (boolean value)
#use_json = false

# Log output to standard error. This option is ignored if log_config_append is
# set. (boolean value)
#use_stderr = false

# Log output to Windows Event Log. (boolean value)
#use_eventlog = false

# The amount of time before the log files are rotated. This option is ignored
# unless log_rotation_type is set to "interval". (integer value)
#log_rotate_interval = 1

# Rotation interval type. The time of the last file change (or the time when the
# service was started) is used when scheduling the next rotation. (string value)
# Possible values:
# Seconds - <No description provided>
# Minutes - <No description provided>
# Hours - <No description provided>
# Days - <No description provided>
# Weekday - <No description provided>
# Midnight - <No description provided>
#log_rotate_interval_type = days

# Maximum number of rotated log files. (integer value)
#max_logfile_count = 30

# Log file maximum size in MB. This option is ignored if "log_rotation_type" is
# not set to "size". (integer value)
#max_logfile_size_mb = 200

# Log rotation type. (string value)
# Possible values:
# interval - Rotate logs at predefined time intervals.
# size - Rotate logs once they reach a predefined size.
# none - Do not rotate log files.
#log_rotation_type = none

# Format string to use for log messages with context. Used by
# oslo_log.formatters.ContextFormatter (string value)
#logging_context_format_string = %(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [%(request_id)s %(user_identity)s] %(instance)s%(message)s

# Format string to use for log messages when context is undefined. Used by
# oslo_log.formatters.ContextFormatter (string value)
#logging_default_format_string = %(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [-] %(instance)s%(message)s

# Additional data to append to log message when logging level for the message is
# DEBUG. Used by oslo_log.formatters.ContextFormatter (string value)
#logging_debug_format_suffix = %(funcName)s %(pathname)s:%(lineno)d

# Prefix each line of exception output with this format. Used by
# oslo_log.formatters.ContextFormatter (string value)
#logging_exception_prefix = %(asctime)s.%(msecs)03d %(process)d ERROR %(name)s %(instance)s

# Defines the format string for %(user_identity)s that is used in
# logging_context_format_string. Used by oslo_log.formatters.ContextFormatter
# (string value)
#logging_user_identity_format = %(user)s %(project)s %(domain)s %(user_domain)s %(project_domain)s

# List of package logging levels in logger=LEVEL pairs. This option is ignored
# if log_config_append is set. (list value)
#default_log_levels = amqp=WARN,amqplib=WARN,boto=WARN,qpid=WARN,sqlalchemy=WARN,suds=INFO,oslo.messaging=INFO,oslo_messaging=INFO,iso8601=WARN,requests.packages.urllib3.connectionpool=WARN,urllib3.connectionpool=WARN,websocket=WARN,requests.packages.urllib3.util.retry=WARN,urllib3.util.retry=WARN,keystonemiddleware=WARN,routes.middleware=WARN,stevedore=WARN,taskflow=WARN,keystoneauth=WARN,oslo.cache=INFO,oslo_policy=INFO,dogpile.core.dogpile=INFO

# Enables or disables publication of error events. (boolean value)
#publish_errors = false

# The format for an instance that is passed with the log message. (string value)
#instance_format = "[instance: %(uuid)s] "

# The format for an instance UUID that is passed with the log message. (string
# value)
#instance_uuid_format = "[instance: %(uuid)s] "

# Interval, number of seconds, of log rate limiting. (integer value)
#rate_limit_interval = 0

# Maximum number of logged messages per rate_limit_interval. (integer value)
#rate_limit_burst = 0

# Log level name used by rate limiting: CRITICAL, ERROR, INFO, WARNING, DEBUG or
# empty string. Logs with level greater or equal to rate_limit_except_level are
# not filtered. An empty string means that all levels are filtered. (string
# value)
#rate_limit_except_level = CRITICAL

# Enables or disables fatal status of deprecations. (boolean value)
#fatal_deprecations = false

#
# From placement.conf
#

# Explicitly specify the temporary working directory. (string value)
#tempdir = <None>

#
# The directory where the Placement python modules are installed.
#
# This is the default path for other config options which need to persist
# Placement internal data. It is very unlikely that you need to
# change this option from its default value.
#
# Possible values:
#
# * The full path to a directory.
#
# Related options:
#
# * ``state_path``
#  (string value)
#
# This option has a sample default set, which means that
# its actual default value may vary from the one documented
# below.
#pybasedir = <Path>

#
# The top-level directory for maintaining state used in Placement.
#
# This directory is used to store Placement's internal state. It is used by some
# tests that have behaviors carried over from Nova.
#
# Possible values:
#
# * The full path to a directory. Defaults to value provided in ``pybasedir``.
#  (string value)
#state_path = $pybasedir


[api]
#
# Options under this group are used to define Placement API.

#
# From placement.conf
#

#
# This determines the strategy to use for authentication: keystone or noauth2.
# 'noauth2' is designed for testing only, as it does no actual credential
# checking. 'noauth2' provides administrative credentials only if 'admin' is
# specified as the username.
#  (string value)
# Possible values:
# keystone - <No description provided>
# noauth2 - <No description provided>
#auth_strategy = keystone


[cors]

#
# From oslo.middleware.cors
#

# Indicate whether this resource may be shared with the domain received in the
# requests "origin" header. Format: "<protocol>://<host>[:<port>]", no trailing
# slash. Example: https://horizon.example.com (list value)
#allowed_origin = <None>

# Indicate that the actual request can include user credentials (boolean value)
#allow_credentials = true

# Indicate which headers are safe to expose to the API. Defaults to HTTP Simple
# Headers. (list value)
#expose_headers =

# Maximum cache age of CORS preflight requests. (integer value)
#max_age = 3600

# Indicate which methods can be used during the actual request. (list value)
#allow_methods = OPTIONS,GET,HEAD,POST,PUT,DELETE,TRACE,PATCH

# Indicate which header field names may be used during the actual request. (list
# value)
#allow_headers =


[keystone_authtoken]

#
# From keystonemiddleware.auth_token
#

# Complete "public" Identity API endpoint. This endpoint should not be an
# "admin" endpoint, as it should be accessible by all end users. Unauthenticated
# clients are redirected to this endpoint to authenticate. Although this
# endpoint should ideally be unversioned, client support in the wild varies. If
# you're using a versioned v2 endpoint here, then this should *not* be the same
# endpoint the service user utilizes for validating tokens, because normal end
# users may not be able to reach that endpoint. (string value)
# Deprecated group/name - [keystone_authtoken]/auth_uri
#www_authenticate_uri = <None>

# DEPRECATED: Complete "public" Identity API endpoint. This endpoint should not
# be an "admin" endpoint, as it should be accessible by all end users.
# Unauthenticated clients are redirected to this endpoint to authenticate.
# Although this endpoint should ideally be unversioned, client support in the
# wild varies. If you're using a versioned v2 endpoint here, then this should
# *not* be the same endpoint the service user utilizes for validating tokens,
# because normal end users may not be able to reach that endpoint. This option
# is deprecated in favor of www_authenticate_uri and will be removed in the S
# release. (string value)
# This option is deprecated for removal since Queens.
# Its value may be silently ignored in the future.
# Reason: The auth_uri option is deprecated in favor of www_authenticate_uri and
# will be removed in the S  release.
#auth_uri = <None>

# API version of the Identity API endpoint. (string value)
#auth_version = <None>

# Interface to use for the Identity API endpoint. Valid values are "public",
# "internal" (default) or "admin". (string value)
#interface = internal

# Do not handle authorization requests within the middleware, but delegate the
# authorization decision to downstream WSGI components. (boolean value)
#delay_auth_decision = false

# Request timeout value for communicating with Identity API server. (integer
# value)
#http_connect_timeout = <None>

# How many times are we trying to reconnect when communicating with Identity API
# Server. (integer value)
#http_request_max_retries = 3

# Request environment key where the Swift cache object is stored. When
# auth_token middleware is deployed with a Swift cache, use this option to have
# the middleware share a caching backend with swift. Otherwise, use the
# ``memcached_servers`` option instead. (string value)
#cache = <None>

# Required if identity server requires client certificate (string value)
#certfile = <None>

# Required if identity server requires client certificate (string value)
#keyfile = <None>

# A PEM encoded Certificate Authority to use when verifying HTTPs connections.
# Defaults to system CAs. (string value)
#cafile = <None>

# Verify HTTPS connections. (boolean value)
#insecure = false

# The region in which the identity server can be found. (string value)
#region_name = <None>

# Optionally specify a list of memcached server(s) to use for caching. If left
# undefined, tokens will instead be cached in-process. (list value)
# Deprecated group/name - [keystone_authtoken]/memcache_servers
#memcached_servers = <None>

# In order to prevent excessive effort spent validating tokens, the middleware
# caches previously-seen tokens for a configurable duration (in seconds). Set to
# -1 to disable caching completely. (integer value)
#token_cache_time = 300

# (Optional) If defined, indicate whether token data should be authenticated or
# authenticated and encrypted. If MAC, token data is authenticated (with HMAC)
# in the cache. If ENCRYPT, token data is encrypted and authenticated in the
# cache. If the value is not one of these options or empty, auth_token will
# raise an exception on initialization. (string value)
# Possible values:
# None - <No description provided>
# MAC - <No description provided>
# ENCRYPT - <No description provided>
#memcache_security_strategy = None

# (Optional, mandatory if memcache_security_strategy is defined) This string is
# used for key derivation. (string value)
#memcache_secret_key = <None>

# (Optional) Number of seconds memcached server is considered dead before it is
# tried again. (integer value)
#memcache_pool_dead_retry = 300

# (Optional) Maximum total number of open connections to every memcached server.
# (integer value)
#memcache_pool_maxsize = 10

# (Optional) Socket timeout in seconds for communicating with a memcached
# server. (integer value)
#memcache_pool_socket_timeout = 3

# (Optional) Number of seconds a connection to memcached is held unused in the
# pool before it is closed. (integer value)
#memcache_pool_unused_timeout = 60

# (Optional) Number of seconds that an operation will wait to get a memcached
# client connection from the pool. (integer value)
#memcache_pool_conn_get_timeout = 10

# (Optional) Use the advanced (eventlet safe) memcached client pool. (boolean
# value)
#memcache_use_advanced_pool = true

# (Optional) Indicate whether to set the X-Service-Catalog header. If False,
# middleware will not ask for service catalog on token validation and will not
# set the X-Service-Catalog header. (boolean value)
#include_service_catalog = true

# Used to control the use and type of token binding. Can be set to: "disabled"
# to not check token binding. "permissive" (default) to validate binding
# information if the bind type is of a form known to the server and ignore it if
# not. "strict" like "permissive" but if the bind type is unknown the token will
# be rejected. "required" any form of token binding is needed to be allowed.
# Finally the name of a binding method that must be present in tokens. (string
# value)
#enforce_token_bind = permissive

# A choice of roles that must be present in a service token. Service tokens are
# allowed to request that an expired token can be used and so this check should
# tightly control that only actual services should be sending this token. Roles
# here are applied as an ANY check so any role in this list must be present. For
# backwards compatibility reasons this currently only affects the allow_expired
# check. (list value)
#service_token_roles = service

# For backwards compatibility reasons we must let valid service tokens pass that
# don't pass the service_token_roles check as valid. Setting this true will
# become the default in a future release and should be enabled if possible.
# (boolean value)
#service_token_roles_required = false

# The name or type of the service as it appears in the service catalog. This is
# used to validate tokens that have restricted access rules. (string value)
#service_type = <None>

# Authentication type to load (string value)
# Deprecated group/name - [keystone_authtoken]/auth_plugin
#auth_type = <None>

# Config Section from which to load plugin specific options (string value)
#auth_section = <None>


[oslo_middleware]

#
# From oslo.middleware.http_proxy_to_wsgi
#

# Whether the application is behind a proxy or not. This determines if the
# middleware should parse the headers or not. (boolean value)
#enable_proxy_headers_parsing = false


[oslo_policy]

#
# From oslo.policy
#

# This option controls whether or not to enforce scope when evaluating policies.
# If ``True``, the scope of the token used in the request is compared to the
# ``scope_types`` of the policy being enforced. If the scopes do not match, an
# ``InvalidScope`` exception will be raised. If ``False``, a message will be
# logged informing operators that policies are being invoked with mismatching
# scope. (boolean value)
#enforce_scope = false

# This option controls whether or not to use old deprecated defaults when
# evaluating policies. If ``True``, the old deprecated defaults are not going to
# be evaluated. This means if any existing token is allowed for old defaults but
# is disallowed for new defaults, it will be disallowed. It is encouraged to
# enable this flag along with the ``enforce_scope`` flag so that you can get the
# benefits of new defaults and ``scope_type`` together. If ``False``, the
# deprecated policy check string is logically OR'd with the new policy check
# string, allowing for a graceful upgrade experience between releases with new
# policies, which is the default behavior. (boolean value)
#enforce_new_defaults = false

# The relative or absolute path of a file that maps roles to permissions for a
# given service. Relative paths must be specified in relation to the
# configuration file setting this option. (string value)
#policy_file = policy.json

# Default rule. Enforced when a requested rule is not found. (string value)
#policy_default_rule = default

# Directories where policy configuration files are stored. They can be relative
# to any directory in the search path defined by the config_dir option, or
# absolute paths. The file defined by policy_file must exist for these
# directories to be searched.  Missing or empty directories are ignored. (multi
# valued)
#policy_dirs = policy.d

# Content Type to send and receive data for REST based policy check (string
# value)
# Possible values:
# application/x-www-form-urlencoded - <No description provided>
# application/json - <No description provided>
#remote_content_type = application/x-www-form-urlencoded

# server identity verification for REST based policy check (boolean value)
#remote_ssl_verify_server_crt = false

# Absolute path to ca cert file for REST based policy check (string value)
#remote_ssl_ca_crt_file = <None>

# Absolute path to client cert for REST based policy check (string value)
#remote_ssl_client_crt_file = <None>

# Absolute path client key file REST based policy check (string value)
#remote_ssl_client_key_file = <None>


[placement]

#
# From placement.conf
#

#
# If True, when limiting allocation candidate results, the results will be
# a random sampling of the full result set. If False, allocation candidates
# are returned in a deterministic but undefined order. That is, all things
# being equal, two requests for allocation candidates will return the same
# results in the same order; but no guarantees are made as to how that order
# is determined.
#  (boolean value)
#randomize_allocation_candidates = false

#
# Early API microversions (<1.8) allowed creating allocations and not specifying
# a project or user identifier for the consumer. In cleaning up the data
# modeling, we no longer allow missing project and user information. If an older
# client makes an allocation, we'll use this in place of the information it
# doesn't provide.
#  (string value)
#incomplete_consumer_project_id = 00000000-0000-0000-0000-000000000000

#
# Early API microversions (<1.8) allowed creating allocations and not specifying
# a project or user identifier for the consumer. In cleaning up the data
# modeling, we no longer allow missing project and user information. If an older
# client makes an allocation, we'll use this in place of the information it
# doesn't provide.
#  (string value)
#incomplete_consumer_user_id = 00000000-0000-0000-0000-000000000000

#
# The number of times to retry, server-side, writing allocations when there is
# a resource provider generation conflict. Raising this value may be useful
# when many concurrent allocations to the same resource provider are expected.
#  (integer value)
#allocation_conflict_retry_count = 10


[placement_database]
#
# The *Placement API Database* is a the database used with the placement
# service. If the connection option is not set, the placement service will
# not start.

#
# From placement.conf
#

# The SQLAlchemy connection string to use to connect to the database. (string
# value)
#connection = <None>

# Optional URL parameters to append onto the connection URL at connect time;
# specify as param1=value1&param2=value2&... (string value)
#connection_parameters =

# If True, SQLite uses synchronous mode. (boolean value)
#sqlite_synchronous = true

# The SQLAlchemy connection string to use to connect to the slave database.
# (string value)
#slave_connection = <None>

# The SQL mode to be used for MySQL sessions. This option, including the
# default, overrides any server-set SQL mode. To use whatever SQL mode is set by
# the server configuration, set this to no value. Example: mysql_sql_mode=
# (string value)
#mysql_sql_mode = TRADITIONAL

# Connections which have been present in the connection pool longer than this
# number of seconds will be replaced with a new one the next time they are
# checked out from the pool. (integer value)
#connection_recycle_time = 3600

# Maximum number of SQL connections to keep open in a pool. Setting a value of 0
# indicates no limit. (integer value)
#max_pool_size = <None>

# Maximum number of database connection retries during startup. Set to -1 to
# specify an infinite retry count. (integer value)
#max_retries = 10

# Interval between retries of opening a SQL connection. (integer value)
#retry_interval = 10

# If set, use this value for max_overflow with SQLAlchemy. (integer value)
#max_overflow = <None>

# Verbosity of SQL debugging information: 0=None, 100=Everything. (integer
# value)
#connection_debug = 0

# Add Python stack traces to SQL as comment strings. (boolean value)
#connection_trace = false

# If set, use this value for pool_timeout with SQLAlchemy. (integer value)
#pool_timeout = <None>

# If True, database schema migrations will be attempted when the web service
# starts. (boolean value)
#sync_on_startup = false


[profiler]

#
# From osprofiler
#

#
# Enable the profiling for all services on this node.
#
# Default value is False (fully disable the profiling feature).
#
# Possible values:
#
# * True: Enables the feature
# * False: Disables the feature. The profiling cannot be started via this
# project
#   operations. If the profiling is triggered by another project, this project
#   part will be empty.
#  (boolean value)
# Deprecated group/name - [profiler]/profiler_enabled
#enabled = false

#
# Enable SQL requests profiling in services.
#
# Default value is False (SQL requests won't be traced).
#
# Possible values:
#
# * True: Enables SQL requests profiling. Each SQL query will be part of the
#   trace and can the be analyzed by how much time was spent for that.
# * False: Disables SQL requests profiling. The spent time is only shown on a
#   higher level of operations. Single SQL queries cannot be analyzed this way.
#  (boolean value)
#trace_sqlalchemy = false

#
# Secret key(s) to use for encrypting context data for performance profiling.
#
# This string value should have the following format: <key1>[,<key2>,...<keyn>],
# where each key is some random string. A user who triggers the profiling via
# the REST API has to set one of these keys in the headers of the REST API call
# to include profiling results of this node for this particular project.
#
# Both "enabled" flag and "hmac_keys" config options should be set to enable
# profiling. Also, to generate correct profiling information across all services
# at least one key needs to be consistent between OpenStack projects. This
# ensures it can be used from client side to generate the trace, containing
# information from all possible resources.
#  (string value)
#hmac_keys = SECRET_KEY

#
# Connection string for a notifier backend.
#
# Default value is ``messaging://`` which sets the notifier to oslo_messaging.
#
# Examples of possible values:
#
# * ``messaging://`` - use oslo_messaging driver for sending spans.
# * ``redis://127.0.0.1:6379`` - use redis driver for sending spans.
# * ``mongodb://127.0.0.1:27017`` - use mongodb driver for sending spans.
# * ``elasticsearch://127.0.0.1:9200`` - use elasticsearch driver for sending
#   spans.
# * ``jaeger://127.0.0.1:6831`` - use jaeger tracing as driver for sending
# spans.
#  (string value)
#connection_string = messaging://

#
# Document type for notification indexing in elasticsearch.
#  (string value)
#es_doc_type = notification

#
# This parameter is a time value parameter (for example: es_scroll_time=2m),
# indicating for how long the nodes that participate in the search will maintain
# relevant resources in order to continue and support it.
#  (string value)
#es_scroll_time = 2m

#
# Elasticsearch splits large requests in batches. This parameter defines
# maximum size of each batch (for example: es_scroll_size=10000).
#  (integer value)
#es_scroll_size = 10000

#
# Redissentinel provides a timeout option on the connections.
# This parameter defines that timeout (for example: socket_timeout=0.1).
#  (floating point value)
#socket_timeout = 0.1

#
# Redissentinel uses a service name to identify a master redis service.
# This parameter defines the name (for example:
# ``sentinal_service_name=mymaster``).
#  (string value)
#sentinel_service_name = mymaster

#
# Enable filter traces that contain error/exception to a separated place.
#
# Default value is set to False.
#
# Possible values:
#
# * True: Enable filter traces that contain error/exception.
# * False: Disable the filter.
#  (boolean value)
#filter_error_trace = false
```

## 策略

Placement, like most OpenStack projects, uses a policy language to restrict permissions on REST API actions.
与大多数 OpenStack 项目一样，放置使用策略语言来限制对 REST API 操作的权限。

### Placement Policies 安置政策

​                                          



 

Warning 警告



JSON formatted policy file is deprecated since Placement 5.0.0 (Wallaby). The [oslopolicy-convert-json-to-yaml](https://docs.openstack.org/oslo.policy/latest/cli/oslopolicy-convert-json-to-yaml.html) tool will migrate your existing JSON-formatted policy file to YAML in a backward-compatible way.
自 Placement 5.0.0 （Wallaby） 起，JSON 格式的策略文件已弃用。oslopolicy-convert-json-to-yaml 工具会以向后兼容的方式将现有的 JSON 格式策略文件迁移到 YAML。

The following is an overview of all available policies in Placement. For a sample configuration file, refer to [Sample Placement Policy File](https://docs.openstack.org/placement/yoga/configuration/sample-policy.html).
以下是 Placement 中所有可用政策的概述。有关示例配置文件，请参阅示例放置策略文件。

#### placement[¶](https://docs.openstack.org/placement/yoga/configuration/policy.html#placement) 放置 ¶

- `admin_api`

  Default 违约 `role:admin` Scope Types 作用域类型 **system 系统**  Default rule for most placement APIs. 大多数展示位置 API 的默认规则。

- `system_admin_api`

  Default 违约 `role:admin and system_scope:all`  Default rule for System Admin APIs. 系统管理 API 的默认规则。

- `system_reader_api`

  Default 违约 `role:reader and system_scope:all`  Default rule for System level read only APIs. 系统级只读 API 的默认规则。

- `project_reader_api`

  Default 违约 `role:reader and project_id:%(project_id)s`  Default rule for Project level read only APIs. 项目级别只读 API 的默认规则。

- `system_or_project_reader`

  Default 违约 `rule:system_reader_api or rule:project_reader_api`  Default rule for System+Project read only APIs. System+Project 只读 API 的默认规则。

- `placement:resource_providers:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_providers` 获取 `/resource_providers`   Scope Types 作用域类型 **system 系统**  List resource providers. 列出资源提供程序。

- `placement:resource_providers:create`

  Default 违约 `rule:system_admin_api` Operations 操作 **POST** `/resource_providers` 发布 `/resource_providers`   Scope Types 作用域类型 **system 系统**  Create resource provider. 创建资源提供程序。

- `placement:resource_providers:show`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_providers/{uuid}` 获取 `/resource_providers/{uuid}`   Scope Types 作用域类型 **system 系统**  Show resource provider. 显示资源提供程序。

- `placement:resource_providers:update`

  Default 违约 `rule:system_admin_api` Operations 操作 **PUT** `/resource_providers/{uuid}` 放 `/resource_providers/{uuid}`   Scope Types 作用域类型 **system 系统**  Update resource provider. 更新资源提供程序。

- `placement:resource_providers:delete`

  Default 违约 `rule:system_admin_api` Operations 操作 **DELETE** `/resource_providers/{uuid}` 删除 `/resource_providers/{uuid}`   Scope Types 作用域类型 **system 系统**  Delete resource provider. 删除资源提供程序。

- `placement:resource_classes:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_classes` 获取 `/resource_classes`   Scope Types 作用域类型 **system 系统**  List resource classes. 列出资源类。

- `placement:resource_classes:create`

  Default 违约 `rule:system_admin_api` Operations 操作 **POST** `/resource_classes` 发布 `/resource_classes`   Scope Types 作用域类型 **system 系统**  Create resource class. 创建资源类。

- `placement:resource_classes:show`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_classes/{name}` 获取 `/resource_classes/{name}`   Scope Types 作用域类型 **system 系统**  Show resource class. 显示资源类。

- `placement:resource_classes:update`

  Default 违约 `rule:system_admin_api` Operations 操作 **PUT** `/resource_classes/{name}` 放 `/resource_classes/{name}`   Scope Types 作用域类型 **system 系统**  Update resource class. 更新资源类。

- `placement:resource_classes:delete`

  Default 违约 `rule:system_admin_api` Operations 操作 **DELETE** `/resource_classes/{name}` 删除 `/resource_classes/{name}`   Scope Types 作用域类型 **system 系统**  Delete resource class. 删除资源类。

- `placement:resource_providers:inventories:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_providers/{uuid}/inventories` 获取 `/resource_providers/{uuid}/inventories`   Scope Types 作用域类型 **system 系统**  List resource provider inventories. 列出资源提供程序清单。

- `placement:resource_providers:inventories:create`

  Default 违约 `rule:system_admin_api` Operations 操作 **POST** `/resource_providers/{uuid}/inventories` 发布 `/resource_providers/{uuid}/inventories`   Scope Types 作用域类型 **system 系统**  Create one resource provider inventory. 创建一个资源提供程序清单。

- `placement:resource_providers:inventories:show`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_providers/{uuid}/inventories/{resource_class}` 获取 `/resource_providers/{uuid}/inventories/{resource_class}`   Scope Types 作用域类型 **system 系统**  Show resource provider inventory. 显示资源提供程序清单。

- `placement:resource_providers:inventories:update`

  Default 违约 `rule:system_admin_api` Operations 操作 **PUT** `/resource_providers/{uuid}/inventories` 放 `/resource_providers/{uuid}/inventories`  **PUT** `/resource_providers/{uuid}/inventories/{resource_class}` 放 `/resource_providers/{uuid}/inventories/{resource_class}`   Scope Types 作用域类型 **system 系统**  Update resource provider inventory. 更新资源提供程序清单。

- `placement:resource_providers:inventories:delete`

  Default 违约 `rule:system_admin_api` Operations 操作 **DELETE** `/resource_providers/{uuid}/inventories` 删除 `/resource_providers/{uuid}/inventories`  **DELETE** `/resource_providers/{uuid}/inventories/{resource_class}` 删除 `/resource_providers/{uuid}/inventories/{resource_class}`   Scope Types 作用域类型 **system 系统**  Delete resource provider inventory. 删除资源提供程序清单。

- `placement:resource_providers:aggregates:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_providers/{uuid}/aggregates` 获取 `/resource_providers/{uuid}/aggregates`   Scope Types 作用域类型 **system 系统**  List resource provider aggregates. 列出资源提供程序聚合。

- `placement:resource_providers:aggregates:update`

  Default 违约 `rule:system_admin_api` Operations 操作 **PUT** `/resource_providers/{uuid}/aggregates` 放 `/resource_providers/{uuid}/aggregates`   Scope Types 作用域类型 **system 系统**  Update resource provider aggregates. 更新资源提供程序聚合。

- `placement:resource_providers:usages`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_providers/{uuid}/usages` 获取 `/resource_providers/{uuid}/usages`   Scope Types 作用域类型 **system 系统**  List resource provider usages. 列出资源提供程序使用情况。

- `placement:usages`

  Default 违约 `rule:system_or_project_reader` Operations 操作 **GET** `/usages` 获取 `/usages`   Scope Types 作用域类型 **system 系统** **project 项目**  List total resource usages for a given project. 列出给定项目的总资源使用情况。

- `placement:traits:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/traits` 获取 `/traits`   Scope Types 作用域类型 **system 系统**  List traits. 列出特征。

- `placement:traits:show`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/traits/{name}` 获取 `/traits/{name}`   Scope Types 作用域类型 **system 系统**  Show trait. 显示特征。

- `placement:traits:update`

  Default 违约 `rule:system_admin_api` Operations 操作 **PUT** `/traits/{name}` 放 `/traits/{name}`   Scope Types 作用域类型 **system 系统**  Update trait. 更新特征。

- `placement:traits:delete`

  Default 违约 `rule:system_admin_api` Operations 操作 **DELETE** `/traits/{name}` 删除 `/traits/{name}`   Scope Types 作用域类型 **system 系统**  Delete trait. 删除特征。

- `placement:resource_providers:traits:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_providers/{uuid}/traits` 获取 `/resource_providers/{uuid}/traits`   Scope Types 作用域类型 **system 系统**  List resource provider traits. 列出资源提供程序特征。

- `placement:resource_providers:traits:update`

  Default 违约 `rule:system_admin_api` Operations 操作 **PUT** `/resource_providers/{uuid}/traits` 放 `/resource_providers/{uuid}/traits`   Scope Types 作用域类型 **system 系统**  Update resource provider traits. 更新资源提供程序特征。

- `placement:resource_providers:traits:delete`

  Default 违约 `rule:system_admin_api` Operations 操作 **DELETE** `/resource_providers/{uuid}/traits` 删除 `/resource_providers/{uuid}/traits`   Scope Types 作用域类型 **system 系统**  Delete resource provider traits. 删除资源提供程序特征。

- `placement:allocations:manage`

  Default 违约 `rule:system_admin_api` Operations 操作 **POST** `/allocations` 发布 `/allocations`   Scope Types 作用域类型 **system 系统**  Manage allocations. 管理分配。

- `placement:allocations:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/allocations/{consumer_uuid}` 获取 `/allocations/{consumer_uuid}`   Scope Types 作用域类型 **system 系统**  List allocations. 列出分配。

- `placement:allocations:update`

  Default 违约 `rule:system_admin_api` Operations 操作 **PUT** `/allocations/{consumer_uuid}` 放 `/allocations/{consumer_uuid}`   Scope Types 作用域类型 **system 系统**  Update allocations. 更新分配。

- `placement:allocations:delete`

  Default 违约 `rule:system_admin_api` Operations 操作 **DELETE** `/allocations/{consumer_uuid}` 删除 `/allocations/{consumer_uuid}`   Scope Types 作用域类型 **system 系统**  Delete allocations. 删除分配。

- `placement:resource_providers:allocations:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/resource_providers/{uuid}/allocations` 获取 `/resource_providers/{uuid}/allocations`   Scope Types 作用域类型 **system 系统**  List resource provider allocations. 列出资源提供程序分配。

- `placement:allocation_candidates:list`

  Default 违约 `rule:system_reader_api` Operations 操作 **GET** `/allocation_candidates` 获取 `/allocation_candidates`   Scope Types 作用域类型 **system 系统**  List allocation candidates. 列出分配候选项。

- `placement:reshaper:reshape`

  Default 违约 `rule:system_admin_api` Operations 操作 **POST** `/reshaper` 发布 `/reshaper`   Scope Types 作用域类型 **system 系统**  Reshape Inventory and Allocations. 重塑库存和分配。

### 放置策略文件示例

​                                          



 

Warning 警告



JSON formatted policy file is deprecated since Placement 5.0.0 (Wallaby). The [oslopolicy-convert-json-to-yaml](https://docs.openstack.org/oslo.policy/latest/cli/oslopolicy-convert-json-to-yaml.html) tool will migrate your existing JSON-formatted policy file to YAML in a backward-compatible way.
自 Placement 5.0.0 （Wallaby） 起，JSON 格式的策略文件已弃用。oslopolicy-convert-json-to-yaml 工具会以向后兼容的方式将现有的 JSON 格式策略文件迁移到 YAML。

The following is a sample placement policy file for adaptation and use.
下面是一个用于适配和使用的放置策略文件示例。

The sample policy can also be viewed in [`file form`](https://docs.openstack.org/placement/yoga/_downloads/8229b37b036c631f6ea019171d85ea1c/placement.policy.yaml.sample).
还可以在 中 `file form` 查看示例策略。



 

Important 重要



The sample policy file is auto-generated from placement when this documentation is built. You must ensure your version of placement matches the version of this documentation.
在构建此文档时，示例策略文件将从放置中自动生成。您必须确保您的展示位置版本与本文档的版本一致。

```
# DEPRECATED
# "admin_api" has been deprecated since W.
# Placement API policies are introducing new default roles with
# scope_type capabilities. Old policies are deprecated and silently
# going to be ignored in the placement 6.0.0 (Xena) release.
# Default rule for most placement APIs.
# Intended scope(s): system
#"admin_api": "role:admin"

# Default rule for System Admin APIs.
#"system_admin_api": "role:admin and system_scope:all"

# DEPRECATED
# "rule:admin_api":"role:admin" has been deprecated since W in favor
# of "system_admin_api":"role:admin and system_scope:all".
# Placement API policies are introducing new default roles with
# scope_type capabilities. Old policies are deprecated and silently
# going to be ignored in the placement 6.0.0 (Xena) release.
"rule:admin_api": "rule:system_admin_api"

# Default rule for System level read only APIs.
#"system_reader_api": "role:reader and system_scope:all"

# DEPRECATED
# "rule:admin_api":"role:admin" has been deprecated since W in favor
# of "system_reader_api":"role:reader and system_scope:all".
# Placement API policies are introducing new default roles with
# scope_type capabilities. Old policies are deprecated and silently
# going to be ignored in the placement 6.0.0 (Xena) release.
"rule:admin_api": "rule:system_reader_api"

# Default rule for Project level read only APIs.
#"project_reader_api": "role:reader and project_id:%(project_id)s"

# DEPRECATED
# "rule:admin_api":"role:admin" has been deprecated since W in favor
# of "project_reader_api":"role:reader and project_id:%(project_id)s".
# Placement API policies are introducing new default roles with
# scope_type capabilities. Old policies are deprecated and silently
# going to be ignored in the placement 6.0.0 (Xena) release.
"rule:admin_api": "rule:project_reader_api"

# Default rule for System+Project read only APIs.
#"system_or_project_reader": "rule:system_reader_api or rule:project_reader_api"

# DEPRECATED
# "rule:admin_api":"role:admin" has been deprecated since W in favor
# of "system_or_project_reader":"rule:system_reader_api or
# rule:project_reader_api".
# Placement API policies are introducing new default roles with
# scope_type capabilities. Old policies are deprecated and silently
# going to be ignored in the placement 6.0.0 (Xena) release.
"rule:admin_api": "rule:system_or_project_reader"

# List resource providers.
# GET  /resource_providers
# Intended scope(s): system
#"placement:resource_providers:list": "rule:system_reader_api"

# Create resource provider.
# POST  /resource_providers
# Intended scope(s): system
#"placement:resource_providers:create": "rule:system_admin_api"

# Show resource provider.
# GET  /resource_providers/{uuid}
# Intended scope(s): system
#"placement:resource_providers:show": "rule:system_reader_api"

# Update resource provider.
# PUT  /resource_providers/{uuid}
# Intended scope(s): system
#"placement:resource_providers:update": "rule:system_admin_api"

# Delete resource provider.
# DELETE  /resource_providers/{uuid}
# Intended scope(s): system
#"placement:resource_providers:delete": "rule:system_admin_api"

# List resource classes.
# GET  /resource_classes
# Intended scope(s): system
#"placement:resource_classes:list": "rule:system_reader_api"

# Create resource class.
# POST  /resource_classes
# Intended scope(s): system
#"placement:resource_classes:create": "rule:system_admin_api"

# Show resource class.
# GET  /resource_classes/{name}
# Intended scope(s): system
#"placement:resource_classes:show": "rule:system_reader_api"

# Update resource class.
# PUT  /resource_classes/{name}
# Intended scope(s): system
#"placement:resource_classes:update": "rule:system_admin_api"

# Delete resource class.
# DELETE  /resource_classes/{name}
# Intended scope(s): system
#"placement:resource_classes:delete": "rule:system_admin_api"

# List resource provider inventories.
# GET  /resource_providers/{uuid}/inventories
# Intended scope(s): system
#"placement:resource_providers:inventories:list": "rule:system_reader_api"

# Create one resource provider inventory.
# POST  /resource_providers/{uuid}/inventories
# Intended scope(s): system
#"placement:resource_providers:inventories:create": "rule:system_admin_api"

# Show resource provider inventory.
# GET  /resource_providers/{uuid}/inventories/{resource_class}
# Intended scope(s): system
#"placement:resource_providers:inventories:show": "rule:system_reader_api"

# Update resource provider inventory.
# PUT  /resource_providers/{uuid}/inventories
# PUT  /resource_providers/{uuid}/inventories/{resource_class}
# Intended scope(s): system
#"placement:resource_providers:inventories:update": "rule:system_admin_api"

# Delete resource provider inventory.
# DELETE  /resource_providers/{uuid}/inventories
# DELETE  /resource_providers/{uuid}/inventories/{resource_class}
# Intended scope(s): system
#"placement:resource_providers:inventories:delete": "rule:system_admin_api"

# List resource provider aggregates.
# GET  /resource_providers/{uuid}/aggregates
# Intended scope(s): system
#"placement:resource_providers:aggregates:list": "rule:system_reader_api"

# Update resource provider aggregates.
# PUT  /resource_providers/{uuid}/aggregates
# Intended scope(s): system
#"placement:resource_providers:aggregates:update": "rule:system_admin_api"

# List resource provider usages.
# GET  /resource_providers/{uuid}/usages
# Intended scope(s): system
#"placement:resource_providers:usages": "rule:system_reader_api"

# List total resource usages for a given project.
# GET  /usages
# Intended scope(s): system, project
#"placement:usages": "rule:system_or_project_reader"

# List traits.
# GET  /traits
# Intended scope(s): system
#"placement:traits:list": "rule:system_reader_api"

# Show trait.
# GET  /traits/{name}
# Intended scope(s): system
#"placement:traits:show": "rule:system_reader_api"

# Update trait.
# PUT  /traits/{name}
# Intended scope(s): system
#"placement:traits:update": "rule:system_admin_api"

# Delete trait.
# DELETE  /traits/{name}
# Intended scope(s): system
#"placement:traits:delete": "rule:system_admin_api"

# List resource provider traits.
# GET  /resource_providers/{uuid}/traits
# Intended scope(s): system
#"placement:resource_providers:traits:list": "rule:system_reader_api"

# Update resource provider traits.
# PUT  /resource_providers/{uuid}/traits
# Intended scope(s): system
#"placement:resource_providers:traits:update": "rule:system_admin_api"

# Delete resource provider traits.
# DELETE  /resource_providers/{uuid}/traits
# Intended scope(s): system
#"placement:resource_providers:traits:delete": "rule:system_admin_api"

# Manage allocations.
# POST  /allocations
# Intended scope(s): system
#"placement:allocations:manage": "rule:system_admin_api"

# List allocations.
# GET  /allocations/{consumer_uuid}
# Intended scope(s): system
#"placement:allocations:list": "rule:system_reader_api"

# Update allocations.
# PUT  /allocations/{consumer_uuid}
# Intended scope(s): system
#"placement:allocations:update": "rule:system_admin_api"

# Delete allocations.
# DELETE  /allocations/{consumer_uuid}
# Intended scope(s): system
#"placement:allocations:delete": "rule:system_admin_api"

# List resource provider allocations.
# GET  /resource_providers/{uuid}/allocations
# Intended scope(s): system
#"placement:resource_providers:allocations:list": "rule:system_reader_api"

# List allocation candidates.
# GET  /allocation_candidates
# Intended scope(s): system
#"placement:allocation_candidates:list": "rule:system_reader_api"

# Reshape Inventory and Allocations.
# POST  /reshaper
# Intended scope(s): system
#"placement:reshaper:reshape": "rule:system_admin_api"
```