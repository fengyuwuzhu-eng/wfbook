# ClamAV 软件包

许多 Linux 和 Unix 发行版都提供一个或多个 ClamAV 软件包，以便轻松安装 ClamAV。

这些软件包通常维护得很好，但如果您发现其中一个软件包有问题，请考虑帮助维护这些软件包的志愿者。

> *免责声明* ：ClamAV 软件包可能与上游版本略有不同。一些例子：
>
> - 数据库和应用程序配置路径可能会有所不同：
>   - 默认的源码安装将位于 `/usr/local` 中，其中包含：
>     - `/usr/local/bin` 中的应用程序
>     - `/usr/local/sbin` 中的守护进程
>     - `/usr/local/lib` 中的库
>     - `/usr/local/include` 中的标头
>     - `/usr/local/etc/` 中的配置
>     - `/usr/local/share/clamav/` 中的数据库
>   - Linux 软件包安装可能会放在 `/usr` 中，其中包含：
>     - `/usr/bin` 中的应用程序
>     - `/usr/sbin` 中的守护进程
>     - `/usr/lib` 中的库
>     - `/usr/include` 中的标头
>     - `/etc/clamav` 中的配置
>     - `/var/lib/clamav` 中的数据库
> - As of 0.103.x, a from-source install requires the user create a config for FreshClam, ClamD, and ClamAV-Milter in order to use each application. A package install, however, is likely to come pre-configured. Users may  wish to modify the configs as needed.
>   从 0.103.x 开始，源安装需要用户为 FreshClam、ClamD 和 ClamAV-Milter 创建配置才能使用每个应用程序。但是，包安装很可能是预先配置的。用户可能希望根据需要修改配置。
> - Package installs sometimes carry extra patches for issues affecting their  distribution, for issues the ClamAV developers haven't had time to fix  or are unaware of, and for security issues when distributing older  versions that are no longer maintained by the ClamAV developers.
>   包安装有时会带有额外的补丁，以解决影响其分发的问题、ClamAV 开发人员没有时间修复或不知道的问题，以及分发不再由 ClamAV 开发人员维护的旧版本时的安全问题。
> - Some distributions parcel up ClamAV components into separate packages. You  don't necessarily need all of the packages. If this applies to your  package system, you may need to review the applications described in the [scanning instructions](https://docs.clamav.net/manual/Usage/Scanning.html) to understand which features you will need.
>   一些发行版将 ClamAV 组件打包到单独的包中。您不一定需要所有软件包。如果这适用于您的软件包系统，您可能需要查看[扫描说明](https://docs.clamav.net/manual/Usage/Scanning.html)中描述的应用程序，以了解您需要哪些功能。

## Debian

Debian 将 ClamAV 拆分为一系列不同的软件包。

实际上，可能只需要 `apt install clamav` 和 `apt install clamav-daemon` 。如果需要支持扫描压缩的 RAR 文件，首先需要启用 “non-free” 存档。

完整的软件包列表包括：

- `clamav` - 命令行界面
- `clamav-base` - 基础包
- `clamav-daemon` - 扫描程序守护程序
- `clamav-docs` - 文档
- `clamav-freshclam` - 病毒库更新实用程序
- `clamav-milter` - sendmail 集成
- `clamdscan` - 类似于 `clamscan` 的 `clamd` 命令行客户端
- `clamav-testfiles` - 测试文件
- `libclamav-dev` - 开发文件
- `libclamav9` - 库
- `libclamunrar9` - unrar 支持

> RAR 支持：
> 
>ClamAV 的 RAR 支持来自 UnRAR，它是开源的，但并非完全免费，因为它的许可证限制用户对其进行逆向工程以创建 RAR 档案。因此，它被单独捆绑在 “non-free” 档案库中。通过在 `/etc/apt/sources.list` 中添加 “non-free” 来启用它。例如：
> 
> ```ini
> deb http://http.us.debian.org/debian stable main contrib non-free
>```
> 
> 然后可以使用以下命令安装 RAR 插件：`apt install libclamunrar9`

还有各种其他与 ClamAV 相关的项目。运行 `apt search clamav` 以查看更大的列表。

要测试安装，您可以尝试扫描 `clamav-testfiles` 软件包中的测试文件。

> *注意* ：Debian 软件包由 [Debian 的 ClamAV 团队](https://salsa.debian.org/clamav-team)维护。
> 
>软件包维护者可以在 [lists.alioth.debian.org 的 clamav-devel](mailto:pkg-clamav-devel@lists.alioth.debian.org) 上联系。更多信息请访问 [tracker.debian.org/pkg/clamav](https://tracker.debian.org/pkg/clamav).
> 
> 补丁：https://salsa.debian.org/clamav-team/clamav/tree/unstable/debian/patches

## Ubuntu

Ubuntu 的 ClamAV 包源自 Debian 包（见上文）。有关安装详情，请参阅 Debian 说明。

> *RAR Support*: As with Debian, RAR support is not included in the base package. Users that desire RAR support will have to install `libclamunrar9` separately. Unlike with Debian, there is no need to enable "non-free" packages for this to work.
> *RAR 支持* ：与 Debian 一样，RAR 支持不包含在基础包中。需要 RAR 支持的用户必须单独安装 `libclamunrar9`。与 Debian 不同，不需要启用 “non-free” 软件包即可工作。
>
> **注意：**
>
> Ubuntu 软件包由 [Ubuntu 开发人员](https://wiki.ubuntu.com/UbuntuDevelopers)管理。软件包来源： https://packages.ubuntu.com/source/clamav

## openSUSE

openSUSE 提供两个软件包：

- `clamav` - clamav 包
- `clamav-devel` - clamav 包加上用于软件开发的头文件。

### RPM download

在 http://download.opensuse.org/repositories/security 下找到这些软件包，例如：

- http://download.opensuse.org/repositories/security/openSUSE_Leap_15.3/x86_64/clamav-0.103.1-lp153.234.4.x86_64.rpm.mirrorlist
- http://download.opensuse.org/repositories/security/openSUSE_Leap_15.3/x86_64/clamav-devel-0.103.1-lp153.234.4.x86_64.rpm.mirrorlist

Use the update variant for openSUSE, add it to your installation as another repository using YaST or zypper and give it a higher priority (lower  number) than the repository that delivers the official updates.
使用 openSUSE 的更新变体，使用 YaST 或 zypper 将其作为另一个储存库添加到您的安装中，并为其指定比提供官方更新的储存库更高的优先级（较低的数字）。

> *Tip*: RPMs of new ClamAV versions for existing SUSE products are provided  through the respective online update channels. As these packages have to go through QA, it usually takes some time for a new ClamAV source  release to appear as an official RPM. For those who want the newest  version, packages are available from [the security project in the openSUSE Build Service](https://build.opensuse.org/package/show/security/clamav).
> *提示* ：现有 SUSE 产品的新 ClamAV 版本的 RPM 通过相应的在线更新渠道提供。由于这些组件必须经过 QA，因此新的 ClamAV 源代码版本通常需要一些时间才能显示为正式的 RPM。对于想要最新版本的用户，可以从 [openSUSE Build Service 中的安全项目](https://build.opensuse.org/package/show/security/clamav)获得软件包。

### Zypper

使用 `zypper` 安装 ClamAV：

```bash
zypper install -y clamav
```

> *Note*: openSUSE packages are maintained by Reinhard Max.
> *注意* ：openSUSE 软件包由 Reinhard Max 维护。

## EPEL: AlmaLinux, RHEL, and Fedora

EPEL 为 Fedora（以及支持 EPEL 的 AlmaLinux）创建 ClamAV 包。有关 EPEL 的更多信息，[ 请访问他们的 wiki](https://fedoraproject.org/wiki/EPEL)。

若要为 AlmaLinux 和 RHEL 启用 EPEL，请执行以下作：

```bash
dnf install -y epel-release
```

EPEL 提供了一系列组件来安装 ClamAV：

- `clamd` - Clam AntiVirus 守护程序
- `clamav` - Clam Antivirus 扫描程序的最终用户工具
- `clamav-data` - Clam 防病毒扫描程序的病毒签名数据
- `clamav-devel` - Clam 防病毒扫描程序的头文件和库
- `clamav-lib` - Clam 防病毒扫描程序的动态库
- `clamav-milter` - Clam 防病毒扫描程序的 Milter 模块
- `clamav-update` - Clam Antivirus 扫描程序数据文件的自动更新程序

大多数用户只需要运行：

```bash
dnf install -y clamav clamd clamav-update
```

> ***Tips 技巧\***
>
> *AlmaLinux*: The ClamAV package requires the Extra Packages for Enterprise Linux (EPEL) repository.
> *AlmaLinux*：ClamAV 软件包需要 Extra Packages for Enterprise Linux （EPEL） 存储库。
>
> *RHEL*: On RedHat Enterprise Linux (RHEL) the EPEL release package has to be installed either manually or through RHN.
> *RHEL*：在 RedHat Enterprise Linux （RHEL） 上，EPEL 发行套件必须手动或通过 RHN 安装。
>
> *Fedora*: Fedora packages can be found at https://src.fedoraproject.org/rpms/clamav
> *Fedora*：Fedora 软件包可以在 https://src.fedoraproject.org/rpms/clamav 中找到
>
> Fedora's packaging is more customized than most. Please review the RPM notes  when troubleshooting your Fedora package configuration.
> Fedora 的打包比大多数打包都更加定制化。在对 Fedora 软件包配置进行故障排除时，请查看 RPM 说明。

## Gentoo

ClamAV 可在 portage 下 `/usr/portage/app-antivirus/clamav` 找到

要安装，请运行：

```bash
emerge clamav
```

## FreeBSD, OpenBSD, NetBSD

Although all these systems offer the possibility to use ports or pkgsrc, you can install the pre-built package:
尽管所有这些系统都提供了使用 ports 或 pkgsrc 的可能性，但您可以安装预构建的软件包：

### FreeBSD

FreeBSD 提供两个 ClamAV 端口（软件包）：

- `clamav`
- `clamav-lts`

要安装，请运行：

```bash
pkg install clamav
pkg install clamav-lts
```

> *注* ： 有关更多详细信息，请参阅：
> 
>- https://www.freshports.org/security/clamav
> - https://www.freshports.org/security/clamav-lts

### OpenBSD

To install, run: 要安装，请运行：

```bash
pkg_add clamav
```

### NetBSD

要安装，请运行：

```bash
pkgin install clamav
```

## Solaris

OpenCSW is a community software project for Solaris 8+ on both Sparc and x86.  It packages more than 2000 popular open source titles and they can all  easily be installed with dependency handling via *pkgutil* which is modeled after Debian's *apt-get*.
OpenCSW 是 Sparc 和 x86 上 Solaris 8+ 的社区软件项目。它打包了 2000 多个流行的开源游戏，它们都可以通过 *pkgutil* 轻松安装，并通过依赖处理（以 Debian 的 *apt-get* 为模型）。

```bash
pkgutil -i clamav
```

> *Note*: The package can be found on [OpenCSW](https://www.opencsw.org/packages/clamav/) though it is unfortuantely quite out-of-date.
> *注意* ：该软件包可以在 [OpenCSW](https://www.opencsw.org/packages/clamav/) 上找到，但遗憾的是它已经过时了。

> *Disclaimer*: ClamAV is also no longer supported on Solaris because Solaris is  proprietary, less commonly used, and difficult to work with. Future  versions of ClamAV will depend on components written in the Rust  programming language, which also does not support building directly on  Solaris. It is likely that ClamAV will no longer work on Solaris in the  future.
> *免责声明* ：Solaris 也不再支持 ClamAV，因为 Solaris 是专有的，不太常用且难以使用。ClamAV 的未来版本将依赖于用 Rust  编程语言编写的组件，该语言也不支持直接在 Solaris 上构建。ClamAV 将来很可能不再在 Solaris 上运行。

## Slackware

You can download ClamAV builds for Slackware from https://slackbuilds.org/repository/14.2/system/clamav/
您可以从 https://slackbuilds.org/repository/14.2/system/clamav/ 下载适用于 Slackware 的 ClamAV 版本

Download the package, and as root, install it like so (substituting the appropriate filename):
下载包，并以 root 身份按如下方式安装它（替换适当的文件名）：

```bash
installpkg clamav.tar.gz
```

## macOS

ClamAV can be easily installed on macOS using one of these popular package managers:
可以使用以行的包管理器之一轻松安装在 macOS 上：

- [Homebrew](https://brew.sh): [ClamAV formula](https://formulae.brew.sh/formula/clamav)
- [MacPorts](https://www.macports.org/install.php): [ClamAV port](https://ports.macports.org/port/clamav/summary)

### Homebrew

如果您还没有 Homebrew，请安装 [Homebrew](https://brew.sh)。然后运行：

```bash
brew install clamav
```

Homebrew installs versioned packages to `/usr/local/Cellar/<pacakge>/<version>` with symlinks in `/usr/local/opt/<pacakge>` to the current version. Symlinks for ClamAV's executables will be placed in `/usr/local/bin` to add them to your PATH. ClamAV's config files will be placed in `/usr/local/etc/clamav`.
Homebrew 使用 `/usr/local/opt/<pacakge>` 中的符号链接将受版本控制的软件包 `/usr/local/Cellar/<pacakge>/<version>` 安装到当前版本。ClamAV 的可执行文件的符号链接将放在 `/usr/local/bin` 以将它们添加到您的 PATH 中。ClamAV 的配置文件会被放在 `/usr/local/etc/clamav` 目录。

As with most other installation methods, you may need to do the following at a minimum before you can run `freshclam`, `clamscan`, or use `clamdscan` with `clamd`:
与大多数其他安装方法一样，在运行 `freshclam`、`clamscan` 或将 `clamdscan` 与 `clamd` 一起使用之前，您可能至少需要执行以下作：

1. Create `/usr/local/etc/clamav/freshclam.conf` from `/usr/local/etc/clamav/freshclam.conf.sample`.
   从 `/usr/local/etc/clamav/freshclam.conf.sample` 中创建 `/usr/local/etc/clamav/freshclam.conf` 。
2. Remove or comment-out the `Example` line from `freshclam.conf`
   从 `freshclam.conf` 中删除或注释掉 `Example` 行
3. Run `freshclam` to download the latest malware definitions.
   运行 `freshclam` 以下载最新的恶意软件定义。

If you wish to run `clamd` you'll also need to create `/usr/local/etc/clamav/clamd.conf` from `/usr/local/etc/clamav/clamd.conf.sample`, and configure `clamd.conf` with Local/Unix socket settings (preferred), or TCP socket settings.
如果你想运行 `clamd`，你还需要从 创建 `/usr/local/etc/clamav/clamd.conf` `/usr/local/etc/clamav/clamd.conf.sample` ，并使用本地/Unix 套接字设置（首选）或 TCP 套接字设置来配置 `clamd.conf`。

### MacPorts

如果还没有 MacPorts，请安装 [MacPorts](https://www.macports.org/install.php)。然后运行：

```bash
sudo port install clamav
```

MacPorts installs versioned packages to `/opt/local/`. ClamAV's config files will be placed in `/opt/local/etc`.
MacPorts 将受版本控制的软件包安装到 `/opt/local/`。ClamAV 的配置文件会被放在 `/opt/local/etc` 目录下。

As with most other installation methods, you may need to do the following at a minimum before you can run `freshclam`, `clamscan`, or use `clamdscan` with `clamd`:
与大多数其他安装方法一样，在运行 `freshclam`、`clamscan` 或将 `clamdscan` 与 `clamd` 一起使用之前，您可能至少需要执行以下作：

1. Create `/opt/local/etc/freshclam.conf` from `/opt/local/etc/freshclam.conf.sample`.
   从 `/opt/local/etc/freshclam.conf.sample` ` 创建 /opt/local/etc/freshclam.conf` 。
2. Remove or comment-out the `Example` line from `freshclam.conf`
   从 `freshclam.conf` 中删除或注释掉 `Example` 行
3. Run `freshclam` to download the latest malware definitions.
   运行 `freshclam` 以下载最新的恶意软件定义。

If you wish to run `clamd` you'll also need to create `/opt/local/etc/clamd.conf` from `/opt/local/etc/clamd.conf.sample`, and configure `clamd.conf` with Local/Unix socket settings (preferred), or TCP socket settings.
如果你想执行 `clamd`，你还需要从 `/opt/local/etc/clamd.conf.sample` ` 创建 /opt/local/etc/clamd.conf`，并使用本地/Unix 套接字设置（首选）或 TCP 套接字设置来设置 `clamd.conf`。